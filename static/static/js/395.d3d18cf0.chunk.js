"use strict";(self.webpackChunkatlas=self.webpackChunkatlas||[]).push([[395],{1395:function(e,s,t){t.r(s),t.d(s,{Opera:function(){return K}});var n=t(5671),r=t(3144),a=t(136),i=t(8505),c=t(7762),l=t(1413),d=t(5861),o=t(885),u=t(7757),x=t.n(u),h=t(5987),m=t(2791),j=t(1694),p=t.n(j),f=t(162),v=t(2677),g=["animation","bg","bsPrefix","size"],_=["className"];function N(e){var s=e.animation,t=e.bg,n=e.bsPrefix,r=e.size,a=(0,h.Z)(e,g);n=(0,f.vE)(n,"placeholder");var i=(0,v.r)(a),c=(0,o.Z)(i,1)[0],d=c.className,u=(0,h.Z)(c,_);return(0,l.Z)((0,l.Z)({},u),{},{className:p()(d,s?"".concat(n,"-").concat(s):n,r&&"".concat(n,"-").concat(r),t&&"bg-".concat(t))})}var k=t(3360),w=t(184),y=m.forwardRef((function(e,s){var t=N(e);return(0,w.jsx)(k.Z,(0,l.Z)((0,l.Z)({},t),{},{ref:s,disabled:!0,tabIndex:-1}))}));y.displayName="PlaceholderButton";var b=y,Z=["as"],S=m.forwardRef((function(e,s){var t=e.as,n=void 0===t?"span":t,r=N((0,h.Z)(e,Z));return(0,w.jsx)(n,(0,l.Z)((0,l.Z)({},r),{},{ref:s}))}));S.displayName="Placeholder";var C=Object.assign(S,{Button:b}),I=t(4775),L=t(8949),A=t(7022),Q=t(9743),H=t(4817),T=t(3350),B=t(5353),q=t(3174),z=t(4483),R=t(6407),M=t(3222);function D(e){var s=(0,m.useState)(null),t=(0,o.Z)(s,2),n=t[0],r=t[1],a=(0,m.useState)(null),i=(0,o.Z)(a,2),u=i[0],h=i[1],j=(0,m.useState)(null),p=(0,o.Z)(j,2),f=p[0],g=p[1],_=(0,m.useState)(null),N=(0,o.Z)(_,2),y=N[0],b=N[1],Z=(0,m.useState)(null),S=(0,o.Z)(Z,2),C=S[0],H=S[1],T=(0,m.useState)(null),B=(0,o.Z)(T,2),q=B[0],z=B[1],D=(0,m.useState)(null),W=(0,o.Z)(D,2),E=W[0],G=W[1],K=(0,m.useState)(null),O=(0,o.Z)(K,2),P=O[0],F=O[1],U=(0,m.useState)(null),J=(0,o.Z)(U,2),V=(J[0],J[1]),Y=(0,m.useState)(null),X=(0,o.Z)(Y,2),$=(X[0],X[1]),ee=(0,m.useState)(null),se=(0,o.Z)(ee,2),te=(se[0],se[1]);(0,m.useEffect)((function(){var s=function(){var s=(0,d.Z)(x().mark((function s(){var t,n;return x().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,R.Q.auctores.get({id:e.item.auctor_id});case 2:return t=s.sent,r(t[0]),s.next=6,R.Q.auctores.search([{c:"sort_nr",o:"=",v:t[0].sort_nr-1}],{select:["id","auctor"]});case 6:(n=s.sent).length>0?(z(n[0].auctor),G(n[0].id),F(n[0].id)):(z(null),G(null),F(null));case 8:case"end":return s.stop()}}),s)})));return function(){return s.apply(this,arguments)}}(),t=function(){var s=(0,d.Z)(x().mark((function s(){var t,n;return x().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,R.Q.opera.get({id:e.item.opus_id});case 2:return t=s.sent,h(t[0]),s.next=6,R.Q.opera.search([{c:"sort_nr",o:"=",v:t[0].sort_nr-1}],{select:["id","opus"]});case 6:(n=s.sent).length>0?(V(n[0].opus),$(n[0].id),te(n[0].id)):(V(null),$(null),te(null));case 8:case"end":return s.stop()}}),s)})));return function(){return s.apply(this,arguments)}}(),n=function(){var e=(0,d.Z)(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e.item.auctor_id&&e.item.auctor?s():r(null),e.item.opus_id&&e.item.opus?t():h(null),e.item.locus_id?n():g(null)}),[e.item]);var ne=function(e,s,t){if("a"===e){var a=(0,l.Z)({},n);a[s]=""!==t?t:null,r(a)}};return(0,w.jsxs)(I.Z,{show:!0,placement:"end",scroll:!0,backdrop:!1,onHide:function(){e.onClose()},children:[(0,w.jsx)(I.Z.Header,{closeButton:!0,children:(0,w.jsx)(I.Z.Title,{})}),(0,w.jsx)(I.Z.Body,{children:(0,w.jsxs)(L.Z,{defaultActiveKey:"0",children:[n&&(0,w.jsxs)(L.Z.Item,{eventKey:"0",children:[(0,w.jsxs)(L.Z.Header,{children:["auctor ",(0,w.jsxs)("span",{style:{marginLeft:"10px",fontSize:"75%"},children:["(ID: ",n.id,")"]})]}),(0,w.jsx)(L.Z.Body,{children:(0,w.jsxs)(A.Z,{children:[(0,w.jsxs)(Q.Z,{className:"mb-2",children:[(0,w.jsx)(v.Z,{children:"Name:"}),(0,w.jsx)(v.Z,{children:(0,w.jsx)("input",{type:"text",value:n.auctor?n.auctor:"",onChange:function(e){ne("a","auctor",e.target.value)}})})]}),(0,w.jsxs)(Q.Z,{className:"mb-2",children:[(0,w.jsx)(v.Z,{children:"Ordungs-zahl:"}),(0,w.jsx)(v.Z,{children:(0,w.jsx)("input",{type:"text",value:n.ord?n.ord:"",onChange:function(e){ne("a","ord",e.target.value)}})})]}),(0,w.jsxs)(Q.Z,{className:"mb-2",children:[(0,w.jsxs)(v.Z,{children:["Sortierung: ",(0,w.jsx)("small",{children:"unterhalb von..."})]}),(0,w.jsx)(v.Z,{children:(0,w.jsx)(M.Qc,{style:{position:"relative"},onChange:function(e,s){z(e),G(s)},value:q||"",tbl:"auctores",searchCol:"auctor",returnCol:"auctor"})})]}),(0,w.jsxs)(Q.Z,{className:"mb-2",children:[(0,w.jsx)(v.Z,{children:"Datierung:"}),(0,w.jsx)(v.Z,{children:(0,w.jsx)("input",{type:"text",value:n.date_display?n.date_display:"",onChange:function(e){ne("a","date_display",e.target.value)}})})]}),(0,w.jsxs)(Q.Z,{className:"mb-2",children:[(0,w.jsxs)(v.Z,{children:[(0,w.jsx)("i",{children:"explicatio"}),":"]}),(0,w.jsx)(v.Z,{children:(0,w.jsx)("input",{type:"text",value:n.explicatio?n.explicatio:"",onChange:function(e){ne("a","explicatio",e.target.value)}})})]}),(0,w.jsxs)(Q.Z,{className:"mb-2",children:[(0,w.jsxs)(v.Z,{children:[(0,w.jsx)("i",{children:"editiones"}),":"]}),(0,w.jsx)(v.Z,{children:(0,w.jsx)("input",{type:"text",value:n.editiones?n.editiones:"",onChange:function(e){ne("a","editiones",e.target.value)}})})]}),(0,w.jsxs)(Q.Z,{className:"mb-2",children:[(0,w.jsx)(v.Z,{children:"In Benutzung:"}),(0,w.jsx)(v.Z,{children:(0,w.jsx)(M.SA,{style:{width:"230px"},options:[["","Nein"],[1,"Ja"]],value:n.in_use?n.in_use:"",onChange:function(e){ne("a","in_use",e.target.value)}})})]}),(0,w.jsxs)(Q.Z,{className:"mb-2",children:[(0,w.jsx)(v.Z,{children:"Referenz-Text:"}),(0,w.jsx)(v.Z,{children:(0,w.jsx)("input",{type:"text",value:n.ref_text?n.ref_text:"",onChange:function(e){""===e.target.value?function(e,s){if("a"===e){var t=(0,l.Z)({},n);s.forEach((function(e){t[e[0]]=""!==e[1]?e[1]:null})),r(t)}}("a",[["ref_id",null],["ref_type",null],["ref_text",e.target.value]]):ne("a","ref_text",e.target.value)}})})]}),n.ref_text&&(0,w.jsxs)(Q.Z,{className:"mb-2",children:[(0,w.jsx)(v.Z,{children:"Referenz-Typ:"}),(0,w.jsx)(v.Z,{children:(0,w.jsx)(M.SA,{style:{width:"230px"},options:[["",""],[1,"auctor"],[2,"opus"],[3,"locus"]],value:n.ref_type?n.ref_type:"",onChange:function(e){ne("a","ref_type",e.target.value),"1"===e.target.value?b(["auctores","auctor"]):"2"===e.target.value?b(["opera_ac","ac_web"]):"3"===e.target.value?b(["loci_ac","ac_web"]):b(null)}})})]}),n.ref_text&&y&&(0,w.jsxs)(Q.Z,{children:[(0,w.jsx)(v.Z,{children:"Referenz:"}),(0,w.jsx)(v.Z,{children:(0,w.jsx)(M.Qc,{style:{position:"relative"},onChange:function(e,s){H(e),ne("a","ref_id",s)},value:C||"",tbl:y[0],searchCol:y[1],returnCol:y[1]})})]}),(0,w.jsxs)(Q.Z,{className:"mt-4",children:[(0,w.jsx)(v.Z,{children:(0,w.jsx)(M.YG,{onClick:(0,d.Z)(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n),e.next=3,R.Q.auctores.save((0,l.Z)({},n));case 3:if(P===E||null===E){e.next=6;break}return e.next=6,R.Q.exec("SortIndex",!1,["auctores",n.id,E]);case 6:return e.abrupt("return",{status:1});case 7:case"end":return e.stop()}}),e)}))),value:"speichern"})}),(0,w.jsx)(v.Z,{children:(0,w.jsx)(k.Z,{variant:"danger",onClick:(0,d.Z)(x().mark((function s(){var t,r,a,i,l,d;return x().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(!window.confirm("Soll der auctor wirklich gel\xf6scht werden? Alle verkn\xfcpften opera und loci werden ebenfalls gel\xf6scht!")){s.next=32;break}return s.next=3,R.Q.opera.get({auctor_id:n.id});case 3:t=s.sent,r=[],a=(0,c.Z)(t),s.prev=6,a.s();case 8:if((i=a.n()).done){s.next=16;break}return l=i.value,s.next=12,R.Q.loci.get({opus_id:l.id},{select:["id"]});case 12:d=s.sent,r=r.concat(d.map((function(e){return e.id})));case 14:s.next=8;break;case 16:s.next=21;break;case 18:s.prev=18,s.t0=s.catch(6),a.e(s.t0);case 21:return s.prev=21,a.f(),s.finish(21);case 24:return s.next=26,R.Q.loci.delete(r);case 26:return s.next=28,R.Q.opera.delete(t.map((function(e){return e.id})));case 28:return s.next=30,R.Q.auctores.delete(n.id);case 30:e.onClose(),alert("L\xf6schen erfolgreich. Aktualisieren Sie den Index, damit die gel\xf6schten Eintr\xe4ge verschwinden.");case 32:case"end":return s.stop()}}),s,null,[[6,18,21,24]])}))),children:"l\xf6schen"})})]})]})})]}),u&&(0,w.jsxs)(L.Z.Item,{eventKey:"1",children:[(0,w.jsxs)(L.Z.Header,{children:["opus ",(0,w.jsxs)("span",{style:{fontSize:"75%"},children:["(ID: ",u.id,")"]})]}),(0,w.jsx)(L.Z.Body,{children:(0,w.jsx)(A.Z,{})})]}),f&&(0,w.jsxs)(L.Z.Item,{eventKey:"2",children:[(0,w.jsx)(L.Z.Header,{children:"Accordion Item #1"}),(0,w.jsx)(L.Z.Body,{})]})]})})]})}var W=function(e){(0,a.Z)(t,e);var s=(0,i.Z)(t);function t(e){var r;return(0,n.Z)(this,t),(r=s.call(this,e)).state={author:null,work:null,authorLst:[]},r}return(0,r.Z)(t,[{key:"render",value:function(){var e=this;return(0,w.jsxs)(I.Z,{show:!0,placement:"end",scroll:!0,backdrop:!1,onHide:function(){e.props.onClose()},children:[(0,w.jsx)(I.Z.Header,{closeButton:!0,children:(0,w.jsx)(I.Z.Title,{})}),(0,w.jsxs)(I.Z.Body,{children:[this.state.author&&(0,w.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"150px auto",rowGap:"10px",margin:"0"},children:[(0,w.jsxs)("h3",{children:["Autor ",(0,w.jsxs)("i",{style:{fontSize:"60%"},children:["ID: ",this.state.author.id,")"]})]}),(0,w.jsx)("div",{}),(0,w.jsx)("div",{children:"Name:"}),(0,w.jsx)("div",{children:(0,w.jsx)("input",{type:"text",value:this.state.author.full?this.state.author.full.replace(/&lt;/g,"<").replace(/&gt;/g,">"):"",onChange:function(s){var t=e.state.author;t.full=s.target.value,e.setState({author:t})}})}),(0,w.jsx)("div",{children:"Abk\xfcrzung:"}),(0,w.jsx)("div",{children:(0,w.jsx)("input",{type:"text",value:this.state.author.abbr,onChange:function(s){var t=e.state.author;t.abbr=s.target.value,e.setState({author:t})}})}),(0,w.jsx)("div",{children:"Abk\xfcrzung (Sortierung):"}),(0,w.jsx)("div",{children:(0,w.jsx)("input",{type:"text",value:this.state.author.abbr_sort,onChange:function(s){var t=e.state.author;t.abbr_sort=s.target.value,e.setState({author:t})}})}),(0,w.jsx)("div",{children:"Anzeigedatum:"}),(0,w.jsx)("div",{children:(0,w.jsx)("input",{type:"text",value:this.state.author.date_display,onChange:function(s){var t=e.state.author;t.date_display=s.target.value,e.setState({author:t})}})}),(0,w.jsx)("div",{children:"Sortierdatum:"}),(0,w.jsx)("div",{children:(0,w.jsx)("input",{type:"text",value:this.state.author.date_sort,onChange:function(s){var t=e.state.author;t.date_sort=s.target.value,e.setState({author:t})}})}),(0,w.jsx)("div",{children:"Sortierdatum-Typ:"}),(0,w.jsx)("div",{children:(0,w.jsx)("input",{type:"text",value:this.state.author.date_type,onChange:function(s){var t=e.state.author;t.date_type=s.target.value,e.setState({author:t})}})}),(0,w.jsx)("div",{children:"in Benutzung:"}),(0,w.jsx)("div",{children:(0,w.jsx)(M.SA,{style:{width:"86%"},options:[[0,"Nein"],[1,"Ja"]],value:this.state.author.in_use,onChange:function(s){var t=e.state.author;t.in_use=s.target.value,e.setState({author:t})}})}),(0,w.jsx)("div",{}),(0,w.jsxs)("div",{children:[(0,w.jsx)(M.YG,{value:"speichern",onClick:(0,d.Z)(x().mark((function s(){return x().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,R.Q.author.save(e.state.author);case 2:return e.props.onUpdate(),s.abrupt("return",{status:!0});case 4:case"end":return s.stop()}}),s)})))}),(0,w.jsx)(M.YG,{value:"l\xf6schen",variant:"danger",style:{marginLeft:"10px"},onClick:(0,d.Z)(x().mark((function s(){var t,n,r,a,i;return x().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,R.Q.work.search([{c:"author_id",o:"=",v:e.state.author.id}],{select:["id"]});case 2:t=s.sent,n=[],r=(0,c.Z)(t);try{for(r.s();!(a=r.n()).done;)i=a.value,n.push(i.id)}catch(l){r.e(l)}finally{r.f()}if(!window.confirm("Soll der Autor wirklich gel\xf6scht werden? ".concat(n.length>1?n.length+" verkn\xfcpfte Werke werden":"Ein verkn\xfcpftes Werk wird"," ebenfalls gel\xf6scht. Dieser Schritt kann nicht mehr r\xfcckg\xe4ngig gemacht werden!"))){s.next=19;break}if(!(n.length>0)){s.next=10;break}return s.next=10,R.Q.work.delete(n);case 10:return s.next=13,R.Q.author.delete(e.state.author.id);case 13:return s.next=15,R.Q.exec("opera_update");case 15:return e.props.onReload(),s.abrupt("return",{status:!0});case 19:return s.abrupt("return",{status:0});case 20:case"end":return s.stop()}}),s)})))})]})]}),this.state.work&&(0,w.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"150px auto",rowGap:"10px",margin:"50px 0"},children:[(0,w.jsxs)("h3",{children:["Werk ",(0,w.jsxs)("i",{style:{fontSize:"60%"},children:["(ID: ",this.state.work.id,")"]})]}),(0,w.jsx)("div",{}),(0,w.jsx)("div",{children:"Werktitel:"}),(0,w.jsx)("div",{children:(0,w.jsx)("input",{type:"text",value:this.state.work.full?this.state.work.full.replace(/&lt;/g,"<").replace(/&gt;/g,">"):"",onChange:function(s){var t=e.state.work;t.full=s.target.value,e.setState({work:t})}})}),(0,w.jsx)("div",{children:"Abk\xfcrzung:"}),(0,w.jsx)("div",{children:(0,w.jsx)("input",{type:"text",value:this.state.work.abbr,onChange:function(s){var t=e.state.work;t.abbr=s.target.value,e.setState({work:t})}})}),(0,w.jsx)("div",{children:"Abk\xfcrzung (Sortierung):"}),(0,w.jsx)("div",{children:(0,w.jsx)("input",{type:"text",value:this.state.work.abbr_sort,onChange:function(s){var t=e.state.work;t.abbr_sort=s.target.value,e.setState({work:t})}})}),(0,w.jsx)("div",{children:"Anzeigedatum:"}),(0,w.jsx)("div",{children:(0,w.jsx)("input",{type:"text",value:this.state.work.date_display,onChange:function(s){var t=e.state.work;t.date_display=s.target.value,e.setState({work:t})}})}),(0,w.jsx)("div",{children:"Sortierdatum:"}),(0,w.jsx)("div",{children:(0,w.jsx)("input",{type:"text",value:this.state.work.date_sort,onChange:function(s){var t=e.state.work;t.date_sort=s.target.value,e.setState({work:t})}})}),(0,w.jsx)("div",{children:"Sortierdatum-Typ:"}),(0,w.jsx)("div",{children:(0,w.jsx)("input",{type:"text",value:this.state.work.date_type,onChange:function(s){var t=e.state.work;t.date_type=s.target.value,e.setState({work:t})}})}),(0,w.jsxs)("div",{children:["Abweichender Autorenname (z.B. bei ",(0,w.jsx)("aut",{children:"Vita"}),"):"]}),(0,w.jsx)("div",{children:(0,w.jsx)("input",{type:"text",value:this.state.work.author_display,onChange:function(s){var t=e.state.work;t.author_display=s.target.value,e.setState({work:t})}})}),(0,w.jsx)("div",{children:"verknpft. Autor:"}),(0,w.jsx)("div",{children:(0,w.jsx)(M.SA,{style:{width:"86%"},options:this.state.authorLst,value:this.state.work.author_id,onChange:function(s){var t=e.state.work;t.author_id=s.target.value,e.setState({work:t})}})}),(0,w.jsxs)("div",{children:["Stellenangabe: ",(0,w.jsx)("span",{className:"minorTxt",children:"(Bsp.)"})]}),(0,w.jsx)("div",{children:(0,w.jsx)("input",{type:"text",value:this.state.work.citation,onChange:function(s){var t=e.state.work;t.citation=s.target.value,e.setState({work:t})}})}),(0,w.jsxs)("div",{children:["Stellenangabe Bibliographie: ",(0,w.jsx)("i",{className:"minorTxt",children:"(nur minora)"})]}),(0,w.jsx)("div",{children:(0,w.jsx)("input",{type:"text",value:this.state.work.bibliography_cit,onChange:function(s){var t=e.state.work;t.bibliography_cit=s.target.value,e.setState({work:t})}})}),(0,w.jsx)("div",{children:"Referenz:"}),(0,w.jsx)("div",{children:(0,w.jsx)("input",{type:"text",value:this.state.work.reference,onChange:function(s){var t=e.state.work;t.reference=s.target.value,e.setState({work:t})}})}),(0,w.jsx)("div",{children:"in Benutzung:"}),(0,w.jsx)("div",{children:(0,w.jsx)(M.SA,{style:{width:"86%"},options:[[0,"Nein"],[1,"Ja"]],value:this.state.work.in_use,onChange:function(s){var t=e.state.work;t.in_use=s.target.value,e.setState({work:t})}})}),(0,w.jsxs)("div",{children:[(0,w.jsx)("i",{children:"opus maius"}),":"]}),(0,w.jsx)("div",{children:(0,w.jsx)(M.SA,{style:{width:"86%"},options:[[0,"Nein"],[1,"Ja"]],value:this.state.work.is_maior,onChange:function(s){var t=e.state.work;t.is_maior=s.target.value,e.setState({work:t})}})}),(0,w.jsx)("div",{children:"Kommentar:"}),(0,w.jsx)("div",{children:(0,w.jsx)("textarea",{value:this.state.work.txt_info,onChange:function(s){var t=e.state.work;t.txt_info=s.target.value,e.setState({work:t})},style:{width:"205px",height:"130px"}})}),(0,w.jsx)("div",{children:"Bibliographie:"}),(0,w.jsx)("div",{children:(0,w.jsx)("textarea",{value:this.state.work.bibliography,onChange:function(s){var t=e.state.work;t.bibliography=s.target.value,e.setState({work:t})},style:{width:"205px",height:"130px"}})}),(0,w.jsx)("div",{}),(0,w.jsxs)("div",{children:[(0,w.jsx)(M.YG,{value:"speichern",onClick:(0,d.Z)(x().mark((function s(){return x().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,R.Q.work.save(e.state.work);case 2:return e.props.onUpdate(),s.abrupt("return",{status:!0});case 4:case"end":return s.stop()}}),s)})))}),(0,w.jsx)(M.YG,{value:"l\xf6schen",variant:"danger",style:{marginLeft:"10px"},onClick:(0,d.Z)(x().mark((function s(){var t;return x().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,R.Q.work.search([{c:"author_id",o:"=",v:e.state.work.author_id}],{count:!0});case 2:if(t=s.sent,!(t[0].count<2)){s.next=8;break}return s.abrupt("return",{status:-1,error:"Das Werk kann nicht gel\xf6scht werden, da es das lezte Werk des Autors ist."});case 8:if(!window.confirm("Soll das Werk wirklich gel\xf6scht werden? Dieser Schritt kann nicht mehr r\xfcckg\xe4ngig gemacht werden!")){s.next=17;break}return s.next=11,R.Q.work.delete(e.state.work.id);case 11:return s.next=13,R.Q.exec("opera_update");case 13:return e.props.onReload(),s.abrupt("return",{status:!0});case 17:return s.abrupt("return",{status:0});case 18:case"end":return s.stop()}}),s)})))})]})]})]})]})}},{key:"componentDidMount",value:function(){var e=this,s=function(){var s=(0,d.Z)(x().mark((function s(){var t,n,r,a,i;return x().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,R.Q.author.getAll({select:["id","abbr"],order:["abbr_sort"]});case 2:t=s.sent,n=[],r=(0,c.Z)(t);try{for(r.s();!(a=r.n()).done;)i=a.value,n.push([i.id,i.abbr])}catch(l){r.e(l)}finally{r.f()}e.setState({authorLst:n});case 7:case"end":return s.stop()}}),s)})));return function(){return s.apply(this,arguments)}}();if(s(),this.props.item.author_id>0){var t=function(){var s=(0,d.Z)(x().mark((function s(){var t;return x().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,R.Q.author.get({id:e.props.item.author_id});case 2:t=s.sent,e.setState({author:t[0]});case 4:case"end":return s.stop()}}),s)})));return function(){return s.apply(this,arguments)}}();t()}if(this.props.item.work_id>0){var n=function(){var s=(0,d.Z)(x().mark((function s(){var t;return x().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,R.Q.work.get({id:e.props.item.work_id});case 2:t=s.sent,e.setState({work:t[0]});case 4:case"end":return s.stop()}}),s)})));return function(){return s.apply(this,arguments)}}();n()}}},{key:"componentDidUpdate",value:function(e){var s=this;if(e.item.author_id!=this.props.item.author_id)if(this.props.item.author_id>0){var t=function(){var e=(0,d.Z)(x().mark((function e(){var t;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.Q.author.get({id:s.props.item.author_id});case 2:t=e.sent,s.setState({author:t[0]});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t()}else this.setState({author:null});if(e.item.work_id!=this.props.item.work_id)if(this.props.item.work_id>0){var n=function(){var e=(0,d.Z)(x().mark((function e(){var t;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.Q.work.get({id:s.props.item.work_id});case 2:t=e.sent,s.setState({work:t[0]});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n()}else this.setState({work:null})}}]),t}(m.Component),E=function(e){(0,a.Z)(t,e);var s=(0,i.Z)(t);function t(e){var r;return(0,n.Z)(this,t),(r=s.call(this,e)).state={oLst:[],cHitId:0},r.resultsOnPage=18,r}return(0,r.Z)(t,[{key:"render",value:function(){var e=this,s=[],t=[],n=0,r=0;this.scrollRef=null;var a,i=(0,c.Z)(this.props.cTrLst);try{var l=function(){var i=a.value;n++;var c={};i.o.id===e.state.cHitId?(c="searchHit",e.scrollRef=m.createRef()):e.state.cHitId>0&&e.state.hits.some((function(e){return e.id===i.o.id}))&&(c="searchAllHits"),s.push((0,w.jsx)("tr",{className:c,ref:i.o.id===e.state.cHitId?e.scrollRef:null,onDoubleClick:function(s){s.stopPropagation(),e.props.showDetail(i.o)},children:i.data},n)),s.length>=e.resultsOnPage&&(r++,t.push((0,w.jsxs)("div",{id:"operaBox_"+r,style:{borderBottom:"1px dotted black",paddingBottom:"15px",margin:"10px"},children:[(0,w.jsx)("table",{className:"operaBox",children:(0,w.jsx)("tbody",{children:s})}),(0,w.jsx)("div",{style:{textAlign:"center"},children:r})]},r)),s=[])};for(i.s();!(a=i.n()).done;)l()}catch(h){i.e(h)}finally{i.f()}r>0&&t.push((0,w.jsxs)("div",{id:"operaBox_"+(r+1),style:{margin:"10px"},children:[(0,w.jsx)("table",{className:"operaBox",children:(0,w.jsx)("tbody",{children:s})}),(0,w.jsx)("div",{style:{textAlign:"center"},children:r+1})]},r+1));var o=(0,w.jsx)("table",{className:"operaBox",style:{width:"100%"},children:(0,w.jsxs)("tbody",{children:[(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"c1"}),(0,w.jsx)("td",{className:"c2",children:(0,w.jsx)(C,{sm:10})}),(0,w.jsx)("td",{className:"c3",children:(0,w.jsx)(C,{sm:10})}),(0,w.jsx)("td",{className:"c4"}),(0,w.jsx)("td",{className:"c5"})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"c1",children:(0,w.jsx)(C,{sm:10})}),(0,w.jsxs)("td",{className:"c2",children:["\xa0\xa0\xa0",(0,w.jsx)(C,{sm:10})]}),(0,w.jsxs)("td",{className:"c3",children:["\xa0\xa0\xa0",(0,w.jsx)(C,{sm:10})]}),(0,w.jsxs)("td",{className:"c4",children:[(0,w.jsx)(C,{sm:10}),(0,w.jsx)(C,{sm:8})," ",(0,w.jsx)(C,{bg:"primary",sm:4})]}),(0,w.jsx)("td",{className:"c5",children:(0,w.jsx)(C,{sm:5})})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"c1"}),(0,w.jsx)("td",{className:"c2",children:(0,w.jsx)(C,{sm:10})}),(0,w.jsx)("td",{className:"c3",children:(0,w.jsx)(C,{sm:10})}),(0,w.jsx)("td",{className:"c4"}),(0,w.jsx)("td",{className:"c5"})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"c1",children:(0,w.jsx)(C,{sm:10})}),(0,w.jsxs)("td",{className:"c2",children:["\xa0\xa0\xa0",(0,w.jsx)(C,{sm:10})]}),(0,w.jsxs)("td",{className:"c3",children:["\xa0\xa0\xa0",(0,w.jsx)(C,{sm:10})]}),(0,w.jsxs)("td",{className:"c4",children:[(0,w.jsx)(C,{sm:10})," ",(0,w.jsx)(C,{sm:10}),(0,w.jsx)(C,{sm:8})," ",(0,w.jsx)(C,{bg:"primary",sm:6})]}),(0,w.jsx)("td",{className:"c5",children:(0,w.jsx)(C,{sm:6})})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"c1"}),(0,w.jsx)("td",{className:"c2",children:(0,w.jsx)(C,{sm:10})}),(0,w.jsxs)("td",{className:"c3",children:[(0,w.jsx)(C,{sm:10}),(0,w.jsx)(C,{sm:8})]}),(0,w.jsx)("td",{className:"c4"}),(0,w.jsx)("td",{className:"c5"})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"c1",children:(0,w.jsx)(C,{sm:10})}),(0,w.jsxs)("td",{className:"c2",children:["\xa0\xa0\xa0",(0,w.jsx)(C,{sm:10})]}),(0,w.jsxs)("td",{className:"c3",children:["\xa0\xa0\xa0",(0,w.jsx)(C,{sm:10})]}),(0,w.jsxs)("td",{className:"c4",children:[(0,w.jsx)(C,{sm:11})," ",(0,w.jsx)(C,{sm:10})," ",(0,w.jsx)(C,{sm:8}),(0,w.jsx)(C,{sm:8}),(0,w.jsx)(C,{sm:10})," ",(0,w.jsx)(C,{sm:9})," ",(0,w.jsx)(C,{sm:10}),(0,w.jsx)(C,{sm:8})," ",(0,w.jsx)(C,{bg:"primary",sm:6})]}),(0,w.jsx)("td",{className:"c5",children:(0,w.jsx)(C,{sm:8})})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"c1"}),(0,w.jsx)("td",{className:"c2",children:(0,w.jsx)(C,{sm:10})}),(0,w.jsx)("td",{className:"c3",children:(0,w.jsx)(C,{sm:10})}),(0,w.jsx)("td",{className:"c4"}),(0,w.jsx)("td",{className:"c5"})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"c1",children:(0,w.jsx)(C,{sm:10})}),(0,w.jsxs)("td",{className:"c2",children:["\xa0\xa0\xa0",(0,w.jsx)(C,{sm:10})]}),(0,w.jsxs)("td",{className:"c3",children:["\xa0\xa0\xa0",(0,w.jsx)(C,{sm:10})]}),(0,w.jsxs)("td",{className:"c4",children:[(0,w.jsx)(C,{sm:11}),(0,w.jsx)(C,{sm:9})," ",(0,w.jsx)(C,{bg:"primary",sm:8})]}),(0,w.jsx)("td",{className:"c5",children:(0,w.jsx)(C,{sm:5})})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"c1"}),(0,w.jsx)("td",{className:"c2",children:(0,w.jsx)(C,{sm:10})}),(0,w.jsx)("td",{className:"c3",children:(0,w.jsx)(C,{sm:10})}),(0,w.jsx)("td",{className:"c4"}),(0,w.jsx)("td",{className:"c5"})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"c1",children:(0,w.jsx)(C,{sm:10})}),(0,w.jsxs)("td",{className:"c2",children:["\xa0\xa0\xa0",(0,w.jsx)(C,{sm:10})]}),(0,w.jsxs)("td",{className:"c3",children:["\xa0\xa0\xa0",(0,w.jsx)(C,{sm:10})]}),(0,w.jsxs)("td",{className:"c4",children:[(0,w.jsx)(C,{sm:9})," ",(0,w.jsx)(C,{sm:11})," ",(0,w.jsx)(C,{sm:8})," ",(0,w.jsx)(C,{bg:"primary",sm:4})]}),(0,w.jsx)("td",{className:"c5",children:(0,w.jsx)(C,{sm:5})})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"c1",children:(0,w.jsx)(C,{sm:10})}),(0,w.jsxs)("td",{className:"c2",children:["\xa0\xa0\xa0",(0,w.jsx)(C,{sm:10})]}),(0,w.jsxs)("td",{className:"c3",children:["\xa0\xa0\xa0",(0,w.jsx)(C,{sm:10})]}),(0,w.jsxs)("td",{className:"c4",children:[(0,w.jsx)(C,{sm:10})," ",(0,w.jsx)(C,{sm:10})," ",(0,w.jsx)(C,{sm:10}),(0,w.jsx)(C,{sm:8})," ",(0,w.jsx)(C,{bg:"primary",sm:4})]}),(0,w.jsx)("td",{className:"c5",children:(0,w.jsx)(C,{sm:4})})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"c1",children:(0,w.jsx)(C,{sm:10})}),(0,w.jsxs)("td",{className:"c2",children:["\xa0\xa0\xa0",(0,w.jsx)(C,{sm:10})]}),(0,w.jsxs)("td",{className:"c3",children:["\xa0\xa0\xa0",(0,w.jsx)(C,{sm:10})]}),(0,w.jsxs)("td",{className:"c4",children:[(0,w.jsx)(C,{sm:8})," ",(0,w.jsx)(C,{sm:11})," ",(0,w.jsx)(C,{sm:10}),(0,w.jsx)(C,{sm:9})," ",(0,w.jsx)(C,{bg:"primary",sm:8})]}),(0,w.jsx)("td",{className:"c5",children:(0,w.jsx)(C,{sm:7})})]})]})});"opera_minora"===this.props.listName?o=(0,w.jsx)("table",{className:"operaBox",style:{width:"100%"},children:(0,w.jsxs)("tbody",{children:[(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"c1_min",children:(0,w.jsx)(C,{sm:8})}),(0,w.jsx)("td",{className:"c2_min",children:(0,w.jsx)(C,{sm:10})}),(0,w.jsx)("td",{className:"c5_min",children:(0,w.jsx)(C,{bg:"primary",sm:4})})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"c1_min",children:(0,w.jsx)(C,{sm:8})}),(0,w.jsx)("td",{className:"c2_min",children:(0,w.jsx)(C,{sm:11})}),(0,w.jsxs)("td",{className:"c5_min",children:[(0,w.jsx)(C,{sm:4}),(0,w.jsx)("br",{}),(0,w.jsx)(C,{sm:2})]})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"c1_min",children:(0,w.jsx)(C,{sm:7})}),(0,w.jsx)("td",{className:"c2_min",children:(0,w.jsx)(C,{sm:8})}),(0,w.jsx)("td",{className:"c5_min"})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"c1_min"}),(0,w.jsx)("td",{className:"c2_min",children:(0,w.jsx)(C,{sm:11})}),(0,w.jsx)("td",{className:"c5_min",children:(0,w.jsx)(C,{sm:5})})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"c1_min",children:(0,w.jsx)(C,{sm:5})}),(0,w.jsx)("td",{className:"c2_min",children:(0,w.jsx)(C,{sm:7})}),(0,w.jsx)("td",{className:"c5_min",children:(0,w.jsx)(C,{sm:4})})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"c1_min"}),(0,w.jsx)("td",{className:"c2_min",children:(0,w.jsx)(C,{sm:8})}),(0,w.jsx)("td",{className:"c5_min",children:(0,w.jsx)(C,{sm:4})})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"c1_min"}),(0,w.jsx)("td",{className:"c2_min",children:(0,w.jsx)(C,{sm:8})}),(0,w.jsx)("td",{className:"c5_min",children:(0,w.jsx)(C,{sm:6})})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"c1_min",children:(0,w.jsx)(C,{sm:8})}),(0,w.jsx)("td",{className:"c2_min",children:(0,w.jsx)(C,{sm:10})}),(0,w.jsx)("td",{className:"c5_min"})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"c1_min",children:(0,w.jsx)(C,{sm:8})}),(0,w.jsx)("td",{className:"c2_min",children:(0,w.jsx)(C,{sm:7})}),(0,w.jsx)("td",{className:"c5_min",children:(0,w.jsx)(C,{sm:5})})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"c1_min",children:(0,w.jsx)(C,{sm:8})}),(0,w.jsx)("td",{className:"c2_min",children:(0,w.jsx)(C,{sm:11})}),(0,w.jsx)("td",{className:"c5_min",children:(0,w.jsx)(C,{sm:6})})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"c1_min",children:(0,w.jsx)(C,{sm:8})}),(0,w.jsx)("td",{className:"c2_min",children:(0,w.jsx)(C,{sm:10})}),(0,w.jsx)("td",{className:"c5_min",children:(0,w.jsx)(C,{sm:3})})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"c1_min",children:(0,w.jsx)(C,{sm:8})}),(0,w.jsx)("td",{className:"c2_min",children:(0,w.jsx)(C,{sm:10})}),(0,w.jsx)("td",{className:"c5_min",children:(0,w.jsx)(C,{sm:3,bg:"primary"})})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"c1_min"}),(0,w.jsx)("td",{className:"c2_min",children:(0,w.jsx)(C,{sm:11})}),(0,w.jsx)("td",{className:"c5_min",children:(0,w.jsx)(C,{sm:8})})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"c1_min",children:(0,w.jsx)(C,{sm:2})}),(0,w.jsx)("td",{className:"c2_min",children:(0,w.jsx)(C,{sm:6})}),(0,w.jsx)("td",{className:"c5_min"})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"c1_min",children:(0,w.jsx)(C,{sm:7})}),(0,w.jsx)("td",{className:"c2_min",children:(0,w.jsx)(C,{sm:7})}),(0,w.jsx)("td",{className:"c5_min",children:(0,w.jsx)(C,{sm:5,bg:"primary"})})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"c1_min",children:(0,w.jsx)(C,{sm:8})}),(0,w.jsx)("td",{className:"c2_min",children:(0,w.jsx)(C,{sm:10})}),(0,w.jsx)("td",{className:"c5_min",children:(0,w.jsx)(C,{sm:4,bg:"primary"})})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"c1_min",children:(0,w.jsx)(C,{sm:8})}),(0,w.jsx)("td",{className:"c2_min",children:(0,w.jsx)(C,{sm:8})}),(0,w.jsx)("td",{className:"c5_min",children:(0,w.jsx)(C,{sm:5})})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"c1_min",children:(0,w.jsx)(C,{sm:2})}),(0,w.jsx)("td",{className:"c2_min",children:(0,w.jsx)(C,{sm:7})}),(0,w.jsx)("td",{className:"c5_min",children:(0,w.jsx)(C,{sm:6})})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"c1_min",children:(0,w.jsx)(C,{sm:4})}),(0,w.jsx)("td",{className:"c2_min",children:(0,w.jsx)(C,{sm:9})}),(0,w.jsx)("td",{className:"c5_min",children:(0,w.jsx)(C,{sm:5})})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"c1_min",children:(0,w.jsx)(C,{sm:8})}),(0,w.jsx)("td",{className:"c2_min",children:(0,w.jsx)(C,{sm:10})}),(0,w.jsx)("td",{className:"c5_min",children:(0,w.jsx)(C,{sm:3})})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"c1_min"}),(0,w.jsx)("td",{className:"c2_min",children:(0,w.jsx)(C,{sm:11})}),(0,w.jsx)("td",{className:"c5_min",children:(0,w.jsx)(C,{sm:11})})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"c1_min"}),(0,w.jsx)("td",{className:"c2_min",children:(0,w.jsx)(C,{sm:8})}),(0,w.jsx)("td",{className:"c5_min",children:(0,w.jsx)(C,{sm:5})})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"c1_min"}),(0,w.jsx)("td",{className:"c2_min",children:(0,w.jsx)(C,{sm:10})}),(0,w.jsx)("td",{className:"c5_min",children:(0,w.jsx)(C,{sm:4})})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"c1_min",children:(0,w.jsx)(C,{sm:4})}),(0,w.jsx)("td",{className:"c2_min",children:(0,w.jsx)(C,{sm:7})}),(0,w.jsx)("td",{className:"c5_min",children:(0,w.jsx)(C,{sm:3})})]})]})}):"tll_index"===this.props.listName&&(o=(0,w.jsx)("table",{className:"operaBox",style:{width:"100%"},children:(0,w.jsxs)("tbody",{children:[(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"c1_tll",children:(0,w.jsx)(C,{sm:10})}),(0,w.jsx)("td",{className:"c2_tll",children:(0,w.jsx)(C,{sm:10})}),(0,w.jsx)("td",{className:"c3_tll"}),(0,w.jsx)("td",{className:"c4_tll",children:(0,w.jsx)(C,{sm:10})}),(0,w.jsx)("td",{className:"c5_tll"})]}),(0,w.jsxs)("tr",{children:[(0,w.jsxs)("td",{className:"c1_tll",children:["\xa0\xa0\xa0",(0,w.jsx)(C,{sm:10})]}),(0,w.jsxs)("td",{className:"c2_tll",children:["\xa0\xa0\xa0",(0,w.jsx)(C,{sm:10})]}),(0,w.jsx)("td",{className:"c3_tll"}),(0,w.jsxs)("td",{className:"c4_tll",children:["\xa0\xa0\xa0",(0,w.jsx)(C,{sm:10}),(0,w.jsx)("br",{}),"\xa0\xa0\xa0",(0,w.jsx)(C,{sm:8})]}),(0,w.jsxs)("td",{className:"c5_tll",children:["\xa0\xa0\xa0",(0,w.jsx)(C,{sm:9}),(0,w.jsx)("br",{}),"\xa0\xa0\xa0",(0,w.jsx)(C,{sm:3})]})]}),(0,w.jsxs)("tr",{children:[(0,w.jsxs)("td",{className:"c1_tll",children:["\xa0\xa0\xa0",(0,w.jsx)(C,{sm:10})]}),(0,w.jsxs)("td",{className:"c2_tll",children:["\xa0\xa0\xa0",(0,w.jsx)(C,{sm:10})]}),(0,w.jsx)("td",{className:"c3_tll"}),(0,w.jsxs)("td",{className:"c4_tll",children:["\xa0\xa0\xa0",(0,w.jsx)(C,{sm:10}),(0,w.jsx)("br",{}),"\xa0\xa0\xa0",(0,w.jsx)(C,{sm:8})]}),(0,w.jsx)("td",{className:"c5_tll"})]})]})}));var u=[["opera-Listen aktualisieren",(0,d.Z)(x().mark((function s(){return x().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(!window.confirm("Soll die opera-Liste aktualisiert werden? Der Prozess dauert ca. 30 Sekunden.")){s.next=5;break}return s.next=3,R.Q.exec("opera_update");case 3:return s.next=5,e.props.getLst();case 5:case"end":return s.stop()}}),s)})))]];return R.Q.access("o_edit")&&(u.push(["Neuer Autor erstellen",(0,d.Z)(x().mark((function s(){var t;return x().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(!window.confirm("Soll ein neuer Autor erstellt werden? Er heisst '+NEUER AUTOR'")){s.next=11;break}return s.next=3,R.Q.author.save({full:"+Neuer Autor",abbr:"+Neuer Autor",abbr_sort:"+Neuer Autor",in_use:1});case 3:return t=s.sent,s.next=6,R.Q.work.save({full:"Neues Werk",abbr:"Neues Werk",abbr_sort:"Neues Werk",author_id:t,is_maior:1,in_use:1});case 6:if(!window.confirm("Ein neuer Autor wurde erstellt. Soll die opera-Liste aktualisiert werden?")){s.next=11;break}return s.next=9,R.Q.exec("opera_update");case 9:return s.next=11,e.props.getLst();case 11:case"end":return s.stop()}}),s)})))]),u.push(["Neues Werk erstellen",(0,d.Z)(x().mark((function s(){return x().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(!window.confirm("Soll ein neues Werk erstellt werden? Das Werk wird ABBO FLOR. zugewiesen.")){s.next=9;break}return s.next=3,R.Q.work.save({full:"Neues Werk",abbr:"Neues Werk",abbr_sort:"Neues Werk",author_id:1,is_maior:1,in_use:1});case 3:if(s.sent,!window.confirm("Ein neues Werk wurde erstellt. Soll die opera-Liste aktualisiert werden?")){s.next=9;break}return s.next=7,R.Q.exec("opera_update");case 7:return s.next=9,e.props.getLst();case 9:case"end":return s.stop()}}),s)})))])),(0,w.jsxs)(w.Fragment,{children:[0===t.length?null:(0,w.jsx)(H.Z,{fixed:"bottom",bg:"light",children:(0,w.jsxs)(A.Z,{fluid:!0,children:[(0,w.jsx)(H.Z.Collapse,{className:"justify-content-start",children:(0,w.jsx)(G,{listName:this.props.listName,setHitIndex:function(s){e.setState({cHitId:s})},setHits:function(s){e.setState({hits:s})}})}),(0,w.jsxs)(H.Z.Collapse,{className:"justify-content-end",children:[(0,w.jsx)(H.Z.Text,{children:(0,w.jsx)(T.Z.Control,{type:"text",style:{textAlign:"right",width:"80px",padding:"2px 5px",marginRight:"20px"},accessKey:"p",placeholder:"Seite...",onKeyUp:function(e){if(13===e.keyCode){var s=document.querySelector("div#operaBox_"+e.target.value);s&&s.scrollIntoView({behavior:"smooth"})}}})}),(0,w.jsx)(H.Z.Text,{children:(0,w.jsx)(M.vW,{menuItems:u})})]})]})}),(0,w.jsx)("div",{style:{gridArea:this.props.gridArea},children:0===t.length?(0,w.jsx)("div",{children:(0,w.jsx)(C,{animation:"glow",children:o})}):(0,w.jsx)("div",{className:"operaBox_"+this.props.listName,children:t})})]})}},{key:"gotoSearchResult",value:function(e){1===e&&this.state.hitIndex<this.state.maxHits-1?this.setState({hitIndex:this.state.hitIndex+1}):1===e?this.setState({hitIndex:0}):-1===e&&this.state.hitIndex>0?this.setState({hitIndex:this.state.hitIndex-1}):-1===e&&this.setState({hitIndex:this.state.maxHits-1})}},{key:"componentDidUpdate",value:function(e,s){this.state.hits&&this.state.hits.length>0?s.hitIndex!=this.state.hitIndex&&this.setState({cHitId:this.state.hits[this.state.hitIndex].id}):0!=this.state.cHitId&&this.setState({cHitId:0}),this.scrollRef&&this.scrollRef.current.scrollIntoView({behavior:"smooth",block:"center"})}}]),t}(m.Component);function G(e){var s=(0,m.useState)([]),t=(0,o.Z)(s,2),n=t[0],r=t[1],a=(0,m.useState)(0),i=(0,o.Z)(a,2),c=i[0],l=i[1],u=(0,m.useState)(""),h=(0,o.Z)(u,2),j=h[0],p=h[1];(0,m.useEffect)((function(){n.length>0&&e.setHitIndex(n[c].id)}),[n,c]),(0,m.useEffect)((function(){e.setHits(n)}),[n]);var f=function(e){if(1===e)c+1===n.length?l(0):l(c+1);else if(-1===e)l(0===c?n.length-1:c-1);else if(0===e){document.querySelector(".searchHit").scrollIntoView({behavior:"smooth",block:"center"})}};return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(H.Z.Text,{children:(0,w.jsx)(T.Z.Control,{type:"text",style:{padding:"2px 5px"},accessKey:"s",placeholder:"Suche nach Zitiertitel...",onKeyUp:function(){var s=(0,d.Z)(x().mark((function s(t){var n;return x().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(13!==t.keyCode){s.next=13;break}if(""!==t.target.value){s.next=5;break}r([]),s.next=13;break;case 5:if(t.target.value==j){s.next=12;break}return s.next=8,R.Q[e.listName].search([{c:"search",o:"=",v:"".concat(t.target.value,"*")}],{select:["id"]});case 8:(n=s.sent).length>0?(p(t.target.value),l(0),r(n)):r([]),s.next=13;break;case 12:f(1);case 13:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()})}),n.length>0&&(0,w.jsx)(H.Z.Text,{children:(0,w.jsxs)("div",{style:{display:"flex",marginLeft:"20px",border:"1px solid var(--bs-gray-200)"},children:[(0,w.jsx)(k.Z,{size:"sm",variant:"outline-dark",style:{borderRadius:"0.2rem 0 0 0.2rem"},onClick:function(){f(-1)},disabled:1===n.length,children:(0,w.jsx)(z.G,{icon:q.DYF,style:{fontSize:"14px"}})}),(0,w.jsxs)("div",{style:{borderBottom:"1px solid var(--bs-gray-600)",borderTop:"1px solid var(--bs-gray-600)",padding:"5px 15px",margin:"0",cursor:"pointer"},onClick:function(){f(0)},children:[c+1," / ",n.length]}),(0,w.jsx)(k.Z,{size:"sm",variant:"outline-dark",style:{borderRadius:"0 0.2rem 0.2rem 0"},onClick:function(){f(1)},disabled:1===n.length,children:(0,w.jsx)(z.G,{icon:q.irl,style:{fontSize:"12px"}})})]})})]})}var K=function(e){(0,a.Z)(t,e);var s=(0,i.Z)(t);function t(e){var r;return(0,n.Z)(this,t),(r=s.call(this,e)).state={selectionDetail:null,cTrLst:[]},r}return(0,r.Z)(t,[{key:"render",value:function(){var e=this;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(A.Z,{className:"mainBody",children:(0,w.jsx)(E,{getLst:(0,d.Z)(x().mark((function s(){return x().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:e.getLst();case 1:case"end":return s.stop()}}),s)}))),cTrLst:this.state.cTrLst,listName:this.props.listName,currentElements:this.state.currentElements,count:this.state.count,currentPage:this.state.currentPage,pageMax:this.state.pageMax,gridArea:this.state.selectionDetail?"2/1/2/2":"2/1/2/3",showDetail:function(s){e.setState({item:s})}})}),"mlw"===R.Q.project_name&&R.Q.access("o_edit")&&this.state.item?(0,w.jsx)(W,{item:this.state.item,onUpdate:function(){e.setState({item:null})},onClose:function(){e.setState({item:null})},onReload:(0,d.Z)(x().mark((function s(){return x().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return e.setState({item:null}),s.next=3,e.getLst();case 3:case"end":return s.stop()}}),s)})))}):null,"tll"===R.Q.project_name&&R.Q.access("o_edit")&&this.state.item?(0,w.jsx)(D,{item:this.state.item,onUpdate:function(){e.setState({item:null})},onClose:function(){e.setState({item:null})},onReload:(0,d.Z)(x().mark((function s(){return x().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return e.setState({item:null}),s.next=3,e.getLst();case 3:case"end":return s.stop()}}),s)})))}):null]})}},{key:"componentDidMount",value:function(){this.getLst()}},{key:"componentDidUpdate",value:function(e){this.props.listName!=e.listName&&this.getLst(),this.scrollRef&&this.scrollRef.current.scrollIntoView({behavior:"smooth",block:"center"})}},{key:"getLst",value:function(){var e=(0,d.Z)(x().mark((function e(){var s,t,n;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({cTrLst:[]}),e.next=3,R.Q[this.props.listName].getAll({count:!0});case 3:return s=e.sent,e.next=6,R.Q[this.props.listName].getAll();case 6:t=e.sent,n=this.createOperaLists(t,this.props.listName),this.setState({cTrLst:n,oMax:Math.floor(s[0].count/this.resultsOnPage)+1,currentPage:1});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOperaLists",value:function(e,s){var t,n=m.forwardRef((function(e,s){var t=e.children,n=e.onClick;return(0,w.jsxs)("span",{style:{cursor:"pointer"},ref:s,onClick:function(e){e.preventDefault(),n(e)},children:[t,(0,w.jsx)(z.G,{style:{color:"#4d565f",marginLeft:"5px"},icon:q.eW2})]})})),r=[],a=(0,c.Z)(e);try{var i=function(){var e=t.value,a=[];if(e.editions_id)for(var i=JSON.parse(e.editions_id),c=JSON.parse(e.editions_url),l=JSON.parse(e.editions_label),d=0;d<i.length;d++){var o="/".concat(R.Q.project_name,"/argos/").concat(i[d]),u="";c&&""!=c[d]&&(o=c[d],u=(0,w.jsxs)("span",{children:[" ",(0,w.jsx)(z.G,{style:{fontSize:"14px"},icon:q.Xjp})]}));var x="FEHLER!";l&&(x=l[d]),a.push((0,w.jsx)("li",{children:(0,w.jsxs)("a",{href:o,target:"_blank",rel:"noreferrer",children:[x,u]})},d))}if("opera_maiora"==s){var h=e.work_id>0&&null===e.author_id?"<span>&nbsp;&nbsp;&nbsp;".concat(e.abbr,"</span>"):"<aut>".concat(e.abbr,"</aut>"),m=null!==e.gq_work_id||null!=e.gq_author_id?(0,w.jsxs)(B.Z,{children:[(0,w.jsx)(B.Z.Toggle,{as:n,id:"dropdown-custom-components",children:(0,w.jsx)("span",{dangerouslySetInnerHTML:(0,M.rg)(e.work_id>0&&null===e.author_id?"<span>&nbsp;&nbsp;&nbsp;".concat(e.full,"</span>"):e.full)})}),(0,w.jsx)(B.Z.Menu,{children:1===e.same_line?(0,w.jsxs)(w.Fragment,{children:[null!==e.gq_author_id&&(0,w.jsxs)(B.Z.Item,{eventKey:"1",onClick:function(){window.open("http://geschichtsquellen.de/autor/".concat(e.gq_author_id),"_blank")},children:["Geschichtsquelle ",(0,w.jsx)("small",{children:"(Autor)"})]}),null!==e.gq_work_id&&(0,w.jsxs)(B.Z.Item,{eventKey:"2",onClick:function(){window.open("http://geschichtsquellen.de/werk/".concat(e.gq_work_id),"_blank")},children:["Geschichtsquelle ",(0,w.jsx)("small",{children:"(Werk)"})]})]}):(0,w.jsx)(w.Fragment,{children:null===e.work_id?(0,w.jsx)(B.Z.Item,{eventKey:"3",onClick:function(){window.open("http://geschichtsquellen.de/autor/".concat(e.gq_author_id),"_blank")},children:"Geschichtsquelle"}):(0,w.jsx)(B.Z.Item,{eventKey:"4",onClick:function(){window.open("http://geschichtsquellen.de/werk/".concat(e.gq_work_id),"_blank")},children:"Geschichtsquelle"})})})]}):(0,w.jsx)("span",{dangerouslySetInnerHTML:(0,M.rg)(e.work_id>0&&null===e.author_id?"<span>&nbsp;&nbsp;&nbsp;".concat(e.full,"</span>"):e.full)});r.push({o:e,data:[(0,w.jsx)("td",{className:"c1",dangerouslySetInnerHTML:(0,M.rg)(e.date_display)},"0"),(0,w.jsx)("td",{className:"c2",dangerouslySetInnerHTML:(0,M.rg)(h)},"1"),(0,w.jsx)("td",{className:"c3",children:m},"2"),(0,w.jsxs)("td",{className:"c4",children:[(0,w.jsx)("span",{dangerouslySetInnerHTML:(0,M.rg)(e.bibliography)}),(0,w.jsx)("ul",{className:"noneLst",children:a})]},"3"),(0,w.jsx)("td",{className:"c5",dangerouslySetInnerHTML:(0,M.rg)(e.comment)},"4")]})}else if("opera_minora"===s){var j=null!==e.gq_work_id||null!=e.gq_author_id?(0,w.jsxs)(B.Z,{children:[(0,w.jsx)(B.Z.Toggle,{as:n,id:"dropdown-custom-components",children:(0,w.jsx)("span",{dangerouslySetInnerHTML:(0,M.rg)(e.citation)})}),(0,w.jsxs)(B.Z.Menu,{children:[null!==e.gq_author_id&&(0,w.jsxs)(B.Z.Item,{eventKey:"1",onClick:function(){window.open("http://geschichtsquellen.de/autor/".concat(e.gq_author_id),"_blank")},children:["Geschichtsquelle ",(0,w.jsx)("small",{children:"(Autor)"})]}),null!==e.gq_work_id&&(0,w.jsxs)(B.Z.Item,{eventKey:"2",onClick:function(){window.open("http://geschichtsquellen.de/werk/".concat(e.gq_work_id),"_blank")},children:["Geschichtsquelle ",(0,w.jsx)("small",{children:"(Werk)"})]})]})]}):(0,w.jsx)("span",{dangerouslySetInnerHTML:(0,M.rg)(e.citation)});r.push({o:e,data:[(0,w.jsx)("td",{className:"c1_min",dangerouslySetInnerHTML:(0,M.rg)(e.date_display)},"0"),(0,w.jsx)("td",{className:"c2_min",children:j},"1"),(0,w.jsxs)("td",{className:"c5_min",children:[(0,w.jsx)("span",{dangerouslySetInnerHTML:(0,M.rg)(e.bibliography)}),(0,w.jsx)("ul",{className:"noneLst",children:a})]},"2")]})}else{if("tll_index"!==s)throw new Error("listname unknown!");var p,f="c0_tll",v=null;null!==e.auctor_id&&null!==e.abbr_opus?(f+=" a_".concat(e.auctor_id," o_").concat(e.opus_id," l_").concat(e.locus_id),p=(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("aut",{children:e.auctor})," ",(0,w.jsxs)("span",{style:{color:"green"},children:[" ",e.opus]}),e.locus&&(0,w.jsxs)("span",{style:{color:"red"},children:[" ",e.locus]})]})):null!==e.auctor_id?(f+=" o_".concat(e.opus_id," l_").concat(e.locus_id),p=e.locus?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("span",{children:e.opus})," ",(0,w.jsx)("span",{style:{color:"red"},dangerouslySetInnerHTML:(0,M.rg)(e.locus)})]}):e.opus):(f+=" a_".concat(e.auctor_id),p=(0,w.jsx)("aut",{children:e.auctor})),0===e.in_use&&(p=(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("span",{style:{color:"orange"},children:"["}),p,(0,w.jsx)("span",{style:{color:"orange"},children:"]"})]})),null===e.opus&&null!==e.locus?v="4rem":e.auctor_id>0&&(v="2rem"),r.push({o:e,data:[(0,w.jsx)("td",{className:f,dangerouslySetInnerHTML:(0,M.rg)(e.ord)},"0"),(0,w.jsx)("td",{className:"c1_tll",style:{paddingLeft:v},dangerouslySetInnerHTML:(0,M.rg)(e.date_display)},"1"),(0,w.jsx)("td",{className:"c2_tll",style:{paddingLeft:v},children:p},"2"),(0,w.jsx)("td",{className:"c3_tll",style:{paddingLeft:v},children:(0,w.jsx)("span",{onClick:function(){var s=document.querySelector(".".concat(e.ref_target));s&&s.scrollIntoView({behavior:"auto",block:"center"})},style:{textDecoration:e.ref_target?"underline":"",cursor:e.ref_target?"pointer":"default"},dangerouslySetInnerHTML:(0,M.rg)(e.ref_text)})},"3"),(0,w.jsx)("td",{className:"c4_tll",style:{paddingLeft:v},dangerouslySetInnerHTML:(0,M.rg)(e.explicatio)},"4"),(0,w.jsxs)("td",{className:"c5_tll",style:{paddingLeft:v},children:[(0,w.jsx)("div",{dangerouslySetInnerHTML:(0,M.rg)(e.editiones)}),(0,w.jsx)("ul",{className:"noneLst",children:a})]},"5")]})}};for(a.s();!(t=a.n()).done;)i()}catch(l){a.e(l)}finally{a.f()}return r}}]),t}(m.Component)}}]);
//# sourceMappingURL=395.d3d18cf0.chunk.js.map