"use strict";(self.webpackChunkatlas=self.webpackChunkatlas||[]).push([[303],{2583:function(e,t,n){n.d(t,{v:function(){return o}});var s=n(885),r=n(7022),a=n(2469),i=n(6407),l=n(2791),c=n(184);function o(){i.Q.changeLog=i.Q.changeLog.sort((function(e,t){return e.date<t.date})),i.Q.changeLog=i.Q.changeLog.filter((function(e){return void 0===e.project||e.project===i.Q.project_name}));var e=(0,l.useState)(!(i.Q.changeLog.length>5)),t=(0,s.Z)(e,2),n=t[0],o=t[1];return(0,c.jsxs)(r.Z,{children:[i.Q.changeLog.map((function(e,t){return n||t<5?(0,c.jsxs)(a.Z,{variant:0===t?"primary":"secondary",children:[(0,c.jsx)(a.Z.Heading,{children:e.title}),(0,c.jsx)("i",{children:(s=e.date,"".concat(s.substring(8,10),". ").concat({"01":"Januar","02":"Februar","03":"M\xe4rz","04":"April","05":"Mai","06":"Juni","07":"Juli","08":"August","09":"September",10:"Oktober",11:"November",12:"Dezember"}[s.substring(5,7)]," ").concat(s.substring(0,4)))}),e.description]},t):null;var s})),n?null:(0,c.jsx)(a.Z,{style:{cursor:"pointer",marginTop:"100px",textAlign:"center"},variant:"info",onClick:function(){o(!0)},children:"Alle \xc4nderungen anzeigen."})]})}},9303:function(e,t,n){n.r(t),n.d(t,{MainBody:function(){return ke},MainNavBar:function(){return we}});var s,r,a,i,l,c,o,u,d,h,x,p,m,f,j=n(5861),g=n(885),Z=n(7757),v=n.n(Z),b=n(4483),y=n(3174),k=n(4817),w=n(7022),S=n(9249),_=n(2354),z=n(2469),C=n(2791),D=n(2583),E=n(7762),N=n(5671),B=n(3144),F=n(136),I=n(8505),A=n(4849),Q=n(2591),P=n(4775),L=n(6407),O=n(3222),M=n(184),R=function(e){(0,F.Z)(l,e);var t=(0,I.Z)(l);function l(e){var c;(0,N.Z)(this,l),(c=t.call(this,e)).state={item:null,newItemCreated:null,lemmaSearchItems:[["id","ID"]]};var o=function(){var t=(0,j.Z)(v().mark((function t(){var l;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(3545)("./".concat(e.PROJECT_NAME,".js"));case 2:l=t.sent,s=l.LemmaRow,r=l.LemmaHeader,i=l.lemmaSearchItems,a=l.LemmaAsideContent,c.setState({lemmaSearchItems:i()});case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return o(),c}return(0,B.Z)(l,[{key:"render",value:function(){var e=this;return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(k.Z,{fixed:"bottom",bg:"light",children:(0,M.jsxs)(w.Z,{fluid:!0,children:[(0,M.jsx)(k.Z.Collapse,{className:"justify-content-start",children:(0,M.jsx)(k.Z.Text,{children:(0,M.jsx)(O.Rj,{boxName:"lemma",searchQuery:function(t,n){e.searchQuery(t,n)},setupItems:this.state.newItemCreated,searchOptions:this.state.lemmaSearchItems,sortOptions:[['["id"]',"ID"],['["lemma"]',"Wort"]],status:this.state.searchStatus})})}),(0,M.jsxs)(k.Z.Collapse,{className:"justify-content-end",children:[(0,M.jsx)(k.Z.Text,{children:this.state.count>0?(0,M.jsx)(O.C3,{loadPage:function(t){e.loadPage(t)},currentPage:this.state.currentPage,maxPage:this.state.maxPage}):null}),(0,M.jsx)(k.Z.Text,{children:L.Q.access("l_edit")&&(0,M.jsx)(O.vW,{menuItems:[["neues Wort",(0,j.Z)(v().mark((function t(){var n;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Soll ein neues Wort erstellt werden?")){t.next=5;break}return t.next=3,L.Q.lemma.save({lemma_display:"Neues Wort",lemma:"Neues Wort"});case 3:n=t.sent,e.setState({newItemCreated:[{id:0,c:"id",o:"=",v:n}]});case 5:case"end":return t.stop()}}),t)})))]]})})]})]})}),(0,M.jsx)(w.Z,{className:"mainBody",children:(0,M.jsx)(K,{loadMain:function(t,n){e.props.loadMain(t,n)},loadPage:function(t){e.loadPage(t)},currentElements:this.state.currentElements,count:this.state.count,currentPage:this.state.currentPage,maxPage:this.state.maxPage,gridArea:this.state.item?"2/1/2/2":"2/1/2/3",showDetail:function(t){e.setState({item:t})}})}),this.state.item?(0,M.jsx)(W,{item:this.state.item,onUpdate:function(t){e.reloadEntry(t)},onReload:function(){e.loadPage(e.state.currentPage)},onClose:function(){e.setState({item:null})}}):""]})}},{key:"reloadEntry",value:function(){var e=(0,j.Z)(v().mark((function e(t){var n,s,r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.Q.lemma.get({id:t});case 2:n=(n=e.sent)[0],s=this.state.currentElements,r=s.findIndex((function(e){return e.id===n.id})),s[r]=n,this.setState({currentElements:s,item:n});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"searchQuery",value:function(){var e=(0,j.Z)(v().mark((function e(t,n){var s,r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({searchStatus:(0,M.jsx)(A.Z,{animation:"border",size:"sm"})}),e.next=3,L.Q.lemma.search(t,{count:!0,order:n});case 3:return s=e.sent,e.next=6,L.Q.lemma.search(t,{limit:50,order:n});case 6:r=e.sent,s[0].count>1?this.setState({searchStatus:"".concat(s[0].count," Eintr\xe4ge gefunden.")}):1===s[0].count?this.setState({searchStatus:"1 Eintrag gefunden."}):this.setState({searchStatus:"Keine Eintr\xe4ge gefunden."}),this.setState({query:t,queryOrder:n,count:s[0].count,maxPage:Math.floor(s[0].count/50)+1,currentPage:1,currentElements:r,selectionDetail:{ids:[]}});case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadPage",value:function(){var e=(0,j.Z)(v().mark((function e(t){var n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.Q.lemma.search(this.state.query,{limit:50,offset:50*(t-1),order:this.state.queryOrder});case 2:n=e.sent,this.setState({currentPage:t,currentElements:n,selectionDetail:{ids:[]}});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),l}(C.Component),K=function(e){(0,F.Z)(n,e);var t=(0,I.Z)(n);function n(e){var s;return(0,N.Z)(this,n),(s=t.call(this,e)).state={selection:{currentId:null,ids:[]}},s}return(0,B.Z)(n,[{key:"render",value:function(){var e=this;if(this.props.count>0){var t,n=[],a=(0,E.Z)(this.props.currentElements);try{for(a.s();!(t=a.n()).done;){var i=t.value;n.push((0,M.jsx)(s,{lemma:i,loadMain:function(t){e.props.loadMain(t,"zettel")},showDetail:function(t){e.props.showDetail(e.props.currentElements.find((function(e){return e.id===t})))}},i.id))}}catch(l){a.e(l)}finally{a.f()}return(0,M.jsx)("div",{style:{gridArea:this.props.gridArea,padding:"0 10px"},children:(0,M.jsxs)(Q.Z,{striped:!0,width:"100%",children:[(0,M.jsx)("thead",{style:{textAlign:"left"},children:(0,M.jsx)(r,{})}),(0,M.jsx)("tbody",{children:n})]})})}return(0,M.jsx)(O.Km,{})}}]),n}(C.Component),W=function(e){(0,F.Z)(n,e);var t=(0,I.Z)(n);function n(e){var s;return(0,N.Z)(this,n),(s=t.call(this,e)).state={id:s.props.item.id},s}return(0,B.Z)(n,[{key:"render",value:function(){var e=this;return(0,M.jsxs)(P.Z,{show:!0,placement:"end",scroll:!0,backdrop:!1,onHide:function(){e.props.onClose()},children:[(0,M.jsx)(P.Z.Header,{closeButton:!0,children:(0,M.jsxs)(P.Z.Title,{children:["ID ",this.props.item.id]})}),(0,M.jsx)(P.Z.Body,{children:(0,M.jsx)(a,{id:this.state.id,item:this.props.item,onUpdate:function(t){e.props.onUpdate(t)},onClose:function(){e.props.onClose()},onReload:function(){e.props.onReload()}})})]})}},{key:"componentDidUpdate",value:function(){this.state.id!==this.props.item.id&&this.setState({id:this.props.item.id})}}]),n}(C.Component),T=n(7487),J=n(3440),H=n(9743),V=n(2677),G=n(3360),U=function(e){(0,F.Z)(n,e);var t=(0,I.Z)(n);function n(e){var s;return(0,N.Z)(this,n),(s=t.call(this,e)).state={item:null,newItemCreated:null},s}return(0,B.Z)(n,[{key:"render",value:function(){var e=this;return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(k.Z,{fixed:"bottom",bg:"light",children:(0,M.jsxs)(w.Z,{fluid:!0,children:[(0,M.jsx)(k.Z.Collapse,{className:"justify-content-start",children:(0,M.jsx)(k.Z.Text,{children:(0,M.jsx)(O.Rj,{setupItems:this.state.newItemCreated,boxName:"seklit",searchQuery:function(t,n){e.searchQuery(t,n)},searchOptions:[["id","ID"]],sortOptions:[['["id"]',"ID"]],status:this.state.searchStatus})})}),(0,M.jsxs)(k.Z.Collapse,{className:"justify-content-end",children:[(0,M.jsx)(k.Z.Text,{children:this.state.count>0?(0,M.jsx)(O.C3,{loadPage:function(t){e.loadPage(t)},currentPage:this.state.currentPage,maxPage:this.state.maxPage}):null}),(0,M.jsx)(k.Z.Text,{children:L.Q.access("e_edit")&&(0,M.jsx)(O.vW,{menuItems:[["neuer Eintrag",(0,j.Z)(v().mark((function t(){var n;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Soll ein neuer Eintrag erstellt werden?")){t.next=5;break}return t.next=3,L.Q.seklit.save({titel:"neues Werk"});case 3:n=t.sent,e.setState({newItemCreated:[{id:0,c:"id",o:"=",v:n}]});case 5:case"end":return t.stop()}}),t)})))]]})})]})]})}),(0,M.jsx)(w.Z,{className:"mainBody",children:(0,M.jsx)(q,{loadPage:function(t){e.loadPage(t)},currentElements:this.state.currentElements,count:this.state.count,currentPage:this.state.currentPage,maxPage:this.state.maxPage,gridArea:this.state.item?"2/1/2/2":"2/1/2/3",showDetail:function(t){e.setState({item:t})}})}),this.state.item?(0,M.jsx)(Y,{item:this.state.item,onUpdate:function(t){e.reloadEntry(t)},onReload:function(){e.loadPage(e.state.currentPage)},onClose:function(){e.setState({item:null})}}):""]})}},{key:"reloadEntry",value:function(){var e=(0,j.Z)(v().mark((function e(t){var n,s,r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t>0)){e.next=11;break}return e.next=3,L.Q.seklit.get({id:t});case 3:n=(n=e.sent)[0],s=this.state.currentElements,r=s.findIndex((function(e){return e.id===n.id})),s[r]=n,this.setState({currentElements:s,item:n}),e.next=12;break;case 11:this.setState({currentElements:[],item:null});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"searchQuery",value:function(){var e=(0,j.Z)(v().mark((function e(t,n){var s,r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.Q.seklit.search(t,{count:!0,order:n});case 2:return s=e.sent,e.next=5,L.Q.seklit.search(t,{limit:50,order:n});case 5:r=e.sent,s[0].count>1?this.setState({searchStatus:"".concat(s[0].count," Eintr\xe4ge gefunden.")}):1===s[0].count?this.setState({searchStatus:"1 Eintrag gefunden."}):this.setState({searchStatus:"Keine Eintr\xe4ge gefunden."}),this.setState({query:t,queryOrder:n,count:s[0].count,maxPage:Math.floor(s[0].count/50)+1,currentPage:1,currentElements:r,selectionDetail:{ids:[]}});case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadPage",value:function(){var e=(0,j.Z)(v().mark((function e(t){var n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.Q.seklit.search(this.state.query,{limit:50,offset:50*(t-1),order:this.state.queryOrder});case 2:n=e.sent,this.setState({currentPage:t,currentElements:n,selectionDetail:{ids:[]}});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(C.Component),q=function(e){(0,F.Z)(n,e);var t=(0,I.Z)(n);function n(e){var s;return(0,N.Z)(this,n),(s=t.call(this,e)).state={selection:{currentId:null,ids:[]}},s}return(0,B.Z)(n,[{key:"render",value:function(){var e=this;if(this.props.count>0){var t,n=[],s=(0,E.Z)(this.props.currentElements);try{for(s.s();!(t=s.n()).done;){var r=t.value;n.push((0,M.jsxs)("tr",{id:r.id,onDoubleClick:function(t){e.props.showDetail(e.props.currentElements.find((function(e){return e.id===parseInt(t.target.closest("tr").id)})))},children:[(0,M.jsx)("td",{title:"ID: "+r.id,children:r.kennziffer}),(0,M.jsxs)("td",{children:[r.signatur," ",r.alte_signatur?"(".concat(r.alte_signatur,")"):null]}),(0,M.jsxs)("td",{children:[r.name,", ",r.vorname,", ",(0,M.jsx)("b",{children:r.titel}),", ",r.reihe,", ",r.ort," ",r.jahr]}),(0,M.jsxs)("td",{children:[r.weitere_angaben,r.zusatz?" - "+r.zusatz:null]})]},r.id))}}catch(a){s.e(a)}finally{s.f()}return(0,M.jsx)("div",{style:{gridArea:this.props.gridArea,padding:"0 10px"},children:(0,M.jsxs)(Q.Z,{width:"100%",striped:!0,children:[(0,M.jsx)("thead",{style:{textAlign:"left"},children:(0,M.jsxs)("tr",{children:[(0,M.jsx)("th",{width:"10%",children:"Kennziffer"}),(0,M.jsx)("th",{width:"10%",children:"Signatur"}),(0,M.jsx)("th",{width:"60%",children:"Werkbezeichnung"}),(0,M.jsx)("th",{children:"weitere Angaben"})]})}),(0,M.jsx)("tbody",{children:n})]})})}return(0,M.jsx)(O.Km,{})}}]),n}(C.Component),Y=function(e){(0,F.Z)(n,e);var t=(0,I.Z)(n);function n(e){var s;return(0,N.Z)(this,n),(s=t.call(this,e)).state={id:s.props.item.id,kennziffer:s.props.item.kennziffer,signatur:s.props.item.signatur,alte_signatur:s.props.item.alte_signatur,name:s.props.item.name,vorname:s.props.item.vorname,titel:s.props.item.titel,reihe:s.props.item.reihe,weitere_angaben:s.props.item.weitere_angaben,ort:s.props.item.ort,jahr:s.props.item.jahr,zusatz:s.props.item.zusatz},s}return(0,B.Z)(n,[{key:"render",value:function(){var e=this;return(0,M.jsxs)(P.Z,{show:!0,placement:"end",scroll:!0,backdrop:!1,onHide:function(){e.props.onClose()},children:[(0,M.jsx)(P.Z.Header,{closeButton:!0,children:(0,M.jsxs)(P.Z.Title,{children:["ID ",this.state.id]})}),(0,M.jsxs)(P.Z.Body,{children:[(0,M.jsxs)(H.Z,{className:"mb-2",children:[(0,M.jsx)(V.Z,{xs:4,children:"Kennziffer:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)("input",{type:"text",value:this.state.kennziffer?this.state.kennziffer:"",onChange:function(t){e.setState({kennziffer:t.target.value})}})})]}),(0,M.jsxs)(H.Z,{className:"mb-2",children:[(0,M.jsx)(V.Z,{xs:4,children:"Signatur:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)("input",{type:"text",value:this.state.signatur?this.state.signatur:"",onChange:function(t){e.setState({signatur:t.target.value})}})})]}),(0,M.jsxs)(H.Z,{className:"mb-2",children:[(0,M.jsx)(V.Z,{xs:4,children:"alte Signatur:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)("input",{type:"text",value:this.state.alte_signatur?this.state.alte_signatur:"",onChange:function(t){e.setState({alte_signatur:t.target.value})}})})]}),(0,M.jsxs)(H.Z,{className:"mb-2",children:[(0,M.jsx)(V.Z,{xs:4,children:"Name:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)("input",{type:"text",value:this.state.name?this.state.name:"",onChange:function(t){e.setState({name:t.target.value})}})})]}),(0,M.jsxs)(H.Z,{className:"mb-2",children:[(0,M.jsx)(V.Z,{xs:4,children:"Vorname:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)("input",{type:"text",value:this.state.vorname?this.state.vorname:"",onChange:function(t){e.setState({vorname:t.target.value})}})})]}),(0,M.jsxs)(H.Z,{className:"mb-2",children:[(0,M.jsx)(V.Z,{xs:4,children:"Titel:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)("input",{type:"text",value:this.state.titel?this.state.titel:"",onChange:function(t){e.setState({titel:t.target.value})}})})]}),(0,M.jsxs)(H.Z,{className:"mb-2",children:[(0,M.jsx)(V.Z,{xs:4,children:"Reihe:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)("input",{type:"text",value:this.state.reihe?this.state.reihe:"",onChange:function(t){e.setState({reihe:t.target.value})}})})]}),(0,M.jsxs)(H.Z,{className:"mb-2",children:[(0,M.jsx)(V.Z,{xs:4,children:"Ort:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)("input",{type:"text",value:this.state.ort?this.state.ort:"",onChange:function(t){e.setState({ort:t.target.value})}})})]}),(0,M.jsxs)(H.Z,{className:"mb-2",children:[(0,M.jsx)(V.Z,{xs:4,children:"Jahr:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)("input",{type:"text",value:this.state.jahr?this.state.jahr:"",onChange:function(t){e.setState({jahr:t.target.value})}})})]}),(0,M.jsxs)(H.Z,{className:"mb-2",children:[(0,M.jsx)(V.Z,{xs:4,children:"weitere Angaben:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)("input",{type:"text",value:this.state.weitere_angaben?this.state.weitere_angaben:"",onChange:function(t){e.setState({weitere_angaben:t.target.value})}})})]}),(0,M.jsxs)(H.Z,{className:"mb-4",children:[(0,M.jsx)(V.Z,{xs:4,children:"Zusatz:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)("input",{type:"text",value:this.state.zusatz?this.state.zusatz:"",onChange:function(t){e.setState({zusatz:t.target.value})}})})]}),(0,M.jsx)(H.Z,{children:(0,M.jsxs)(V.Z,{children:[(0,M.jsx)(O.YG,{value:"speichern",onClick:(0,j.Z)(v().mark((function t(){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.Q.seklit.save({id:e.state.id,kennziffer:e.state.kennziffer,signatur:e.state.signature,alte_signatur:e.state.alte_signatur,name:e.state.name,vorname:e.state.vorname,titel:e.state.titel,reihe:e.state.reihe,weitere_angaben:e.state.weitere_angaben,ort:e.state.ort,jahr:e.state.jahr,zusatz:e.state.zusatz});case 2:return e.props.onUpdate(e.state.id),t.abrupt("return",{status:!0});case 4:case"end":return t.stop()}}),t)})))}),(0,M.jsx)(G.Z,{variant:"danger",style:{marginLeft:"10px"},onClick:(0,j.Z)(v().mark((function t(){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Soll der Eintrag gel\xf6scht werden? Dieser Schritt kann nicht r\xfcckg\xe4ngig gemacht werden!")){t.next=5;break}return t.next=3,L.Q.seklit.delete(e.state.id);case 3:e.props.onClose(),e.props.onReload();case 5:case"end":return t.stop()}}),t)}))),children:"l\xf6schen"})]})})]})]})}},{key:"componentDidUpdate",value:function(){this.state.id!==this.props.item.id&&this.setState({id:this.props.item.id,kennziffer:this.props.item.kennziffer,signatur:this.props.item.signatur,alte_signatur:this.props.item.alte_signatur,name:this.props.item.name,vorname:this.props.item.vorname,titel:this.props.item.titel,reihe:this.props.item.reihe,weitere_angaben:this.props.item.weitere_angaben,ort:this.props.item.ort,jahr:this.props.item.jahr,zusatz:this.props.item.zusatz})}}]),n}(C.Component),X=function(e){(0,F.Z)(n,e);var t=(0,I.Z)(n);function n(e){var s;return(0,N.Z)(this,n),(s=t.call(this,e)).state={item:null,newItemCreated:null,offset:0},s}return(0,B.Z)(n,[{key:"render",value:function(){var e=this;return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(k.Z,{fixed:"bottom",bg:"light",children:(0,M.jsxs)(w.Z,{fluid:!0,children:[(0,M.jsx)(k.Z.Collapse,{className:"justify-content-start",children:(0,M.jsx)(k.Z.Text,{children:(0,M.jsx)(O.Rj,{setupItems:this.state.newItemCreated,boxName:"ressources",searchQuery:function(t,n){e.searchQuery(t,n)},searchOptions:[["ac_web","Werk"],["work_id","Werk-ID"],["ressource","Ressource-Typ"],["id","ID"],["path","Dateipfad"]],sortOptions:[['["id"]',"ID"],['["label"]',"K\xfcrzel"],['["opus"]',"vrkn. Werk"]],status:this.state.searchStatus})})}),(0,M.jsxs)(k.Z.Collapse,{className:"justify-content-end",children:[(0,M.jsx)(k.Z.Text,{children:this.state.count>0?(0,M.jsx)(O.C3,{loadPage:function(t){e.loadPage(t)},currentPage:this.state.currentPage,maxPage:this.state.maxPage}):null}),(0,M.jsx)(k.Z.Text,{children:L.Q.access("l_edit")&&(0,M.jsx)(O.vW,{menuItems:[["neue Ressource",(0,j.Z)(v().mark((function t(){var n;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Soll eine neue Ressource erstellt werden?")){t.next=5;break}return t.next=3,L.Q.edition.save({ressource:0,editor:"Neue Ressource",year:(new Date).getFullYear()});case 3:n=t.sent,e.setState({newItemCreated:[{id:0,c:"id",o:"=",v:n}]});case 5:case"end":return t.stop()}}),t)})))]]})})]})]})}),(0,M.jsx)(w.Z,{className:"mainBody",children:(0,M.jsx)($,{loadPage:function(t){e.loadPage(t)},currentElements:this.state.currentElements,count:this.state.count,currentPage:this.state.currentPage,maxPage:this.state.maxPage,gridArea:this.state.item?"2/1/2/2":"2/1/2/3",showDetail:function(t){e.setState({item:t})}})}),this.state.item?(0,M.jsx)(ee,{item:this.state.item,onUpdate:function(t){e.reloadEntry(t)},onReload:function(){e.loadPage(e.state.currentPage)},onClose:function(){e.setState({item:null})}}):""]})}},{key:"reloadEntry",value:function(){var e=(0,j.Z)(v().mark((function e(t){var n,s,r,a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t>0)){e.next=11;break}return e.next=3,L.Q.edition.get({id:t});case 3:n=(n=e.sent)[0],s=this.state.currentElements,r=s.findIndex((function(e){return e.id===n.id})),s[r]=n,this.setState({currentElements:s,item:n}),e.next=15;break;case 11:return e.next=13,L.Q.edition.search(this.state.query,{limit:50,offset:this.state.offset,order:this.state.queryOrder});case 13:a=e.sent,this.setState({currentElements:a,item:null});case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"searchQuery",value:function(){var e=(0,j.Z)(v().mark((function e(t,n){var s,r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.Q.edition.search(t,{count:!0,order:n});case 2:return s=e.sent,e.next=5,L.Q.edition.search(t,{limit:50,order:n});case 5:r=e.sent,s[0].count>1?this.setState({searchStatus:"".concat(s[0].count," Eintr\xe4ge gefunden.")}):1===s[0].count?this.setState({searchStatus:"1 Eintrag gefunden."}):this.setState({searchStatus:"Keine Eintr\xe4ge gefunden."}),this.setState({query:t,queryOrder:n,count:s[0].count,maxPage:Math.floor(s[0].count/50)+1,currentPage:1,currentElements:r,selectionDetail:{ids:[]}});case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadPage",value:function(){var e=(0,j.Z)(v().mark((function e(t){var n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.Q.edition.search(this.state.query,{limit:50,offset:50*(t-1),order:this.state.queryOrder});case 2:n=e.sent,this.setState({offset:50*(t-1),currentPage:t,currentElements:n,selectionDetail:{ids:[]}});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(C.Component),$=function(e){(0,F.Z)(n,e);var t=(0,I.Z)(n);function n(e){var s;return(0,N.Z)(this,n),(s=t.call(this,e)).state={selection:{currentId:null,ids:[]}},s}return(0,B.Z)(n,[{key:"render",value:function(){var e=this;if(this.props.count>0){var t,n={0:"Edition (relevant)",1:"Edition (veraltet)",2:"Handschrift",3:"Alter Druck (relevant)",4:"Alter Druck (veraltet)",5:"Sonstiges"},s=[],r=(0,E.Z)(this.props.currentElements);try{for(r.s();!(t=r.n()).done;){var a=t.value,i=a.url;""!==i&&null!==i||(i="/site/argos/"+a.id),s.push((0,M.jsxs)("tr",{id:a.id,onDoubleClick:function(t){e.props.showDetail(e.props.currentElements.find((function(e){return e.id===parseInt(t.target.closest("tr").id)})))},children:[(0,M.jsx)("td",{title:"ID: "+a.id,children:a.label}),(0,M.jsx)("td",{children:n[a.ressource]}),(0,M.jsx)("td",{dangerouslySetInnerHTML:(0,O.rg)(a.opus)}),(0,M.jsxs)("td",{children:[(0,M.jsx)("a",{href:i,target:"_blank",children:"\xf6ffnen"}),a.url?(0,M.jsx)(b.G,{style:{fontSize:"14px",marginLeft:"10px"},icon:y.Xjp}):null]})]},a.id))}}catch(l){r.e(l)}finally{r.f()}return(0,M.jsx)("div",{style:{gridArea:this.props.gridArea,padding:"0 10px"},children:(0,M.jsxs)(Q.Z,{width:"100%",striped:!0,children:[(0,M.jsx)("thead",{style:{textAlign:"left"},children:(0,M.jsxs)("tr",{children:[(0,M.jsx)("th",{width:"20%",children:"K\xfcrzel"}),(0,M.jsx)("th",{width:"20%",children:"Typ"}),(0,M.jsx)("th",{children:"vrkn. Werk"}),(0,M.jsx)("th",{width:"10%",children:"Link"})]})}),(0,M.jsx)("tbody",{children:s})]})})}return(0,M.jsx)(O.Km,{})}}]),n}(C.Component),ee=function(e){(0,F.Z)(n,e);var t=(0,I.Z)(n);function n(e){var s;return(0,N.Z)(this,n),(s=t.call(this,e)).state={id:s.props.item.id,ressource:s.props.item.ressource,work_id:s.props.item.work_id,ac_web:s.props.item.ac_web,editor:s.props.item.editor,year:s.props.item.year,volume:s.props.item.volume,vol_cont:s.props.item.vol_cont,serie:s.props.item.serie,location:s.props.item.location,library:s.props.item.library,signature:s.props.item.signature,comment:s.props.item.comment,path:s.props.item.path,url:s.props.item.url,aspect_ratio:s.props.item.aspect_ratio,bibliography_preview:null},s}return(0,B.Z)(n,[{key:"render",value:function(){var e=this;return(0,M.jsxs)(P.Z,{show:!0,placement:"end",scroll:!0,backdrop:!1,onHide:function(){e.props.onClose()},children:[(0,M.jsx)(P.Z.Header,{closeButton:!0,children:(0,M.jsxs)(P.Z.Title,{children:["ID ",this.state.id]})}),(0,M.jsxs)(P.Z.Body,{children:[(0,M.jsxs)(H.Z,{className:"mb-2",children:[(0,M.jsx)(V.Z,{xs:3,children:"Werk:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)(O.Qc,{value:this.state.ac_web?this.state.ac_web:"",tbl:"work",searchCol:"ac_web",returnCol:"ac_web",onChange:function(t,n){e.setState({ac_web:t,work_id:n}),e.updateBibliography(n)}})})]}),(0,M.jsxs)(H.Z,{className:"mb-2",children:[(0,M.jsx)(V.Z,{xs:3,children:"Alter Dateiname:"}),(0,M.jsx)(V.Z,{children:this.props.item.dir_name})]}),this.state.bibliography_preview&&(0,M.jsxs)(H.Z,{className:"mb-4",children:[(0,M.jsx)(V.Z,{xs:3,children:"Biblio-graphische Angaben:"}),(0,M.jsx)(V.Z,{style:{fontSize:"90%",backgroundColor:"var(--bs-gray-100"},children:this.state.bibliography_preview})]}),(0,M.jsxs)(H.Z,{className:"mb-2",children:[(0,M.jsx)(V.Z,{xs:3,children:"Ressource:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)(O.SA,{options:[[0,"Edition (relevant)"],[1,"Edition (veraltet)"],[2,"Handschrift"],[3,"Alter Druck (relevant)"],[4,"Alter Druck (veraltet)"],[5,"Sonstiges"]],value:this.state.ressource?this.state.ressource:"",onChange:function(t){e.setState({ressource:parseInt(t.target.value)})}})})]}),0===this.state.ressource||1===this.state.ressource||5===this.state.ressource?[(0,M.jsxs)(H.Z,{className:"mb-2",children:[(0,M.jsx)(V.Z,{xs:3,children:"Editor:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)("input",{type:"text",style:{width:"100%"},value:this.state.editor?this.state.editor:"",onChange:function(t){e.setState({editor:t.target.value})}})})]},"0"),(0,M.jsxs)(H.Z,{className:"mb-2",children:[(0,M.jsx)(V.Z,{xs:3,children:"Jahr:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)("input",{type:"text",style:{width:"100%"},value:this.state.year?this.state.year:"",onChange:function(t){e.setState({year:t.target.value})}})})]},"1"),(0,M.jsxs)(H.Z,{className:"mb-2",children:[(0,M.jsx)(V.Z,{xs:3,children:"Band:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)("input",{type:"text",style:{width:"100%"},value:this.state.volume?this.state.volume:"",onChange:function(t){e.setState({volume:t.target.value})}})})]},"2"),(0,M.jsxs)(H.Z,{className:"mb-2",children:[(0,M.jsx)(V.Z,{xs:3,children:"Bandinhalt:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)("input",{type:"text",style:{width:"100%"},value:this.state.vol_cont?this.state.vol_cont:"",onChange:function(t){e.setState({vol_cont:t.target.value})}})})]},"3"),(0,M.jsxs)(H.Z,{className:"mb-4",children:[(0,M.jsx)(V.Z,{xs:3,children:"Reihe:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)(O.SA,{options:[[0,""],[1,"Migne PL"],[2,"ASBen."],[3,"ASBoll."],[4,"AnalBoll."],[5,"Mon. Boica"],[6,"Ma. Schatzverzeichnisse"],[7,"Ma. Bibliothekskataloge"]],value:this.state.serie?this.state.serie:"",onChange:function(t){e.setState({serie:parseInt(t.target.value)})}})})]},"4")]:null,2===this.state.ressource?[(0,M.jsxs)(H.Z,{className:"mb-2",children:[(0,M.jsx)(V.Z,{xs:3,children:"Stadt:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)("input",{type:"text",style:{width:"100%"},value:this.state.location?this.state.location:"",onChange:function(t){e.setState({location:t.target.value})}})})]},"5"),(0,M.jsxs)(H.Z,{className:"mb-2",children:[(0,M.jsx)(V.Z,{xs:3,children:"Bibliothek:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)("input",{type:"text",style:{width:"100%"},value:this.state.library?this.state.library:"",onChange:function(t){e.setState({library:t.target.value})}})})]},"6"),(0,M.jsxs)(H.Z,{className:"mb-4",children:[(0,M.jsx)(V.Z,{xs:3,children:"Signatur:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)("input",{type:"text",style:{width:"100%"},value:this.state.signature?this.state.signature:"",onChange:function(t){e.setState({signature:t.target.value})}})})]},"7")]:null,3===this.state.ressource||4===this.state.ressource?[(0,M.jsxs)(H.Z,{className:"mb-2",children:[(0,M.jsx)(V.Z,{xs:3,children:"Drucker:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)("input",{type:"text",style:{width:"100%"},value:this.state.editor?this.state.editor:"",onChange:function(t){e.setState({editor:t.target.value})}})})]},"8"),(0,M.jsxs)(H.Z,{className:"mb-2",children:[(0,M.jsx)(V.Z,{xs:3,children:"Ort:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)("input",{type:"text",style:{width:"100%"},value:this.state.location?this.state.location:"",onChange:function(t){e.setState({location:t.target.value})}})})]},"9"),(0,M.jsxs)(H.Z,{className:"mb-4",children:[(0,M.jsx)(V.Z,{xs:3,children:"Jahr:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)("input",{type:"text",style:{width:"100%"},value:this.state.year?this.state.year:"",onChange:function(t){e.setState({year:t.target.value})}})})]},"10")]:null,(0,M.jsxs)(H.Z,{className:"mb-2",children:[(0,M.jsx)(V.Z,{xs:3,children:"Kommentar:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)("textarea",{style:{width:"267px",height:"100px"},value:this.state.comment?this.state.comment:"",onChange:function(t){e.setState({comment:t.target.value})}})})]}),(0,M.jsxs)(H.Z,{className:"mb-2",children:[(0,M.jsx)(V.Z,{xs:3,children:"Dateipfad:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)("input",{type:"text",style:{width:"100%"},value:this.state.path?this.state.path:"",onChange:function(t){e.setState({path:t.target.value})}})})]}),(0,M.jsxs)(H.Z,{className:"mb-4",children:[(0,M.jsxs)(V.Z,{xs:3,children:["Link:",(0,M.jsx)("br",{}),(0,M.jsx)("small",{children:"(externe Quellen)"})]}),(0,M.jsx)(V.Z,{children:(0,M.jsx)("input",{type:"text",style:{width:"100%"},value:this.state.url?this.state.url:"",onChange:function(t){e.setState({url:t.target.value})}})})]}),(0,M.jsxs)(H.Z,{className:"mb-4",children:[(0,M.jsx)(V.Z,{xs:3,children:"Seiten-verh\xe4ltnis:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)("input",{type:"text",style:{width:"100%"},value:this.state.aspect_ratio?this.state.aspect_ratio:"",onChange:function(t){e.setState({aspect_ratio:t.target.value.substring(0,5)})}})})]}),(0,M.jsx)(H.Z,{className:"mb-2",children:(0,M.jsxs)(V.Z,{children:[(0,M.jsx)(O.YG,{value:"speichern",onClick:(0,j.Z)(v().mark((function t(){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e.state.ressource&&1!==e.state.ressource&&5!==e.state.ressource||e.state.serie||e.state.editor&&e.state.year){t.next=4;break}return t.abrupt("return",{status:!1,error:"Geben Sie den Editor und das Jahr ein."});case 4:return t.next=6,L.Q.edition.save({id:e.state.id,work_id:e.state.work_id,ressource:e.state.ressource,editor:e.state.editor,year:e.state.year,volume:e.state.volume,vol_cont:e.state.vol_cont,serie:e.state.serie,comment:e.state.comment,location:e.state.location,library:e.state.library,signature:e.state.signature,path:e.state.path,url:e.state.url,aspect_ratio:e.state.aspect_ratio});case 6:return e.props.onUpdate(e.state.id),t.abrupt("return",{status:!0});case 8:case"end":return t.stop()}}),t)})))}),(0,M.jsx)(G.Z,{variant:"danger",style:{marginLeft:"20px"},onClick:(0,j.Z)(v().mark((function t(){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Soll die Ressource wirklich gel\xf6scht werden? Dieser Schritt kann nicht r\xfcckg\xe4ngig gemacht werden!")){t.next=5;break}return t.next=3,L.Q.edition.delete(e.state.id);case 3:e.props.onUpdate(null),e.props.onReload();case 5:case"end":return t.stop()}}),t)}))),children:"l\xf6schen"})]})})]})]})}},{key:"componentDidMount",value:function(){this.updateBibliography(this.props.item.work_id)}},{key:"componentDidUpdate",value:function(){this.state.id!==this.props.item.id&&(this.updateBibliography(this.props.item.work_id),this.setState({id:this.props.item.id,ressource:this.props.item.ressource,work_id:this.props.item.work_id,ac_web:this.props.item.ac_web,editor:this.props.item.editor,year:this.props.item.year,volume:this.props.item.volume,vol_cont:this.props.item.vol_cont,serie:this.props.item.serie,location:this.props.item.location,library:this.props.item.library,signature:this.props.item.signature,comment:this.props.item.comment,path:this.props.item.path,url:this.props.item.url,aspect_ratio:this.props.item.aspect_ratio}))}},{key:"updateBibliography",value:function(){var e=(0,j.Z)(v().mark((function e(t){var n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t>0)){e.next=5;break}return e.next=3,L.Q.work.get({id:t},{select:["bibliography"]});case 3:(n=e.sent).length>0?this.setState({bibliography_preview:n[0].bibliography}):this.setState({bibliography_preview:null});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(C.Component),te=n(8491),ne=n(9485),se=n(1734),re=n(3350),ae=(n(6546),n(9683)),ie=function(e){(0,F.Z)(n,e);var t=(0,I.Z)(n);function n(e){var s;return(0,N.Z)(this,n),(s=t.call(this,e)).state={zettel_process:null,lemma_letters:null,ressource_work:null},s}return(0,B.Z)(n,[{key:"render",value:function(){var e=this,t=null;if(this.state.zettel_process){var n=[],s={labels:["abgeschlossen","nur Lemma","unbearbeitet"],datasets:[{label:"# of Votes",data:this.state.zettel_process,backgroundColor:["#114B79","#347F9F","#EAF2F3"],borderColor:["#1B3B6F","#065A82","#E8F1F2"],borderWidth:1}]};n.push((0,M.jsxs)("div",{style:{margin:"auto",marginBottom:"80px",width:"450px",height:"450px"},children:[(0,M.jsx)("h4",{children:"nach Bearbeitungsstand"}),(0,M.jsx)(ae.by,{options:{plugins:{legend:{position:"bottom"}}},data:s})]},"1"));var r={labels:["verzetteltes Material","Exzerpt","Index","Literatur","Index (unkl. Werk)","Notiz","kein Typ"],datasets:[{label:"# of Votes",data:this.state.zettel_types,backgroundColor:["#114B79","#347F9F","#8FC9D9","#D2EFF4","#EAF2F3","#EFEFEF","#FFFFFF"],borderColor:["#1B3B6F","#065A82","#61A4BC","#BCEDF6","#E8F1F2","#EEEEEE","#EFEFEF"],borderWidth:1}]};n.push((0,M.jsxs)("div",{style:{margin:"auto",marginBottom:"80px",width:"450px",height:"450px"},children:[(0,M.jsx)("h4",{children:"nach Typen"}),(0,M.jsx)(ae.by,{options:{plugins:{legend:{position:"bottom"}}},data:r})]},"2"));var a={labels:["2020","2021","2022"],datasets:[{label:"ver\xe4ndert",data:this.state.zettel_changed,backgroundColor:["#114B79"],borderColor:["#114B79"],borderWidth:1,type:"line"},{label:"erstellt",data:this.state.zettel_created,backgroundColor:["#347F9F"],borderColor:["#347F9F"],borderWidth:1}]};n.push((0,M.jsxs)("div",{style:{marginBottom:"80px",width:"100%",height:"400px"},children:[(0,M.jsx)("h4",{children:"nach Jahren"}),(0,M.jsx)(ae.$Q,{options:{aspectRatio:!1,plugins:{legend:{display:!0,position:"bottom"}}},data:a})]},"3"));var i=["Jan.","Feb.","M\xe4r.","Apr.","Mai","Jun.","Jul.","Aug.","Sep.","Okt.","Nov.","Dez."];i.splice((new Date).getMonth()+1);var l={labels:i,datasets:[{label:"ver\xe4ndert",data:this.state.zettel_changed_current,backgroundColor:["#114B79"],borderColor:["#114B79"],borderWidth:1,type:"line"},{label:"erstellt",data:this.state.zettel_created_current,backgroundColor:["#347F9F"],borderColor:["#347F9F"],borderWidth:1}]};n.push((0,M.jsxs)("div",{style:{marginBottom:"80px",width:"100%",height:"400px"},children:[(0,M.jsx)("h4",{children:"in diesem Jahr"}),(0,M.jsx)(ae.$Q,{options:{aspectRatio:!1,plugins:{legend:{display:!0,position:"bottom"}}},data:l})]},"4")),t=(0,M.jsx)("div",{children:n})}var c=null;if(this.state.lemma_letters){var o=[],u={labels:["A","B","C","D","E","F","G","H","I","K","L","M","N","O","P","Q","R","S","T","U","V","X","Y","Z"],datasets:[{label:"",data:this.state.lemma_letters,backgroundColor:["#114B79","#347F9F","#8FC9D9","#D2EFF4","#EAF2F3"],borderColor:["#1B3B6F","#065A82","#61A4BC","#BCEDF6","#E8F1F2"],borderWidth:1}]};o.push((0,M.jsxs)("div",{style:{margin:"auto",marginBottom:"80px",width:"450px",height:"450px"},children:[(0,M.jsx)("h4",{children:"nach Buchstaben"}),(0,M.jsx)(ae.by,{options:{plugins:{legend:{display:!1,position:"bottom"}}},data:u})]},"1"));var d={labels:["relevant","nicht relevant"],datasets:[{label:"",data:this.state.lemma_mlw,backgroundColor:["#114B79","#EAF2F3"],borderColor:["#1B3B6F","#E8F1F2"],borderWidth:1}]};o.push((0,M.jsxs)("div",{style:{margin:"auto",marginBottom:"80px",width:"450px",height:"450px"},children:[(0,M.jsx)("h4",{children:"nach Relevanz f\xfcrs W\xf6rterbuch"}),(0,M.jsx)(ae.by,{options:{plugins:{legend:{display:!0,position:"bottom"}}},data:d})]},"2")),c=(0,M.jsx)("div",{style:{display:"flex",flexWrap:"wrap"},children:o})}var h=null;if(this.state.ressource_work){var x=[],p={labels:["mit Volltext und pdf","nur mit pdf","ohne pdf und Volltext","nicht in Benutzung"],datasets:[{label:"",data:this.state.ressource_work,backgroundColor:["#114B79","#347F9F","#EAF2F3","#FFFFFF"],borderColor:["#1B3B6F","#065A82","#E8F1F2","#EFEFEF"],borderWidth:1}]};x.push((0,M.jsxs)("div",{style:{margin:"auto",marginBottom:"80px",width:"450px",height:"450px"},children:[(0,M.jsx)("h4",{children:"Werke nach Volltext und pdfs"}),(0,M.jsx)(ae.by,{options:{plugins:{legend:{position:"bottom"}}},data:p})]},"1")),h=(0,M.jsx)("div",{style:{display:"flex",flexWrap:"wrap"},children:x})}return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(k.Z,{fixed:"bottom",bg:"light",children:(0,M.jsx)(w.Z,{fluid:!0,children:(0,M.jsx)(k.Z.Collapse,{className:"justify-content-end",children:(0,M.jsx)(k.Z.Text,{children:L.Q.access("l_edit")&&(0,M.jsx)(O.vW,{menuItems:[["Statistik aktualisieren",(0,j.Z)(v().mark((function t(){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Sollen die Statistik aktualisiert werden? Dieser Prozess dauert ca. 30 Sekunden.")){t.next=10;break}return t.next=3,L.Q.exec("statistics_update");case 3:if(200!==t.sent){t.next=9;break}return e.getNumbers(),t.abrupt("return",{status:!0});case 9:return t.abrupt("return",{status:!1,error:"Die Aktualisierung war nicht erfolgreich."});case 10:case"end":return t.stop()}}),t)})))]]})})})})}),(0,M.jsxs)(w.Z,{className:"mainBody",children:[(0,M.jsxs)(ne.Z,{defaultActiveKey:"lemma",className:"mb-3",children:[(0,M.jsx)(se.Z,{eventKey:"lemma",title:"Lemma",children:c}),(0,M.jsx)(se.Z,{eventKey:"zettel",title:"Zettel",children:t}),(0,M.jsx)(se.Z,{eventKey:"ressource",title:"Werke und Ressourcen",children:h})]}),(0,M.jsx)("div",{style:{float:"right",color:"var(--bs-gray-400"},children:this.state.last_updated})]})]})}},{key:"componentDidMount",value:function(){this.getNumbers()}},{key:"getNumbers",value:function(){var e=(0,j.Z)(v().mark((function e(){var t;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.Q.statistics.getAll();case 2:t=e.sent,this.setState({last_updated:JSON.parse(t.find((function(e){return"last_updated"===e.name})).data),zettel_process:JSON.parse(t.find((function(e){return"zettel_process"===e.name})).data),zettel_types:JSON.parse(t.find((function(e){return"zettel_type"===e.name})).data),zettel_created:JSON.parse(t.find((function(e){return"zettel_created"===e.name})).data),zettel_changed:JSON.parse(t.find((function(e){return"zettel_changed"===e.name})).data),zettel_created_current:JSON.parse(t.find((function(e){return"zettel_created_current"===e.name})).data),zettel_changed_current:JSON.parse(t.find((function(e){return"zettel_changed_current"===e.name})).data),lemma_letters:JSON.parse(t.find((function(e){return"lemma_letter"===e.name})).data),lemma_mlw:JSON.parse(t.find((function(e){return"lemma_mlw"===e.name})).data),ressource_work:JSON.parse(t.find((function(e){return"ressource_work"===e.name})).data)});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(C.Component),le=function(e){(0,F.Z)(n,e);var t=(0,I.Z)(n);function n(e){var s;return(0,N.Z)(this,n),(s=t.call(this,e)).state={ocrJobs:[],faszikelJobs:[],users:[],ocrDisplayAll:!1},s}return(0,B.Z)(n,[{key:"render",value:function(){var e=this,t="";return L.Q.access("ocr_jobs")?t="o":L.Q.access("faszikel")?t="d":L.Q.access("admin")&&(t="a"),(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(w.Z,{className:"mainBody",children:(0,M.jsxs)(ne.Z,{defaultActiveKey:t,className:"mb-5",children:[L.Q.access("ocr_jobs")&&(0,M.jsxs)(se.Z,{eventKey:"o",title:"ocr-Auftr\xe4ge",style:{padding:"0 25%"},children:[(0,M.jsx)(H.Z,{className:"mb-2",children:(0,M.jsx)(V.Z,{children:"Hier finden Sie die auf dem Server laufenden und abgeschlossenen Auftr\xe4ge zur ocr-Erkennung."})}),(0,M.jsx)(H.Z,{children:(0,M.jsxs)(V.Z,{children:[(0,M.jsx)(O.YG,{value:"neuer Zettel-Auftrag aufgeben",onClick:(0,j.Z)(v().mark((function t(){var n;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.Q.exec("ocr_job");case 2:if(200!==(n=t.sent)){t.next=10;break}return t.next=6,(0,O._v)(1e3);case 6:return e.loadOcrJobs(),t.abrupt("return",{status:!0});case 10:if(409!==n){t.next=14;break}return t.abrupt("return",{status:!1,error:"Es ist bereits ein Auftrag aktiv! Warten Sie, bis dieser abgeschlossen ist."});case 14:return t.abrupt("return",{status:!1,error:"Es ist ein Fehler aufgetreten."});case 15:case"end":return t.stop()}}),t)})))}),(0,M.jsx)(O.YG,{style:{float:"right"},value:"neuer Scan-Auftrag aufgeben",onClick:(0,j.Z)(v().mark((function t(){var n;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.Q.exec("ocr_job_scans");case 2:if(200!==(n=t.sent)){t.next=10;break}return t.next=6,(0,O._v)(1e3);case 6:return e.loadOcrJobs(),t.abrupt("return",{status:!0});case 10:if(409!==n){t.next=14;break}return t.abrupt("return",{status:!1,error:"Es ist bereits ein Auftrag aktiv! Warten Sie, bis dieser abgeschlossen ist."});case 14:return t.abrupt("return",{status:!1,error:"Es ist ein Fehler aufgetreten."});case 15:case"end":return t.stop()}}),t)})))})]})}),(0,M.jsx)(H.Z,{children:(0,M.jsx)(V.Z,{children:(0,M.jsxs)(Q.Z,{striped:!0,width:"100%",children:[(0,M.jsx)("thead",{children:(0,M.jsxs)("tr",{children:[(0,M.jsx)("th",{children:"Datum"}),(0,M.jsx)("th",{children:"Objekte"}),(0,M.jsx)("th",{children:"Status"}),(0,M.jsx)("th",{children:"Gesamtauftrag"}),(0,M.jsx)("th",{children:"bearbeitet"})]})}),(0,M.jsx)("tbody",{children:this.state.ocrJobs.map((function(t,n){if(e.state.ocrDisplayAll||n<12){var s=(0,M.jsx)("td",{className:"text-primary",children:"aktiv"});return 1===t.finished?s=(0,M.jsx)("td",{className:"text-secondary",children:"beendet"}):new Date-(0,O.SE)(t.u_date)>18e5&&(s=(0,M.jsx)("td",{className:"text-warning",children:"inaktiv"})),(0,M.jsxs)("tr",{children:[(0,M.jsx)("td",{children:t.c_date.substring(0,10)}),(0,M.jsx)("td",{children:t.source}),s,(0,M.jsx)("td",{children:t.total}),(0,M.jsxs)("td",{children:[Math.round(1e3/t.total*t.count)/10,"%"]})]},t.id)}return null}))})]})})}),this.state.ocrDisplayAll?null:(0,M.jsx)(z.Z,{style:{cursor:"pointer",marginTop:"50px",textAlign:"center"},variant:"secondary",onClick:function(){e.setState({ocrDisplayAll:!0})},children:"Alle Eintr\xe4ge anzeigen."})]}),L.Q.access("faszikel")&&(0,M.jsxs)(se.Z,{eventKey:"d",title:"Druckausgabe",style:{padding:"0 25%"},children:[(0,M.jsx)(H.Z,{className:"mb-2",children:(0,M.jsx)(V.Z,{children:"Hier finden Sie die auf dem Server laufenden und abgeschlossenen Auftr\xe4ge zum Erstellen der Druckausgabe."})}),(0,M.jsx)(H.Z,{children:(0,M.jsx)(V.Z,{children:(0,M.jsx)(Q.Z,{striped:!0,width:"100%",children:(0,M.jsx)("tbody",{children:this.state.faszikelJobs.map((function(e){if(e.log){var t=e.date.split("");t[10]=" ",t[13]=":",t[16]=":";var n=t.join("").substring(0,19);return(0,M.jsxs)("tr",{style:{verticalAlign:"top"},children:[(0,M.jsxs)("td",{style:{padding:"10px 0px"},children:[(0,M.jsx)("b",{children:e.name?e.name.substring(0,e.name.length-4):(0,M.jsx)("i",{children:"Eintrag"})}),(0,M.jsx)("br",{}),(0,M.jsx)("i",{className:"minorTxt",children:n})]}),(0,M.jsx)("td",{children:e.name?(0,M.jsx)("a",{target:"_blank",href:"/file/faszikel/".concat(e.date,"/").concat(e.name),children:"pdf"}):null}),(0,M.jsx)("td",{children:(0,M.jsx)("a",{target:"_blank",href:"/file/faszikel/".concat(e.date,"/zip"),children:"Artikel"})}),(0,M.jsx)("td",{children:(0,M.jsx)("a",{target:"_blank",href:"/file/faszikel/".concat(e.date,"/log"),children:"log-Datei"})})]})}return(0,M.jsxs)("tr",{style:{verticalAlign:"top"},children:[(0,M.jsx)("td",{style:{padding:"10px 0px"},children:(0,M.jsx)("b",{children:"Neuer Auftrag in Bearbeitung"})}),(0,M.jsx)("td",{}),(0,M.jsx)("td",{})]})}))})})})})]}),L.Q.access("admin")&&(0,M.jsx)(se.Z,{eventKey:"a",title:"Kontenverwaltung",style:{padding:"0 20%"},children:(0,M.jsxs)(Q.Z,{striped:!0,width:"100%",children:[(0,M.jsx)("thead",{style:{textAlign:"left"},children:(0,M.jsxs)("tr",{children:[(0,M.jsx)("th",{width:"25%",children:"Name"}),(0,M.jsx)("th",{width:"30%",children:"Rechte"}),(0,M.jsx)("th",{width:"35%",children:"Browser"}),(0,M.jsx)("th",{width:"10%",children:"Aktiv"})]})}),(0,M.jsx)("tbody",{children:this.state.users.map((function(t){return(0,M.jsxs)("tr",{children:[(0,M.jsx)("td",{children:(0,M.jsxs)("a",{className:"text-dark",onClick:function(){e.setState({item:t})},children:[t.first_name," ",t.last_name]})}),(0,M.jsx)("td",{children:JSON.parse(t.access).join(", ")}),(0,M.jsx)("td",{children:t.agent}),(0,M.jsx)("td",{children:t.session_last_active&&new Date-(0,O.SE)(t.session_last_active)<18e5?(0,M.jsx)(b.G,{icon:y.enB,color:"gold",style:{fontSize:"25px",marginLeft:"20px"}}):(0,M.jsx)(b.G,{icon:y.DBF,color:"silver",style:{fontSize:"20px",marginLeft:"20px"}})})]},t.id)}))})]})})]})}),this.state.item&&(0,M.jsx)(ce,{onReload:function(){e.loadUsers()},onClose:function(){e.setState({item:null})},item:this.state.item,onUpdate:function(e){}})]})}},{key:"componentDidMount",value:function(){L.Q.access("admin")&&this.loadUsers(),L.Q.access("ocr_jobs")&&this.loadOcrJobs(),L.Q.access("faszikel")&&this.loadFaszikelJobs()}},{key:"loadFaszikelJobs",value:function(){var e=(0,j.Z)(v().mark((function e(){var t;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({faszikelJobs:[]}),e.next=3,L.Q.exec("get_faszikel_jobs",!0);case 3:t=e.sent,this.setState({faszikelJobs:t});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadOcrJobs",value:function(){var e=(0,j.Z)(v().mark((function e(){var t;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({ocrJobs:[]}),e.next=3,L.Q.ocr_jobs.getAll();case 3:(t=e.sent).sort((function(e,t){return e.c_date<t.c_date})),this.setState({ocrJobs:t});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadUsers",value:function(){var e=(0,j.Z)(v().mark((function e(){var t;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({users:[]}),e.next=3,L.Q.user.getAll({order:["last_name"]});case 3:t=e.sent,this.setState({users:t});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(C.Component),ce=function(e){(0,F.Z)(n,e);var t=(0,I.Z)(n);function n(e){var s;return(0,N.Z)(this,n),(s=t.call(this,e)).state={access:JSON.parse(s.props.item.access)},s}return(0,B.Z)(n,[{key:"render",value:function(){for(var e=this,t=[],n=function(){var n=(0,g.Z)(r[s],2),a=n[0],i=n[1],l="";e.state.access.includes(a)&&(l="accessMarked"),t.push((0,M.jsx)("div",{style:{cursor:"pointer"},className:l,onClick:function(){var t=e.state.access;t.includes(a)?t=t.map((function(e){if(e!=a)return e})):t.push(a),e.setState({access:t})},children:i},a))},s=0,r=Object.entries({auth:"Profil aktiviert",admin:"Adminrechte",o_view:"Kommentarspalte (opera-Listen)",o_edit:"opera-Listen bearbeiten",z_add:"Zettel importieren",z_edit:"Zettel bearbeiten",l_edit:"Lemma-Liste bearbeiten",library:"Zugriff auf Bibliothek",e_edit:"Bibliothek bearbeiten",setup:"Zugriff auf Datenbanksetup",module:"Zugriff \xfcber Python-Modul",editor:"Zugriff auf Lemmastrecken-Editor",comment:"Zugriff auf Kommentarfunktion",comment_moderator:"Kommentare moderieren",faszikel:"Faszikel konvertieren",ocr_jobs:"OCR-Auftr\xe4ge aufgeben"});s<r.length;s++)n();return(0,M.jsxs)(P.Z,{show:!0,placement:"end",scroll:!0,backdrop:!1,onHide:function(){e.props.onClose()},children:[(0,M.jsx)(P.Z.Header,{closeButton:!0,children:(0,M.jsxs)(P.Z.Title,{children:[this.props.item.first_name," ",this.props.item.last_name," (ID ",this.props.item.id,")"]})}),(0,M.jsx)(P.Z.Body,{children:(0,M.jsxs)(w.Z,{children:[(0,M.jsx)(H.Z,{className:"mb-1",children:(0,M.jsxs)(V.Z,{children:["Am ",this.props.item.session_last_active," zuletzt online."]})}),(0,M.jsx)(H.Z,{className:"mb-3",children:(0,M.jsx)(V.Z,{style:{border:"1px solid var(--bs-secondary)",borderRadius:"2px",color:"var(--bs-secondary)",margin:"10px 0",padding:"10px"},children:this.props.item.agent})}),(0,M.jsx)(H.Z,{children:(0,M.jsx)(V.Z,{children:(0,M.jsx)("h4",{children:"Rechte"})})}),(0,M.jsx)(H.Z,{className:"mb-3",children:(0,M.jsx)(V.Z,{style:{border:"1px solid var(--bs-secondary)",borderRadius:"2px",color:"var(--bs-secondary)",margin:"10px 0",padding:"10px"},children:t})}),(0,M.jsxs)(H.Z,{children:[(0,M.jsx)(V.Z,{children:(0,M.jsx)(O.YG,{value:"speichern",onClick:function(){return L.Q.user.save({id:e.props.item.id,access:JSON.stringify(e.state.access)}),e.props.onReload(),{status:!0}}})}),(0,M.jsx)(V.Z,{children:(0,M.jsx)(G.Z,{variant:"danger",onClick:(0,j.Z)(v().mark((function t(){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Soll der Account wirklich gel\xf6scht werden? Dieser Schritt kann nicht mehr r\xfcckg\xe4ngig gemacht werden!")){t.next=5;break}return t.next=3,L.Q.user.delete(e.props.item.id);case 3:e.props.onClose(),e.props.onReload();case 5:case"end":return t.stop()}}),t)}))),children:"Account l\xf6schen"})})]})]})})]})}},{key:"componentDidUpdate",value:function(e){e.item.id!=this.props.item.id&&this.setState({access:JSON.parse(this.props.item.access)})}}]),n}(C.Component),oe=function(e){(0,F.Z)(n,e);var t=(0,I.Z)(n);function n(e){var s;return(0,N.Z)(this,n),(s=t.call(this,e)).state={tab:"res",workLst:[],pathLst:[],scanWork:"",scanWorkId:null,scanType:0,scanEditor:null,scanYear:null,scanVolume:null,scanVolumeContent:null,scanSerie:null,scanLibrary:null,scanLocation:null,scanSignature:null,scanFiles:null,ocrRessource:"",ocrRessourceId:null,ocrFiles:null,zettelLetter:"A",zettelType:0,zettelFiles:null,zettelEditors:[[L.Q.me.id,L.Q.me.last_name]],zettelEditorSelected:L.Q.me.id,zettelSuccess:null},s}return(0,B.Z)(n,[{key:"render",value:function(){var e=this;return(0,M.jsx)(w.Z,{className:"mainBody",children:(0,M.jsxs)(ne.Z,{defaultActiveKey:"r",className:"mb-5",children:[(0,M.jsxs)(se.Z,{eventKey:"r",title:"Ressource",style:{padding:"0 25%"},children:[(0,M.jsxs)(H.Z,{className:"mb-2",children:[(0,M.jsx)(V.Z,{xs:3,children:"Werk:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)(O.Qc,{style:{width:"100%"},value:this.state.scanWork,tbl:"work",searchCol:"ac_web",returnCol:"ac_web",onChange:function(){var t=(0,j.Z)(v().mark((function t(n,s){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({scanWork:n,scanWorkId:s});case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()})})]}),(0,M.jsxs)(H.Z,{className:"mb-4",children:[(0,M.jsx)(V.Z,{xs:3,children:"Ressource:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)(O.SA,{options:[[0,"Edition (relevant)"],[1,"Edition (veraltet)"],[2,"Handschrift"],[3,"Alter Druck (relevant)"],[4,"Alter Druck (veraltet)"],[5,"Sonstiges"]],onChange:function(t){e.setState({scanType:parseInt(t.target.value)})}})})]}),0===this.state.scanType||1===this.state.scanType||5===this.state.scanType?[(0,M.jsxs)(H.Z,{className:"mb-2",children:[(0,M.jsx)(V.Z,{xs:3,children:"Editor:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)("input",{type:"text",style:{width:"100%"},onChange:function(t){e.setState({scanEditor:t.target.value})}})})]},"0"),(0,M.jsxs)(H.Z,{className:"mb-2",children:[(0,M.jsx)(V.Z,{xs:3,children:"Jahr:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)("input",{type:"text",style:{width:"100%"},onChange:function(t){e.setState({scanYear:t.target.value})}})})]},"1"),(0,M.jsxs)(H.Z,{className:"mb-2",children:[(0,M.jsx)(V.Z,{xs:3,children:"Band:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)("input",{type:"text",style:{width:"100%"},onChange:function(t){e.setState({scanVolume:t.target.value})}})})]},"2"),(0,M.jsxs)(H.Z,{className:"mb-2",children:[(0,M.jsx)(V.Z,{xs:3,children:"Bandinhalt:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)("input",{type:"text",style:{width:"100%"},onChange:function(t){e.setState({scanVolumeContent:t.target.value})}})})]},"3"),(0,M.jsxs)(H.Z,{className:"mb-4",children:[(0,M.jsx)(V.Z,{xs:3,children:"Reihe:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)(O.SA,{options:[[0,""],[1,"Migne PL"],[2,"ASBen."],[3,"ASBoll."],[4,"AnalBoll."],[5,"Mon. Boica"],[6,"Ma. Schatzverzeichnisse"],[7,"Ma. Bibliothekskataloge"]],onChange:function(t){e.setState({scanSerie:parseInt(t.target.value)})}})})]},"4")]:null,2===this.state.scanType?[(0,M.jsxs)(H.Z,{className:"mb-2",children:[(0,M.jsx)(V.Z,{xs:3,children:"Stadt:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)("input",{type:"text",style:{width:"100%"},onChange:function(t){e.setState({scanLocation:t.target.value})}})})]},"5"),(0,M.jsxs)(H.Z,{className:"mb-2",children:[(0,M.jsx)(V.Z,{xs:3,children:"Bibliothek:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)("input",{type:"text",style:{width:"100%"},onChange:function(t){e.setState({scanLibrary:t.target.value})}})})]},"6"),(0,M.jsxs)(H.Z,{className:"mb-4",children:[(0,M.jsx)(V.Z,{xs:3,children:"Signatur:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)("input",{type:"text",style:{width:"100%"},onChange:function(t){e.setState({scanSignature:t.target.value})}})})]},"7")]:null,3===this.state.scanType||4===this.state.scanType?[(0,M.jsxs)(H.Z,{className:"mb-2",children:[(0,M.jsx)(V.Z,{xs:3,children:"Drucker:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)("input",{type:"text",style:{width:"100%"},onChange:function(t){e.setState({scanEditor:t.target.value})}})})]},"8"),(0,M.jsxs)(H.Z,{className:"mb-2",children:[(0,M.jsx)(V.Z,{xs:3,children:"Ort:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)("input",{type:"text",style:{width:"100%"},onChange:function(t){e.setState({scanLocation:t.target.value})}})})]},"9"),(0,M.jsxs)(H.Z,{className:"mb-4",children:[(0,M.jsx)(V.Z,{xs:3,children:"Jahr:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)("input",{type:"text",style:{width:"100%"},onChange:function(t){e.setState({scanYear:t.target.value})}})})]},"10")]:null,(0,M.jsxs)(H.Z,{className:"mb-2",children:[(0,M.jsx)(V.Z,{xs:3,children:"Dateipfad:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)("input",{type:"text",style:{width:"100%"},onChange:function(t){e.setState({scanPath:t.target.value})}})})]}),(0,M.jsxs)(H.Z,{className:"mb-4",children:[(0,M.jsx)(V.Z,{xs:3,children:".png-Dateien:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)(re.Z.Group,{children:(0,M.jsx)(re.Z.Control,{type:"file",multiple:!0,accept:"image/png",onChange:function(t){e.setState({scanFiles:t.target.files})}})})})]}),(0,M.jsxs)(H.Z,{children:[(0,M.jsx)(V.Z,{xs:3}),(0,M.jsx)(V.Z,{children:(0,M.jsx)(O.YG,{value:"hochladen",onClick:(0,j.Z)(v().mark((function t(){var n,s,r,a,i,l;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=e.state.scanFiles){t.next=4;break}return t.abrupt("return",{status:!1,error:"Geben Sie Dateien zum Hochladen an."});case 4:if(0!==e.state.scanType&&1!==e.state.scanType&&5!==e.state.scanType||e.state.scanEditor&&e.state.scanYear){t.next=8;break}return t.abrupt("return",{status:!1,error:"Geben Sie den Editor und das Jahr ein."});case 8:if(null!==e.state.scanWorkId){t.next=12;break}return t.abrupt("return",{status:!1,error:"Kein g\xfcltiges Werk ausgew\xe4hlt!"});case 12:if(!e.state.scanPath||!e.state.scanWorkId){t.next=48;break}return"/"!=(n=e.state.scanPath).substring(0,1)&&(n="/"+n),"/"!=n.substring(n.length-1)&&(n+="/"),t.next=18,L.Q.edition.save({work_id:e.state.scanWorkId,ressource:e.state.scanType,editor:e.state.scanEditor,year:e.state.scanYear,volume:e.state.scanVolume,vol_cont:e.state.scanVolumeContent,serie:e.state.scanSerie,location:e.state.scanLocation,library:e.state.scanLibrary,signature:e.state.scanSignature,path:n,url:""});case 18:if(!((s=t.sent)>0)){t.next=45;break}for((r=new FormData).append("edition_id",s),r.append("path",e.state.scanPath),a=e.state.scanFiles.length,i=0;i<a;i++)r.append("files",e.state.scanFiles[i]);return t.next=27,L.Q.importScans(r);case 27:if(400!==(l=t.sent).status){t.next=32;break}return t.abrupt("return",{status:!1,error:"Fehler beim Hochladen der Dateien. Eine neue Ressource mit ID ".concat(s," wurde aber bereits erstellt.")});case 32:if(1!=l.body.length){t.next=37;break}return console.log("Bereits auf dem Server und deshalb \xfcbersprungen: ".concat(l.body.join(", "))),t.abrupt("return",{status:!0,success:"Das Hochladen war erfolgreich. Eine Datei wurde \xfcbersprungen (s. Konsole). Eine neue Ressource mit ID ".concat(s," wurde erstellt.")});case 37:if(!(l.body.length>0)){t.next=42;break}return console.log("Bereits auf dem Server und deshalb \xfcbersprungen: ".concat(l.body.join(", "))),t.abrupt("return",{status:!0,success:"Das Hochladen war erfolgreich. ".concat(l.body.length," Dateien wurden \xfcbersprungen (s. Konsole). Eine neue Ressource mit ID ").concat(s," wurde erstellt.")});case 42:return t.abrupt("return",{status:!0,success:"Eine neue Ressource mit ID ".concat(s," wurde erstellt.")});case 43:t.next=46;break;case 45:return t.abrupt("return",{status:!1,error:"Edition konnte nicht erstellt werden. Keine Bilder wurden hochgeladen."});case 46:t.next=49;break;case 48:return t.abrupt("return",{status:!1,error:"Geben Sie einen g\xfcltigen Pfad ein!"});case 49:case"end":return t.stop()}}),t)})))})})]})]}),(0,M.jsxs)(se.Z,{eventKey:"o",title:"ocr-Dateien",style:{padding:"0 25%"},children:[(0,M.jsxs)(H.Z,{className:"mb-2",children:[(0,M.jsx)(V.Z,{xs:3,children:"Ressource:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)(O.Qc,{style:{width:"100%"},value:this.state.ocrRessource,tbl:"scan_paths",searchCol:"path",returnCol:"path",onChange:function(){var t=(0,j.Z)(v().mark((function t(n,s){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({ocrRessource:n,ocrRessourceId:s});case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()})})]}),(0,M.jsxs)(H.Z,{className:"mb-4",children:[(0,M.jsx)(V.Z,{xs:3,children:".txt-Dateien:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)(re.Z.Group,{children:(0,M.jsx)(re.Z.Control,{type:"file",multiple:!0,accept:"text/plain",onChange:function(t){e.setState({ocrFiles:t.target.files})}})})})]}),(0,M.jsxs)(H.Z,{children:[(0,M.jsx)(V.Z,{xs:3}),(0,M.jsx)(V.Z,{children:(0,M.jsx)(O.YG,{type:"button",value:"hochladen",onClick:(0,j.Z)(v().mark((function t(){var n,s,r,a,i,l;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=e.state.ocrFiles){t.next=4;break}return t.abrupt("return",{status:!1,error:"Geben Sie Dateien zum Hochladen an."});case 4:if(null!=e.state.ocrRessourceId){t.next=8;break}return t.abrupt("return",{status:!1,error:"W\xe4hlen Sie einen Ordner aus."});case 8:return t.next=10,L.Q.scan.get({path:e.state.ocrRessource},{select:["id","filename"]});case 10:n=t.sent,s=[],r=[],a=(0,E.Z)(e.state.ocrFiles),t.prev=14,l=v().mark((function e(){var t,a,l,c;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.value,a=t.name.substring(0,t.name.length-4),!(l=n.find((function(e){return e.filename==a})))){e.next=10;break}return e.next=6,t.text();case 6:c=e.sent,r.push({id:l.id,full_text:c}),e.next=11;break;case 10:s.push(t.name);case 11:case"end":return e.stop()}}),e)})),a.s();case 17:if((i=a.n()).done){t.next=21;break}return t.delegateYield(l(),"t0",19);case 19:t.next=17;break;case 21:t.next=26;break;case 23:t.prev=23,t.t1=t.catch(14),a.e(t.t1);case 26:return t.prev=26,a.f(),t.finish(26);case 29:if(!(r.length>0)){t.next=32;break}return t.next=32,L.Q.scan.save(r);case 32:if(!(s.length>1)){t.next=37;break}return console.log("\xfcbersprungene Dateien: ".concat(s.join(", "))),t.abrupt("return",{status:!0,success:"Dateien wurden hochgeladen. ".concat(s.length," Dateien konnten nicht zugewiesen werden (s. Konsole).")});case 37:if(1!=s.length){t.next=42;break}return console.log("\xfcbersprungene Dateien: ".concat(s.join(", "))),t.abrupt("return",{status:!0,success:"Dateien wurden hochgeladen. 1 Datei konnte nicht zugewiesen werden (s. Konsole)."});case 42:return t.abrupt("return",{status:!0});case 43:case"end":return t.stop()}}),t,null,[[14,23,26,29]])})))})})]})]}),(0,M.jsxs)(se.Z,{eventKey:"z",title:"Zettel",style:{padding:"0 25%"},children:[(0,M.jsxs)(H.Z,{className:"mb-2",children:[(0,M.jsx)(V.Z,{xs:3,children:"Buchstabe:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)(O.SA,{options:[["A","A"],["B","B"],["C","C"],["D","D"],["E","E"],["F","F"],["G","G"],["H","H"],["I","I/J"],["K","K"],["L","L"],["M","M"],["N","N"],["O","O"],["P","P"],["Q","Q"],["R","R"],["S","S"],["T","T"],["U","U/V"],["W","W"],["X","X"],["Y","Y"],["Z","Z"]],onChange:function(t){e.setState({zettelLetter:t.target.value})}})})]}),(0,M.jsxs)(H.Z,{className:"mb-2",children:[(0,M.jsx)(V.Z,{xs:3,children:"erstellt von:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)(O.SA,{options:this.state.zettelEditors,onChange:function(t){e.setState({zettelEditorSelected:t.target.value})}})})]}),(0,M.jsxs)(H.Z,{className:"mb-2",children:[(0,M.jsx)(V.Z,{xs:3,children:"Zettel-Typ:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)(O.SA,{options:[[0,"Index-/Exzerpt-Zettel"],[1,"verzetteltes Material"],[4,"Literatur"]],onChange:function(t){e.setState({zettelType:t.target.value})}})})]}),(0,M.jsxs)(H.Z,{className:"mb-4",children:[(0,M.jsx)(V.Z,{xs:3,children:"Bilder:"}),(0,M.jsx)(V.Z,{children:(0,M.jsx)(re.Z.Group,{children:(0,M.jsx)(re.Z.Control,{type:"file",multiple:!0,accept:"image/jpeg",onChange:function(t){e.setState({zettelFiles:t.target.files})}})})})]}),(0,M.jsxs)(H.Z,{className:"mb-2",children:[(0,M.jsx)(V.Z,{xs:3}),(0,M.jsx)(V.Z,{children:(0,M.jsx)(O.YG,{value:"Zettel hochladen",onClick:(0,j.Z)(v().mark((function t(){var n,s,r,a,i,l,c,o,u,d,h;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=e.state.zettelFiles){t.next=4;break}return t.abrupt("return",{status:!1,error:"W\xe4hlen Sie Bilder zum Hochladen aus."});case 4:if(e.state.zettelFiles.length%2==0){t.next=8;break}return t.abrupt("return",{status:!1,error:"W\xe4hlen Sie eine gerade Anzahl Bilder aus (jeweils Vorder- und R\xfcckseiten!)."});case 8:for(100,n=100,s=-1,r=[],a=e.state.zettelFiles,(a=Array.from(a)).sort((function(e,t){return t.name<e.name?1:-1})),i=0;i<a.length;i++)n>=100&&(n=0,s++,r.push(new FormData),r[s].append("letter",e.state.zettelLetter),r[s].append("type",e.state.zettelType),r[s].append("user_id_id",e.state.zettelEditorSelected)),n++,r[s].append("files",a[i]);l=0,c=0,o=0,u=r;case 19:if(!(o<u.length)){t.next=29;break}return d=u[o],t.next=23,L.Q.importZettel(d);case 23:h=t.sent,0===l&&(l=h[0]),c=h[1];case 26:o++,t.next=19;break;case 29:return e.setState({zettelSuccess:[l,c]}),t.abrupt("return",{status:!0});case 31:case"end":return t.stop()}}),t)})))})})]}),this.state.zettelSuccess&&(0,M.jsx)(H.Z,{children:(0,M.jsx)(V.Z,{children:(0,M.jsxs)(z.Z,{variant:"success",onClose:function(){e.setState({zettelSuccess:null})},dismissible:!0,children:[(0,M.jsx)(z.Z.Heading,{children:"Hochladen erfolgreich!"}),(0,M.jsxs)("p",{children:["Die neuen Zettel haben IDs zwischen ",(0,M.jsx)("b",{children:this.state.zettelSuccess[0]})," und ",(0,M.jsx)("b",{children:this.state.zettelSuccess[1]}),". M\xf6chten Sie die neuen Zettel in Zettel-Datenbank ",(0,M.jsx)(z.Z.Link,{href:"#",onClick:function(t){localStorage.setItem("searchBox_zettel",'[[{"id":0,"c":"id","o":">=","v":'.concat(e.state.zettelSuccess[0],'},{"id":1,"c":"id","o":"<=","v":').concat(e.state.zettelSuccess[1],'}],1,["id"]]')),e.props.loadMain(t,"zettel")},children:"\xf6ffnen"}),"?"]})]})})}),(0,M.jsx)(H.Z,{className:"mt-4",children:(0,M.jsxs)(V.Z,{children:["Eine Anleitung zum Hochladen der Zettel finden Sie ",(0,M.jsx)("a",{href:"https://gitlab.lrz.de/haeberlin/dmlw/-/wikis/09-HiwiHow:-Zettel-scannen-und-hochladen",children:"hier"}),"."]})})]})]})})}},{key:"componentDidMount",value:function(){var e=this;L.Q.access("admin")&&L.Q.user.getAll({order:["last_name"]}).then((function(t){var n,s=[],r=(0,E.Z)(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;s.push([a.id,a.last_name])}}catch(i){r.e(i)}finally{r.f()}e.setState({zettelEditors:s})})).catch((function(e){throw e}))}}]),n}(C.Component),ue=n(8949),de=function(e){(0,F.Z)(s,e);var t=(0,I.Z)(s);function s(e){var r;(0,N.Z)(this,s),(r=t.call(this,e)).state={zettelSearchItems:[["id","ID"]],searchStatus:"",setupItems:null,showPreset:!1,showDetail:!0,count:0,selectionDetail:{ids:[],currentId:null,sortOptions:null,presetOptions:null}};var a=function(){var t=(0,j.Z)(v().mark((function t(){var s;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(3545)("./".concat(e.PROJECT_NAME,".js"));case 2:s=t.sent,l=s.zettelSearchItems,o=s.ZettelCard,c=s.zettelBatchOptions,u=s.BatchInputType,d=s.ZettelAddLemmaContent,h=s.ZettelSingleContent,x=s.newZettelObject,p=s.exportZettelObject,m=s.zettelPresetOptions,f=s.zettelSortOptions,r.setState({zettelSearchItems:l(),sortOptions:f(),presetOptions:m()});case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return a(),r}return(0,B.Z)(s,[{key:"render",value:function(){var e=this,t=[["Suchergebnisse exportieren",(0,j.Z)(v().mark((function t(){var n;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.Q.zettel.search(e.state.query,{select:p(),export:!0,order:e.state.queryOrder});case 2:n=t.sent,window.open(n,"_blank");case 4:case"end":return t.stop()}}),t)})))]];return L.Q.access("z_edit")&&t.push(["neuer Zettel erstellen",(0,j.Z)(v().mark((function t(){var n;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Soll ein neuer Zettel erstellt werden?")){t.next=5;break}return t.next=3,L.Q.zettel.save(x());case 3:n=t.sent,e.setState({setupItems:[{id:0,c:"id",o:"=",v:n}]});case 5:case"end":return t.stop()}}),t)})))]),(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(k.Z,{fixed:"bottom",bg:"light",children:(0,M.jsxs)(w.Z,{fluid:!0,children:[(0,M.jsx)(k.Z.Collapse,{className:"justify-content-start",children:(0,M.jsx)(k.Z.Text,{children:this.state.sortOptions?(0,M.jsx)(O.Rj,{boxName:"zettel",searchQuery:function(t,n){e.searchQuery(t,n)},setupItems:this.state.setupItems,searchOptions:this.state.zettelSearchItems,sortOptions:this.state.sortOptions,status:this.state.searchStatus,presetOptions:this.state.presetOptions}):null})}),(0,M.jsxs)(k.Z.Collapse,{className:"justify-content-end",children:[(0,M.jsx)(k.Z.Text,{children:this.state.count>0?(0,M.jsx)(O.C3,{loadPage:function(t){e.loadPage(t)},currentPage:this.state.currentPage,maxPage:this.state.maxPage}):null}),(0,M.jsx)(k.Z.Text,{children:(0,M.jsx)(O.vW,{menuItems:t})})]})]})}),(0,M.jsxs)(w.Z,{className:"mainBody",children:[(0,M.jsx)(he,{loadPage:function(t){e.loadPage(t)},currentElements:this.state.currentElements,count:this.state.count,currentPage:this.state.currentPage,maxPage:this.state.maxPage,presetSelection:this.state.presetSelection,gridArea:this.state.selectionDetail.ids.length>0?"2/1/2/2":"2/1/2/3",toggleShowDetail:function(t){e.setState({selectionDetail:t.selection,itemDetail:t.item})},showDetail:this.state.showDetail}),0==this.state.count?(0,M.jsx)(O.Km,{}):null]}),this.state.selectionDetail.ids.length>0?(0,M.jsx)(xe,{onReload:function(){e.loadPage(e.state.currentPage)},onClose:function(){e.setState({selectionDetail:{ids:[]}})},selection:this.state.selectionDetail,item:this.state.itemDetail,onUpdate:function(t){e.reloadZettel(t)},showDetail:this.state.showDetail,openNextItem:function(){e.openNextItem()},toggleShowDetail:function(){e.setState({showDetail:!e.state.showDetail})}}):""]})}},{key:"openNextItem",value:function(){var e=(0,j.Z)(v().mark((function e(){var t,n,s,r,a=this;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.Q.zettel.get({id:this.state.itemDetail.id});case 2:t=(t=e.sent)[0],n=this.state.currentElements,s=n.findIndex((function(e){return e.id===t.id})),n[s]=t,r=this.state.currentElements.findIndex((function(e){return e.id===a.state.itemDetail.id})),this.state.currentElements.length>r+1&&this.setState({currentElements:n,itemDetail:this.state.currentElements[r+1],presetSelection:[this.state.currentElements[r+1].id]});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"reloadZettel",value:function(){var e=(0,j.Z)(v().mark((function e(t){var n,s,r,a=this;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,E.Z)(t),e.prev=1,r=v().mark((function e(){var n,r,i,l;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.value,e.next=3,L.Q.zettel.get({id:n});case 3:r=(r=e.sent)[0],i=a.state.currentElements,l=i.findIndex((function(e){return e.id===r.id})),i[l]=r,a.setState({currentElements:i,selectionDetail:{ids:t},itemDetail:r});case 9:case"end":return e.stop()}}),e)})),n.s();case 4:if((s=n.n()).done){e.next=8;break}return e.delegateYield(r(),"t0",6);case 6:e.next=4;break;case 8:e.next=13;break;case 10:e.prev=10,e.t1=e.catch(1),n.e(e.t1);case 13:return e.prev=13,n.f(),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(t){return e.apply(this,arguments)}}()},{key:"searchQuery",value:function(){var e=(0,j.Z)(v().mark((function e(t,n){var s,r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({searchStatus:(0,M.jsx)(A.Z,{animation:"border",size:"sm"})}),e.next=3,L.Q.zettel.search(t,{count:!0,order:n});case 3:return s=e.sent,e.next=6,L.Q.zettel.search(t,{limit:50,order:n});case 6:r=e.sent,s[0].count>1?this.setState({searchStatus:"".concat(s[0].count," Eintr\xe4ge gefunden.")}):1===s[0].count?this.setState({searchStatus:"1 Eintrag gefunden."}):this.setState({searchStatus:"Keine Eintr\xe4ge gefunden."}),this.setState({query:t,queryOrder:n,count:s[0].count,maxPage:Math.floor(s[0].count/50)+1,currentPage:1,currentElements:r,selectionDetail:{ids:[]}});case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadPage",value:function(){var e=(0,j.Z)(v().mark((function e(t){var n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.Q.zettel.search(this.state.query,{limit:50,offset:50*(t-1),order:this.state.queryOrder});case 2:n=e.sent,this.setState({currentPage:t,currentElements:n,selectionDetail:{ids:[]}});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),s}(C.Component),he=function(e){(0,F.Z)(n,e);var t=(0,I.Z)(n);function n(e){var s;return(0,N.Z)(this,n),(s=t.call(this,e)).state={selection:{currentId:null,ids:[]}},s}return(0,B.Z)(n,[{key:"render",value:function(){var e=this;if(this.props.count>0){var t,n=[],s=(0,E.Z)(this.props.currentElements);try{for(s.s();!(t=s.n()).done;){var r=t.value;n.push((0,M.jsx)(o,{showDetail:this.props.showDetail,testProp:r.id+"_test",id:r.id,item:r},r.id))}}catch(a){s.e(a)}finally{s.f()}return(0,M.jsx)("div",{style:{gridArea:this.props.gridArea,padding:"0 10px"},children:(0,M.jsx)(O.Qf,{multiSelect:!0,className:"zettel_box",selectCallback:function(t,n){e.selectCallback(t,n)},preset:this.props.presetSelection,children:n})})}return null}},{key:"selectCallback",value:function(e,t){e?this.props.toggleShowDetail({selection:t,item:e.props.item}):this.props.toggleShowDetail({selection:t,item:null})}}]),n}(C.Component);function xe(e){var t=(0,C.useState)(1===e.selection.ids.length?"single":"batch"),n=(0,g.Z)(t,2),s=n[0],r=n[1],a=(0,C.useState)("batch"),i=(0,g.Z)(a,2),l=i[0],o=i[1],u=(0,C.useState)(!1),d=(0,g.Z)(u,2),h=d[0],x=d[1],p=(0,C.useState)(null),m=(0,g.Z)(p,2),f=m[0],Z=m[1],b=(0,C.useState)(null),y=(0,g.Z)(b,2),k=y[0],w=y[1],S=(0,C.useState)(null),_=(0,g.Z)(S,2),z=(_[0],_[1]);(0,C.useEffect)((function(){r(1===e.selection.ids.length?"single":"batch")}),[e.selection.ids]),(0,C.useEffect)((function(){switch(s){case"batch":Z((0,M.jsx)(me,{openAddLemma:function(e,t){return N(e,t)},saveBatch:function(){var e=(0,j.Z)(v().mark((function e(t,n,s){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(t,n,s);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,s){return e.apply(this,arguments)}}(),onUpdate:e.onUpdate,selection:e.selection}));break;case"single":Z((0,M.jsx)(pe,{openAddLemma:function(e,t,n){return N(e,t,n)},onClose:e.onClose,onReload:e.onReload,showDetail:e.showDetail,toggleShowDetail:function(){e.toggleShowDetail()},item:e.item,openNextItem:e.openNextItem,onUpdate:function(t){e.onUpdate(t)}}));break;case"lemma":Z((0,M.jsx)(fe,{saveAfterAddLemma:function(){var e=(0,j.Z)(v().mark((function e(t,n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),newLemma:k,newLemmaDisplay:k,closeAddLemma:function(){r(l)}}));break;default:Z(null)}}),[s,e.item.id,e.showDetail]);var D=function(){var t=(0,j.Z)(v().mark((function t(n,s,r){var a,i,l,o,u,d,h;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=null,i=null,1!==n||""==s||null!==r){t.next=7;break}return N(s,s),t.abrupt("return",{status:!0});case 7:if(!0!==c()[n-1][3]||null==r){t.next=12;break}a=c()[n-1][2],i=r,t.next=18;break;case 12:if(!1!==c()[n-1][3]||null==s||""==s){t.next=17;break}a=c()[n-1][2],i=s,t.next=18;break;case 17:return t.abrupt("return",{status:!1,error:"Bitte tragen Sie einen g\xfcltigen Wert ein."});case 18:l=[],o=(0,E.Z)(e.selection.ids);try{for(o.s();!(u=o.n()).done;)d=u.value,(h={id:d,user_id:L.Q.me.id})[a]=i,l.push(h)}catch(x){o.e(x)}finally{o.f()}return t.next=23,L.Q.zettel.save(l);case 23:return e.onUpdate(e.selection.ids),t.abrupt("return",{status:!0});case 25:case"end":return t.stop()}}),t)})));return function(e,n,s){return t.apply(this,arguments)}}(),N=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];o(s),w(e),z(t),r("lemma"),x(n)},B=function(){var t=(0,j.Z)(v().mark((function t(n,s){var a;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1!==e.selection.ids.length){t.next=6;break}return t.next=3,L.Q.zettel.save({id:e.item.id,lemma_id:s});case 3:h&&e.openNextItem(),t.next=9;break;case 6:return t.next=8,D(1,n,s);case 8:a=t.sent;case 9:return r(l),t.abrupt("return",a);case 11:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return(0,M.jsx)(P.Z,{show:!0,placement:"end",scroll:!0,backdrop:!1,onHide:function(){"lemma"!=s?e.onClose():r(l)},children:f})}function pe(e){var t=(0,C.useState)([]),n=(0,g.Z)(t,2),s=n[0],r=n[1],a=(0,C.useState)(""),i=(0,g.Z)(a,2),l=i[0],c=i[1],o=(0,C.useState)({}),u=(0,g.Z)(o,2),d=u[0],x=u[1],p=(0,C.useState)(null),m=(0,g.Z)(p,2),f=m[0],Z=m[1];(0,C.useEffect)((function(){var e=function(){var e=(0,j.Z)(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=r,e.next=3,L.Q.edition.get({work_id:d.work_id});case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();d.work_id>0&&e()}),[d.work_id]);var b=function(){var t=(0,j.Z)(v().mark((function t(){var n,s,r=arguments;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.length>0&&void 0!==r[0]&&r[0],!f||2!==f.status){t.next=5;break}return t.abrupt("return",{status:-1,error:f.msg});case 5:if(!(null===f||1===f.status&&window.confirm(f.msg))){t.next=14;break}return(s=d).user_id=L.Q.me.id,t.next=10,L.Q.zettel.save(s);case 10:return null===s.lemma_id&&""!==l?(document.querySelector(".onOpenSetFocus").focus(),e.openAddLemma(l,l,n)):n?(document.querySelector(".onOpenSetFocus").focus(),e.openNextItem()):e.onUpdate([e.item.id]),t.abrupt("return",{status:1});case 14:return t.abrupt("return",{status:0});case 15:case 16:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(P.Z.Header,{closeButton:!0,children:(0,M.jsxs)(P.Z.Title,{children:["ID ",e.item.id]})}),(0,M.jsx)(P.Z.Body,{children:(0,M.jsxs)(ue.Z,{defaultActiveKey:0,children:[(0,M.jsxs)(ue.Z.Item,{eventKey:0,children:[(0,M.jsx)(ue.Z.Header,{children:"\xdcbersicht"}),(0,M.jsxs)(ue.Z.Body,{children:[(0,M.jsx)(h,{setLemma:function(e){c(e)},setZettelObjectErr:function(e){Z(e)},setZettelObject:function(e){x(e)},item:e.item}),(0,M.jsx)(H.Z,{className:"mb-3 mt-4",children:(0,M.jsxs)(V.Z,{children:[(0,M.jsx)(O.YG,{style:{marginRight:"10px"},onClick:function(){return b(!0)},value:"speichern&weiter"}),(0,M.jsx)(O.YG,{onClick:function(){return b()},value:"speichern"})]})}),(0,M.jsx)(H.Z,{children:(0,M.jsx)(V.Z,{children:(0,M.jsx)(re.Z,{children:(0,M.jsx)(re.Z.Check,{size:"sm",type:"switch",label:e.showDetail?"Details ausblenden":"Details einblenden",checked:e.showDetail,onChange:e.toggleShowDetail})})})})]})]}),s.length>0&&(0,M.jsxs)(ue.Z.Item,{eventKey:1,children:[(0,M.jsx)(ue.Z.Header,{children:"Ressourcen"}),(0,M.jsx)(ue.Z.Body,{children:s.map((function(e){return(0,M.jsx)("div",{children:(0,M.jsx)("a",{href:null===e.url||""===e.url?"/site/argos/".concat(e.id):e.url,target:"_blank",rel:"noreferrer",children:e.label})},e.id)}))})]}),L.Q.access("comment")?(0,M.jsxs)(ue.Z.Item,{eventKey:2,children:[(0,M.jsx)(ue.Z.Header,{children:"Kommentare"}),(0,M.jsx)(ue.Z.Body,{children:(0,M.jsx)(O.q5,{tbl:"zettel",id:e.item.id})})]}):null,L.Q.access("admin")&&(0,M.jsxs)(ue.Z.Item,{eventKey:3,children:[(0,M.jsx)(ue.Z.Header,{children:"Zettel l\xf6schen"}),(0,M.jsx)(ue.Z.Body,{children:(0,M.jsx)(G.Z,{variant:"danger",onClick:(0,j.Z)(v().mark((function t(){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Soll der Zettel wirklich gel\xf6scht werden? Dieser Schritt kann nicht mehr r\xfcckg\xe4ngig gemacht werden.")){t.next=5;break}return t.next=3,L.Q.zettel.delete(e.item.id);case 3:e.onClose(),e.onReload();case 5:case"end":return t.stop()}}),t)}))),children:"Zettel l\xf6schen"})})]})]})})]})}function me(e){var t=(0,C.useState)(1),n=(0,g.Z)(t,2),s=n[0],r=n[1],a=(0,C.useState)(""),i=(0,g.Z)(a,2),l=i[0],o=i[1],d=(0,C.useState)(null),h=(0,g.Z)(d,2),x=h[0],p=h[1],m=c();return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(P.Z.Header,{closeButton:!0,children:(0,M.jsxs)(P.Z.Title,{children:[e.selection.ids.length," Zettel"]})}),(0,M.jsxs)(P.Z.Body,{children:[(0,M.jsxs)(H.Z,{className:"mb-3",children:[(0,M.jsx)(V.Z,{children:(0,M.jsx)(O.SA,{style:{width:"110px"},options:m,onChange:function(e){o(""),r(parseInt(e.target.value))}})}),(0,M.jsx)(V.Z,{children:(0,M.jsx)(u,{batchType:s,batchValue:l,batchValueId:x,setBatchValue:function(e){o(e)},setBatchValueId:function(e){p(e)}})})]}),(0,M.jsx)(H.Z,{children:(0,M.jsx)(V.Z,{children:(0,M.jsx)(O.YG,{value:"f\xfcr alle \xfcbernehmen",onClick:(0,j.Z)(v().mark((function t(){var n;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.saveBatch(s,l,x);case 2:return n=t.sent,o(""),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})))})})})]})]})}function fe(e){var t=(0,C.useState)({}),n=(0,g.Z)(t,2),s=n[0],r=n[1],a=(0,C.useState)(!1),i=(0,g.Z)(a,2),l=i[0],c=i[1];return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(P.Z.Header,{closeButton:!0,children:(0,M.jsx)(P.Z.Title,{children:"Soll ein neues Wort erstellt werden?"})}),(0,M.jsxs)(P.Z.Body,{children:[(0,M.jsx)(d,{setNewLemmaOK:c,newLemma:e.newLemma,newLemmaDisplay:e.newLemmaDisplay,setLemmaObject:function(e){r(e)}}),(0,M.jsx)(H.Z,{children:(0,M.jsxs)(V.Z,{children:[(0,M.jsx)(O.YG,{type:"button",value:"neues Wort erstellen",onClick:(0,j.Z)(v().mark((function t(){var n;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!l){t.next=9;break}return t.next=3,L.Q.lemma.save(s);case 3:return n=t.sent,t.next=6,e.saveAfterAddLemma(s.lemma,n);case 6:return t.abrupt("return",t.sent);case 9:return t.abrupt("return",{status:!1,error:"Bitte f\xfcllen Sie alle Angaben korrekt aus!"});case 10:case"end":return t.stop()}}),t)})))}),(0,M.jsx)(G.Z,{variant:"secondary",style:{marginLeft:"10px"},onClick:function(){e.closeAddLemma()},children:"abbrechen"})]})})]})]})}var je,ge=n(1398),Ze=n(9140);function ve(e){var t=(0,C.useState)(""),n=(0,g.Z)(t,2),s=n[0],r=n[1],a=(0,C.useState)([]),i=(0,g.Z)(a,2),l=i[0],c=i[1];return(0,C.useEffect)((function(){var t=function(){var t=(0,j.Z)(v().mark((function t(){var n,s,r,a,i;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.z.work_id>0)){t.next=8;break}return t.next=3,L.Q.edition.get({work_id:e.z.work_id},{select:["id","label","url"]});case 3:n=t.sent,s=[],r=(0,E.Z)(n);try{for(r.s();!(a=r.n()).done;)i=a.value,s.push((0,M.jsx)(ge.Z.Item,{children:(0,M.jsx)("a",{href:""===i.url?"/site/argos/".concat(i.id):i.url,target:"_blank",rel:"noreferrer",children:i.label})},i.id))}catch(l){r.e(l)}finally{r.f()}c(s);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[]),(0,M.jsxs)(Ze.Z,{style:{width:"30rem"},className:"mb-3",children:[(0,M.jsx)(b.G,{style:{position:"absolute",top:"12px",right:"10px"},onClick:function(){r(""===s?"v":"")},icon:y.UO1}),(0,M.jsx)(Ze.Z.Header,{style:{height:"41px"},dangerouslySetInnerHTML:(0,O.rg)(e.z.opus)}),(0,M.jsx)(Ze.Z.Img,{variant:"bottom",src:"".concat(L.Q.url).concat(e.z.img_path).concat(s,".jpg")}),(0,M.jsx)(Ze.Z.Body,{children:(0,M.jsx)(Ze.Z.Text,{children:(0,M.jsx)(ge.Z,{horizontal:!0,children:l})})})]})}function be(e){var t=(0,C.useState)(null),n=(0,g.Z)(t,2),s=n[0],r=n[1],a=(0,C.useState)(null),i=(0,g.Z)(a,2),l=i[0],c=i[1],o=(0,C.useState)(null),u=(0,g.Z)(o,2),d=u[0],h=u[1],x=(0,C.useState)(null),p=(0,g.Z)(x,2),m=p[0],f=p[1],Z=(0,C.useState)(null),b=(0,g.Z)(Z,2),y=b[0],k=b[1],S=(0,C.useState)([]),_=(0,g.Z)(S,2),z=_[0],D=_[1];return(0,C.useEffect)((function(){var t=function(){var t=(0,j.Z)(v().mark((function t(){var n,s,a,i;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(null),c(null),h(null),f(null),k(null),t.next=7,L.Q.lemma.get({id:e.lemma_id});case 7:return n=t.sent,r(n[0]),t.next=11,L.Q.zettel.get({lemma_id:e.lemma_id,type:1},{order:["date_sort","date_type"],select:["id","opus","img_path","work_id","date_sort","date_own"]});case 11:return s=t.sent,c(s),t.next=15,L.Q.zettel.get({lemma_id:e.lemma_id,type:2},{order:["date_sort","date_type"],select:["id","opus","img_path","work_id","date_sort","date_own"]});case 15:return a=t.sent,h(a),t.next=19,L.Q.zettel.search([{c:"lemma_id",o:"=",v:e.lemma_id},{c:"type",o:">=",v:"3"},{c:"type",o:"<=",v:"6"},{c:"type",o:"!=",v:"4"}],{order:["date_sort","date_type"],select:["id","opus","img_path","work_id","date_sort","date_own"]});case 19:return i=t.sent,f(i),D(s.concat(a.concat(i))),t.t0=k,t.next=25,L.Q.zettel.search([{c:"lemma_id",o:"=",v:e.lemma_id},{c:"type",o:">=",v:"4"},{c:"type",o:"!=",v:"6"}],{order:["date_sort","date_type"],select:["id","opus","img_path","work_id"]});case 25:t.t1=t.sent,(0,t.t0)(t.t1);case 27:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e.lemma_id]),s?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("h1",{dangerouslySetInnerHTML:(0,O.rg)(s.lemma_display)}),(0,M.jsxs)(w.Z,{children:[s.dicts&&(0,M.jsxs)(H.Z,{children:[(0,M.jsx)(V.Z,{xs:2,children:"W\xf6rterb\xfccher:"}),(0,M.jsx)(V.Z,{dangerouslySetInnerHTML:(0,O.rg)(s.dicts)})]}),s.comment&&(0,M.jsxs)(H.Z,{className:"mb-4",children:[(0,M.jsx)(V.Z,{xs:2,children:"Kommentar:"}),(0,M.jsx)(V.Z,{dangerouslySetInnerHTML:(0,O.rg)(s.comment)})]}),(0,M.jsx)(H.Z,{children:(0,M.jsx)(V.Z,{children:(0,M.jsxs)(ue.Z,{defaultActiveKey:"",children:[(0,M.jsxs)(ue.Z.Item,{eventKey:"s",children:[(0,M.jsx)(ue.Z.Header,{children:"Statistik"}),(0,M.jsx)(ue.Z.Body,{children:(0,M.jsx)("div",{style:{width:"70%",margin:"auto"},children:(0,M.jsx)(ae.$Q,{options:{aspectRatio:!1,plugins:{legend:{display:!0,position:"bottom"}}},data:{labels:["6. Jh.","7. Jh.","8. Jh.","9. Jh.","10. Jh.","11. Jh.","12. Jh.","13. Jh."],datasets:[{label:"Anzahl Zettel",data:[z.filter((function(e){return e.date_sort<600})).length,z.filter((function(e){return e.date_sort>599&&e.date_sort<700})).length,z.filter((function(e){return e.date_sort>699&&e.date_sort<800})).length,z.filter((function(e){return e.date_sort>799&&e.date_sort<900})).length,z.filter((function(e){return e.date_sort>899&&e.date_sort<1e3})).length,z.filter((function(e){return e.date_sort>999&&e.date_sort<1100})).length,z.filter((function(e){return e.date_sort>1099&&e.date_sort<1200})).length,z.filter((function(e){return e.date_sort>1199})).length],backgroundColor:["#347F9F"],borderColor:["#347F9F"],borderWidth:1}]}})})})]}),(0,M.jsxs)(ue.Z.Item,{eventKey:"v",children:[(0,M.jsxs)(ue.Z.Header,{children:["verzetteltes Material\xa0",l?(0,M.jsxs)("span",{children:["(",l.length,")"]}):(0,M.jsx)(A.Z,{size:"sm",animation:"border"})]}),(0,M.jsx)(ue.Z.Body,{children:(0,M.jsx)(w.Z,{className:"d-flex flex-wrap justify-content-center",children:l?l.map((function(e){return(0,M.jsx)(ve,{z:e},e.id)})):null})})]}),(0,M.jsxs)(ue.Z.Item,{eventKey:"e",children:[(0,M.jsxs)(ue.Z.Header,{children:["Exzerpt-Zettel\xa0",d?(0,M.jsxs)("span",{children:["(",d.length,")"]}):(0,M.jsx)(A.Z,{size:"sm",animation:"border"})]}),(0,M.jsx)(ue.Z.Body,{children:(0,M.jsx)(w.Z,{className:"d-flex flex-wrap justify-content-center",children:d?d.map((function(e){return(0,M.jsx)(ve,{z:e},e.id)})):null})})]}),(0,M.jsxs)(ue.Z.Item,{eventKey:"i",children:[(0,M.jsxs)(ue.Z.Header,{children:["Index-Zettel\xa0",m?(0,M.jsxs)("span",{children:["(",m.length,")"]}):(0,M.jsx)(A.Z,{size:"sm",animation:"border"})]}),(0,M.jsx)(ue.Z.Body,{children:(0,M.jsx)(w.Z,{className:"d-flex flex-wrap justify-content-center",children:m?m.map((function(e){return(0,M.jsx)(ve,{z:e},e.id)})):null})})]}),(0,M.jsxs)(ue.Z.Item,{eventKey:"r",children:[(0,M.jsxs)(ue.Z.Header,{children:["restliche Zettel\xa0",y?(0,M.jsxs)("span",{children:["(",y.length,")"]}):(0,M.jsx)(A.Z,{size:"sm",animation:"border"})]}),(0,M.jsx)(ue.Z.Body,{children:(0,M.jsx)(w.Z,{className:"d-flex flex-wrap justify-content-center",children:y?y.map((function(e){return(0,M.jsx)(ve,{z:e},e.id)})):null})})]})]})})})]})]}):null}function ye(e){var t=100,n=(0,C.useState)(null),s=(0,g.Z)(n,2),r=s[0],a=s[1],i=(0,C.useState)([]),l=(0,g.Z)(i,2),c=l[0],o=l[1],u=(0,C.useState)(null),d=(0,g.Z)(u,2),h=d[0],x=d[1],p=(0,C.useState)([]),m=(0,g.Z)(p,2),f=m[0],Z=m[1],k=(0,C.useState)(0),S=(0,g.Z)(k,2),_=S[0],z=S[1],D=(0,C.useState)([]),E=(0,g.Z)(D,2),N=E[0],B=E[1];(0,C.useEffect)((function(){var e=function(){var e=(0,j.Z)(v().mark((function e(){var t;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.Q.lemma.getAll({select:["id","lemma","lemma_display"],order:["lemma"]});case 2:t=(t=e.sent).map((function(e){return{id:e.id,lemma_display:e.lemma_display,lemma:e.lemma.toLowerCase()}})),B(t),a("");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,C.useEffect)((function(){if(null!==r&&""!==r){var e=r.toLowerCase(),t=r.length,n=N.filter((function(n){return n.lemma.substring(0,t)===e}));Z(n),n.length>0&&z(n[0].id)}else""===r&&(Z([]),z(0))}),[r]),(0,C.useEffect)((function(){if(f.length>0){var e=N.findIndex((function(e){return e.id===_})),n=N.slice(e-t>=0?e-t:0,e),s=N.slice(e,e+t);o(n.concat(s));var r=function(){var e=(0,j.Z)(v().mark((function e(){var t;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O._v)(200);case 2:(t=document.querySelector(".indexBox_result_hit"))&&t.scrollIntoView({block:"center",behavior:"auto"});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();r()}else o(N.slice(0,t))}),[f,_]);var F=function(){var e=N.findIndex((function(e){return e.id===c[0].id}));return N.slice(e-t>=0?e-t:0,e)},I=function(){var e=N.findIndex((function(e){return e.id===c[c.length-1].id}));return N.slice(e+1,e+1+t)};return N.length>0?(0,M.jsxs)(w.Z,{className:"mainBody",children:[(0,M.jsxs)("div",{className:"indexBoxLst",children:[(0,M.jsx)("input",{type:"text",style:{width:"100%",margin:"10px 0px 10px 0"},value:r,onChange:function(e){a(e.target.value)},onKeyDown:function(e){if(13===e.keyCode&e.shiftKey){var t=f.findIndex((function(e){return e.id===_}));z(0===t?f[f.length-1].id:f[t-1].id)}else if(9===e.keyCode)e.preventDefault(),x(_);else if(13===e.keyCode){var n=f.findIndex((function(e){return e.id===_}));n+1<f.length?z(f[n+1].id):z(f[0].id)}else 27===e.keyCode&&a("")}}),(0,M.jsx)("div",{children:f.length>0?(0,M.jsxs)("small",{style:{float:"right"},children:[(0,M.jsxs)("span",{style:{marginRight:"15px"},children:[f.findIndex((function(e){return e.id===_}))+1,(0,M.jsx)("span",{style:{margin:"0 3px 0 3px"},children:"/"}),f.length," "]}),(0,M.jsx)(b.G,{style:{marginRight:"5px"},icon:y.EyR,onClick:function(){var e=f.findIndex((function(e){return e.id===_}));z(0===e?f[f.length-1].id:f[e-1].id)}}),(0,M.jsx)(b.G,{style:{marginRight:"3px"},icon:y.yOZ,onClick:function(){var e=f.findIndex((function(e){return e.id===_}));e+1<f.length?z(f[e+1].id):z(f[0].id)}})]}):null}),(0,M.jsx)(ge.Z,{variant:"flush",className:"indexBoxLstResultBox",onScroll:function(e){!function(e){if(e.target.scrollHeight-e.target.scrollTop-e.target.offsetHeight<500){var t=I();o(c.concat(t))}else if(e.target.scrollTop<500){var n=F();o(n.concat(c))}}(e)},children:c.map((function(e){return(0,M.jsx)(ge.Z.Item,{className:_===e.id?"indexBox_result_hit":f.map((function(e){return e.id})).includes(e.id)?"indexBox_result":null,action:!0,onClick:function(){x(e.id)},dangerouslySetInnerHTML:(0,O.rg)(e.lemma_display)},e.id)}))})]}),(0,M.jsx)("div",{className:"indexBoxDetail",children:h?(0,M.jsx)(be,{lemma_id:h}):null})]}):(0,M.jsx)("div",{children:"Daten werden geladen..."})}function ke(e){L.Q.changeLog=Se;var t={null:(0,M.jsx)(D.v,{}),ressources:(0,M.jsx)(X,{}),stats:(0,M.jsx)(ie,{}),server:(0,M.jsx)(le,{}),lemma:(0,M.jsx)(R,{PROJECT_NAME:e.PROJECT_NAME,loadMain:function(t,n){e.loadMain(t,n)}}),import:(0,M.jsx)(oe,{loadMain:function(t,n){e.loadMain(t,n)}}),zettel:(0,M.jsx)(de,{PROJECT_NAME:e.PROJECT_NAME}),indexbox:(0,M.jsx)(ye,{}),account:(0,M.jsx)(te.m,{}),seklit:(0,M.jsx)(U,{}),maiora:(0,M.jsx)(T.Opera,{listName:"opera_maiora"}),minora:(0,M.jsx)(T.Opera,{listName:"opera_minora"}),konkordanz:(0,M.jsx)(J.Konkordanz,{}),quellenverzeichnis:(0,M.jsx)(J.DOMOpera,{}),etudaus:(0,M.jsx)(J.Etudaus,{}),domressource:(0,M.jsx)(J.DOMRessource,{})};return null===e||null===e.res||Object.keys(t).includes(e?e.res:null)?t[e?e.res:null]:(0,M.jsxs)("div",{className:"text-danger",style:{textAlign:"center",marginTop:"100px"},children:["Unbekannter Men\xfc-Punkt '",e.res,"'."]})}function we(e){var t=(0,C.useState)(!1),s=(0,g.Z)(t,2),r=s[0],a=s[1];(0,C.useEffect)((function(){var t=function(){var t=(0,j.Z)(v().mark((function t(){var s;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(3545)("./".concat(e.PROJECT_NAME,".js"));case 2:s=t.sent,je=s.MainMenuContent,a(!0);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[]);var i="Datenbank";switch(e.PROJECT_NAME){case"mlw":i="dMLW";break;case"dom":i="dDOM";break;default:i="Datenbank"}return(0,M.jsx)(k.Z,{bg:"dark",variant:"dark",fixed:"top",children:(0,M.jsxs)(w.Z,{fluid:!0,children:[(0,M.jsx)(k.Z.Brand,{style:{cursor:"pointer"},onClick:function(t){e.loadMain(t,null)},children:i}),(0,M.jsx)(k.Z.Toggle,{}),(0,M.jsx)(k.Z.Collapse,{className:"justify-content-end",children:(0,M.jsxs)(S.Z,{children:[(0,M.jsxs)(_.Z,{title:"Zettel- und Wortmaterial",children:[(0,M.jsx)(_.Z.Item,{onClick:function(t){e.loadMain(t,"zettel")},children:"Zettel-Datenbank"}),(0,M.jsx)(_.Z.Item,{onClick:function(t){e.loadMain(t,"lemma")},children:"Wortliste"})]}),(0,M.jsx)(_.Z,{title:"Verzeichnisse",children:r?(0,M.jsx)(je,{loadMain:function(){e.loadMain.apply(e,arguments)}}):null}),(0,M.jsxs)(_.Z,{title:"Einstellungen",children:[(0,M.jsx)(_.Z.Item,{onClick:function(t){e.loadMain(t,"account")},children:"Konto"}),(0,M.jsx)(_.Z.Item,{onClick:function(t){e.loadMain(t,"server")},children:"Server"}),"dom"!=L.Q.project_name&&(0,M.jsx)(_.Z.Item,{onClick:function(t){e.loadMain(t,"import")},children:"Import"}),"dom"!=L.Q.project_name&&(0,M.jsx)(_.Z.Item,{onClick:function(t){e.loadMain(t,"stats")},children:"Statistik"})]}),(0,M.jsx)(S.Z.Link,{children:(0,M.jsx)(b.G,{icon:y.jLD,onClick:function(t){e.loadMain(t,"logout")},title:"abmelden"})})]})})]})})}var Se=[{project:"dom",title:"dDOM Update",date:"2022-06-03",description:(0,M.jsx)(M.Fragment,{children:(0,M.jsx)("p",{children:"Die neue Version ist online!"})})},{title:"Beta 12.10",date:"2022-05-04",description:(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)("p",{children:["Zettel k\xf6nnen nun aus der Zettel-Datenbank als pdf exportiert werden. Benutzen Sie das Kontextmen\xfc ",(0,M.jsx)(b.G,{icon:y.iV1}),' in der Zettel-Datenbank (rechts unten) und w\xe4hlen Sie "Suchergebnisse exportieren" aus.']})})},{project:"mlw",title:"Beta 12.9",date:"2022-04-29",description:(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)("p",{children:["Kleine Verbesserung in der Darstellung der ",(0,M.jsx)("i",{children:"opera"}),"-Listen."]})})},{project:"mlw",title:"Beta 12.8",date:"2022-04-14",description:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("p",{children:"Kleine Verbesserungen in Darstellung und Benutzung:"}),(0,M.jsxs)("ul",{children:[(0,M.jsx)("li",{children:'Ressourcen: "Autor/Jahr-Angabe"-Fehler bei Angabe der Serie behoben.'}),(0,M.jsx)("li",{children:"Ressourcen: Bandinhalt-Fehler behoben."}),(0,M.jsx)("li",{children:"Ressourcen: Seitenverh\xe4ltnis der Bilder kann ver\xe4ndert werden."})]}),(0,M.jsxs)("p",{children:["Einige Fehler in den Ressourcen wurden behoben. Ins System aufgenommen ",(0,M.jsx)("i",{children:"(falls Ressourcen zu diesen B\xe4nden in den opera-Listen fehlen, schreiben Sie unbedingt ein Ticket!)"}),":"]}),(0,M.jsxs)("ul",{children:[(0,M.jsx)("li",{children:"MGH Poet. I"}),(0,M.jsx)("li",{children:"MGH Poet. IV (Winterfeld)"})]})]})},{project:"mlw",title:"Beta 12.7",date:"2022-02-26",description:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("p",{children:"Kleine Verbesserungen in Darstellung und Benutzung:"}),(0,M.jsxs)("ul",{children:[(0,M.jsx)("li",{children:"\xc4nderungen beim Zettel-Upload: Buchstaben U/V und I/J wurden zusammengefasst."}),(0,M.jsx)("li",{children:"Korrekturen bei der Zitiertitel-Suche der opera-Listen."}),(0,M.jsx)("li",{children:"Korrekturen beim Upload von Scan-Bildern."})]})]})},{project:"mlw",title:"Beta 12.6",date:"2022-02-23",description:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("p",{children:"Kleine Verbesserungen in Darstellung und Benutzung:"}),(0,M.jsxs)("ul",{children:[(0,M.jsx)("li",{children:"Suche in opera-Listen funktioniert wieder."}),(0,M.jsx)("li",{children:"Korrektur bei der voreingestellten Suche."}),(0,M.jsx)("li",{children:"Links auf Wiki angepasst."})]})]})},{title:"Beta 12.5",date:"2022-02-18",description:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("p",{children:"Kleine Verbesserungen in Darstellung und Benutzung:"}),(0,M.jsxs)("ul",{children:[(0,M.jsx)("li",{children:'ocr-Funktionen des Servers in Modul "archimedes.py" verschoben.'}),(0,M.jsx)("li",{children:"Darstellung der Detailansicht f\xfcr Ressourcen und Sekund\xe4rliteratur \xfcberarbeitet."}),(0,M.jsx)("li",{children:"Neuladen der Ansicht beim L\xf6schen von Elementen."}),(0,M.jsx)("li",{children:"Opera-Listen werden automatisch neu geladen, wenn die Listen auf dem Server aktualisiert wurden oder wenn Autoren oder Werke erstellt oder gel\xf6scht wurden."}),(0,M.jsx)("li",{children:"Altes Benachrichtigungssystem (StatusBox) entfernt."})]})]})},{title:"Beta 12.4",date:"2022-02-15",description:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("p",{children:"Kleine Verbesserungen in Darstellung und Benutzung:"}),(0,M.jsxs)("ul",{children:[(0,M.jsx)("li",{children:"Gr\xf6sse der abgebildeten W\xf6rter begrenzt auf digitalen und gescannten Zetteln."}),(0,M.jsx)("li",{children:"Wiki-Anleitung f\xfcr das Hochladen der Zettel verlinkt."}),(0,M.jsx)("li",{children:"Zettel-Reihenfolge beim Hochladen stimmt jetzt auch mit Chrome."}),(0,M.jsx)("li",{children:"Veraltete Daten und Links von fr\xfcherer Version entfernt."})]})]})},{title:"Beta 12.3",date:"2022-02-14",description:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("p",{children:"Kleine Verbesserungen in Darstellung und Benutzung:"}),(0,M.jsxs)("ul",{children:[(0,M.jsx)("li",{children:"ocr-Verfahren f\xfcr neue Zettel \xfcberarbeitet (s. Einstellungen > Server) und automatische Typ-Erkennung aktiviert."}),(0,M.jsx)("li",{children:"Konto-Verwaltung \xfcberarbeitet (L\xf6schen von Accounts jetzt m\xf6glich)."})]})]})},{title:"Beta 12.2",date:"2022-02-13",description:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("p",{children:"Kleine Verbesserungen in Darstellung und Benutzung:"}),(0,M.jsxs)("ul",{children:[(0,M.jsx)("li",{children:(0,M.jsx)(z.Z.Link,{href:"https://gitlab.lrz.de/haeberlin/dmlw/-/issues/194",children:"Issue #194"})}),(0,M.jsx)("li",{children:'"Details ein-/ausblenden" unter "speichern" und "speichern&weiter" verschoben.'}),(0,M.jsx)("li",{children:"Kleiner Fehler bei Stapelverabeitung behoben (\xc4nderugnen wurde nicht angezeigt)."}),(0,M.jsx)("li",{children:'Mit "X" kann die Detailansicht in der Zettel-DB geschlossen werden.'}),(0,M.jsx)("li",{children:"Wenn ein neues Wort in der Zettel-DB erstellt wurde, wird es automatisch mit dem aktuellen Zettel verkn\xfcpft."}),(0,M.jsx)("li",{children:"Man kann nun aus der Stapel-Ansicht neue W\xf6rter erstellen."}),(0,M.jsx)("li",{children:"Die Hilfe zum Erstellen von W\xf6rtern wird nun auch in der Wortliste angezeigt."}),(0,M.jsx)("li",{children:"Import-Formulare \xfcberarbeitet und verbessert."})]})]})},{title:"Beta 12.1",date:"2022-02-11",description:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("p",{children:"Kleine Verbesserungen in Darstellung und Benutzung:"}),(0,M.jsxs)("ul",{children:[(0,M.jsx)("li",{children:"Mit einem Klick auf den Wortansatz in der Wortliste wird die Zettel-Datenbank ge\xf6ffnet und die mit diesem Wort verkn\xfcpften Zettel angezeigt."}),(0,M.jsx)("li",{children:'Suchfelder in Wortliste hinzugef\xfcgt: "W\xf6rterb\xfccher", "Kommentar", "Zahlzeichen", "im W\xf6rterbuch (MLW)", "Stern", "Fragezeichen".'}),(0,M.jsx)("li",{children:'Verbesserung des Fehlers mit "speichern&weiter".'}),(0,M.jsx)("li",{children:'"Lemmaliste" in "Wortliste" umbenannt. Ebenso "Lemma" in "Wort" (usw.).'}),(0,M.jsxs)("li",{children:["Kontextmen\xfc ",(0,M.jsx)(b.G,{icon:y.iV1})," der opera-Listen: Alle sollen nun die Listen aktualisieren k\xf6nnen."]}),(0,M.jsx)("li",{children:'opera-Listen k\xf6nnen nicht mehr von "Einstellungen"->"Server" aktualisiert werden.'}),(0,M.jsxs)("li",{children:["Die Statistiken k\xf6nnen nur noch \xfcber das Kontextmen\xfc ",(0,M.jsx)(b.G,{icon:y.iV1}),' unter "Einstellungen"->"Statistik" aktualisiert werden.']}),(0,M.jsx)("li",{children:"Alle Links sollten mit CTRL/CMD+Klick in einem neuen Fenster/Tab ge\xf6ffnet werden k\xf6nnen."}),(0,M.jsx)("li",{children:"Dark-Mode deaktiviert (wird sp\xe4ter wieder eingef\xfchrt)."})]})]})},{title:"Beta 12.0",date:"2022-02-09",description:(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)("p",{children:["Neues Design und Steuerelemente mit ",(0,M.jsx)(z.Z.Link,{target:"_blank",href:"https://react-bootstrap.github.io",children:"Bootstrap"}),". Die Suchfunktion befindet sich links unten auf der Seite (",(0,M.jsx)(b.G,{icon:y.wn1}),")."]})})}]},8491:function(e,t,n){n.d(t,{m:function(){return m}});var s=n(5861),r=n(885),a=n(7757),i=n.n(a),l=n(9743),c=n(2677),o=n(3350),u=n(7022),d=n(2791),h=n(6407),x=n(3222),p=n(184);function m(){var e=(0,d.useState)(h.Q.me.first_name),t=(0,r.Z)(e,2),n=t[0],a=t[1],m=(0,d.useState)(h.Q.me.last_name),f=(0,r.Z)(m,2),j=f[0],g=f[1],Z=(0,d.useState)(h.Q.me.email),v=(0,r.Z)(Z,2),b=v[0],y=v[1],k=(0,d.useState)(""),w=(0,r.Z)(k,2),S=w[0],_=w[1],z=(0,d.useState)(""),C=(0,r.Z)(z,2),D=C[0],E=C[1],N=(0,d.useState)(h.Q.options.z_width),B=(0,r.Z)(N,2),F=B[0],I=B[1],A=(0,d.useState)(h.Q.options.action_key),Q=(0,r.Z)(A,2),P=Q[0],L=Q[1],O=(0,d.useState)(h.Q.options.openExternally),M=(0,r.Z)(O,2),R=M[0],K=M[1],W=[(0,p.jsxs)(l.Z,{className:"mb-2",children:[(0,p.jsx)(c.Z,{xs:2,children:"Breite der Zettel:"}),(0,p.jsx)(c.Z,{children:(0,p.jsx)(o.Z.Range,{min:"400",max:"600",size:"sm",value:F,onChange:function(e){h.Q.setOptions("z_width",e.target.value),h.Q.setOptions("z_height",.7*parseInt(e.target.value)),I(e.target.value)}})})]},1),(0,p.jsxs)(l.Z,{className:"mb-2",children:[(0,p.jsx)(c.Z,{xs:4,children:"\xd6ffnen der Ressourcen (Zettel im Editor):"}),(0,p.jsx)(c.Z,{children:(0,p.jsxs)(o.Z.Select,{size:"sm",value:R,onChange:function(e){h.Q.setOptions("openExternally",parseInt(e.target.value)),K(e.target.value)},children:[(0,p.jsx)("option",{value:"0",children:"im gleichen Fenster"}),(0,p.jsx)("option",{value:"1",children:"nebeneinander"}),(0,p.jsx)("option",{value:"2",children:"in Echo"})]})})]},2)];return(0,p.jsxs)(u.Z,{style:{padding:"0 10% 0 10%"},children:[(0,p.jsx)(l.Z,{children:(0,p.jsx)(c.Z,{children:(0,p.jsx)("h3",{children:"Pers\xf6nliche Daten"})})}),(0,p.jsxs)(l.Z,{className:"mb-2",children:[(0,p.jsx)(c.Z,{xs:2,children:"Vorname:"}),(0,p.jsx)(c.Z,{children:(0,p.jsx)(o.Z.Control,{type:"text",size:"sm",value:n,onChange:function(e){a(e.target.value)}})})]}),(0,p.jsxs)(l.Z,{className:"mb-2",children:[(0,p.jsx)(c.Z,{xs:2,children:"Nachname:"}),(0,p.jsx)(c.Z,{children:(0,p.jsx)(o.Z.Control,{type:"text",size:"sm",value:j,onChange:function(e){g(e.target.value)}})})]}),(0,p.jsxs)(l.Z,{className:"mb-4",children:[(0,p.jsx)(c.Z,{xs:2,children:"Email-Adresse:"}),(0,p.jsx)(c.Z,{children:(0,p.jsx)(o.Z.Control,{type:"text",size:"sm",value:b,onChange:function(e){y(e.target.value)}})})]}),(0,p.jsxs)(l.Z,{className:"mb-4",children:[(0,p.jsx)(c.Z,{xs:2}),(0,p.jsx)(c.Z,{children:(0,p.jsx)(x.YG,{value:"speichern",onClick:(0,s.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.Q.user.save({id:h.Q.me.id,first_name:n,last_name:j,email:b});case 2:return e.next=4,h.Q.getUser();case 4:return t=e.sent,h.Q.me=t,e.abrupt("return",{status:1});case 7:case"end":return e.stop()}}),e)})))})})]}),(0,p.jsx)(l.Z,{children:(0,p.jsx)(c.Z,{children:(0,p.jsx)("h3",{children:"Passwort"})})}),(0,p.jsxs)(l.Z,{className:"mb-2",children:[(0,p.jsx)(c.Z,{xs:2,children:"altes Passwort:"}),(0,p.jsx)(c.Z,{children:(0,p.jsx)(o.Z.Control,{type:"password",size:"sm",value:S,onChange:function(e){_(e.target.value)}})})]}),(0,p.jsxs)(l.Z,{className:"mb-4",children:[(0,p.jsx)(c.Z,{xs:2,children:"neues Passwort:"}),(0,p.jsx)(c.Z,{children:(0,p.jsx)(o.Z.Control,{type:"password",size:"sm",value:D,onChange:function(e){E(e.target.value)}})})]}),(0,p.jsxs)(l.Z,{className:"mb-4",children:[(0,p.jsx)(c.Z,{xs:2}),(0,p.jsx)(c.Z,{children:(0,p.jsx)(x.YG,{value:"speichern",onClick:(0,s.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.Q.user.save({id:h.Q.me.id,old_password:S,new_password:D});case 2:return e.abrupt("return",{status:1});case 3:case"end":return e.stop()}}),e)})))})})]}),(0,p.jsx)(l.Z,{children:(0,p.jsx)(c.Z,{children:(0,p.jsx)("h3",{children:"Darstellung und Benutzung"})})}),(0,p.jsxs)(l.Z,{className:"mb-4",children:[(0,p.jsx)(c.Z,{xs:4,children:"Funktionstaste f\xfcr Tastenk\xfcrzel"}),(0,p.jsxs)(c.Z,{children:[(0,p.jsxs)(o.Z.Select,{size:"sm",value:P,onChange:function(e){h.Q.setOptions("action_key",e.target.value),L(e.target.value)},children:[(0,p.jsx)("option",{value:"alt",children:"Alt"}),(0,p.jsx)("option",{value:"ctrl",children:"Strg"}),(0,p.jsx)("option",{value:"cmd",children:"Befehlstaste"})]}),(0,p.jsxs)("small",{children:["Eine Liste mit Tastenk\xfcrzeln finden Sie ",(0,p.jsx)("a",{className:"text-primary",rel:"noreferrer",href:"https://gitlab.lrz.de/haeberlin/dmlw/-/wikis/06-Argos#tastenk\xfcrzel",target:"_blank",children:"hier"}),"."]})]})]}),W]})}}}]);
//# sourceMappingURL=303.2722b418.chunk.js.map