{"version":3,"file":"static/js/46.40ac9502.chunk.js","mappings":"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","sources":["changelog.js","editor/overview.js","../node_modules/react-bootstrap/esm/createUtilityClasses.js","../node_modules/react-bootstrap/esm/Stack.js","../node_modules/react-bootstrap/esm/Badge.js","editor/outline.js","editor/export.js","editor/editor.js","editor/mainContent.js","settings.js"],"sourcesContent":["import { Alert, Container } from \"react-bootstrap\";\nimport { arachne } from \"./arachne.js\";\nimport { useState } from \"react\";\n\nfunction  ChangeLog(){\n    arachne.changeLog = arachne.changeLog.sort((a,b)=>a.date<b.date);\n    arachne.changeLog = arachne.changeLog.filter(a=>(a.project===undefined||a.project===arachne.project_name));\n    const [displayAll, setDisplayAll] = useState(arachne.changeLog.length>5?false:true);\n    const formatDate = d=>{\n        const numToMonth = {\n            \"01\": \"Januar\",\n            \"02\": \"Februar\",\n            \"03\": \"März\",\n            \"04\": \"April\",\n            \"05\": \"Mai\",\n            \"06\": \"Juni\",\n            \"07\": \"Juli\",\n            \"08\": \"August\",\n            \"09\": \"September\",\n            \"10\": \"Oktober\",\n            \"11\": \"November\",\n            \"12\": \"Dezember\",\n        };\n        return `${d.substring(8,10)}. ${numToMonth[d.substring(5,7)]} ${d.substring(0,4)}`;\n    };\n    return <Container>\n        {arachne.changeLog.map((c,i)=>{if(displayAll||i<5){return <Alert key={i} variant={i===0?\"primary\":\"secondary\"}><Alert.Heading>{c.title}</Alert.Heading><i>{formatDate(c.date)}</i>{c.description}</Alert>}else{return null}})}\n        {displayAll?null:<Alert style={{cursor: \"pointer\", marginTop: \"100px\", textAlign: \"center\"}} variant=\"info\" onClick={()=>{setDisplayAll(true)}}>Alle Änderungen anzeigen.</Alert>}\n    </Container>;\n    \n}\n\nexport { ChangeLog };","import { Container, Table, Tabs, Tab, Dropdown, Navbar } from \"react-bootstrap\";\nimport { useEffect, useState } from \"react\";\nimport { getSettings, setSetting } from \"./mainContent.js\";\n\nimport { arachne } from \"./../arachne.js\";\nimport { Message, ToolKit } from \"./../elements.js\";\n\nfunction Overview(props){\n    const [sortName, setSortName] = useState(getSettings().projectSort);\n    const [renameId, setRenameId] = useState(0);\n    const [shareId, setShareId] = useState(0);\n    const [renameName, setRenameName] = useState(\"\");\n    const [activeProjects, setActiveProjects] = useState([]);\n    const [archiveProjects, setArchiveProjects] = useState([]);\n    const [sharedProjects, setSharedProjects] = useState([]);\n    const [userLst, setUserLst] = useState([]);\n    useEffect(()=>{\n        refreshPage();\n    }, [sortName]);\n    useEffect(()=>{\n        const fetchData = async () => {\n            await refreshPage();\n            const users = await arachne.user.getAll({order: [\"last_name\"]});\n            setUserLst(users.map(u=>[u.id, `${u.first_name} ${u.last_name}`]))\n        };\n        fetchData();\n    }, [])\n    const refreshPage = async ()=>{\n        setActiveProjects(await arachne.project.get({user_id: arachne.me.id, status: 1}, {order: [sortName]}));\n        setArchiveProjects(await arachne.project.get({status: 2}, {order: [sortName]}));\n        setSharedProjects(await arachne.project.get({shared_id: arachne.me.id}, {order: [sortName]}));\n    };\n    const deleteProject = async id => {\n        if(window.confirm(`Soll das Projekt mit der ID '${id}' wirklich gelöscht werden? Dieser Schritt kann nicht rückgängig gemacht werden.`)){\n            //article\n            const articleLst = await arachne.article.get({project_id: id});\n            if(articleLst.length>0){await arachne.article.delete(articleLst.map(a=>a.id))}\n            //sections\n            const zettelLst = await arachne.sections.get({project_id: id});\n            if(zettelLst.length>0){await arachne.sections.delete(zettelLst.map(z=>z.id))}\n            // tags\n            const tagLst = await arachne.tags.get({project_id: id});\n            if(tagLst.length>0){await arachne.tags.delete(tagLst.map(z=>z.id))}\n            // tag_lnks\n            const tagLnkLst = await arachne.tag_lnks.get({project_id: id});\n            if(tagLnkLst.length>0){await arachne.tag_lnks.delete(tagLnkLst.map(z=>z.id))}\n            //project\n            await arachne.project.delete(id)\n            await refreshPage();\n        }\n    };\n    const copyProject = async oldProjectId => {\n        // copy project\n        let oldProject = await arachne.project.get({id: oldProjectId});\n        oldProject = oldProject[0];\n        delete oldProject.id;\n        oldProject.shared_id = null;\n        oldProject.name = `${oldProject.name}  (Kopie)`;\n        const newProjectId = await arachne.project.save(oldProject);\n        //copy zettelLnk\n        const zettelLnk = await arachne.sections.get({project_id: oldProjectId});\n        for(const z of zettelLnk){\n            delete z.id;\n            z.project_id = newProjectId;\n            z.shared_id = null;\n            await arachne.sections.save(z)\n        }\n        //copy article + zettelLnk\n        const articleLst = await arachne.article.get({project_id: oldProjectId});\n        for(const a of articleLst){\n            const oldArticleId = a.id;\n            delete a.id;\n            a.project_id = newProjectId;\n            a.shared_id = null;\n            const newArticleId = await arachne.article.save(a);\n            const zettelLnk = await arachne.sections.get({project_id: newProjectId, article_id: oldArticleId});\n            for(const z of zettelLnk){\n                z.article_id = newArticleId;\n                await arachne.sections.save(z)\n            }\n        }\n        await refreshPage();\n    };\n    const shareProject = async (newUserId, projectId) => {\n        // to un-share project: newUserId = null\n        let shared_id = null\n        let user_id = null\n\n        if(newUserId){\n            const oldUserId = await arachne.project.get({id:projectId},{select: [\"user_id\"]})\n            user_id = newUserId\n            shared_id = oldUserId[0].user_id\n        }else{\n            const oldUserId = await arachne.project.get({id:projectId},{select: [\"shared_id\"]})\n            shared_id = null\n            user_id = oldUserId[0].shared_id\n        }\n        await arachne.project.save({id: projectId, shared_id: shared_id, user_id: user_id});\n        const articleLst = await arachne.article.get({project_id: projectId});\n        //copy zettelLnk\n        for(const a of articleLst){\n            a.user_id = user_id;\n            a.shared_id = shared_id;\n            const newArticleId = await arachne.article.save(a);\n        }\n        const zettelLnk = await arachne.sections.get({project_id: projectId});\n        for(const z of zettelLnk){\n            z.user_id = user_id;\n            z.shared_id = shared_id;\n            await arachne.sections.save(z)\n        }\n        await refreshPage();\n    };\n    return <>\n        <Message show={renameId>0?true:false} title=\"Projekt umbenennen\" msg=\"Geben Sie einen neuen Namen für das Projekt ein:\" input={renameName} onReplay={async e=>{if(e!=-1 && e!=\"\"){\n            await arachne.project.save({id: renameId, name: e})\n            await refreshPage();\n        };\n        setRenameId(0);\n        }} />\n        <Message show={shareId>0?true:false} title=\"Projekt freigeben\" msg=\"Wem wollen Sie das Projekt freigeben?\" dropDown={userLst} onReplay={async e=>{\n            await shareProject(e, shareId);\n            setShareId(0);\n        }} />\n        <Container>\n        <Tabs defaultActiveKey=\"active\">\n            <Tab eventKey=\"active\" title=\"aktive Projekte\">\n                <Container className=\"m-4\" style={{width: \"auto\"}}>\n                    <Table width=\"100%\" hover>\n                        <thead>\n                            <tr><th width=\"30%\">Name</th><th width=\"20%\"></th><th width=\"20%\">Änderungsdatum</th><th width=\"20%\">Erstelldatum</th><th width=\"10%\"></th></tr>\n                        </thead>\n                        <tbody>\n                            {activeProjects.map(p => {\n                                let editMenu = [\n                                    [\"umbenennen\", ()=>{ \n                                        setRenameName(p.name);\n                                        setRenameId(p.id);\n                                    }],\n                                    [\"kopieren\", async ()=>{copyProject(p.id)}],\n                                    [\"ins Archiv\", async ()=>{await arachne.project.save({id: p.id, status:2});await refreshPage();}],\n                                    [\"freigeben\", ()=>{setShareId(p.id)}]\n                                ];\n                                if(p.shared_id>0){\n                                    editMenu = [\n                                        [\"umbenennen\", ()=>{ \n                                            setRenameName(p.name);\n                                            setRenameId(p.id);\n                                        }],\n                                        [\"kopieren\", async ()=>{copyProject(p.id)}],\n                                        [\"freigabe beenden\", async ()=>{await shareProject(null, p.id)}]\n                                    ];\n                                }\n                                return <ProjectRow\n                                key={p.id}\n                                p={p}\n                                openProject={()=>{props.loadMain(null, \"editor\", p.id)}}\n                                editMenu={editMenu}\n                                deleteProject={async i=>{await deleteProject(i)}}\n                            />;})}\n                        </tbody>\n                    </Table>\n                </Container>\n            </Tab>\n            <Tab eventKey=\"archive\" title=\"Archiv\" disabled={archiveProjects.length===0?true:false}>\n                <Container className=\"m-4\" style={{width: \"auto\"}}>\n                    <Table width=\"100%\" hover>\n                        <thead>\n                            <tr><th width=\"30%\">Name</th><th width=\"20%\"></th><th width=\"20%\">Änderungsdatum</th><th width=\"20%\">Erstelldatum</th><th width=\"10%\"></th></tr>\n                        </thead>\n                        <tbody>\n                            {archiveProjects.map(p => {\n                                return <ProjectRow\n                                key={p.id}\n                                openProject={null}\n                                p={p}\n                                editMenu={[\n                                    [\"zu den aktiven Projekten\", async ()=>{await arachne.project.save({id: p.id, status:1});await refreshPage();}],\n                                ]}\n                                deleteProject={async i=>{await deleteProject(i)}}\n                            />;\n                            })}\n                        </tbody>\n                    </Table>\n                </Container>\n            </Tab>\n            <Tab eventKey=\"shared\" title=\"freigegebene Projekte\" disabled={sharedProjects.length===0?true:false}>\n                <Container className=\"m-4\" style={{width: \"auto\"}}>\n                    <Table width=\"100%\" hover>\n                        <thead>\n                            <tr><th width=\"30%\">Name</th><th width=\"20%\">freigegeben</th><th width=\"20%\">Änderufrengsdatum</th><th width=\"20%\">Erstelldatum</th><th width=\"10%\"></th></tr>\n                        </thead>\n                        <tbody>\n                            {sharedProjects.map(p => {return <ProjectRow\n                                key={p.id}\n                                p={p}\n                                editMenu={[\n                                    [\"nicht mehr freigeben\", ()=>{shareProject(null, p.id)}]\n                                ]}\n                            />;})}\n                        </tbody>\n                    </Table>\n                </Container>\n            </Tab>\n        </Tabs>\n        </Container>\n        <NavBarBottom refreshPage={async ()=>{await refreshPage();}} setSortName={e=>setSortName(e)} />\n    </>\n};\n\nfunction ProjectRow(props){\n    const [showEdit, setShowEdit] = useState(false)\n    const [shared, setShared] = useState();\n    const [isShared, setIsShared] = useState(false);\n    useEffect(()=>{\n        const getUserName = async id=>{\n            const userName = await arachne.user.get({id: id});\n            setShared(`${userName[0].first_name} ${userName[0].last_name}`);\n        };\n        if(props.p.shared_id>0&&props.p.status===4){getUserName(props.p.user_id)}\n        else if(props.p.shared_id>0&&props.p.status===1){getUserName(props.p.shared_id);setIsShared(true)}\n    },[]);\n    return <tr style={{height: \"49px\"}} className={isShared?\"text-primary\":null} onMouseEnter={()=>{setShowEdit(true)}} onMouseLeave={()=>{setShowEdit(false)}}><td><b style={{cursor: props.openProject?\"pointer\":\"default\"}} onClick={()=>{if(props.openProject){props.openProject(props.p.id)}}}>{props.p.name}</b></td><td>{shared}</td><td>{props.p.u_date.substring(0, 16)}</td><td>{props.p.c_date.substring(0, 16)}</td><td>\n    <Dropdown style={{display: showEdit?\"block\":\"none\"}}>\n        <Dropdown.Toggle size=\"sm\" variant=\"outline-primary\">bearbeiten</Dropdown.Toggle>\n        <Dropdown.Menu variant=\"dark\">\n            {props.editMenu.map(e=>{return <Dropdown.Item key={e[0]} onClick={()=>{e[1]()}}>{e[0]}</Dropdown.Item>;})}\n            {props.deleteProject?<>\n                <Dropdown.Divider />\n                <Dropdown.Item onClick={()=>{props.deleteProject(props.p.id)}}>löschen</Dropdown.Item>\n            </>:null}\n        </Dropdown.Menu>\n    </Dropdown>\n    </td></tr>;\n}\nfunction NavBarBottom(props){\n    const [showSort, setShowSort] = useState(false);\n    const ToolKitItems = [\n        [\"Sortieren nach\", ()=>{setShowSort(true)}],\n        [\"neues Projekt erstellen\", async ()=>{\n            if(window.confirm(\"Soll ein neues Projekt erstellt werden?\")){\n                await arachne.project.save({name: \"Neues Projekt\", user_id: arachne.me.id, status: 1});\n                await props.refreshPage();\n            }\n        }],\n    ];\n    return <Navbar fixed=\"bottom\" bg=\"light\">\n        <Message show={showSort} title=\"Sortierung der Projekte\" msg=\"Wie sollen die Projekte sortiert werden? Nach ...\" dropDown={[\n            [\"name\", \"Name\"],\n            [\"u_date\", \"Änderungsdatum\"],\n            [\"c_date\", \"Erstelldatum\"],\n        ]} onReplay={async e=>{\n            setSetting(\"projectSort\", e);\n            props.setSortName(e);\n            setShowSort(false);\n        }} />\n        <Container fluid>\n            <Navbar.Collapse className=\"justify-content-start\"></Navbar.Collapse>\n            <Navbar.Collapse className=\"justify-content-end\">\n                <Navbar.Text>\n                    <ToolKit menuItems={ToolKitItems} />\n                </Navbar.Text>\n            </Navbar.Collapse>\n        </Container>\n    </Navbar>;\n}\n\nexport { Overview };","import PropTypes from 'prop-types';\nimport { DEFAULT_BREAKPOINTS } from './ThemeProvider';\nexport function responsivePropType(propType) {\n  return PropTypes.oneOfType([propType, PropTypes.shape({\n    xs: propType,\n    sm: propType,\n    md: propType,\n    lg: propType,\n    xl: propType,\n    xxl: propType\n  })]);\n}\nexport default function createUtilityClassName(utilityValues, breakpoints = DEFAULT_BREAKPOINTS) {\n  const classes = [];\n  Object.entries(utilityValues).forEach(([utilName, utilValue]) => {\n    if (utilValue != null) {\n      if (typeof utilValue === 'object') {\n        breakpoints.forEach(brkPoint => {\n          const bpValue = utilValue[brkPoint];\n\n          if (bpValue != null) {\n            const infix = brkPoint !== 'xs' ? `-${brkPoint}` : '';\n            classes.push(`${utilName}${infix}-${bpValue}`);\n          }\n        });\n      } else {\n        classes.push(`${utilName}-${utilValue}`);\n      }\n    }\n  });\n  return classes;\n}","import classNames from 'classnames';\nimport * as React from 'react';\nimport { useBootstrapPrefix, useBootstrapBreakpoints } from './ThemeProvider';\nimport createUtilityClassName, { responsivePropType } from './createUtilityClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst Stack = /*#__PURE__*/React.forwardRef(({\n  as: Component = 'div',\n  bsPrefix,\n  className,\n  direction,\n  gap,\n  ...props\n}, ref) => {\n  bsPrefix = useBootstrapPrefix(bsPrefix, direction === 'horizontal' ? 'hstack' : 'vstack');\n  const breakpoints = useBootstrapBreakpoints();\n  return /*#__PURE__*/_jsx(Component, { ...props,\n    ref: ref,\n    className: classNames(className, bsPrefix, ...createUtilityClassName({\n      gap,\n      breakpoints\n    }))\n  });\n});\nStack.displayName = 'Stack';\nexport default Stack;","import classNames from 'classnames';\nimport * as React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst defaultProps = {\n  bg: 'primary',\n  pill: false\n};\nconst Badge = /*#__PURE__*/React.forwardRef(({\n  bsPrefix,\n  bg,\n  pill,\n  text,\n  className,\n  as: Component = 'span',\n  ...props\n}, ref) => {\n  const prefix = useBootstrapPrefix(bsPrefix, 'badge');\n  return /*#__PURE__*/_jsx(Component, {\n    ref: ref,\n    ...props,\n    className: classNames(className, prefix, pill && `rounded-pill`, text && `text-${text}`, bg && `bg-${bg}`)\n  });\n});\nBadge.displayName = 'Badge';\nBadge.defaultProps = defaultProps;\nexport default Badge;","import { useState, useEffect } from \"react\";\nimport { Modal, Card, Col, Container, Form, Row } from \"react-bootstrap\";\nimport { arachne } from \"./../arachne\";\nimport { parseHTML } from \"./../elements\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faRotate } from \"@fortawesome/free-solid-svg-icons\";\nimport { RessourcesButtons, TagBox } from \"./editor.js\";\n\nfunction OutlineBox(props){\n    const [dragObjectId, setDragObjectId] = useState(null);\n    const devider = {\n        borderTop: \"4px dotted transparent\",\n        margin: \"0 20px\",\n        height: \"10px\"\n    }\n    const displayArticles = (a, depth) => {\n        return <div key={a.id} style={{marginLeft: `${25*depth}px`}}>\n            <div\n                style={devider}\n                onDrop={e=>{props.dropArticle(dragObjectId, a.parent_id, a.sort_nr);e.target.style.borderColor=\"transparent\"}}\n                onDragOver={e=>{e.preventDefault();e.target.style.borderColor=\"var(--bs-primary)\"}}\n                onDragLeave={e=>{e.target.style.borderColor=\"transparent\"}}\n            ></div>\n            <ArticleBox changeArticle={props.changeArticle} project={props.project} articles={props.articles} a={a} dragObjectId={dragObjectId} setDragObjectId={id=>{setDragObjectId(id)}} dropArticle={(a,b,c)=>{props.dropArticle(a,b,c)}} collapsed={props.collapsedArticlesLst.includes(a.id)} toogleCollapse={a=>{props.toogleCollapse(a)}} />\n        </div>;\n    };\n    return <Container className=\"outlineBox\" fluid>\n            <Row>\n                <Col></Col>\n                <Col xs=\"8\" style={{textAlign: \"right\", cursor: \"pointer\"}}>Artikelkopf</Col>\n                <Col></Col>\n            </Row>\n            <Row>\n                <Col></Col>\n                <Col xs=\"8\" style={{paddingBottom: \"15px\", marginBottom: \"15px\", borderBottom: \"1px solid black\"}}></Col>\n                <Col></Col>\n            </Row>\n            <Row>\n                <Col></Col>\n                <Col xs=\"8\" style={{textAlign: \"right\", cursor: \"pointer\"}}>Stellen</Col>\n                <Col></Col>\n            </Row>\n            <Row>\n                <Col></Col>\n                <Col xs=\"8\">\n                    {props.articlesLst.map(a=>displayArticles(props.articles.find(b=>b.id===parseInt(a.split(\"-\")[1])), a.split(\"-\")[0]))}\n                </Col>\n                <Col></Col>\n            </Row>\n        </Container>;\n}\nfunction ArticleBox(props){\n    const [displaySections, setDisplaySections] = useState(false);\n\n    const dblClickCallback = e => {\n        const target = e.target.closest(\".articleBox\");\n        const el = target.getElementsByClassName(\"articleBoxName\")[0];\n        el.contentEditable = true;\n        el.focus();\n    };\n    return <><div\n        className=\"articleBox\"\n        id={`articleBox_${props.a.id}`}\n        draggable\n        onDragStart={()=>{props.setDragObjectId(props.a.id)}}\n        onDrop={e=>{if(props.dragObjectId!==props.a.id){props.dropArticle(props.dragObjectId, props.a.id, 1)}; e.target.style.borderColor=\"transparent\"}}\n        onDragOver={e=>{e.preventDefault();if(props.dragObjectId!==props.a.id){e.target.style.borderColor=\"var(--bs-primary)\"}}}\n        onDragLeave={e=>{e.target.style.borderColor=\"transparent\"}}\n        tabIndex=\"0\"\n        onClick={e=>{e.target.focus()}}\n        onDoubleClick={e=>{dblClickCallback(e)}}\n        onKeyDown={e=>{\n            if(e.target.className===\"articleBox\"){\n                if(e.keyCode!==9){e.preventDefault()}\n                if(e.keyCode===13){\n                    dblClickCallback(e);\n                }else if(e.keyCode===37&&e.shiftKey){ // left+shift\n                    if(props.a.parent_id>0){\n                        const parentArticle = props.articles.find(a=>a.id===props.a.parent_id);\n                        props.dropArticle(props.a.id, parentArticle.parent_id, parentArticle.sort_nr+1);\n                    }\n                    \n                }else if(e.keyCode===37){ // left\n                    props.toogleCollapse(props.a.id);\n                }else if(e.keyCode===38&&e.shiftKey){ // up+shift\n                    let previousArticles = props.articles.filter(a=>a.parent_id===props.a.parent_id&&a.sort_nr<props.a.sort_nr).sort((a,b)=>a.sort_nr>b.sort_nr);\n                    if(previousArticles.length>0){\n                        props.dropArticle(props.a.id, props.a.parent_id, previousArticles[previousArticles.length-1].sort_nr);\n                    }\n                }else if(e.keyCode===38){ // up\n                    const articleBoxes = document.getElementsByClassName(\"articleBox\");\n                    for(let i = 0; i<articleBoxes.length;i++){\n                        if(articleBoxes[i].id === e.target.id){\n                            if(i===0){articleBoxes[articleBoxes.length-1].focus()}\n                            else{articleBoxes[i-1].focus()}\n                            break;\n                        }\n                    }\n                }else if(e.keyCode===39&&e.shiftKey){ // right+shift\n                    let previousArticles = props.articles.filter(a=>a.parent_id===props.a.parent_id&&a.sort_nr<props.a.sort_nr).sort((a,b)=>a.sort_nr>b.sort_nr);\n                    if(previousArticles.length>0){\n                        const previousArticleChildren = props.articles.filter(a=>a.parent_id===previousArticles[previousArticles.length-1].id).sort((a,b)=>a.sort_nr>b.sort_nr);\n                        if(previousArticleChildren.length>0){props.dropArticle(props.a.id, previousArticles[previousArticles.length-1].id, previousArticleChildren[previousArticleChildren.length-1].sort_nr+1)}\n                        else{props.dropArticle(props.a.id, previousArticles[previousArticles.length-1].id, 1)}\n                    }\n                }else if(e.keyCode===39){ // right\n                    if(displaySections){setDisplaySections(false)}\n                    else{setDisplaySections(true)}\n                }else if(e.keyCode===40&&e.shiftKey){ // down+shift\n                    const nextArticle = props.articles.find(a=>a.parent_id===props.a.parent_id&&a.sort_nr>props.a.sort_nr);\n                    if(nextArticle){props.dropArticle(props.a.id, props.a.parent_id, props.a.sort_nr+1)};\n                }else if(e.keyCode===40){ // down\n                    const articleBoxes = document.getElementsByClassName(\"articleBox\");\n                    for(let i = 0; i<articleBoxes.length;i++){\n                        if(articleBoxes[i].id === e.target.id){\n                            if(i===articleBoxes.length-1){articleBoxes[0].focus()}\n                            else{articleBoxes[i+1].focus()}\n                            break;\n                        }\n                    }\n                }\n            }\n        }}\n    >{props.a.sort_nr}. <span\n        className=\"articleBoxName\"\n        onBlur={async e=>{\n            e.target.contentEditable=false;\n            e.target.parentElement.focus();\n            await arachne.article.save({id: props.a.id, name: e.target.innerText})\n            props.changeArticle({id: props.a.id, name: e.target.innerText});\n        }}\n        onKeyDown={e=>{\n            if(e.keyCode===13){\n                e.preventDefault();\n                e.target.blur();\n            }\n        }}\n    >{props.a.name}</span> {/*<i>({props.a.id})</i>*/}{props.collapsed?<span className=\"text-primary\" style={{marginLeft: \"15px\"}}>...</span>:null}</div>\n    {displaySections?<ArticleBoxSections setSectionDetailId={id=>{props.setSectionDetailId(id)}} inputMode={1} project={props.project} articleId={props.a.id} />:null}\n    </>;\n}\nfunction ArticleBoxSections(props){\n    const [sections, setSections] = useState([]);\n    const [inputValue, setInputValue] = useState(\"\");\n    const [acLst, setACLst] = useState([]);\n    const [currentFocus, setCurrentFocus] = useState(0);\n    const [sectionDetailId, setSectionDetailId] = useState(0);\n    const [tagLst, setTagLst] = useState([]);\n    useEffect(()=>{loadSections()}, []);\n    useEffect(()=>{loadACLst()},[inputValue]);\n    const loadACLst=async()=>{\n        if(inputValue!==\"\"){\n            let allSections = await arachne.sections.get({project_id: props.project.id})\n            allSections = allSections.filter(a=>a.ref!==null&&a.ref.toLowerCase().indexOf(inputValue.toLowerCase())>-1);\n            allSections = allSections.map(a=>{return {id: a.id, type: \"section\", name: `${a.ref}; ${a.text!==null?a.text.substring(0, 10):\"\"}...`}});\n            let allTags = await arachne.tags.get({project_id: props.project.id});\n            allTags = allTags.filter(a=>a.name.toLowerCase().indexOf(inputValue.toLowerCase())>-1);\n            allTags = allTags.map(t=>{return {id: t.id, type: \"tag\", name: t.name}});\n            allSections = allSections.concat(allTags);\n            allSections.sort((a,b)=>a.name.toLowerCase()>b.name.toLowerCase());\n            setACLst(allSections);\n        }else if(acLst.length>0){\n            setACLst([]);\n        }\n    }\n    const addSections=async(item)=>{\n        if(item.type===\"tag\"){\n            const tagLnks = await arachne.tag_lnks.get({tag_id: item.id});\n            await arachne.sections.save(tagLnks.map(t=>{return {id: t.section_id, article_id: props.articleId}}));\n            await loadSections();\n        }else{\n            await arachne.sections.save({id: item.id, article_id: props.articleId});\n            await loadSections();\n        }\n    };\n    const loadSections=async()=>{\n        const articleSections = await arachne.sections.get({article_id: props.articleId}, {order: [\"date_sort\"]});\n        setSections(articleSections);\n        const tagLnkLst = [];\n        for(const s of articleSections){\n            const tagLnks = await arachne.tag_lnks.get({section_id: s.id});\n            tagLnks.forEach(t=>{if(!tagLnkLst.includes(t.id)){tagLnkLst.push(t.id)}});\n        }\n        const newTags = [];\n        for (const tl in tagLnkLst){\n            const newTag = await arachne.tags.get({id: tl});\n            if(newTag[0]){newTags.push(newTag[0])}\n        }\n        setTagLst(newTags);\n    };\n    const onKeyDown=e=>{\n        if(e.keyCode===9&&acLst.length===1){\n            e.preventDefault();\n            //createNewTag(acTags[0].name);\n        }else if(e.keyCode===27){ // esc\n            setInputValue(\"\");\n            //setACLst([]);\n        }else if(e.keyCode===190&&e.target.value===\"\"){ // .\n            e.preventDefault();\n            //if(props.inputMode!==1){props.setInputMode(1)}\n            //else{props.setInputMode(0)}\n        }else if(e.keyCode===173&&e.target.value===\"\"){ // -\n            e.preventDefault();\n            //if(props.inputMode!==2){props.setInputMode(2)}\n            //else{props.setInputMode(0)}\n        }else if (e.keyCode===40) { //down\n            e.preventDefault();\n            if(acLst.length>0){\n                if(currentFocus+1 >= acLst.length){setCurrentFocus(0)}\n                else{setCurrentFocus(currentFocus+1)}\n            }else{e.target.parentNode.parentNode.firstChild.firstChild.focus()}\n        } else if (e.keyCode===38) { //up\n            e.preventDefault();\n            if(acLst.length>0){\n                if (currentFocus-1 < 0){setCurrentFocus(acLst.length - 1)}\n                else{setCurrentFocus(currentFocus-1)}\n            }else{e.target.parentNode.parentNode.firstChild.lastChild.focus()}\n        } else if (e.keyCode===13) {\n            e.preventDefault();\n            addSections(acLst[currentFocus]);\n        }\n    }\n    return <>\n    <SectionDetailEdit project={props.project} handleClose={()=>{loadSections();setSectionDetailId(0)}} sectionDetailId={sectionDetailId} />\n    <div className=\"ArticleBoxSections\">\n        <div className=\"outlineSectionTagBox\">{tagLst.map(t=><div className=\"outlineSectionTags\" style={{backgroundColor: t.color}}>{t.name}</div>)}</div>\n        <div>{sections.map(s=><SectionBox s={s} setSectionDetailId={setSectionDetailId} />)}</div>\n        <div style={{width:\"100%\", position: \"relative\", display: \"inline-block\"}}>\n            <input className=\"tagBoxOutlineSection\" value={inputValue} onChange={e=>{setInputValue(e.target.value)}} onFocus={()=>{loadACLst()}} onBlur={()=>{setInputValue(\"\");setACLst([]);/*if(!props.inputMode){props.setInputMode()}*/}} type=\"text\" onKeyDown={e=>{onKeyDown(e)}} />\n            {acLst.length>0&&<div className=\"autocomplete-items\" style={{borderColor: props.inputMode?null:\"var(--bs-yellow)\"}}>\n                {acLst.map((t,i)=><div key={t.id} style={{fontWeight: t.type===\"tag\"?\"bold\":null, fontStyle: t.type===\"tag\"?\"italic\":null, backgroundColor: props.inputMode?null:\"#ffecb1\", borderColor: props.inputMode?null:\"var(--bs-yellow)\"}} onMouseDown={async ()=>{await addSections(t)}} className={i===currentFocus?\"autocomplete-active\":\"\"} dangerouslySetInnerHTML={parseHTML(t.name.replace(new RegExp(`(${inputValue})`, \"gi\"), \"<u>$1</u>\"))}></div>)}\n            </div>}\n        </div>\n\n    </div></>;\n}\nfunction SectionBox(props){\n    const [tagLst, setTagLst] = useState([]);\n    useEffect(()=>{\n        const fetchData = async()=>{\n            const tagLnks = await arachne.tag_lnks.get({section_id: props.s.id}, {select: [\"tag_id\"]});\n            let newTags = [];\n            for (const tl of tagLnks){\n                const t = await arachne.tags.get({id: tl.tag_id});\n                newTags.push(t[0]);\n            }\n            newTags.sort((a,b)=>a.name.toLowerCase()>b.name.toLowerCase());\n            setTagLst(newTags);\n        }\n        fetchData();\n    }, []);\n    return <div key={props.s.id} className=\"sectionBox\" tabIndex=\"0\" onClick={e=>{\n            e.target.closest(\".sectionBox\").focus();\n        }} onKeyDown={e=>{\n            if(e.keyCode===38){ // up\n                e.preventDefault();\n                if(e.target.previousSibling){e.target.previousSibling.focus()}\n                else(e.target.parentNode.parentNode.lastChild.lastChild.focus())\n            }else if(e.keyCode===40){ // down\n                e.preventDefault();\n                if(e.target.nextSibling){e.target.nextSibling.focus()}\n                else{e.target.parentNode.parentNode.lastChild.lastChild.focus()}\n                \n            }else if(e.keyCode===13){\n                e.preventDefault();\n                props.setSectionDetailId(props.s.id);\n            }\n        }}><span className=\"sectionBoxTitle\">{props.s.ref}</span> {props.s.text}\n        <div className=\"outlineSectionTagBox\">{tagLst.map(t=><div className=\"outlineSectionTags\" style={{backgroundColor: t.color}}>{t.name}</div>)}</div>\n    </div>;\n}\nfunction SectionDetailEdit(props) {\n    const [ressources, setRessources] = useState([]);\n    const [showComment, setShowComment] = useState(false);\n    const [comment, setComment] = useState(\"\");\n    const [img, setImg] = useState(null);\n    const [reference, setReference] = useState(\"\");\n    const [text, setText] = useState(\"\");\n    const [verso, setVerso] = useState(false);\n    const [tags, setTags] = useState([]);\n    const [unusedTags, setUnusedTags] = useState([]);\n    const [section, setSection] = useState({});\n    useEffect(()=>{setImg(section.img+`${verso?\"v\":\"\"}.jpg`)}, [verso]);\n    useEffect(()=>{if(props.sectionDetailId>0){loadSection();if(document.getElementById(\"sectionDetailEditFirstInput\")){document.getElementById(\"sectionDetailEditFirstInput\").focus()}}}, [props.sectionDetailId]);\n    const loadSection = async () =>{\n        const newSection = await arachne.sections.get({id: props.sectionDetailId});\n        //console.log(newSection[0].img+`${verso?\"v\":\"\"}.jpg`);\n        setImg(arachne.url+newSection[0].img+`${verso?\"v\":\"\"}.jpg`);\n        setReference(newSection[0].ref);\n        setText(newSection[0].text);\n        setComment(newSection[0].comment);\n        if(newSection[0].comment!==null&&newSection[0].comment!==\"\"){setShowComment(true)}\n        setSection(newSection[0]);\n        // load ressources\n        setRessources(await arachne.edition.get({work_id: newSection[0].work_id}, {select: [\"id\", \"label\", \"url\"]}));\n    };\n    const loadTags =  async () =>{\n        let cAllTags = await arachne.tags.get({project_id: props.project.id});\n        const cTagLnks = await arachne.tag_lnks.get({section_id: props.sectionDetailId});\n        let newTags = [];\n        for(const cTagLnk of cTagLnks){\n            const newTagIndex = cAllTags.findIndex(t=>t.id===cTagLnk.tag_id);\n            if(newTagIndex===-1){throw \"ERROR! CANNOT FIND TAG INDEX!\"}\n            else{\n                newTags.push(cAllTags[newTagIndex]);\n                cAllTags.splice(newTagIndex,1);\n            }\n        }\n        setUnusedTags(cAllTags);\n        setTags(newTags);\n    };\n    return <Modal show={props.sectionDetailId>0} onHide={props.handleClose} size=\"xl\">\n        <Modal.Header closeButton>\n            <Modal.Title></Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n            <Card className=\"largeScreen\" id={\"s_\"+props.sectionDetailId} style={{ margin: \"auto\" }}>\n                <Card.Img style={{aspectRatio: \"10/7\"}} variant=\"top\" src={img} />\n                <Card.Body>\n                    <div style={{position: \"absolute\", top:\"5px\", left: \"10px\", right: \"430px\", opacity: \"0.5\"}}><a onClick={()=>{setVerso(!verso)}} title=\"Zettel drehen\"><FontAwesomeIcon icon={faRotate} /></a></div>\n                    <Row className=\"mb-2\"><Col><Form.Control id=\"sectionDetailEditFirstInput\" placeholder=\"Zitiertitel...\" size=\"sm\" type=\"text\" value={reference?reference:\"\"} onChange={e=>{setReference(e.target.value)}} onBlur={async e=>{await arachne.sections.save({id: props.sectionDetailId, ref: e.target.value})}} /></Col><Col style={{textAlign: \"right\"}} xs={4}><RessourcesButtons setRessourceView={url=>{props.setRessourceView(url)}} ressources={ressources} /></Col></Row>\n                \n                    <Form.Control placeholder=\"Text der Stelle...\" as=\"textarea\" rows={3} style={{fontSize: \"95%\"}} value={text?text:\"\"} onChange={e=>{setText(e.target.value)}} onBlur={async e=>{await arachne.sections.save({id: props.sectionDetailId, text: e.target.value})}} />\n                    {showComment?<div><Form.Control className=\"mt-2\" placeholder=\"Schreiben Sie einen Kommentar...\" as=\"textarea\" rows={3} style={{fontSize: \"95%\"}} value={comment?comment:\"\"} onChange={e=>{setComment(e.target.value)}} onBlur={async e=>{await arachne.sections.save({id: props.sectionDetailId, comment: e.target.value})}} /></div>:<div style={{textAlign: \"right\"}}><a style={{fontSize: \"90%\"}} className=\"link-secondary\" onClick={()=>{setShowComment(true)}}>Kommentar hinzufügen</a></div>}\n                    <TagBox centerSection={()=>{}} loadTags={async ()=>{await loadTags()}} tags={tags} project={props.project} s={section} unusedTags={unusedTags} />\n                </Card.Body>\n            </Card>\n        </Modal.Body>\n        {/*<Modal.Footer></Modal.Footer>*/}\n    </Modal>;\n}\nexport { OutlineBox }","import { useState, useEffect } from \"react\";\nimport { arachne } from \"./../arachne\";\n\nfunction ExportBox(props){\n\tconst [exportTxt, setExportTxt] = useState(\"\");\n\tuseEffect(()=>{\n\t\tconst fetchData=async()=>{\n\t\t\tlet exportLst = [];\n\t\t\tconst articles = await arachne.article.get({project_id: props.project.id});\n\t\t\tconst sections = await arachne.sections.get({project_id: props.project.id});\n\t\t\tconst getArticle = (article, depth) => {\n\t\t\t\tif(depth===0){\n\t\t\t\t\texportLst.push(`BEDEUTUNG ${article.name}`);\n\t\t\t\t}else if(depth===1){\n\t\t\t\t\texportLst.push(`    UNTER_BEDEUTUNG ${article.name}`);\n\t\t\t\t}else if(depth===2){\n\t\t\t\t\texportLst.push(`        UNTER_UNTER_BEDEUTUNG ${article.name}`);\n\t\t\t\t}else{\n\t\t\t\t\texportLst.push(`${\"    \".repeat(depth)}${\"U\".repeat(depth)}_BEDEUTUNG ${article.name}`);\n\t\t\t\t}\n\t\t\t\tsections.filter(s=>s.article_id===article.id).forEach(s=>exportLst.push(`${\"    \".repeat(depth+1)}* ${s.ref} \"${s.text}\"`))\n\t\t\t\tarticles.filter(a=>a.parent_id===article.id).forEach(a=>{getArticle(a,depth+1)});\n\t\t\t}\n\t\t\tarticles.filter(a=>a.parent_id===0).forEach(a=>{getArticle(a,0)});\n\t\t\tsetExportTxt(exportLst.join(\"\\n\"));\n\n\t\t};\n\t\tfetchData();\n\t}, []);\n\treturn <div>\n\t\t<textarea className=\"exportTextBox\" value={exportTxt} onChange={()=>{}}></textarea>\n\t</div>;\n}\n\nexport { ExportBox }","import { useEffect, useState, useRef } from \"react\";\nimport { Button, ButtonGroup, Dropdown, Table, Badge, Card, Col, Form, Container, Navbar, Nav, Row, Modal, Accordion, Stack, Spinner, Offcanvas, Tabs, Tab } from \"react-bootstrap\";\nimport { arachne } from \"./../arachne.js\";\nimport { AutoComplete, SearchInput, ToolKit, useIntersectionObserver, Message, useShortcuts } from \"./../elements.js\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPlusCircle, faMinusCircle, faTimesCircle, faRotate, faPenToSquare, faTrashCan } from \"@fortawesome/free-solid-svg-icons\";\nimport { OutlineBox } from \"./outline.js\";\nimport { ExportBox } from \"./export.js\";\n\nfunction Editor(props){\n    const [mode, setMode] = useState(\"zettel\")\n    const [project, setProject] = useState(null);\n    const [articles, setArticles] = useState([]);\n    const [articlesLst, setArticlesLst] = useState([]); // because react only checks shallow copies!\n    const [collapsedArticlesLst, setCollapsedArticlesLst] = useState([])\n    const [filterLst, setFilterLst] = useState([]);\n    const [filterTags, setFilterTags] = useState([]);\n    const [limitFilterResults,setLimitFilterResults] = useState(false);\n    const [showMenuLeft, setShowMenuLeft] = useState(false);\n    const [showImport, setShowImport] = useState(false);\n    const scSetup = [\n        [\"CTRL+ESC\", ()=>{props.loadMain(null, null)}],\n        [\"CTRL+f\", ()=>{setShowMenuLeft(!showMenuLeft)}],\n        [\"CTRL+i\", ()=>{setShowImport(!showImport)}],\n        [\"CTRL+r\", ()=>{setFilterLst([]);updateSections()}],\n        [\"CTRL+1\", ()=>{setMode(\"zettel\")}],\n        [\"CTRL+2\", ()=>{setMode(\"outline\")}],\n        [\"CTRL+3\", ()=>{setMode(\"export\")}],\n        [\"CTRL+n\", ()=>{createNewArticle()}]\n    ];\n    useShortcuts(scSetup, false);\n    const ToolKitItems = [\n        [\"Zettel importieren\", ()=>{setShowImport(true)}],\n        [\"Seitenleiste ein-/ausblenden\", ()=>{setShowMenuLeft(true)}],\n        [\"Filter neu laden\", ()=>{setFilterLst([]);updateSections()}],\n        [\"Neuer Artikel erstellen\", ()=>{createNewArticle()}]\n    ];\n    const updateArticles = inArticles => {\n        setArticles(inArticles);\n        const returnChildIds = (parentId, depth) => {\n            const childArticles = inArticles.filter(a=>a.parent_id===parentId).sort((a,b)=>a.sort_nr>b.sort_nr);\n            let returnLst = [];\n            childArticles.forEach(a=>{\n                returnLst.push(`${depth}-${a.id}`)\n                if(!collapsedArticlesLst.includes(a.id)){\n                    const newChildLst = returnChildIds(a.id, depth+1);\n                    if(newChildLst.length>0){returnLst=returnLst.concat(newChildLst)}\n                }\n            });\n            return returnLst;\n        };\n        setArticlesLst(returnChildIds(0,0));\n    };\n    useEffect(()=>{\n        updateArticles(articles);\n    }, [collapsedArticlesLst])\n    useEffect(()=>{\n        const fetchData = async ()=>{\n            const newProject = await arachne.project.get({id: props.resId})\n            setProject(newProject[0])\n            const newArticles = await arachne.article.get({project_id: props.resId});\n            updateArticles(newArticles);\n        };\n        fetchData();\n        updateSections();\n    }, []);\n    const createNewArticle = async () =>{\n        const newArticle = {\n            parent_id: 0,\n            sort_nr: articles.length>0?Math.max(...articles.filter(a=>a.parent_id===0).map(a=>a.sort_nr))+1:1,\n            name: \"Neue Gruppe\",\n            project_id: project.id,\n        };\n        const newId=await arachne.article.save(newArticle);\n        newArticle.id = newId;\n        let newArticles = articles;\n        newArticles.push(newArticle);\n        updateArticles(newArticles);\n    };\n    const changeArticle=a=>{\n        updateArticles(articles.map(l=>{\n            if(l.id!==a.id){return l}\n            else{\n                return {...l, ...a}\n            }\n        }));\n    };\n    const dropArticle = async (id, parent_id, sort_nr) => {\n        let newArticles = Object.assign({},articles);\n\n        // close gap in old position\n        const currentArticle = articles.find(a=>a.id===id);\n        let save_old_lst = articles.filter(a=>a.parent_id===currentArticle.parent_id&&a.sort_nr>currentArticle.sort_nr).map(a=>{return {id: a.id, sort_nr: a.sort_nr-1}});\n        save_old_lst.forEach(a=>{ // is there a faster way?\n            const i = newArticles.findIndex(na=>na.id===a.id);\n            //newArticles[i].parent_id = parent_id;\n            newArticles[i].sort_nr = a.sort_nr;\n        });\n        // make gap in new position\n        const save_new_lst = newArticles.filter(a=>a.parent_id===parent_id&&a.sort_nr>=sort_nr).map(a=>{return {id: a.id, parent_id: parent_id, sort_nr: a.sort_nr+1}});\n        save_new_lst.push({id: id, parent_id: parent_id, sort_nr: sort_nr});\n        save_new_lst.forEach(a=>{ // is there a faster way?\n            const i = newArticles.findIndex(na=>na.id===a.id);\n            newArticles[i].parent_id = parent_id;\n            newArticles[i].sort_nr = a.sort_nr;\n        });\n        await arachne.article.save(save_new_lst.concat(save_old_lst.filter(a=>save_new_lst.findIndex(b=>a.id===b.id)===-1)));\n        updateArticles(newArticles);\n    };\n    const toogleCollapse = aId => {\n        if(collapsedArticlesLst.includes(aId)){setCollapsedArticlesLst(collapsedArticlesLst.filter(a=>a!==aId))}\n        else{setCollapsedArticlesLst(collapsedArticlesLst.concat([aId]))}\n    };\n\n    const updateSections = async () => {\n        let foundSections = await arachne.sections.get({project_id: props.resId}, {select: [\"id\"]});\n        if(filterTags.length === 0){\n            setFilterLst(foundSections.map(s=>s.id));\n        } else {\n            const allTags = await arachne.tags.get({project_id: props.resId}, {select: [\"id\"]});\n            const allTagLnks = await arachne.tag_lnks.get({tag_id: allTags.map(at=>at.id)});\n            foundSections = foundSections.map(fs=>{\n                fs.tags = allTagLnks.filter(atl=>atl.section_id===fs.id).map(atl=>atl.tag_id);\n                return fs;\n            });\n            for(const filter of filterTags){\n                if(filter.exclude){foundSections = foundSections.filter(fs=>!fs.tags.includes(filter.id))}\n                else{foundSections = foundSections.filter(fs=>fs.tags.includes(filter.id))}\n            }\n            setFilterLst(foundSections.map(s=>s.id));\n        }\n    };\n\n    let modeBox = null;\n    switch(mode){\n        case \"zettel\":\n            modeBox = <ZettelBox setLimitFilterResults={v=>{setLimitFilterResults(v)}} showImport={showImport} showMenuLeft={showMenuLeft} filterTags={filterTags} setFilterTags={newTags=>{setFilterTags(newTags)}} setShowMenuLeft={()=>{setShowMenuLeft(false)}} setShowImport={v=>{setShowImport(v)}} project={project} filterLst={filterLst} updateSections={()=>{updateSections()}} />;\n            break;\n        case \"outline\":\n            modeBox = <OutlineBox changeArticle={changeArticle} project={project} dropArticle={(a,b,c)=>{dropArticle(a,b,c)}} articlesLst={articlesLst} articles={articles} collapsedArticlesLst={collapsedArticlesLst} toogleCollapse={a=>{toogleCollapse(a)}} />;\n            break;\n        case \"export\":\n            modeBox = <ExportBox project={project} />;\n            break;\n        default:\n        modeBox = <div>Modus '{mode}' nicht gefunden.</div>;\n    }\n    return <>\n    <Navbar bg=\"dark\" variant=\"dark\" fixed=\"top\" style={{top: \"0px\"}}>\n        <Container fluid style={{height: \"40px\"}}>\n            <Navbar.Brand style={{cursor: \"pointer\"}} onClick={e=>{props.loadMain(e, null)}}>Editor</Navbar.Brand>\n            <Navbar.Toggle />\n            <Navbar.Collapse className=\"justify-content-end\">\n                <Nav style={{fontSize: \"110%\"}}>\n                    <Nav.Link className=\"text-white\" style={{textDecoration: mode===\"zettel\"?\"underline\":null}} onClick={()=>{setMode(\"zettel\")}}>Zettel</Nav.Link>\n                    <Navbar.Text style={{width: \"80px\", borderBottom: \"3px solid white\", height: \"25px\"}}></Navbar.Text>\n                    <Nav.Link className=\"text-white\" style={{textDecoration: mode===\"outline\"?\"underline\":null}} onClick={()=>{setMode(\"outline\")}}>Gliederung</Nav.Link>\n                    <Navbar.Text style={{width: \"80px\", borderBottom: \"3px solid white\", height: \"25px\"}}></Navbar.Text>\n                    <Nav.Link className=\"text-white\" style={{textDecoration: mode===\"export\"?\"underline\":null}} onClick={()=>{setMode(\"export\")}}>Export</Nav.Link>\n                </Nav>\n                <Nav>\n                    <Navbar.Text><ToolKit menuItems={ToolKitItems} direction={\"down\"} /></Navbar.Text>\n                </Nav>\n            </Navbar.Collapse>\n        </Container>\n    </Navbar>\n    {project!=null?<Container style={{marginTop: \"120px\"/*position: \"absolute\", overflow: \"scroll\", backgroundColor: \"red\", padding:\"10px 0 10px 0\", top: \"56px\", bottom: \"80px\"*/}} fluid>\n        {modeBox}\n    </Container>:<Container><Row>Project wird geladen...</Row></Container>}\n    </>;\n}\nfunction ZettelBox(props){\n    const [wideScreen, setWideScreen] = useState(true);\n    const [splitView, setSplitView] = useState(false);\n    const [splitViewURL, setSplitViewURL] = useState(\"\");\n    const setRessourceView = url => {\n        if(!splitView){setSplitView(true)}\n        setSplitViewURL(url)\n    }\n    useEffect(()=>{\n        const resizeObserver = new ResizeObserver(entries=>{\n            if(wideScreen===true&&entries[0].contentRect.width<1000){\n                setWideScreen(false)\n            }\n            if(wideScreen===false&&entries[0].contentRect.width>=1000){\n                setWideScreen(true)\n            }\n        });\n        resizeObserver.observe(document.getElementById(\"cardBox\"));\n        return ()=>{if(document.getElementById(\"cardBox\")){resizeObserver.unobserve(document.getElementById(\"cardBox\"))}};\n    },[wideScreen]);\n    return <>\n    <ImportZettel show={props.showImport} project={props.project} onReplay={e=>{\n            if(e){props.updateSections()};\n            props.setShowImport(false);\n        }} />\n    <Container fluid>\n        <Row>\n            <Col id=\"cardBox\">\n                <Stack gap={5}>\n                    {props.filterLst.map(sId=><SectionCard wideScreen={wideScreen} setRessourceView={url=>{setRessourceView(url)}} project={props.project} sId={sId} key={sId} />)}\n                </Stack>\n            </Col>\n            {splitView?<Col>\n            <iframe src={splitViewURL} style={{position: \"fixed\", top:\"0px\", left: \"50%\", height: \"100%\", width: \"50%\"}}></iframe>\n            <FontAwesomeIcon icon={faTimesCircle} style={{color: \"var(--bs-danger)\", fontSize:\"24px\", zIndex:\"99999999\", position: \"fixed\", top: \"80px\", right: \"30px\"}} onClick={()=>{setSplitView(false)}} />\n            </Col>:null}\n        </Row>\n    </Container>\n    {<MenuLeft setLimitFilterResults={v=>{props.setLimitFilterResults(v)}} project={props.project} filterTags={props.filterTags} setFilterTags={newTags=>{props.setFilterTags(newTags)}} tagLst={props.tagLst} show={props.showMenuLeft} onHide={()=>{props.setShowMenuLeft(false)}} updateSections={()=>{props.updateSections()}} />}\n    </>;\n}\nfunction MenuLeft(props){\n    const [activeTabKey, setActiveTabKey] = useState(\"filter\");\n    const [tags, setTags] = useState([]);\n    const [renameId, setRenameId] = useState(0);\n    const [renameName, setRenameName] = useState(\"\");\n\n    useEffect(()=>{\n        if(props.show){loadTags()}\n    }, [props.show]);\n    const loadTags = async ()=>{\n        const allTags = await arachne.tags.get({project_id: props.project.id});\n        let enhancedTags = []\n        for(let tag of allTags){\n            const tagCount = await arachne.tag_lnks.get({tag_id: tag.id}, {count: true});\n            tag.sections = tagCount[0].count;\n            enhancedTags.push(tag);\n        }\n        setTags(enhancedTags);\n    };\n    const deleteTag = async tag=>{\n        if(window.confirm(`Soll das Schlagwort '${tag.name}' wirklich gelöscht werden? Es wird aus allen Stellen entfernt!`)){\n            const oldTagLnks = await arachne.tag_lnks.get({tag_id: tag.id}, {select: [\"id\"]});\n            await arachne.tag_lnks.delete(oldTagLnks.map(t=>t.id));\n            await arachne.tags.delete(tag.id);\n            await loadTags();\n        }\n    };\n    return <Offcanvas show={props.show} backdrop={false} scroll={true} onHide={()=>{props.onHide()}}>\n    <Offcanvas.Header closeButton>\n      <Offcanvas.Title></Offcanvas.Title>\n    </Offcanvas.Header>\n    <Offcanvas.Body>\n        <Message show={renameId>0?true:false} title=\"Projekt umbenennen\" msg=\"Geben Sie einen neuen Namen für das Schlagwort ein:\" input={renameName} onReplay={async e=>{\n            const tagNames = tags.map(t=>t.name.toLowerCase());\n            if(e!=-1&&e!=\"\"){\n                if(tagNames.includes(e.toLowerCase())){\n                    alert(`Der Name '${e}' wird bereits verwendet!`)\n                }else{\n                    await arachne.tags.save({id: renameId, name: e});\n                    await loadTags();\n                }\n            };\n            setRenameId(0);\n        }} />\n        <Tabs defaultActiveKey=\"filter\" className=\"mb-3\" activeKey={activeTabKey} onSelect={k=>{setActiveTabKey(k)}}>\n            <Tab eventKey=\"filter\" title=\"Filter\">\n                <Container>\n                    <Row className=\"mb-3\"><Col><FilterBox filterTags={props.filterTags} setFilterTags={newTags=>{props.setFilterTags(newTags)}} project={props.project} /></Col></Row>\n                    <Row className=\"mb-4\"><Col></Col><Col><Button style={{width: \"100%\"}} onClick={()=>{props.updateSections()}}>Zettel filtern</Button></Col></Row>\n                </Container>\n            </Tab>\n            <Tab eventKey=\"tags\" title=\"Schlagworte\">\n                <Table>\n                    <tbody>\n                        {tags.map(t=><tr key={t.id}>\n                            <td><Form.Control\n                                style={{display: \"inline\"}}\n                                size=\"sm\"\n                                type=\"color\"\n                                id=\"exampleColorInput\"\n                                defaultValue={t.color}\n                                title=\"Choose your color\"\n                                onChange={async e=>{await arachne.tags.save({id: t.id, color: e.target.value});await loadTags()}}\n                            /></td>\n                            <td><b style={{marginLeft: \"10px\", color: t.color, cursor: \"pointer\"}} onClick={()=>{props.setFilterTags([t]);setActiveTabKey(\"filter\")}}>{t.name}</b></td>\n                            <td>{t.sections}</td>\n                            <td><FontAwesomeIcon icon={faPenToSquare} style={{cursor: \"pointer\", color: \"var(--bs-primary)\"}} onClick={()=>{setRenameName(t.name);setRenameId(t.id)}} /></td>\n                            <td><FontAwesomeIcon icon={faTrashCan} style={{cursor: \"pointer\", color: \"var(--bs-primary)\"}} onClick={()=>{deleteTag(t)}} /></td>\n                        </tr>)}\n                    </tbody>\n                </Table>\n            </Tab>\n        </Tabs>\n    </Offcanvas.Body>\n  </Offcanvas>;\n}\nfunction SectionCard(props){\n    const [ressources, setRessources] = useState([]);\n    const [showComment, setShowComment] = useState(false);\n    const [comment, setComment] = useState(\"\");\n    const [img, setImg] = useState(null);\n    const [reference, setReference] = useState(\"\");\n    const [text, setText] = useState(\"\");\n    const [verso, setVerso] = useState(false);\n    const [tags, setTags] = useState([]);\n    const [unusedTags, setUnusedTags] = useState([]);\n    const [section, setSection] = useState({});\n    const [isVisible, setIsVisible] = useState(false);\n\n    const refImg = useRef();\n    const centerSection = () =>{document.getElementById(\"s_\"+props.sId).scrollIntoView({block: \"center\"})};\n    useIntersectionObserver({\n      target: refImg,\n      onIntersect: ([{ isIntersecting }], observerElement) => {\n        if (isIntersecting) {\n          setIsVisible(true);\n          observerElement.unobserve(refImg.current);\n        }\n      }\n    });\n    useEffect(()=>{\n        if(isVisible){\n            loadSection();\n            loadTags();\n        }else{\n            setImg(null);\n            setTags([]);\n        }\n    },[isVisible]);\n    useEffect(()=>{if(isVisible){setImg(arachne.url+section.img+`${verso?\"v\":\"\"}.jpg`)}}, [verso]);\n    const loadSection = async () =>{\n        const newSection = await arachne.sections.get({id: props.sId});\n        setImg(arachne.url+newSection[0].img+`${verso?\"v\":\"\"}.jpg`);\n        setReference(newSection[0].ref);\n        setText(newSection[0].text);\n        setComment(newSection[0].comment);\n        if(newSection[0].comment!=null&&newSection[0].comment!=\"\"){setShowComment(true)}\n        setSection(newSection[0]);\n        // load ressources\n        setRessources(await arachne.edition.get({work_id: newSection[0].work_id}, {select: [\"id\", \"label\", \"url\"]}));\n    };\n    const loadTags =  async () =>{\n        let cAllTags = await arachne.tags.get({project_id: props.project.id});\n        const cTagLnks = await arachne.tag_lnks.get({section_id: props.sId});\n        let newTags = [];\n        for(const cTagLnk of cTagLnks){\n            const newTagIndex = cAllTags.findIndex(t=>t.id===cTagLnk.tag_id);\n            if(newTagIndex===-1){throw \"ERROR! CANNOT FIND TAG INDEX!\"}\n            else{\n                newTags.push(cAllTags[newTagIndex]);\n                cAllTags.splice(newTagIndex,1);\n            }\n        }\n        setUnusedTags(cAllTags);\n        setTags(newTags);\n    };\n    const openZettelDB = () =>{\n        localStorage.setItem(\"searchBox_zettel\",`[[{\"id\":0,\"c\":\"id\",\"o\":\"=\",\"v\":\"${section.zettel_id}\"}],1,[\"id\"]]`);\n        window.open(\"/?site=zettel\");\n    }//style={{ width: '80%', maxWidth: \"600px\", margin: \"auto\" }}>\n    return <Card className={props.wideScreen?\"largeScreen\":null} id={\"s_\"+props.sId} style={{ width: \"80%\", margin: \"auto\" }}>\n        <Card.Img ref={refImg} style={{aspectRatio: \"10/7\"}} variant=\"top\" src={img} />\n        <Card.Body>\n            <div style={{position: \"absolute\", top:\"5px\", left: \"10px\", right: props.wideScreen?\"430px\":\"10px\", opacity: \"0.5\"}}><a onClick={()=>{setVerso(!verso)}} title=\"Zettel drehen\"><FontAwesomeIcon icon={faRotate} /></a>{section.zettel_id>0?<a onClick={()=>{openZettelDB()}} style={{float: \"right\"}} title=\"Zettel bearbeiten\"><FontAwesomeIcon icon={faPenToSquare} /></a>:null}</div>\n            <Row className=\"mb-2\"><Col><Form.Control placeholder=\"Zitiertitel...\" onFocus={()=>{centerSection()}} size=\"sm\" type=\"text\" value={reference?reference:\"\"} onChange={e=>{setReference(e.target.value)}} onBlur={async e=>{await arachne.sections.save({id: props.sId, ref: e.target.value})}} /></Col><Col style={{textAlign: \"right\"}} xs={4}><RessourcesButtons setRessourceView={url=>{props.setRessourceView(url)}} ressources={ressources} /></Col></Row>\n        \n            <Form.Control placeholder=\"Text der Stelle...\" onFocus={()=>{centerSection()}} as=\"textarea\" rows={3} style={{fontSize: \"95%\"}} value={text?text:\"\"} onChange={e=>{setText(e.target.value)}} onBlur={async e=>{await arachne.sections.save({id: props.sId, text: e.target.value})}} />\n            {showComment?<div><Form.Control className=\"mt-2\" placeholder=\"Schreiben Sie einen Kommentar...\" onFocus={()=>{centerSection()}} as=\"textarea\" rows={3} style={{fontSize: \"95%\"}} value={comment?comment:\"\"} onChange={e=>{setComment(e.target.value)}} onBlur={async e=>{await arachne.sections.save({id: props.sId, comment: e.target.value})}} /></div>:<div style={{textAlign: \"right\"}}><a style={{fontSize: \"90%\"}} className=\"link-secondary\" onClick={()=>{setShowComment(true)}}>Kommentar hinzufügen</a></div>}\n            <TagBox isVisible={isVisible} loadTags={async ()=>{await loadTags()}} tags={tags} project={props.project} s={section} unusedTags={unusedTags} centerSection={()=>{centerSection()}} />\n        </Card.Body>\n    </Card>;\n}\nfunction RessourcesButtons(props){\n    const [button, setButton] = useState(null);\n    const [selected, setSelected] = useState(null);\n    const openRessource = (url) => {\n        switch(arachne.options.openExternally){\n            case 0:\n                props.setRessourceView(url);\n                break;\n            case 1:\n                window.open(url);\n                break;\n            case 2:\n                arachne.sendEcho({type: \"edition\", url: url});\n                break;\n            default:\n                props.setRessourceView(url);\n        }\n    }\n    useEffect(()=>{\n        if(props.ressources.length===0){setButton(null)}\n        else if(props.ressources.length===1){setButton(<Button tabIndex=\"-1\" size=\"sm\" variant=\"outline-secondary\" style={{width: \"100%\"}} onClick={()=>{openRessource(props.ressources[0].url===null||props.ressources[0].url===\"\"?\"/site/argos/\"+props.ressources[0].id:props.ressources[0].url)}}>{props.ressources[0].label}</Button>)}\n        else{\n            setSelected(props.ressources[0]);\n        }\n    }, [props.ressources]);\n    useEffect(()=>{\n        if(selected!=null){\n            setButton(<Dropdown as={ButtonGroup}>\n                <Button size=\"sm\" variant=\"outline-secondary\" style={{width: \"100%\"}} onClick={()=>{openRessource(selected.url===null||selected.url===\"\"?\"/site/argos/\"+selected.id:selected.url)}}>{selected.label}</Button>\n                <Dropdown.Toggle split size=\"sm\" variant=\"secondary\" id=\"dropdown-split-basic\" />\n                <Dropdown.Menu>\n                    {props.ressources.map(r=><Dropdown.Item key={r.id} onClick={()=>{setSelected(r)}}>{r.label}</Dropdown.Item>)}\n                </Dropdown.Menu>\n            </Dropdown>);\n        }\n    }, [selected])\n    return button;\n}\nfunction FilterBox(props){\n    const [inputMode, setInputMode] = useState(0); // 0 = normal; 1 = remove; 2 = exclude\n    useEffect(()=>{\n    },[props.filterTags]);\n    const removeTag = t => {props.setFilterTags(props.filterTags.filter(ft=>ft.id!==t.id))}\n    const addTag = async tName => {\n        let newTags = structuredClone(props.filterTags); // deep copy\n        const newTag = await arachne.tags.get({project_id: props.project.id, name: tName});\n        if(inputMode===2){newTag[0].exclude=true}\n        newTags.push(newTag[0])\n        props.setFilterTags(newTags);\n    }\n    let borderStyle = \"1px solid #ced4da\"\n    let backgroundColor = null\n    if(inputMode===1){\n        borderStyle = \"1px solid var(--bs-yellow)\"\n        backgroundColor = \"#ffecb1\"\n    }else if(inputMode===2){\n        borderStyle = \"1px solid var(--bs-teal)\"\n        backgroundColor = \"#e2f7ed\"\n    }\n    return <div className=\"mt-2\" id=\"filter_box\" style={{border: borderStyle, backgroundColor: backgroundColor,padding: \"2px 5px\", display: \"flex\", alignContent: \"flex-start\", alignItems: \"flex-start\", flexWrap: \"wrap\", minHeight: \"220px\", borderRadius: \"0.25rem\", fontSize: \"100%\"}} onClick={()=>{\n        let tb = document.getElementById(\"filter_box\");\n        tb.children[tb.children.length-1].children[0].focus()\n        }}>\n            {props.filterTags.map(t=><FilterTag key={t.id} t={t} removeTag={t=>{removeTag(t)}} />)}\n            <FilterBoxInput inputMode={inputMode} setInputMode={v=>{setInputMode(v)}} tags={props.filterTags} addTag={newTag=>{addTag(newTag)}} removeTag={t=>{removeTag(t)}} project={props.project} />\n    </div>;\n}\nfunction TagBox(props){\n    const [inputMode, setInputMode] = useState(true);\n    return <div className=\"mt-2\" id={\"tagBox_\"+props.s.id} style={{border: inputMode?\"1px solid #ced4da\":\"1px solid var(--bs-yellow)\", backgroundColor: inputMode?null:\"#ffecb1\",padding: \"2px 5px\", display: \"flex\", alignItems: \"flex-start\", flexWrap: \"wrap\", minHeight: \"110px\", borderRadius: \"0.25rem\", fontSize: \"100%\"}} onClick={()=>{\n        let tb = document.getElementById(\"tagBox_\"+props.s.id);\n        tb.children[tb.children.length-2].focus()\n        }}>\n        {props.isVisible&&props.tags.map(t=><Tag key={t.id} t={t} sectionId={props.s.id} loadTags={async ()=>{await props.loadTags()}} />)}\n        <TagBoxInput inputMode={inputMode} setInputMode={v=>{setInputMode(!inputMode)}} project={props.project} tags={props.tags} loadTags={async ()=>{await props.loadTags()}} sectionId={props.s.id} centerSection={()=>{props.centerSection()}} />\n    </div>;\n}\nfunction FilterBoxInput(props){\n    const [inputValue, setInputValue] = useState(\"\");\n    const [acTags, setACTags] = useState([]);\n    const [currentFocus, setCurrentFocus] = useState(-1);\n    const loadACTags = async ()=>{\n        if(props.inputMode===0||props.inputMode===2){\n            const currentTags = props.tags.map(t=>t.name);\n            const newACTags = await arachne.tags.get({project_id: props.project.id});\n            let currentACTags = newACTags.filter(t=>!currentTags.includes(t.name));\n            if(inputValue===\"\"){setACTags(currentACTags)}\n            else{setACTags(currentACTags.filter(t=>t.name.toLowerCase().indexOf(inputValue.toLowerCase())>-1))}\n        }else{\n            if(inputValue===\"\"){setACTags(props.tags)}\n            else{setACTags(props.tags.filter(t=>t.name.toLowerCase().indexOf(inputValue.toLowerCase())>-1))}\n        }\n        setCurrentFocus(-1);\n    };\n    useEffect(()=>{\n        if(acTags.length>0||inputValue!==\"\"){loadACTags()}\n    }, [props.tags,inputValue,props.inputMode]);\n    const onKeyDown = e=>{\n        if(e.keyCode===9&&acTags.length===1){\n            e.preventDefault();\n            createNewTag(acTags[0].name);\n        }else if(e.keyCode===27){ // esc\n            setACTags([]);\n        }else if(e.keyCode===190&&e.target.value===\"\"){ // .\n            e.preventDefault();\n            if(props.inputMode!==1){props.setInputMode(1)}\n            else{props.setInputMode(0)}\n        }else if(e.keyCode===173&&e.target.value===\"\"){ // -\n            e.preventDefault();\n            if(props.inputMode!==2){props.setInputMode(2)}\n            else{props.setInputMode(0)}\n        }else if (e.keyCode===40) { //down\n            if(currentFocus+1 >= acTags.length){setCurrentFocus(0)}\n            else{setCurrentFocus(currentFocus+1)}\n        } else if (e.keyCode===38) { //up\n            if (currentFocus-1 < 0){setCurrentFocus(acTags.length - 1)}\n            else{setCurrentFocus(currentFocus-1)}\n        } else if (e.keyCode===13) {\n            e.preventDefault();\n            if (currentFocus > -1) {\n                createNewTag(acTags[currentFocus].name);\n            } else if(e.target.value!==\"\") {\n                createNewTag(e.target.value);\n            }\n        }\n    };\n    const createNewTag = async (newTag, exitInput=false) =>{\n        if(props.inputMode===0||props.inputMode===2){ // save new tag\n            if(!props.tags.find(t=>t.name.toLowerCase()===newTag.toLowerCase())){\n                props.addTag(newTag)\n                if(props.inputMode===2){props.setInputMode(0)}\n            }\n            \n        }else{ // remove existing tag\n            const existingTag = props.tags.find(t=>t.name.toLowerCase()===newTag.toLowerCase());\n            if(existingTag){\n                props.removeTag(existingTag);\n                props.setInputMode(0);\n            }\n        }\n        setInputValue(\"\");\n        if(exitInput){setACTags([])}\n        else{loadACTags()}\n    };\n    let borderStyle = \"#ced4da\"\n    let backgroundColor = null\n    if(props.inputMode===1){\n        borderStyle = \"var(--bs-yellow)\"\n        backgroundColor = \"#ffecb1\"\n    }else if(props.inputMode===2){\n        borderStyle = \"var(--bs-teal)\"\n        backgroundColor = \"#e2f7ed\"\n    }\n    return <div style={{width:\"300px\", position: \"relative\", display: \"inline-block\"}}>\n        <input value={inputValue} onChange={e=>{setInputValue(e.target.value)}} onFocus={()=>{loadACTags()}} onBlur={()=>{setInputValue(\"\");setACTags([]);if(props.inputMode>0){props.setInputMode(0)}}} type=\"text\" style={{background: \"none\", outline: \"none\", border: \"none\", margin: \"1px 2px\", padding: \"4px 10px\"}} onKeyDown={e=>{onKeyDown(e)}} />\n    {acTags.length>0&&<div className=\"autocomplete-items\" style={{borderColor: borderStyle}}>\n        {acTags.map((t,i)=><div key={t.id} style={{backgroundColor: backgroundColor, borderColor: borderStyle}} onMouseDown={async ()=>{await createNewTag(t.name, true)}} className={i===currentFocus?\"autocomplete-active\":\"\"}>{t.name}</div>)}\n    </div>}\n    </div>;\n}\nfunction TagBoxInput(props){\n    const [inputValue, setInputValue] = useState(\"\");\n    const [acTags, setACTags] = useState([]);\n    const [currentFocus, setCurrentFocus] = useState(-1);\n    const loadACTags = async ()=>{\n        if(props.inputMode){\n            const currentTags = props.tags.map(t=>t.name);\n            const newACTags = await arachne.tags.get({project_id: props.project.id});\n            let currentACTags = newACTags.filter(t=>!currentTags.includes(t.name));\n            if(inputValue===\"\"){setACTags(currentACTags)}\n            else{setACTags(currentACTags.filter(t=>t.name.toLowerCase().indexOf(inputValue.toLowerCase())>-1))}\n        }else{\n            if(inputValue===\"\"){setACTags(props.tags)}\n            else{setACTags(props.tags.filter(t=>t.name.toLowerCase().indexOf(inputValue.toLowerCase())>-1))}\n        }\n        setCurrentFocus(-1);\n    };\n    useEffect(()=>{\n        if(acTags.length>0||inputValue!==\"\"){loadACTags()}\n    }, [props.tags,inputValue,props.inputMode]);\n    const onKeyDown = e=>{\n        if(e.keyCode===9&&acTags.length===1){\n            e.preventDefault();\n            createNewTag(acTags[0].name);\n        }else if(e.keyCode===27){ // esc\n            setACTags([]);\n        }else if(e.keyCode===190&&e.target.value===\"\"){ // .\n            e.preventDefault();\n            props.setInputMode();\n        }else if(e.keyCode===173&&e.target.value===\"\"){ // -\n            e.preventDefault();\n        }else if (e.keyCode===40) { //down\n            if(currentFocus+1 >= acTags.length){setCurrentFocus(0)}\n            else{setCurrentFocus(currentFocus+1)}\n        } else if (e.keyCode===38) { //up\n            if (currentFocus-1 < 0){setCurrentFocus(acTags.length - 1)}\n            else{setCurrentFocus(currentFocus-1)}\n        } else if (e.keyCode===13) {\n            e.preventDefault();\n            if (currentFocus > -1) {\n                createNewTag(acTags[currentFocus].name);\n            } else if(e.target.value!==\"\") {\n                createNewTag(e.target.value);\n            }\n        }\n    };\n    const createNewTag = async (newTag, exitInput=false) =>{\n        if(props.inputMode){ // save new tag\n            if(!props.tags.find(t=>t.name.toLowerCase()===newTag.toLowerCase())){\n                const inTags = acTags.find(t=>t.name.toLowerCase()===newTag.toLowerCase());\n                if(inTags){\n                    await arachne.tag_lnks.save({tag_id: inTags.id, section_id: props.sectionId, project_id: props.project.id});\n                    await props.loadTags();\n                }else{\n                    const newTagId = await arachne.tags.save({\n                        name: newTag,\n                        color: colorPicker(),\n                        project_id: props.project.id,\n                        user_id: props.project.user_id,\n                        shared_id: props.project.shared_id,\n                    });\n                    await arachne.tag_lnks.save({tag_id: newTagId, section_id: props.sectionId, project_id: props.project.id});\n                    await props.loadTags();\n                }\n            }\n            \n        }else{ // remove existing tag\n            const existingTag = props.tags.find(t=>t.name.toLowerCase()===newTag.toLowerCase());\n            if(existingTag){\n                const currentTagLnk = await arachne.tag_lnks.get({tag_id: existingTag.id, section_id: props.sectionId});\n                await arachne.tag_lnks.delete(currentTagLnk[0].id)\n                await props.loadTags();\n                props.setInputMode();\n            }\n        }\n        setInputValue(\"\");\n        if(exitInput){setACTags([])}\n        else{loadACTags()}\n    };\n    return <div style={{width:\"300px\", position: \"relative\", display: \"inline-block\"}}>\n        <input value={inputValue} onChange={e=>{setInputValue(e.target.value)}} onFocus={()=>{loadACTags();props.centerSection()}} onBlur={()=>{setInputValue(\"\");setACTags([]);if(!props.inputMode){props.setInputMode()}}} type=\"text\" style={{background: \"none\", outline: \"none\", border: \"none\", margin: \"1px 2px\", padding: \"4px 10px\"}} onKeyDown={e=>{onKeyDown(e)}} />\n    {acTags.length>0&&<div className=\"autocomplete-items\" style={{borderColor: props.inputMode?null:\"var(--bs-yellow)\"}}>\n        {acTags.map((t,i)=><div key={t.id} style={{backgroundColor: props.inputMode?null:\"#ffecb1\", borderColor: props.inputMode?null:\"var(--bs-yellow)\"}} onMouseDown={async ()=>{await createNewTag(t.name, true)}} className={i===currentFocus?\"autocomplete-active\":\"\"}>{t.name}</div>)}\n    </div>}\n    </div>;\n}\nfunction FilterTag(props){\n    return <div style={{cursor: \"default\", backgroundColor: props.t.exclude?\"rgb(248,248,248)\":props.t.color, fontWeight: \"bold\", color: props.t.exclude?props.t.color:\"rgba(255,255,255, 0.8)\", border: `1px solid ${props.t.color}`, margin: \"1px 2px\", padding: \"3px 15px 3px 18px\", borderRadius: \"18px\"}}>\n        {props.t.name}\n        <FontAwesomeIcon onClick={async e=>{\n            e.stopPropagation();\n            props.removeTag(props.t);\n            }} style={{cursor: \"pointer\", margin: \"4px 0 0 9px\"}} icon={faMinusCircle} />\n    </div>;\n}\nfunction Tag(props){\n    return <div style={{cursor: \"default\", backgroundColor: props.t.color, fontWeight: \"bold\", color: \"rgba(255,255,255, 0.8)\", margin: \"1px 2px\", padding: \"3px 15px 3px 18px\", borderRadius: \"18px\"}}>\n        {props.t.name}\n        <FontAwesomeIcon onClick={async e=>{\n            e.stopPropagation();\n            const cTagLnk = await arachne.tag_lnks.get({tag_id: props.t.id, section_id: props.sectionId}, {select: [\"id\"]});\n            await arachne.tag_lnks.delete(cTagLnk[0].id);\n            await props.loadTags();\n            }} style={{cursor: \"pointer\", margin: \"4px 0 0 9px\"}} icon={faMinusCircle} />\n    </div>;\n}\nfunction ImportZettel(props){\n    const [mode, setMode] = useState(\"lemma\")\n    const [status, setStatus] = useState(null);\n    const [lemma, setLemma] =useState(\"\");\n    const [SF, setSF] = useState(null);\n    const [lemmaId, setLemmaId] = useState(null);\n    const [lemmaZettelCount, setLemmaZettelCount] = useState(0);\n    const [zettelZettelCount, setZettelZettelCount] = useState(0);\n    const [searchFields, setSearchFields] = useState([]);\n    const [nextID, setNextID] = useState(1);\n    useEffect(()=>{\n        const fetchData = async () => {\n            if(lemmaId){\n                const count = await arachne.zettel.get({lemma_id: lemmaId}, {count: true});\n                setLemmaZettelCount(count[0].count);\n            }else{setLemmaZettelCount(0)}\n        };\n        fetchData();\n    }, [lemmaId]);\n\n    const searchOptions = [\n        [\"lemma\", \"Wort\"],\n        [\"type\", \"Typ\"],\n        [\"id\", \"ID\"],\n        [\"ac_web\", \"Werk\"],\n        [\"date_type\", \"Datum-Typ\"],\n        [\"date_own\", \"eigenes Sortierdatum\"],\n        [\"date_own_display\", \"eigenes Anzeigedatum\"],\n    ];\n    const removeSearchFields = id => { setSearchFields(searchFields.filter(s => s.id!==id)) };\n    const addSearchFields = () => {\n        let nSearchFields = searchFields;\n        nSearchFields.push({\n            id: nextID,\n            c: searchOptions[0][0],\n            o: \"=\",\n            v: \"\"\n        });\n        setNextID(nextID+1);\n        setSearchFields(nSearchFields);\n    };\n    const sendQuery = async () => {\n        let exportSF = [];\n        for(const sF of searchFields){\n            if(sF.v !== \"\"){\n                exportSF.push({\n                    c: sF.c,\n                    o: sF.o,\n                    v: sF.v\n                });\n            }\n        }\n\n        if(exportSF.length > 0){\n            setSF(exportSF);\n            const count = await arachne.zettel.search(exportSF, {count:true});\n            setZettelZettelCount(count[0].count);\n        } else {setZettelZettelCount(0)}\n    };\n    let cSF = [];\n    for(const sF of searchFields){\n        cSF.push(<SearchInput searchOptions={searchOptions} removeSearchFields={id => {removeSearchFields(id)}} itemId={sF.id} key={sF.id} c={sF.c} o={sF.o} v={sF.v} clickButton={sendQuery} changeItem={item=>{\n            setSearchFields(searchFields.map(s=>{if(s.id===item.id){return item}else{return s}}));\n        }} />);\n    }\n\n    return <Modal show={props.show} size=\"lg\" onHide={()=>{props.onReplay(false)}} backdrop=\"static\">\n        <Modal.Header closeButton>\n            <Modal.Title>Zettel importieren</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n            <Container>\n                <Accordion defaultActiveKey=\"0\">\n                    <Accordion.Item eventKey=\"0\" onClick={()=>{setMode(\"lemma\")}}>\n                        <Accordion.Header>Wort-Liste</Accordion.Header>\n                        <Accordion.Body>\n                        <AutoComplete style={{width: \"100%\"}} onChange={(value, id)=>{setLemmaId(id);setLemma(value)}} value={lemma} tbl=\"lemma\" searchCol=\"lemma\" returnCol=\"lemma_ac\" />\n                        {lemmaZettelCount>0?<Badge pill bg=\"success\" className=\"mt-2\">{lemmaZettelCount} Zettel gefunden.</Badge>:null}\n                        </Accordion.Body>\n                    </Accordion.Item>\n                    <Accordion.Item eventKey=\"1\" onClick={()=>{setMode(\"zettel\")}}>\n                        <Accordion.Header>Zettel-Datenbank</Accordion.Header>\n                        <Accordion.Body>\n                        <div className=\"searchBox d-flex flex-wrap\">\n                            {cSF}\n                            <FontAwesomeIcon color=\"LightGray\" icon={faPlusCircle} style={{color: \"var(--mainColor)\", position: \"relative\", top: \"6px\", fontSize: \"25px\", cursor: \"pointer\"}}  onClick={() => {addSearchFields()}}\n                            />\n                        </div>\n                        <div style={{textAlign: \"right\"}}>{zettelZettelCount>0?<Badge pill bg=\"success\" className=\"mt-2\" style={{marginRight: \"15px\"}}>{zettelZettelCount} Zettel gefunden.</Badge>:null}<Button variant=\"light\" onClick={()=>{sendQuery()}}>Suchen</Button></div>\n                        </Accordion.Body>\n                    </Accordion.Item>\n                    </Accordion>\n            </Container>\n        </Modal.Body>\n        <Modal.Footer>\n            <Button variant=\"secondary\" onClick={()=>{props.onReplay(false)}}>Abbrechen</Button>\n            <Button variant=\"primary\" onClick={async ()=>{\n                setStatus(<Spinner style={{marginLeft: \"10px\"}} animation=\"border\" size=\"sm\" />);\n                const select = [\"id\", \"ac_web\", \"img_path\", \"date_sort\", \"txt\", \"type\", \"work_id\"];\n                let zettelLst = [];\n                if(mode===\"lemma\"){zettelLst=await arachne.zettel.get({lemma_id: lemmaId}, {select: select})}\n                else{zettelLst=await arachne.zettel.search(SF, {select:select})}\n                let tagObj = {};\n                const currentTags = await arachne.tags.get({project_id: props.project.id});\n                currentTags.forEach(t=>{tagObj[t.name]=t.id});\n                for(const z of zettelLst){\n                    const cmnts = await arachne.comment.get({zettel_id: z.id}, {select: [\"comment\", \"user\"]});\n                    const newSecId = await arachne.sections.save({\n                        zettel_id: z.id,\n                        project_id: props.project.id,\n                        ref: z.ac_web,\n                        text: z.txt,\n                        comment: cmnts.length>0?cmnts.map(c=>`${c.user}:\\n${c.comment}\\n`).join(\"\\n\\n\"):null,\n                        date_sort: z.date_sort,\n                        img: z.img_path,\n                        user_id: props.project.user_id,\n                        shared_id: props.project.shared_id,\n                        work_id: z.work_id,\n                    });\n                    let typeTag = null;\n                    if(z.type===1){typeTag=\"verzettelt\"}\n                    else if(z.type===2){typeTag=\"Exzerpt\"}\n                    else if(z.type===3){typeTag=\"Index\"}\n                    else if(z.type===6){typeTag=\"Index (unkl. Werk)\"}\n                    else if(z.type===7){typeTag=\"Notiz\"}\n                    if(typeTag){\n                        if(!Object.keys(tagObj).includes(typeTag)){\n                            const newTagId = await arachne.tags.save({\n                                name: typeTag,\n                                color: colorPicker(),\n                                project_id: props.project.id,\n                                user_id: props.project.user_id,\n                                shared_id: props.project.shared_id,\n                            });\n                            tagObj[typeTag] = newTagId;\n                        }\n                        await arachne.tag_lnks.save({\n                            tag_id: tagObj[typeTag],\n                            section_id: newSecId,\n                            user_id: props.project.user_id,\n                            shared_id: props.project.shared_id,\n                            project_id: props.project.id,\n                        });\n                    }\n                }\n                setStatus(null);\n                props.onReplay(true);\n            }} disabled={(mode===\"lemma\"&&lemmaZettelCount>0)||(mode===\"zettel\"&&zettelZettelCount>0)?false:true}>Zettel laden{status}</Button>\n        </Modal.Footer>\n    </Modal>;\n}\nfunction colorPicker(){\n    const colors = [\n        \"#023FA5\",\"#7D87A5\",\"#BEC1D4\",\"#D6BCC0\",\"#BB7784\",\"#8E063B\",\n        \"#4A6FE3\",\"#8595E1\",\"#B5BBE3\",\"#E6AFB9\",\"#E07B91\",\"#D33F6A\",\n        \"#11C638\",\"#8DD593\",\"#C6DEC7\",\"#EAD3C6\",\"#F0B98D\",\"#EF9708\",\n        \"#0FCFC0\",\"#9CDED6\",\"#D5EAE7\",\"#F3E1EB\",\"#F6C4E1\",\"#F79CD4\",\n    ];\n    return colors[Math.floor(Math.random() * colors.length)];\n}\nexport { Editor, RessourcesButtons, TagBox }","import { useState } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faSignOutAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport { Container, Navbar, Nav, NavDropdown } from \"react-bootstrap\";\n\nimport { Overview } from \"./overview.js\";\nimport { Editor } from \"./editor.js\";\nimport { ChangeLog } from \"./../changelog.js\";\nimport { Account } from \"./../settings.js\";\nimport { arachne } from \"./../arachne.js\";\n\nfunction getSettings(){\n    let settings = JSON.parse(localStorage.getItem(\"editor_settings\"));\n    if(settings===null){settings = {}}\n    if(!settings.hasOwnProperty(\"projectSort\")){settings.projectSort = \"name\"}\n    if(!settings.hasOwnProperty(\"openExternal\")){settings.openExternal=false}\n    return settings;\n}\nfunction getSetting(name){\n    const settings = getSettings();\n    return settings[name];\n}\nfunction setSetting(key, value){\n    let settings = getSettings()\n    settings[key] = value;\n    localStorage.setItem(\"editor_settings\", JSON.stringify(settings))\n}\n\nfunction MainBody(props){\n    arachne.changeLog = dbChangeLog;\n    let main = null;\n    switch(props.res){\n        case null:\n            main = <Overview loadMain={(...params)=>{props.loadMain(...params)}} />;\n            break;\n        case \"editor\":\n            main = <Editor loadMain={(...params)=>{props.loadMain(...params)}} resId={props.resId} />;\n            break;\n        case \"changelog\":\n            main = <ChangeLog />;\n            break;\n        case \"settings\":\n            main = <Account />;\n            break;\n        default:\n            main = <div>Unbekannter Menü-Punkt: \"{props.res}\"</div>;\n    }\n    return <>\n        {main}\n        \n    </>;\n}\nfunction MainNavBar(props){\n    const [editions, setEditions] = useState([]);\n    const [editionTxt, setEditionTxt] = useState(\"zuletzte geöffnet\");\n    /*useEffect(async ()=>{\n        const newEditions = getEditions();\n        setEditions(newEditions.map(e=>{return <NavDropdown.Item key={e.id} onClick={ev=>{storeEdition(e.id, e.label, e.opus);props.loadMain(ev,\"edition\", e.id)}}>{e.label}{e.opus?` (${e.opus.substring(0,20)+(e.opus.length>20?\"...\":\"\")})`:null}</NavDropdown.Item>;}));\n        if(props.res===\"edition\"){setEditionTxt(newEditions[0].label+(newEditions[0].opus?` (${newEditions[0].opus.substring(0,20)+(newEditions[0].opus.length>20?\"...\":\"\")})`:null))}\n        else{setEditionTxt(\"zuletzte geöffnet\")}\n    }, [props.res, props.resId]);*/\n    return <Navbar bg=\"dark\" variant=\"dark\" fixed=\"top\">\n        <Container fluid>\n            <Navbar.Brand style={{cursor: \"pointer\"}} onClick={e=>{props.loadMain(e, null)}}>Editor</Navbar.Brand>\n            <Navbar.Toggle />\n            <Navbar.Collapse className=\"justify-content-end\">\n                <Nav>\n                    <NavDropdown title={editionTxt}>{editions}\n                    </NavDropdown>\n                    <NavDropdown title=\"Einstellungen\">\n                    <NavDropdown.Item onClick={e=>{props.loadMain(e,\"settings\")}}>Konto</NavDropdown.Item>\n                        <NavDropdown.Item onClick={e=>{props.loadMain(e,\"changelog\")}}>Änderungen</NavDropdown.Item>\n                    </NavDropdown>\n                    <Nav.Link>\n                        <FontAwesomeIcon icon={faSignOutAlt} onClick={e => {props.loadMain(e, \"logout\")}} title=\"abmelden\" />\n                    </Nav.Link>\n                </Nav>\n            </Navbar.Collapse>\n        </Container>\n</Navbar>;\n}\nconst dbChangeLog = [\n    {\n        title: \"Beta 1.0\",\n        date: \"2022-06-10\",\n        description: <><p>Beta Version online!</p></>\n    },\n]\nexport { MainBody, MainNavBar, getSettings, getSetting, setSetting };","import { Row, Col, Form, Container } from \"react-bootstrap\";\nimport React, { useState } from \"react\";\n\nimport { arachne } from \"./arachne.js\";\nimport { StatusButton } from \"./elements.js\";\n\nfunction Account(){\n    const [firstName, setFirstName] = useState(arachne.me.first_name);\n    const [lastName, setLastName] = useState(arachne.me.last_name);\n    const [email, setEmail] = useState(arachne.me.email);\n    const [oldPassword, setOldPassword] = useState(\"\");\n    const [newPassword, setNewPassword] = useState(\"\");\n    const [zWidth, setZWidth] = useState(arachne.options.z_width);\n    const [actionKey, setActionKey] = useState(arachne.options.action_key);\n    const [openExternally, setOpenExternally]=useState(arachne.options.openExternally);\n    const displaySettings = [\n        <Row key={1} className=\"mb-2\">\n            <Col xs={2}>Breite der Zettel:</Col>\n            <Col><Form.Range min=\"400\" max=\"600\" size=\"sm\" value={zWidth} onChange={e=>{\n                arachne.setOptions(\"z_width\", e.target.value);\n                arachne.setOptions(\"z_height\", 350/500*parseInt(e.target.value));\n                setZWidth(e.target.value);\n            }}/></Col>\n        </Row>,\n        <Row key={2} className=\"mb-2\">\n            <Col xs={4}>Öffnen der Ressourcen (Zettel im Editor):</Col>\n            <Col><Form.Select size=\"sm\" value={openExternally} onChange={e=>{arachne.setOptions(\"openExternally\", parseInt(e.target.value));setOpenExternally(e.target.value)}}>\n                    <option value=\"0\">im gleichen Fenster</option>\n                    <option value=\"1\">in einem neuen Fenster</option>\n                    <option value=\"2\">in Echo</option>\n                </Form.Select></Col>\n        </Row>\n    ];\n    return <Container style={{padding: \"0 10% 0 10%\"}}>\n        <Row><Col><h3>Persönliche Daten</h3></Col></Row>\n        <Row className=\"mb-2\">\n            <Col xs={2}>Vorname:</Col>\n            <Col><Form.Control type=\"text\" size=\"sm\" value={firstName} onChange={e=>{setFirstName(e.target.value)}} /></Col>\n        </Row>\n        <Row className=\"mb-2\">\n            <Col xs={2}>Nachname:</Col>\n            <Col><Form.Control type=\"text\" size=\"sm\" value={lastName} onChange={e=>{setLastName(e.target.value)}} /></Col>\n        </Row>\n        <Row className=\"mb-4\">\n            <Col xs={2}>Email-Adresse:</Col>\n            <Col><Form.Control type=\"text\" size=\"sm\" value={email} onChange={e=>{setEmail(e.target.value)}} /></Col>\n        </Row>\n        <Row className=\"mb-4\">\n            <Col xs={2}></Col>\n            <Col><StatusButton value=\"speichern\" onClick={async ()=>{\n                    await arachne.user.save({\n                        id: arachne.me.id,\n                        first_name: firstName,\n                        last_name: lastName,\n                        email: email,\n                    });\n                    const reUser = await arachne.getUser();\n                    arachne.me = reUser;\n                    return {status: 1};\n                }} /></Col>\n        </Row>\n\n\n        <Row><Col><h3>Passwort</h3></Col></Row>\n        <Row className=\"mb-2\">\n            <Col xs={2}>altes Passwort:</Col>\n            <Col><Form.Control type=\"password\" size=\"sm\" value={oldPassword} onChange={e=>{setOldPassword(e.target.value)}} /></Col>\n        </Row>\n        <Row className=\"mb-4\">\n            <Col xs={2}>neues Passwort:</Col>\n            <Col><Form.Control type=\"password\" size=\"sm\" value={newPassword} onChange={e=>{setNewPassword(e.target.value)}} /></Col>\n        </Row>\n        <Row className=\"mb-4\">\n            <Col xs={2}></Col>\n            <Col><StatusButton value=\"speichern\" onClick={async ()=>{\n                    await arachne.user.save({\n                        id: arachne.me.id,\n                        old_password: oldPassword,\n                        new_password: newPassword\n                    });\n                    return {status: 1};\n                }} /></Col>\n        </Row>\n\n\n        <Row><Col><h3>Darstellung und Benutzung</h3></Col></Row>\n        <Row className=\"mb-4\">\n            <Col xs={4}>Funktionstaste für Tastenkürzel</Col>\n            <Col>\n                <Form.Select size=\"sm\" value={actionKey} onChange={e=>{arachne.setOptions(\"action_key\", e.target.value);setActionKey(e.target.value)}}>\n                    <option value=\"alt\">Alt</option>\n                    <option value=\"ctrl\">Strg</option>\n                    <option value=\"cmd\">Befehlstaste</option>\n                </Form.Select>\n                <small>Eine Liste mit Tastenkürzeln finden Sie <a className=\"text-primary\" rel=\"noreferrer\" href=\"https://gitlab.lrz.de/haeberlin/dmlw/-/wikis/06-Argos#tastenkürzel\" target=\"_blank\">hier</a>.</small>\n            </Col>\n        </Row>\n        {displaySettings}\n    </Container>;\n}\n\nexport { Account };"],"names":["ChangeLog","arachne","a","b","date","undefined","project","useState","displayAll","setDisplayAll","c","i","variant","title","d","substring","description","style","cursor","marginTop","textAlign","onClick","Overview","props","getSettings","projectSort","sortName","setSortName","renameId","setRenameId","shareId","setShareId","renameName","setRenameName","activeProjects","setActiveProjects","archiveProjects","setArchiveProjects","sharedProjects","setSharedProjects","userLst","setUserLst","useEffect","refreshPage","fetchData","order","users","map","u","id","first_name","last_name","user_id","status","shared_id","deleteProject","window","confirm","project_id","articleLst","length","zettelLst","z","tagLst","tagLnkLst","copyProject","oldProjectId","oldProject","name","newProjectId","zettelLnk","oldArticleId","newArticleId","article_id","shareProject","newUserId","projectId","select","oldUserId","show","msg","input","onReplay","e","dropDown","Container","Tabs","defaultActiveKey","Tab","eventKey","className","width","Table","hover","p","editMenu","ProjectRow","openProject","loadMain","disabled","NavBarBottom","showEdit","setShowEdit","shared","setShared","isShared","setIsShared","getUserName","userName","height","onMouseEnter","onMouseLeave","u_date","c_date","Dropdown","display","size","showSort","setShowSort","ToolKitItems","Navbar","fixed","bg","setSetting","fluid","menuItems","createUtilityClassName","utilityValues","breakpoints","DEFAULT_BREAKPOINTS","classes","Object","entries","forEach","utilName","utilValue","brkPoint","bpValue","infix","push","Stack","React","ref","as","Component","bsPrefix","direction","gap","useBootstrapPrefix","useBootstrapBreakpoints","_jsx","classNames","displayName","Badge","pill","text","prefix","defaultProps","OutlineBox","dragObjectId","setDragObjectId","devider","borderTop","margin","Row","Col","xs","paddingBottom","marginBottom","borderBottom","articlesLst","depth","marginLeft","onDrop","dropArticle","parent_id","sort_nr","target","borderColor","onDragOver","preventDefault","onDragLeave","ArticleBox","changeArticle","articles","collapsed","collapsedArticlesLst","includes","toogleCollapse","displayArticles","find","parseInt","split","displaySections","setDisplaySections","dblClickCallback","el","closest","getElementsByClassName","contentEditable","focus","draggable","onDragStart","tabIndex","onDoubleClick","onKeyDown","keyCode","shiftKey","parentArticle","previousArticles","filter","sort","articleBoxes","document","previousArticleChildren","onBlur","parentElement","innerText","blur","ArticleBoxSections","setSectionDetailId","inputMode","articleId","sections","setSections","inputValue","setInputValue","acLst","setACLst","currentFocus","setCurrentFocus","sectionDetailId","setTagLst","loadSections","loadACLst","allSections","toLowerCase","indexOf","type","allTags","t","concat","addSections","item","tag_id","tagLnks","section_id","articleSections","s","newTags","tl","newTag","SectionDetailEdit","handleClose","backgroundColor","color","SectionBox","position","value","onChange","onFocus","parentNode","firstChild","lastChild","fontWeight","fontStyle","onMouseDown","dangerouslySetInnerHTML","parseHTML","replace","RegExp","previousSibling","nextSibling","ressources","setRessources","showComment","setShowComment","comment","setComment","img","setImg","reference","setReference","setText","verso","setVerso","tags","setTags","unusedTags","setUnusedTags","section","setSection","loadSection","getElementById","newSection","work_id","loadTags","cAllTags","cTagLnks","cTagLnk","newTagIndex","findIndex","splice","Modal","onHide","closeButton","Card","aspectRatio","src","top","left","right","opacity","icon","faRotate","Form","placeholder","RessourcesButtons","setRessourceView","url","rows","fontSize","TagBox","centerSection","ExportBox","exportTxt","setExportTxt","exportLst","getArticle","article","repeat","join","Editor","mode","setMode","setProject","setArticles","setArticlesLst","setCollapsedArticlesLst","filterLst","setFilterLst","filterTags","setFilterTags","setLimitFilterResults","showMenuLeft","setShowMenuLeft","showImport","setShowImport","scSetup","updateSections","createNewArticle","useShortcuts","updateArticles","inArticles","returnChildIds","parentId","childArticles","returnLst","newChildLst","resId","newProject","newArticles","newArticle","Math","max","newId","assign","currentArticle","save_old_lst","na","save_new_lst","foundSections","at","allTagLnks","fs","atl","exclude","modeBox","ZettelBox","v","l","aId","Nav","textDecoration","wideScreen","setWideScreen","splitView","setSplitView","splitViewURL","setSplitViewURL","resizeObserver","ResizeObserver","contentRect","observe","unobserve","ImportZettel","sId","SectionCard","faTimesCircle","zIndex","MenuLeft","activeTabKey","setActiveTabKey","enhancedTags","tag","count","tagCount","deleteTag","oldTagLnks","Offcanvas","backdrop","scroll","tagNames","alert","activeKey","onSelect","k","FilterBox","Button","defaultValue","faPenToSquare","faTrashCan","isVisible","setIsVisible","refImg","useRef","scrollIntoView","block","useIntersectionObserver","onIntersect","observerElement","isIntersecting","current","zettel_id","localStorage","setItem","open","float","button","setButton","selected","setSelected","openRessource","label","ButtonGroup","r","setInputMode","removeTag","ft","addTag","tName","structuredClone","borderStyle","border","padding","alignContent","alignItems","flexWrap","minHeight","borderRadius","tb","children","FilterTag","FilterBoxInput","Tag","sectionId","TagBoxInput","acTags","setACTags","loadACTags","currentTags","newACTags","currentACTags","createNewTag","exitInput","existingTag","background","outline","inTags","colorPicker","newTagId","currentTagLnk","stopPropagation","faMinusCircle","setStatus","lemma","setLemma","SF","setSF","lemmaId","setLemmaId","lemmaZettelCount","setLemmaZettelCount","zettelZettelCount","setZettelZettelCount","searchFields","setSearchFields","nextID","setNextID","lemma_id","searchOptions","removeSearchFields","sendQuery","exportSF","sF","o","cSF","itemId","clickButton","changeItem","Accordion","tbl","searchCol","returnCol","faPlusCircle","nSearchFields","addSearchFields","marginRight","Spinner","animation","tagObj","cmnts","ac_web","txt","user","date_sort","img_path","newSecId","typeTag","keys","colors","floor","random","settings","JSON","parse","getItem","hasOwnProperty","openExternal","getSetting","key","stringify","MainBody","dbChangeLog","main","res","MainNavBar","editions","editionTxt","NavDropdown","faSignOutAlt","Account","firstName","setFirstName","lastName","setLastName","email","setEmail","oldPassword","setOldPassword","newPassword","setNewPassword","zWidth","setZWidth","actionKey","setActionKey","openExternally","setOpenExternally","displaySettings","min","reUser","old_password","new_password","rel","href"],"sourceRoot":""}