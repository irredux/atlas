"use strict";(self.webpackChunkatlas=self.webpackChunkatlas||[]).push([[435],{4435:function(e,n,t){t.r(n),t.d(n,{MainBody:function(){return D},MainNavBar:function(){return V}});var s=t(885),r=t(4165),a=t(5861),i=t(2791),l=t(9806),c=t(1632),u=t(2354),o=t(9506),d=t(7022),x=t(9249),h=t(6407),f=t(9743),p=t(2677),g=t(2591),Z=t(9410),j=t(4292),m=t(3360),v=t(7762),y=t(5167),b=t(1398),_=t(3350),S=t(3222),w=t(184);function k(e,n){if(localStorage.getItem("argos_currentPages")){var t=JSON.parse(localStorage.getItem("argos_currentPages"));t.find((function(n){return n.edition_id===e}))?localStorage.setItem("argos_currentPages",JSON.stringify(t.map((function(t){return t.edition_id!==e?t:{edition_id:e,scan_id:n}})))):(t.push({edition_id:e,scan_id:n}),localStorage.setItem("argos_currentPages",JSON.stringify(t)))}else localStorage.setItem("argos_currentPages",JSON.stringify([{edition_id:e,scan_id:n}]))}function N(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"???",s=localStorage.getItem("editions");s?((s=(s=JSON.parse(s)).filter((function(n){return n.id!==e}))).length>15&&s.splice(14),s.unshift({id:e,label:n,opus:t})):s=[{id:e,label:n,opus:t}],localStorage.setItem("editions",JSON.stringify(s))}function C(){var e=localStorage.getItem("editions");return e?JSON.parse(e):[]}function I(e){var n=(0,i.useState)("0.5"),t=(0,s.Z)(n,2),l=t[0],c=t[1],u=(0,i.useState)(null),o=(0,s.Z)(u,2),x=o[0],g=o[1],Z=(0,i.useState)(h.Q.options.argos_query),j=(0,s.Z)(Z,2),m=j[0],y=j[1];(0,i.useEffect)((function(){h.Q.setOptions("argos_query",m)}),[m]);var b=(0,i.useState)([]),_=(0,s.Z)(b,2),k=_[0],N=_[1],C=(0,i.useState)(0),I=(0,s.Z)(C,2),Q=I[0],T=I[1],A=(0,i.useState)(null),R=(0,s.Z)(A,2),z=R[0],P=R[1],q=(0,i.useState)(h.Q.options.argos_mode),L=(0,s.Z)(q,2),B=L[0],H=L[1];(0,i.useEffect)((function(){h.Q.setOptions("argos_mode",B)}),[B]);var K=(0,i.useState)(!1),F=(0,s.Z)(K,2),J=F[0],D=F[1],V=(0,i.useState)([]),G=(0,s.Z)(V,2),U=G[0],$=G[1],Y=(0,i.useState)(0),W=(0,s.Z)(Y,2),X=W[0],ee=W[1],ne=(0,i.useState)(!1),te=(0,s.Z)(ne,2),se=te[0],re=te[1],ae=(0,i.useState)(!1),ie=(0,s.Z)(ae,2),le=ie[0],ce=ie[1],ue=(0,i.useState)(!1),oe=(0,s.Z)(ue,2),de=oe[0],xe=oe[1],he=(0,i.useState)(h.Q.options.argos_zoom),fe=(0,s.Z)(he,2),pe=fe[0],ge=fe[1];(0,i.useEffect)((function(){h.Q.setOptions("argos_zoom",pe)}),[pe]);var Ze=[["ACTION+ESC",function(){e.loadMain(null,null)}],["ACTION+q",function(){g(null)}],["ACTION+e",function(){g("ressource"===x?null:"ressource")}],["ACTION+s",function(){g("scans"===x?null:"scans")}],["ACTION+o",function(){g("opera"===x?null:"opera")}],["ACTION+i",function(){g("content"===x?null:"content")}],["ACTION+b",function(){ce(!le)}],["ACTION+f",function(){var e=document.getElementById("searchInput");e&&e.focus()}],["Alt+ArrowRight",function(){k.length>Q+1?T(Q+1):T(0)}],["Alt+ArrowLeft",function(){T(0<=Q-1?Q-1:k.length-1)}],["ACTION+1",function(){H(0)}],["ACTION+2",function(){H(1)}],["ACTION+3",function(){H(2)}],["ACTION+,",function(){ge(pe-5)}],["ACTION+.",function(){ge(pe+5)}]];(0,S.XU)(Ze,!1),(0,i.useEffect)((function(){var n=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(){var t,s,a;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.Q.edition.get({id:e.resId});case 2:return t=n.sent,P(t[0]),c(t[0].aspect_ratio?"".concat(t[0].aspect_ratio):"0.6"),n.next=7,h.Q.scan_lnk.get({edition_id:e.resId});case 7:return s=(s=n.sent).sort((function(e,n){return n.filename<e.filename})),$(s),localStorage.getItem("argos_currentPages")&&(a=JSON.parse(localStorage.getItem("argos_currentPages")).find((function(n){return n.edition_id===e.resId})))&&je(a.scan_id),n.next=13,(0,S._v)(400);case 13:xe(!0);case 14:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[e.resId]),(0,i.useEffect)((function(){var e,n=!1,t=(0,v.Z)(U);try{for(t.s();!(e=t.n()).done;){var s=e.value;if(null!==s.full_text&&""!==s.full_text){n=!0;break}}}catch(r){t.e(r)}finally{t.f()}n?D(!0):(D(!1),0!=B&&H(0))}),[U]),(0,i.useEffect)((function(){if(J&&m.length>0){console.log("query:",m);var e=U.filter((function(e){return e.full_text&&e.full_text.indexOf(m)>-1}));N(e),T(0),0===B&&H(1)}else N([]),T(0)}),[J,m]),(0,i.useEffect)((function(){de&&k.length>0&&je(k[Q].id)}),[Q,k]);var je=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,S._v)(100);case 2:(t=document.getElementById("p_".concat(n)))?t.scrollIntoView():console.log("page not found:",n);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(d.Z,{onScroll:function(e){!1===se&&(re(!0),ee(e.target.scrollTop),setTimeout((function(){re(!1)}),500))},style:{position:"fixed",top:"60px",left:"0",right:"0",bottom:"60px",overflow:"scroll"},fluid:!0,children:U.map((function(e){return(0,w.jsx)(f.Z,{children:(0,w.jsx)(p.Z,{align:"center",children:(0,w.jsx)(E,{aspectRatio:l,editMode:le,query:m,mode:B,zoom:pe,scrollPos:X,page:e,ressource:z})})},e.scan_id)}))}),(0,w.jsx)(O,{scrollPageIntoView:function(e){je(e)},setEditMode:function(){ce(!le)},fullTxt:J,setSideMenu:function(e){g(e)},query:m,setQuery:function(e){y(e)},queryResults:k,queryResultIndex:Q,setQueryResultIndex:function(e){T(e)},mode:B,setMode:function(e){H(e)},zoom:pe,setZoom:function(e){ge(e)},pages:U}),(0,w.jsx)(M,{ressource:z,pages:U,item:x,setSideMenu:function(e){g(e)}})]})}function M(e){return(0,w.jsxs)(y.Z,{show:!!e.item,onHide:function(){e.setSideMenu(null)},placement:"end",children:[(0,w.jsx)(y.Z.Header,{closeButton:!0,children:(0,w.jsxs)(y.Z.Title,{children:["opera"===e.item&&"Angaben aus der opera-Liste","ressource"===e.item&&"Ressource (ID: ".concat(e.ressource.id,")"),"scans"===e.item&&"Scan-Seiten zuweisen"]})}),(0,w.jsxs)(y.Z.Body,{children:["opera"===e.item&&(0,w.jsx)(A,{ressource:e.ressource}),"ressource"===e.item&&(0,w.jsx)(R,{ressource:e.ressource}),"scans"===e.item&&(0,w.jsx)(T,{pages:e.pages,ressource:e.ressource}),"content"===e.item&&(0,w.jsx)(Q,{setSideMenu:function(n){e.setSideMenu(n)},pages:e.pages,ressource:e.ressource})]})]})}function Q(e){return(0,w.jsxs)(d.Z,{children:[(0,w.jsx)(f.Z,{className:"mb-4",children:(0,w.jsx)(p.Z,{children:(0,w.jsx)("h2",{children:"Inhaltsverzeichnis"})})}),(0,w.jsxs)(f.Z,{className:"mb-3",children:[(0,w.jsx)(p.Z,{xs:1}),(0,w.jsx)(p.Z,{children:(0,w.jsx)(b.Z,{variant:"flush",children:e.pages.map((function(n){return(0,w.jsx)(b.Z.Item,{style:{textAlign:"center",color:n.body_matter?"inherit":"var(--bs-gray-500)"},action:!0,onClick:function(){document.getElementById("p_".concat(n.scan_id)).scrollIntoView({behavior:"auto",block:"start"}),e.setSideMenu(null)},children:parseInt(n.filename)>0?parseInt(n.filename):n.filename},n.id)}))})}),(0,w.jsx)(p.Z,{xs:1})]})]})}function T(e){var n=(0,i.useState)([]),t=(0,s.Z)(n,2),l=t[0],c=t[1],u=(0,i.useState)(e.pages.map((function(e){return e.scan_id}))),o=(0,s.Z)(u,2),x=o[0],g=o[1];(0,i.useEffect)((function(){var n=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(){var t;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.Q.scan.get({path:e.ressource.path});case 2:t=n.sent,c(t);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[]);var Z=function(e){x.includes(e)?g(x.filter((function(n){return n!=e}))):g(x.concat([e]))};return(0,w.jsxs)(d.Z,{children:[(0,w.jsx)(f.Z,{className:"mb-2",children:(0,w.jsxs)(p.Z,{children:["Dateipfad: ",(0,w.jsx)("code",{children:e.ressource.path})]})}),(0,w.jsx)(f.Z,{className:"mb-4",children:(0,w.jsx)(p.Z,{children:(0,w.jsxs)("small",{children:["Einzelne Seiten k\xf6nnen mit einem Klick markiert werden. Mehrere Seiten k\xf6nnen mit einer Bewegung der Maus und dem gleichzeitigen Gedr\xfcckthalten der ",h.Q.me.selectKey,"-Taste aktiviert werden."]})})}),(0,w.jsx)(f.Z,{className:"mb-3",children:(0,w.jsx)(p.Z,{children:(0,w.jsx)(b.Z,{children:l.map((function(e){return(0,w.jsx)(b.Z.Item,{className:"mb-1",active:!!x.includes(e.id),onMouseEnter:function(n){("cmd"===h.Q.me.selectKey&&n.metaKey||"ctrl"===h.Q.me.selectKey&&n.ctrlKey)&&Z(e.id)},onClick:function(){Z(e.id)},action:!0,children:e.filename},e.id)}))})})}),(0,w.jsx)(f.Z,{className:"mb-3",children:(0,w.jsxs)(p.Z,{align:"right",children:["Auswahl: ",x.length]})}),(0,w.jsx)(f.Z,{children:(0,w.jsx)(p.Z,{children:(0,w.jsx)(S.YG,{onClick:(0,a.Z)((0,r.Z)().mark((function n(){var t,s;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.Q.scan_lnk.get({edition_id:e.ressource.id},{select:["id"]});case 2:if(!((t=n.sent).length>0)){n.next=6;break}return n.next=6,h.Q.scan_lnk.delete(t.map((function(e){return e.id})));case 6:if(!(x.length>0)){n.next=12;break}return s=(s=x.sort()).map((function(n){return{edition_id:e.ressource.id,scan_id:n}})),n.next=12,h.Q.scan_lnk.save(s);case 12:return n.abrupt("return",{status:1});case 13:case"end":return n.stop()}}),n)}))),value:"speichern"})})})]})}function A(e){var n=(0,i.useState)({}),t=(0,s.Z)(n,2),l=t[0],c=t[1],u=(0,i.useState)({}),o=(0,s.Z)(u,2),x=o[0],g=o[1];return(0,i.useEffect)((function(){var n=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(){var t,s;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.Q.work.get({id:e.ressource.work_id});case 2:return t=n.sent,c(t[0]),n.next=6,h.Q.author.get({id:t[0].author_id});case 6:s=n.sent,g(s[0]);case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[e.ressource]),(0,w.jsxs)(d.Z,{children:[(0,w.jsx)(f.Z,{className:"mb-2",children:(0,w.jsx)(p.Z,{dangerouslySetInnerHTML:(0,S.rg)(l.date_display?l.date_display:x.date_display)})}),(0,w.jsxs)(f.Z,{className:"mb-2",children:[(0,w.jsx)(p.Z,{xs:5,children:(0,w.jsx)("b",{children:(0,w.jsx)("aut",{children:l.author_display?l.author_display:x.abbr})})}),(0,w.jsx)(p.Z,{dangerouslySetInnerHTML:(0,S.rg)(l.author_display?null:x.full)})]}),(0,w.jsxs)(f.Z,{className:"mb-4",children:[(0,w.jsx)(p.Z,{xs:5,children:(0,w.jsx)("b",{style:{marginLeft:"10px"},dangerouslySetInnerHTML:(0,S.rg)(l.abbr)})}),(0,w.jsx)(p.Z,{children:(0,w.jsx)("span",{style:{marginLeft:"10px"},dangerouslySetInnerHTML:(0,S.rg)(l.full)})})]}),(0,w.jsx)(f.Z,{className:"mb-2",children:(0,w.jsx)(p.Z,{children:(0,w.jsx)("i",{dangerouslySetInnerHTML:(0,S.rg)(l.bibliography?l.bibliography:x.bibliography)})})}),(0,w.jsx)(f.Z,{children:(0,w.jsxs)(p.Z,{children:[(0,w.jsx)("small",{dangerouslySetInnerHTML:(0,S.rg)(l.citation?l.citation:x.citation)})," ",(0,w.jsx)("small",{dangerouslySetInnerHTML:(0,S.rg)(l.txt_info?l.txt_info:x.txt_info)})]})})]})}function R(e){var n=(0,i.useState)(e.ressource.id),t=(0,s.Z)(n,2),l=t[0],c=(t[1],(0,i.useState)(e.ressource.ressource)),u=(0,s.Z)(c,2),o=u[0],x=u[1],g=(0,i.useState)(e.ressource.work_id),Z=(0,s.Z)(g,2),j=Z[0],m=Z[1],v=(0,i.useState)(e.ressource.ac_web),y=(0,s.Z)(v,2),b=y[0],_=y[1],k=(0,i.useState)(e.ressource.editor),N=(0,s.Z)(k,2),C=N[0],I=N[1],M=(0,i.useState)(e.ressource.year),Q=(0,s.Z)(M,2),T=Q[0],A=Q[1],R=(0,i.useState)(e.ressource.volume),E=(0,s.Z)(R,2),z=E[0],O=E[1],P=(0,i.useState)(e.ressource.vol_cont),q=(0,s.Z)(P,2),L=q[0],B=q[1],H=(0,i.useState)(e.ressource.serie),K=(0,s.Z)(H,2),F=K[0],J=K[1],D=(0,i.useState)(e.ressource.location),V=(0,s.Z)(D,2),G=V[0],U=V[1],$=(0,i.useState)(e.ressource.library),Y=(0,s.Z)($,2),W=Y[0],X=Y[1],ee=(0,i.useState)(e.ressource.signature),ne=(0,s.Z)(ee,2),te=ne[0],se=ne[1],re=(0,i.useState)(e.ressource.comment),ae=(0,s.Z)(re,2),ie=ae[0],le=ae[1],ce=(0,i.useState)(e.ressource.path),ue=(0,s.Z)(ce,2),oe=ue[0],de=ue[1],xe=(0,i.useState)(e.ressource.url),he=(0,s.Z)(xe,2),fe=he[0],pe=he[1],ge=(0,i.useState)(e.ressource.aspect_ratio),Ze=(0,s.Z)(ge,2),je=Ze[0],me=Ze[1],ve=(0,i.useState)(null),ye=(0,s.Z)(ve,2),be=ye[0],_e=ye[1];return(0,i.useEffect)((function(){var e=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(j>0)){e.next=5;break}return e.next=3,h.Q.work.get({id:j},{select:["bibliography"]});case 3:(n=e.sent).length>0?_e(n[0].bibliography):_e(null);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[j]),(0,w.jsxs)(d.Z,{children:[(0,w.jsxs)(f.Z,{className:"mb-2",children:[(0,w.jsx)(p.Z,{xs:3,children:"Werk:"}),(0,w.jsx)(p.Z,{children:(0,w.jsx)(S.Qc,{value:b||"",tbl:"work",searchCol:"ac_web",returnCol:"ac_web",onChange:function(e,n){_(e),m(n)}})})]}),(0,w.jsxs)(f.Z,{className:"mb-2",children:[(0,w.jsx)(p.Z,{xs:3,children:(0,w.jsx)("small",{children:"Alter Dateiname:"})}),(0,w.jsx)(p.Z,{children:e.ressource.dir_name})]}),be&&(0,w.jsxs)(f.Z,{className:"mb-4",children:[(0,w.jsx)(p.Z,{xs:3,style:{backgroundColor:"var(--bs-gray-100"},children:(0,w.jsx)("small",{children:"Bibl. Angaben:"})}),(0,w.jsx)(p.Z,{style:{fontSize:"90%",backgroundColor:"var(--bs-gray-100"},children:be})]}),(0,w.jsxs)(f.Z,{className:"mb-2",children:[(0,w.jsx)(p.Z,{xs:3,children:"Ressource:"}),(0,w.jsx)(p.Z,{children:(0,w.jsx)(S.SA,{options:[[0,"Edition (relevant)"],[1,"Edition (veraltet)"],[2,"Handschrift"],[3,"Alter Druck (relevant)"],[4,"Alter Druck (veraltet)"],[5,"Sonstiges"]],value:o||"",onChange:function(e){x(parseInt(e.target.value))}})})]}),0===o||1===o||5===o?[(0,w.jsxs)(f.Z,{className:"mb-2",children:[(0,w.jsx)(p.Z,{xs:3,children:"Editor:"}),(0,w.jsx)(p.Z,{children:(0,w.jsx)("input",{type:"text",style:{width:"100%"},value:C||"",onChange:function(e){I(e.target.value)}})})]},"0"),(0,w.jsxs)(f.Z,{className:"mb-2",children:[(0,w.jsx)(p.Z,{xs:3,children:"Jahr:"}),(0,w.jsx)(p.Z,{children:(0,w.jsx)("input",{type:"text",style:{width:"100%"},value:T||"",onChange:function(e){A(e.target.value)}})})]},"1"),(0,w.jsxs)(f.Z,{className:"mb-2",children:[(0,w.jsx)(p.Z,{xs:3,children:"Band:"}),(0,w.jsx)(p.Z,{children:(0,w.jsx)("input",{type:"text",style:{width:"100%"},value:z||"",onChange:function(e){O(e.target.value)}})})]},"2"),(0,w.jsxs)(f.Z,{className:"mb-2",children:[(0,w.jsx)(p.Z,{xs:3,children:"Bandinhalt:"}),(0,w.jsx)(p.Z,{children:(0,w.jsx)("input",{type:"text",style:{width:"100%"},value:L||"",onChange:function(e){B(e.target.value)}})})]},"3"),(0,w.jsxs)(f.Z,{className:"mb-4",children:[(0,w.jsx)(p.Z,{xs:3,children:"Reihe:"}),(0,w.jsx)(p.Z,{children:(0,w.jsx)(S.SA,{options:[[0,""],[1,"Migne PL"],[2,"ASBen."],[3,"ASBoll."],[4,"AnalBoll."],[5,"Mon. Boica"],[6,"Ma. Schatzverzeichnisse"],[7,"Ma. Bibliothekskataloge"]],value:F||"",onChange:function(e){J(parseInt(e.target.value))}})})]},"4")]:null,2===o?[(0,w.jsxs)(f.Z,{className:"mb-2",children:[(0,w.jsx)(p.Z,{xs:3,children:"Stadt:"}),(0,w.jsx)(p.Z,{children:(0,w.jsx)("input",{type:"text",style:{width:"100%"},value:G||"",onChange:function(e){U(e.target.value)}})})]},"5"),(0,w.jsxs)(f.Z,{className:"mb-2",children:[(0,w.jsx)(p.Z,{xs:3,children:"Bibliothek:"}),(0,w.jsx)(p.Z,{children:(0,w.jsx)("input",{type:"text",style:{width:"100%"},value:W||"",onChange:function(e){X(e.target.value)}})})]},"6"),(0,w.jsxs)(f.Z,{className:"mb-4",children:[(0,w.jsx)(p.Z,{xs:3,children:"Signatur:"}),(0,w.jsx)(p.Z,{children:(0,w.jsx)("input",{type:"text",style:{width:"100%"},value:te||"",onChange:function(e){se(e.target.value)}})})]},"7")]:null,3===o||4===o?[(0,w.jsxs)(f.Z,{className:"mb-2",children:[(0,w.jsx)(p.Z,{xs:3,children:"Drucker:"}),(0,w.jsx)(p.Z,{children:(0,w.jsx)("input",{type:"text",style:{width:"100%"},value:C||"",onChange:function(e){I(e.target.value)}})})]},"8"),(0,w.jsxs)(f.Z,{className:"mb-2",children:[(0,w.jsx)(p.Z,{xs:3,children:"Ort:"}),(0,w.jsx)(p.Z,{children:(0,w.jsx)("input",{type:"text",style:{width:"100%"},value:G||"",onChange:function(e){U(e.target.value)}})})]},"9"),(0,w.jsxs)(f.Z,{className:"mb-4",children:[(0,w.jsx)(p.Z,{xs:3,children:"Jahr:"}),(0,w.jsx)(p.Z,{children:(0,w.jsx)("input",{type:"text",style:{width:"100%"},value:T||"",onChange:function(e){A(e.target.value)}})})]},"10")]:null,(0,w.jsxs)(f.Z,{className:"mb-2",children:[(0,w.jsx)(p.Z,{xs:3,children:"Kommentar:"}),(0,w.jsx)(p.Z,{children:(0,w.jsx)("textarea",{style:{width:"250px",height:"100px"},value:ie||"",onChange:function(e){le(e.target.value)}})})]}),(0,w.jsxs)(f.Z,{className:"mb-2",children:[(0,w.jsx)(p.Z,{xs:3,children:"Dateipfad:"}),(0,w.jsx)(p.Z,{children:(0,w.jsx)("input",{type:"text",style:{width:"100%"},value:oe||"",onChange:function(e){de(e.target.value)}})})]}),(0,w.jsxs)(f.Z,{className:"mb-2",children:[(0,w.jsxs)(p.Z,{xs:3,children:["Link:",(0,w.jsx)("br",{}),(0,w.jsx)("small",{children:"(externe Quellen)"})]}),(0,w.jsx)(p.Z,{children:(0,w.jsx)("input",{type:"text",style:{width:"100%"},value:fe||"",onChange:function(e){pe(e.target.value)}})})]}),(0,w.jsxs)(f.Z,{className:"mb-4",children:[(0,w.jsx)(p.Z,{xs:3,children:"Seiten-verh\xe4ltnis:"}),(0,w.jsx)(p.Z,{children:(0,w.jsx)("input",{type:"text",style:{width:"100%"},value:je||"",onChange:function(e){me(e.target.value.substring(0,5))}})})]}),(0,w.jsx)(f.Z,{className:"mb-2",children:(0,w.jsx)(p.Z,{children:(0,w.jsx)(S.YG,{value:"speichern",onClick:(0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==o&&1!==o&&5!==o||C&&T){e.next=4;break}return e.abrupt("return",{status:!1,error:"Geben Sie den Editor und das Jahr ein."});case 4:return e.next=6,h.Q.edition.save({id:l,work_id:j,ressource:o,editor:C,year:T,volume:z,vol_cont:L,serie:F,comment:ie,location:G,library:W,signature:te,path:oe,url:fe,aspect_ratio:je});case 6:return e.abrupt("return",{status:!0});case 7:case"end":return e.stop()}}),e)})))})})})]})}function E(e){var n=e.zoom,t=(0,i.useState)(!1),l=(0,s.Z)(t,2),c=l[0],u=l[1],o=(0,i.useRef)(null),d=(0,i.useState)(null),x=(0,s.Z)(d,2),g=x[0],Z=x[1];return(0,S.S1)({target:o,onIntersect:function(n,t){var r=(0,s.Z)(n,1)[0],a=r.intersectionRatio;r.isIntersecting&&!c&&u(!0),a>.1&&(document.getElementById("currentPageField").value=isNaN(e.page.filename)?e.page.filename:parseInt(e.page.filename),k(e.page.edition_id,e.page.scan_id),t.unobserve(o.current))}}),(0,i.useEffect)((function(){if(c){var n=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Z,n.next=3,h.Q.getScan(e.page.scan_id);case 3:n.t1=n.sent,(0,n.t0)(n.t1);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}else Z(null)}),[c]),(0,w.jsxs)(f.Z,{id:"p_".concat(e.page.scan_id),className:"mb-4 px-5",children:[e.mode<2?(0,w.jsx)(p.Z,{children:(0,w.jsx)("div",{ref:o,style:{width:0===e.mode?"".concat(n,"%"):e.page.body_matter?"100%":"50%",aspectRatio:e.aspectRatio,boxShadow:"0 5px 10px var(--bs-gray-300)",borderRadius:"3px",overflow:"hidden"},children:(0,w.jsx)("img",{style:{width:"100%",height:"100%"},src:g,alt:e.page.filename})})}):null,e.mode>0&&(e.page.body_matter||e.editMode)?(0,w.jsx)(p.Z,{children:(0,w.jsx)(z,{editMode:e.editMode,ressource:e.ressource,page:e.page,query:e.query})}):null]})}function z(e){var n=(0,i.useState)(null),t=(0,s.Z)(n,2),u=t[0],o=t[1],x=(0,i.useState)(!1),g=(0,s.Z)(x,2),Z=g[0],j=g[1],v=(0,i.useState)(e.page.body_matter),y=(0,s.Z)(v,2),b=y[0],k=y[1],N=(0,i.useState)(e.page.full_text),C=(0,s.Z)(N,2),I=C[0],M=C[1],Q=(0,i.useState)(0),T=(0,s.Z)(Q,2),A=T[0],R=T[1],E=(0,i.useRef)(null);return(0,i.useEffect)((function(){if(I){var n=e.query?I.replace(new RegExp("(".concat(e.query,")"),"gi"),"<mark>$1</mark>"):I;n=(n=(n=n.replace(/-\n([^ ]*) /g,"$1\n")).replace(/(\d+\.)/g,"</p><p><b>$1</b>")).replace(/</g,"&lt;").replace(/>/g,"&gt;");var t=(n=(n="<p>".concat(n,"</p>")).replace(/\n/g,"<br />")).indexOf("$$$$$");o(t>-1?[(0,w.jsx)(p.Z,{style:{textAlign:"justify",fontSize:"0.9rem"},dangerouslySetInnerHTML:(0,S.rg)(n.substring(0,t))},"0"),(0,w.jsx)(p.Z,{style:{textAlign:"justify",fontSize:"0.9rem"},dangerouslySetInnerHTML:(0,S.rg)(n.substring(t+9))},"1")]:[(0,w.jsx)(p.Z,{style:{textAlign:"justify",fontSize:"1rem",color:1===e.page.auto_text?"var(--bs-gray-500)":"inherit"},dangerouslySetInnerHTML:(0,S.rg)(n)},"0")])}else o([(0,w.jsx)(p.Z,{},"0")])}),[I,e.editMode,e.query]),(0,w.jsxs)(d.Z,{className:e.editMode?"bg-light":null,ref:E,style:{position:"relative",width:"100%",minHeight:"100%",boxShadow:"0 5px 10px var(--bs-gray-300)",borderRadius:"3px",overflow:"hidden",padding:"60px 40px"},children:[(0,w.jsxs)(f.Z,{className:"mb-4",children:[(0,w.jsx)(p.Z,{style:{textAlign:"left"},children:e.editMode?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(m.Z,{size:"sm",onClick:(0,a.Z)((0,r.Z)().mark((function n(){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.Q.scan.save({id:e.page.scan_id,body_matter:1===b?0:1,full_text:"",ocr_auto:"",ocr_auto_LENGTH:0});case 2:k(1===b?0:1),M("");case 4:case"end":return n.stop()}}),n)}))),children:(0,w.jsx)(l.G,{icon:c.Hkv})})," ",1===b?(0,w.jsx)(m.Z,{className:"ml-3",size:"sm",onClick:function(){j(!Z)},children:(0,w.jsx)(l.G,{icon:c.TzT})}):null]}):null}),(0,w.jsx)(p.Z,{dangerouslySetInnerHTML:(0,S.rg)(e.ressource.opus)}),(0,w.jsx)(p.Z,{align:"right",children:isNaN(e.page.filename)?e.page.filename:parseInt(e.page.filename)})]}),b?Z?(0,w.jsx)(_.Z.Control,{className:"pageTextEdit",style:{position:"absolute",height:"90%",width:"90%",border:1===A?"3px solid var(--bs-warning)":2===A?"3px solid var(--bs-success)":"inherit"},as:"textarea",value:I,onChange:function(e){M(e.target.value),1!==A&&R(1)},onBlur:function(){var n=(0,a.Z)((0,r.Z)().mark((function n(t){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(1!==A){n.next=4;break}return n.next=3,h.Q.scan.save({id:e.page.scan_id,full_text:t.target.value,ocr_auto:"",ocr_auto_LENGTH:0});case 3:R(2);case 4:case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}):I?(0,w.jsx)(f.Z,{children:u}):(0,w.jsx)(f.Z,{children:(0,w.jsx)(p.Z,{children:(0,w.jsx)("i",{children:"Es ist noch kein Flie\xdftext verf\xfcgbar."})})}):(0,w.jsx)(f.Z,{children:(0,w.jsx)(p.Z,{children:(0,w.jsx)("i",{children:"Es gibt keinen lateinischen Text auf dieser Seite."})})})]})}function O(e){var n=(0,i.useState)(null),t=(0,s.Z)(n,2),r=t[0],a=t[1],l=[["opera-Angaben",function(){e.setSideMenu("opera")}],["Inhaltsverzeichnis",function(){e.setSideMenu("content")}]];h.Q.access("e_edit")&&l.push(["Ressource bearbeiten",function(){e.setSideMenu("ressource")}]),h.Q.access("l_edit")&&l.push(["Scan-Seiten zuweisen",function(){e.setSideMenu("scans")}]),h.Q.access("e_edit")&&l.push(["Bearbeitungsmodus",function(){e.setEditMode()}]),!0===e.fullTxt&&(l.push(["Nur Text",function(){e.setMode(2)}]),l.push(["Scans&Text",function(){e.setMode(1)}]),l.push(["Nur Scans",function(){e.setMode(0)}]));var c=function(){1===e.queryResults.length?e.scrollPageIntoView(e.queryResults[e.queryResultIndex].id):e.queryResultIndex+1===e.queryResults.length?e.setQueryResultIndex(0):e.setQueryResultIndex(e.queryResultIndex+1)};return(0,w.jsx)(o.Z,{fixed:"bottom",bg:"light",children:(0,w.jsxs)(d.Z,{fluid:!0,children:[(0,w.jsxs)(o.Z.Collapse,{className:"justify-content-start",children:[e.fullTxt&&(0,w.jsx)(o.Z.Text,{children:(0,w.jsx)(_.Z.Control,{size:"sm",type:"text",id:"searchInput",placeholder:"Suche im Band...",value:e.query,onChange:function(n){e.setQuery(n.target.value)},onKeyUp:function(e){13===e.keyCode&&c()}})}),e.fullTxt&&e.queryResults.length>0&&(0,w.jsx)(o.Z.Text,{style:{marginLeft:"10px"},children:(0,w.jsxs)("div",{id:"navBox",style:{display:"flex",marginRight:"20px"},children:[(0,w.jsx)(m.Z,{style:{borderRadius:"0.2rem 0 0 0.2rem"},variant:"secondary",size:"sm",onClick:function(){1===e.queryResults.length?e.scrollPageIntoView(e.queryResults[e.queryResultIndex].id):e.queryResultIndex>0?e.setQueryResultIndex(e.queryResultIndex-1):e.setQueryResultIndex(e.queryResults.length-1)},children:"<"}),(0,w.jsxs)("div",{style:{borderBottom:"1px solid var(--bs-gray-600)",borderTop:"1px solid var(--bs-gray-600)",padding:"5px 10px",margin:"0"},children:[" ",(0,w.jsx)("input",{style:{width:"50px",border:"none",boxShadow:"none",padding:0,margin:0,textAlign:"right",background:"none",color:" var(--bs-gray-600)"},type:"text",value:e.queryResultIndex+1,onChange:function(n){""==n.target.value||isNaN(n.target.value)||e.setQueryResultIndex(parseInt(n.target.value)-1)}})," von ",e.queryResults.length]}),(0,w.jsx)(m.Z,{style:{borderRadius:"0 0.2rem 0.2rem 0"},variant:"secondary",size:"sm",onClick:function(){c()},children:">"})]})}),e.fullTxt&&0===e.queryResults.length&&e.query.length>0&&(0,w.jsx)(o.Z.Text,{style:{marginLeft:"10px"},children:(0,w.jsx)("small",{className:"text-danger",children:"Keine Stellen gefunden!"})})]}),(0,w.jsxs)(o.Z.Collapse,{children:[(0,w.jsxs)(o.Z.Text,{children:["Seite ",(0,w.jsx)("input",{type:"text",id:"currentPageField",onChange:function(){a(null)},onKeyDown:function(n){if(13===n.keyCode){n.preventDefault();var t=isNaN(n.target.value)?n.target.value:n.target.value.padStart(4,"0"),s=e.pages.find((function(e){return e.filename===t}));s?(a(null),e.scrollPageIntoView(s.scan_id)):a((0,w.jsx)("span",{className:"text-danger",children:"Seite nicht gefunden!"}))}}})," ",r]}),(0,w.jsx)(o.Z.Text,{})]}),(0,w.jsx)(o.Z.Collapse,{className:"justify-content-end",children:(0,w.jsxs)(o.Z.Text,{children:[0===e.mode&&(0,w.jsx)(_.Z.Range,{style:{position:"relative",top:"7px",marginRight:"10px",width:"400px"},min:"45",max:"125",value:e.zoom,onChange:function(n){e.setZoom(parseInt(n.target.value))},className:"slider"}),l.length>0?(0,w.jsx)(S.vW,{menuItems:l}):null]})})]})})}function P(e){var n=(0,i.useState)([]),t=(0,s.Z)(n,2),l=t[0],c=t[1],u=(0,i.useState)([]),o=(0,s.Z)(u,2),x=o[0],Z=o[1],j=(0,i.useState)([]),m=(0,s.Z)(j,2),v=m[0],y=m[1],b=(0,i.useState)(0),_=(0,s.Z)(b,2),k=_[0],C=_[1],I=(0,i.useState)(1),M=(0,s.Z)(I,2),Q=M[0],T=M[1],A=(0,i.useState)(""),R=(0,s.Z)(A,2),E=R[0],z=R[1],O=[["ACTION+f",function(){var e=document.getElementById("searchInput");e&&e.focus()}],["ACTION+ArrowRight",function(){Math.ceil(k/30)>=Q+1?T(Q+1):T(1)}],["ACTION+ArrowLeft",function(){T(0<Q-1?Q-1:Math.ceil(k/30))}]];(0,S.XU)(O,!1),(0,i.useEffect)((function(){var e=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n,t,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,t=[],s=[],""==E){e.next=9;break}return e.next=6,h.Q.scan_opera.search([{c:"search",o:"=",v:"".concat(E,"*")}],{count:!0});case 6:n=e.sent,e.next=12;break;case 9:return e.next=11,h.Q.scan_opera.getAll({count:!0});case 11:n=e.sent;case 12:C(n[0].count),Z(s),c(t),T(1);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[E]),(0,i.useEffect)((function(){var e=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],""==E){e.next=7;break}return e.next=4,h.Q.scan_opera.search([{c:"search",o:"=",v:"".concat(E,"*")}],{limit:30,offset:30*(Q-1)});case 4:n=e.sent,e.next=10;break;case 7:return e.next=9,h.Q.scan_opera.getAll({limit:30,offset:30*(Q-1)});case 9:n=e.sent;case 10:y(n);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[E,Q,l]);var P=function(n,t,s,r){N(t,s,r),e.loadMain(n,"edition",t)};return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(d.Z,{children:(0,w.jsxs)(f.Z,{children:[(0,w.jsx)(p.Z,{xs:1}),(0,w.jsx)(p.Z,{children:(0,w.jsxs)(g.Z,{children:[(0,w.jsx)("thead",{children:(0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{width:"40%",children:"Zitiertitel"}),(0,w.jsx)("th",{width:"30%",children:"relevant"}),(0,w.jsx)("th",{width:"15%",children:"veraltet"}),(0,w.jsx)("th",{width:"15%",children:"Sonstiges"})]})}),(0,w.jsx)("tbody",{children:v.map((function(e){var n=JSON.parse(e.editions_label),t=JSON.parse(e.editions_id),s=JSON.parse(e.editions_url),r=JSON.parse(e.editions_type),a=[];if(n&&n.length===t.length&&t.length===s.length){var i=-1;a=t.map((function(e){var t=x.filter((function(n){return n===parseInt(e)})).length;return i++,{id:e,label:n[i],url:s[i],type:r[i],hits:t}}))}return x.length>0&&(a=a.filter((function(e){return e.hits>0}))),(0,w.jsxs)("tr",{style:{color:e.in_use?null:"var(--bs-gray-500)",backgroundColor:e.in_use?null:"var(--bs-gray-100)"},children:[(0,w.jsx)("td",{dangerouslySetInnerHTML:(0,S.rg)(e.citation)}),(0,w.jsx)("td",{children:a.map((function(n){if(0===n.type||3===n.type)return(0,w.jsx)("div",{children:(0,w.jsxs)("a",{href:n.url?n.url:"#",target:n.url?"_blank":"",className:n.url?"link-warning":"link-primary",onClick:function(t){n.url||P(t,n.id,n.label,e.search)},children:[n.label,x.length>0?" ("+n.hits+")":null]})},n.id)}))}),(0,w.jsx)("td",{children:a.map((function(n){if(1===n.type||4===n.type)return(0,w.jsx)("div",{children:(0,w.jsx)("a",{href:n.url?n.url:"#",target:n.url?"_blank":"",onClick:function(t){n.url||P(t,n.id,n.label,e.search)},children:n.label})},n.id)}))}),(0,w.jsx)("td",{children:a.map((function(n){if(2===n.type||5===n.type)return(0,w.jsx)("div",{children:(0,w.jsx)("a",{href:n.url?n.url:"#",target:n.url?"_blank":"",onClick:function(t){n.url||P(t,n.id,n.label,e.search)},children:n.label})},n.id)}))})]},e.id)}))})]})}),(0,w.jsx)(p.Z,{xs:1})]})}),(0,w.jsx)(q,{operaCount:k,currentPage:Q,setCurrentPage:function(e){T(e)},setQuery:function(e){z(e)}})]})}function q(e){var n=(0,i.useState)(""),t=(0,s.Z)(n,2),r=t[0],a=t[1];return(0,w.jsx)(o.Z,{fixed:"bottom",bg:"light",children:(0,w.jsxs)(d.Z,{fluid:!0,children:[(0,w.jsx)(o.Z.Collapse,{className:"justify-content-start",children:(0,w.jsx)(o.Z.Text,{children:(0,w.jsxs)(Z.Z,{children:[(0,w.jsx)(j.Z,{placeholder:"Nach Zitiertitel suchen...",id:"searchInput",onChange:function(e){a(e.target.value)},value:r,onKeyUp:function(n){13===n.keyCode&&e.setQuery(r)}}),(0,w.jsx)(m.Z,{variant:"dark",onClick:function(){e.setQuery(r)},children:(0,w.jsx)(l.G,{icon:c.wn1})})]})})}),(0,w.jsxs)(o.Z.Collapse,{className:"justify-content-end",children:[(0,w.jsx)(o.Z.Text,{children:e.operaCount>0?(0,w.jsx)(S.C3,{loadPage:function(n){e.setCurrentPage(n)},currentPage:e.currentPage,maxPage:Math.ceil(e.operaCount/30)}):null}),(0,w.jsx)(o.Z.Text,{})]})]})})}var L=t(2583),B=t(2982),H=t(4849);function K(e){var n=(0,i.useState)(""),t=(0,s.Z)(n,2),u=t[0],x=t[1],g=(0,i.useState)(""),j=(0,s.Z)(g,2),v=j[0],y=j[1],b=(0,i.useState)(0),k=(0,s.Z)(b,2),N=k[0],C=k[1],I=(0,i.useState)(0),M=(0,s.Z)(I,2),Q=M[0],T=M[1],A=(0,i.useState)([]),R=(0,s.Z)(A,2),E=R[0],z=R[1],O=(0,i.useState)(!1),P=(0,s.Z)(O,2),q=P[0],L=P[1],B=function(){if(""===u)z([]);else{var e=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y((0,w.jsx)(H.Z,{variant:"primary",animation:"border"})),e.next=3,h.Q.fulltext_search_view.search([{c:"full_text",o:"=",v:"*".concat(u,"*")},{c:"auto_text",o:q?">=":"=",v:0}],{select:["work_id"],group:"work_id"});case 3:n=e.sent,y("".concat(n.length," Werke gefunden.")),T(Math.floor(n.length/5)+1),K(1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}},K=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(n),z([]),e.next=4,h.Q.fulltext_search_view.search([{c:"full_text",o:"=",v:"*".concat(u,"*")},{c:"auto_text",o:q?">=":"=",v:0}],{select:["work_id","opus"],group:"work_id",offset:5*(n-1),limit:5});case 4:t=e.sent,z(t);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(o.Z,{fixed:"bottom",bg:"light",children:(0,w.jsx)(d.Z,{fluid:!0,children:(0,w.jsx)(o.Z.Collapse,{className:"justify-content-end",children:(0,w.jsx)(o.Z.Text,{children:Q>0?(0,w.jsx)(S.C3,{loadPage:function(e){K(e)},currentPage:N,maxPage:Q}):null})})})}),(0,w.jsxs)(d.Z,{children:[(0,w.jsx)(f.Z,{children:(0,w.jsx)(p.Z,{children:(0,w.jsxs)(Z.Z,{children:[(0,w.jsx)(_.Z.Control,{type:"text",id:"searchInput",placeholder:"Suche...",value:u,onChange:function(e){x(e.target.value)},onKeyUp:function(e){13===e.keyCode&&B()}}),(0,w.jsx)(m.Z,{style:{padding:"6px 40px"},onClick:function(){B()},children:(0,w.jsx)(l.G,{icon:c.wn1})})]})})}),(0,w.jsxs)(f.Z,{className:"mt-2",children:[(0,w.jsx)(p.Z,{children:v}),(0,w.jsx)(p.Z,{}),(0,w.jsx)(p.Z,{children:(0,w.jsx)(_.Z.Check,{type:"switch",id:"custom-switch",label:"automatisch generierte Texte ber\xfccksichtigen",checked:q,value:q,onChange:function(e){L(e.target.checked)}})})]}),E.length>0?(0,w.jsx)(f.Z,{children:(0,w.jsx)(p.Z,{children:E.map((function(n){return(0,w.jsx)(F,{searchAutoText:q,loadMain:function(){e.loadMain.apply(e,arguments)},query:u,work:n},n.work_id)}))})}):null]})]})}function F(e){var n=(0,i.useState)([]),t=(0,s.Z)(n,2),l=t[0],c=t[1],u=(0,i.useState)(-1),o=(0,s.Z)(u,2),d=o[0],x=o[1];return(0,i.useEffect)((function(){var n=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(){var t,s,a;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.Q.fulltext_search_view.search([{c:"full_text",o:"=",v:"*".concat(e.query,"*")},{c:"auto_text",o:e.searchAutoText?">=":"=",v:0},{c:"work_id",o:"=",v:e.work.work_id}],{select:["full_text","auto_text","page","edition_id","scan_id","opus","ac_web","label"]});case 2:t=n.sent,150,s=[],a=-1,t.forEach((function(n){for(var t=(0,B.Z)(n.full_text.matchAll(e.query)).length,r=-1,i=0;i<t;i++)a+=1,r=n.full_text.indexOf(e.query,r+1),s.push({id:a,scan_id:n.scan_id,auto_text:n.auto_text,edition_id:n.edition_id,opus:n.opus,ac_web:n.ac_web,label:n.label,page:n.page,section:(0,w.jsxs)("span",{children:["... ",n.full_text.substring(r-150,r),(0,w.jsx)("strong",{className:"text-primary",children:e.query}),n.full_text.substring(r+e.query.length,r+e.query.length+150)," ..."]})})})),c(s),x(a);case 9:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[]),(0,w.jsxs)(w.Fragment,{children:[l.length>0?(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)("h4",{className:"mt-4",style:{borderTop:"1px solid var(--bs-secondary)",paddingTop:"20px"},children:[(0,w.jsx)("span",{dangerouslySetInnerHTML:(0,S.rg)(e.work.opus)}),d>-1?(0,w.jsxs)("i",{style:{fontSize:"70%"},children:["(",d+1,")"]}):null]})}):null,l.length>0?l.map((function(n){return(0,w.jsxs)("div",{className:"mb-3",children:[(0,w.jsxs)("div",{style:{cursor:"pointer"},onClick:function(t){k(n.edition_id,n.scan_id),N(n.edition_id,n.label,n.ac_web),h.Q.setOptions("argos_mode",1),h.Q.setOptions("argos_query",e.query),e.loadMain(t,"edition",n.edition_id)},children:[(0,w.jsxs)("b",{children:["Seite ",isNaN(n.page)?n.page:parseInt(n.page),":"]}),n.auto_text?(0,w.jsx)("small",{style:{fontStyle:"italic"},className:"text-danger",children:"\xa0(auto)"}):null]}),(0,w.jsx)("div",{style:{marginLeft:"20px"},children:n.section})]},n.id)})):(0,w.jsx)("div",{children:(0,w.jsx)(H.Z,{variant:"primary",size:"sm",animation:"border"})})]})}var J=t(8491);function D(e){h.Q.changeLog=G,(0,i.useEffect)((function(){var n=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(){var t,s;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=new URLSearchParams(window.location.search),null!==e.resId||!t.get("id")){n.next=6;break}return n.next=4,h.Q.edition.get({id:t.get("id")},{select:["id","label","ac_web"]});case 4:1===(s=n.sent).length&&(N(s[0].id,s[0].label,s[0].ac_web),e.loadMain(null,"edition",s[0].id));case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[]);var n=null;switch(e.res){case null:n=(0,w.jsx)(P,{loadMain:function(){e.loadMain.apply(e,arguments)}});break;case"edition":n=(0,w.jsx)(I,{resId:e.resId,loadMain:function(){e.loadMain.apply(e,arguments)}});break;case"changelog":n=(0,w.jsx)(L.v,{});break;case"search":n=(0,w.jsx)(K,{loadMain:function(){e.loadMain.apply(e,arguments)}});break;case"account":n=(0,w.jsx)(J.m,{});break;default:n=(0,w.jsxs)("div",{children:['Unbekannter Men\xfc-Punkt: "',e.res,'"']})}return n}function V(e){var n=(0,i.useState)([]),t=(0,s.Z)(n,2),h=t[0],f=t[1],p=(0,i.useState)("zuletzt ge\xf6ffnet"),g=(0,s.Z)(p,2),Z=g[0],j=g[1];return(0,i.useEffect)((function(){var n=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(){var t;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=C(),f(t.map((function(n){return(0,w.jsxs)(u.Z.Item,{onClick:function(t){N(n.id,n.label,n.opus),e.loadMain(t,"edition",n.id)},children:[n.label,n.opus?" (".concat(n.opus.substring(0,20)+(n.opus.length>20?"...":""),")"):null]},n.id)}))),"edition"===e.res?j(t[0].label+(t[0].opus?" (".concat(t[0].opus.substring(0,20)+(t[0].opus.length>20?"...":""),")"):null)):j("zuletzt ge\xf6ffnet");case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[e.res,e.resId]),(0,w.jsx)(o.Z,{bg:"dark",variant:"dark",fixed:"top",children:(0,w.jsxs)(d.Z,{fluid:!0,children:[(0,w.jsx)(o.Z.Brand,{style:{cursor:"pointer"},onClick:function(n){e.loadMain(n,null)},children:"Argos"}),(0,w.jsx)(o.Z.Toggle,{}),(0,w.jsx)(o.Z.Collapse,{className:"justify-content-end",children:(0,w.jsxs)(x.Z,{children:[(0,w.jsx)(x.Z.Link,{children:(0,w.jsx)("span",{onClick:function(n){e.loadMain(n,"search")},children:"Volltextsuche"})}),(0,w.jsx)(u.Z,{title:Z,children:h}),(0,w.jsxs)(u.Z,{title:"Einstellungen",children:[(0,w.jsx)(u.Z.Item,{onClick:function(n){e.loadMain(n,"account")},children:"Konto"}),(0,w.jsx)(u.Z.Item,{onClick:function(n){e.loadMain(n,"changelog")},children:"\xc4nderungen"})]}),(0,w.jsx)(x.Z.Link,{children:(0,w.jsx)(l.G,{icon:c.jLD,onClick:function(n){e.loadMain(n,"logout")},title:"abmelden"})})]})})]})})}var G=[{title:"Beta 1.3",date:"2022-05-18",description:(0,w.jsx)(w.Fragment,{children:(0,w.jsx)("p",{children:"Volltextsuche angepasst und Shortcut-Taste \xfcber Einstellungen ver\xe4nderbar."})})},{title:"Beta 1.2",date:"2022-04-14",description:(0,w.jsx)(w.Fragment,{children:(0,w.jsx)("p",{children:"Shortcuts hinzugef\xfcgt."})})},{title:"Beta 1.1",date:"2022-03-31",description:(0,w.jsx)(w.Fragment,{children:(0,w.jsx)("p",{children:"Neue Version online!"})})},{title:"dDOM Update",date:"2022-06-03",description:(0,w.jsx)(w.Fragment,{children:(0,w.jsx)("p",{children:'Korrektur des Seitenverh\xe4ltnisses (auch \xfcber "Ressource bearbeiten" ver\xe4nderbar).'})})},{title:"Beta 1.0",date:"2022-02-26",description:(0,w.jsx)(w.Fragment,{children:(0,w.jsx)("p",{children:"Erste Version des neuen Scan-Viewers ist online."})})}]},2583:function(e,n,t){t.d(n,{v:function(){return u}});var s=t(885),r=t(7022),a=t(2469),i=t(6407),l=t(2791),c=t(184);function u(){i.Q.changeLog=i.Q.changeLog.sort((function(e,n){return e.date<n.date})),i.Q.changeLog=i.Q.changeLog.filter((function(e){return void 0===e.project||e.project===i.Q.project_name}));var e=(0,l.useState)(!(i.Q.changeLog.length>5)),n=(0,s.Z)(e,2),t=n[0],u=n[1];return(0,c.jsxs)(r.Z,{children:[i.Q.changeLog.map((function(e,n){return t||n<5?(0,c.jsxs)(a.Z,{variant:0===n?"primary":"secondary",children:[(0,c.jsx)(a.Z.Heading,{children:e.title}),(0,c.jsx)("i",{children:(s=e.date,"".concat(s.substring(8,10),". ").concat({"01":"Januar","02":"Februar","03":"M\xe4rz","04":"April","05":"Mai","06":"Juni","07":"Juli","08":"August","09":"September",10:"Oktober",11:"November",12:"Dezember"}[s.substring(5,7)]," ").concat(s.substring(0,4)))}),e.description]},n):null;var s})),t?null:(0,c.jsx)(a.Z,{style:{cursor:"pointer",marginTop:"100px",textAlign:"center"},variant:"secondary",onClick:function(){u(!0)},children:"Alle \xc4nderungen anzeigen."})]})}},8491:function(e,n,t){t.d(n,{m:function(){return f}});var s=t(4165),r=t(5861),a=t(885),i=t(9743),l=t(2677),c=t(3350),u=t(7022),o=t(2791),d=t(6407),x=t(3222),h=t(184);function f(){var e=(0,o.useState)(d.Q.me.first_name),n=(0,a.Z)(e,2),t=n[0],f=n[1],p=(0,o.useState)(d.Q.me.last_name),g=(0,a.Z)(p,2),Z=g[0],j=g[1],m=(0,o.useState)(d.Q.me.email),v=(0,a.Z)(m,2),y=v[0],b=v[1],_=(0,o.useState)(""),S=(0,a.Z)(_,2),w=S[0],k=S[1],N=(0,o.useState)(""),C=(0,a.Z)(N,2),I=C[0],M=C[1],Q=(0,o.useState)(d.Q.options.z_width),T=(0,a.Z)(Q,2),A=T[0],R=T[1],E=(0,o.useState)(d.Q.options.action_key),z=(0,a.Z)(E,2),O=z[0],P=z[1],q=(0,o.useState)(d.Q.options.openExternally),L=(0,a.Z)(q,2),B=L[0],H=L[1],K=[(0,h.jsxs)(i.Z,{className:"mb-2",children:[(0,h.jsx)(l.Z,{xs:2,children:"Breite der Zettel:"}),(0,h.jsx)(l.Z,{children:(0,h.jsx)(c.Z.Range,{min:"400",max:"600",size:"sm",value:A,onChange:function(e){d.Q.setOptions("z_width",e.target.value),d.Q.setOptions("z_height",.7*parseInt(e.target.value)),R(e.target.value)}})})]},1),(0,h.jsxs)(i.Z,{className:"mb-2",children:[(0,h.jsx)(l.Z,{xs:4,children:"\xd6ffnen der Ressourcen (Zettel im Editor):"}),(0,h.jsx)(l.Z,{children:(0,h.jsxs)(c.Z.Select,{size:"sm",value:B,onChange:function(e){d.Q.setOptions("openExternally",parseInt(e.target.value)),H(e.target.value)},children:[(0,h.jsx)("option",{value:"0",children:"im gleichen Fenster"}),(0,h.jsx)("option",{value:"1",children:"in einem neuen Fenster"}),(0,h.jsx)("option",{value:"2",children:"in Echo"})]})})]},2)];return(0,h.jsxs)(u.Z,{style:{padding:"0 10% 0 10%"},children:[(0,h.jsx)(i.Z,{children:(0,h.jsx)(l.Z,{children:(0,h.jsx)("h3",{children:"Pers\xf6nliche Daten"})})}),(0,h.jsxs)(i.Z,{className:"mb-2",children:[(0,h.jsx)(l.Z,{xs:2,children:"Vorname:"}),(0,h.jsx)(l.Z,{children:(0,h.jsx)(c.Z.Control,{type:"text",size:"sm",value:t,onChange:function(e){f(e.target.value)}})})]}),(0,h.jsxs)(i.Z,{className:"mb-2",children:[(0,h.jsx)(l.Z,{xs:2,children:"Nachname:"}),(0,h.jsx)(l.Z,{children:(0,h.jsx)(c.Z.Control,{type:"text",size:"sm",value:Z,onChange:function(e){j(e.target.value)}})})]}),(0,h.jsxs)(i.Z,{className:"mb-4",children:[(0,h.jsx)(l.Z,{xs:2,children:"Email-Adresse:"}),(0,h.jsx)(l.Z,{children:(0,h.jsx)(c.Z.Control,{type:"text",size:"sm",value:y,onChange:function(e){b(e.target.value)}})})]}),(0,h.jsxs)(i.Z,{className:"mb-4",children:[(0,h.jsx)(l.Z,{xs:2}),(0,h.jsx)(l.Z,{children:(0,h.jsx)(x.YG,{value:"speichern",onClick:(0,r.Z)((0,s.Z)().mark((function e(){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Q.user.save({id:d.Q.me.id,first_name:t,last_name:Z,email:y});case 2:return e.next=4,d.Q.getUser();case 4:return n=e.sent,d.Q.me=n,e.abrupt("return",{status:1});case 7:case"end":return e.stop()}}),e)})))})})]}),(0,h.jsx)(i.Z,{children:(0,h.jsx)(l.Z,{children:(0,h.jsx)("h3",{children:"Passwort"})})}),(0,h.jsxs)(i.Z,{className:"mb-2",children:[(0,h.jsx)(l.Z,{xs:2,children:"altes Passwort:"}),(0,h.jsx)(l.Z,{children:(0,h.jsx)(c.Z.Control,{type:"password",size:"sm",value:w,onChange:function(e){k(e.target.value)}})})]}),(0,h.jsxs)(i.Z,{className:"mb-4",children:[(0,h.jsx)(l.Z,{xs:2,children:"neues Passwort:"}),(0,h.jsx)(l.Z,{children:(0,h.jsx)(c.Z.Control,{type:"password",size:"sm",value:I,onChange:function(e){M(e.target.value)}})})]}),(0,h.jsxs)(i.Z,{className:"mb-4",children:[(0,h.jsx)(l.Z,{xs:2}),(0,h.jsx)(l.Z,{children:(0,h.jsx)(x.YG,{value:"speichern",onClick:(0,r.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Q.user.save({id:d.Q.me.id,old_password:w,new_password:I});case 2:return e.abrupt("return",{status:1});case 3:case"end":return e.stop()}}),e)})))})})]}),(0,h.jsx)(i.Z,{children:(0,h.jsx)(l.Z,{children:(0,h.jsx)("h3",{children:"Darstellung und Benutzung"})})}),(0,h.jsxs)(i.Z,{className:"mb-4",children:[(0,h.jsx)(l.Z,{xs:4,children:"Funktionstaste f\xfcr Tastenk\xfcrzel"}),(0,h.jsxs)(l.Z,{children:[(0,h.jsxs)(c.Z.Select,{size:"sm",value:O,onChange:function(e){d.Q.setOptions("action_key",e.target.value),P(e.target.value)},children:[(0,h.jsx)("option",{value:"alt",children:"Alt"}),(0,h.jsx)("option",{value:"ctrl",children:"Strg"}),(0,h.jsx)("option",{value:"cmd",children:"Befehlstaste"})]}),(0,h.jsxs)("small",{children:["Eine Liste mit Tastenk\xfcrzeln finden Sie ",(0,h.jsx)("a",{className:"text-primary",rel:"noreferrer",href:"https://gitlab.lrz.de/haeberlin/dmlw/-/wikis/06-Argos#tastenk\xfcrzel",target:"_blank",children:"hier"}),"."]})]})]}),K]})}},3573:function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];function s(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];var r=null;return n.forEach((function(e){if(null==r){var n=e.apply(void 0,t);null!=n&&(r=n)}})),r}return(0,a.default)(s)};var s,r=t(6054),a=(s=r)&&s.__esModule?s:{default:s};e.exports=n.default},6054:function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){function n(n,t,s,r,a,i){var l=r||"<<anonymous>>",c=i||s;if(null==t[s])return n?new Error("Required "+a+" `"+c+"` was not specified in `"+l+"`."):null;for(var u=arguments.length,o=Array(u>6?u-6:0),d=6;d<u;d++)o[d-6]=arguments[d];return e.apply(void 0,[t,s,l,a,c].concat(o))}var t=n.bind(null,!1);return t.isRequired=n.bind(null,!0),t},e.exports=n.default},6040:function(e,n,t){var s=t(2791).createContext(null);s.displayName="CardHeaderContext",n.Z=s},9410:function(e,n,t){var s=t(5987),r=t(1413),a=t(1694),i=t.n(a),l=t(2791),c=t(6543),u=t(162),o=t(6882),d=t(1991),x=t(184),h=["bsPrefix","size","hasValidation","className","as"],f=(0,c.Z)("input-group-text",{Component:"span"}),p=l.forwardRef((function(e,n){var t=e.bsPrefix,a=e.size,c=e.hasValidation,o=e.className,f=e.as,p=void 0===f?"div":f,g=(0,s.Z)(e,h);t=(0,u.vE)(t,"input-group");var Z=(0,l.useMemo)((function(){return{}}),[]);return(0,x.jsx)(d.Z.Provider,{value:Z,children:(0,x.jsx)(p,(0,r.Z)((0,r.Z)({ref:n},g),{},{className:i()(o,t,a&&"".concat(t,"-").concat(a),c&&"has-validation")}))})}));p.displayName="InputGroup",n.Z=Object.assign(p,{Text:f,Radio:function(e){return(0,x.jsx)(f,{children:(0,x.jsx)(o.Z,(0,r.Z)({type:"radio"},e))})},Checkbox:function(e){return(0,x.jsx)(f,{children:(0,x.jsx)(o.Z,(0,r.Z)({type:"checkbox"},e))})}})},9249:function(e,n,t){var s=t(4942),r=t(1413),a=t(5987),i=t(1694),l=t.n(i),c=(t(3573),t(2791)),u=t(8580),o=t(1337),d=t(162),x=t(5715),h=t(6040),f=t(881),p=t(9102),g=t(184),Z=["as","bsPrefix","variant","fill","justify","navbar","navbarScroll","className","activeKey"],j=c.forwardRef((function(e,n){var t,i,f,p=(0,u.Ch)(e,{activeKey:"onSelect"}),j=p.as,m=void 0===j?"div":j,v=p.bsPrefix,y=p.variant,b=p.fill,_=p.justify,S=p.navbar,w=p.navbarScroll,k=p.className,N=p.activeKey,C=(0,a.Z)(p,Z),I=(0,d.vE)(v,"nav"),M=!1,Q=(0,c.useContext)(x.Z),T=(0,c.useContext)(h.Z);return Q?(i=Q.bsPrefix,M=null==S||S):T&&(f=T.cardHeaderBsPrefix),(0,g.jsx)(o.Z,(0,r.Z)({as:m,ref:n,activeKey:N,className:l()(k,(t={},(0,s.Z)(t,I,!M),(0,s.Z)(t,"".concat(i,"-nav"),M),(0,s.Z)(t,"".concat(i,"-nav-scroll"),M&&w),(0,s.Z)(t,"".concat(f,"-").concat(y),!!f),(0,s.Z)(t,"".concat(I,"-").concat(y),!!y),(0,s.Z)(t,"".concat(I,"-fill"),b),(0,s.Z)(t,"".concat(I,"-justified"),_),t))},C))}));j.displayName="Nav",j.defaultProps={justify:!1,fill:!1},n.Z=Object.assign(j,{Item:f.Z,Link:p.Z})},2354:function(e,n,t){var s=t(1413),r=t(5987),a=t(1694),i=t.n(a),l=t(2791),c=t(162),u=t(5353),o=t(9102),d=t(184),x=["id","title","children","bsPrefix","className","rootCloseEvent","menuRole","disabled","active","renderMenuOnMount","menuVariant"],h=l.forwardRef((function(e,n){var t=e.id,a=e.title,l=e.children,h=e.bsPrefix,f=e.className,p=e.rootCloseEvent,g=e.menuRole,Z=e.disabled,j=e.active,m=e.renderMenuOnMount,v=e.menuVariant,y=(0,r.Z)(e,x),b=(0,c.vE)(void 0,"nav-item");return(0,d.jsxs)(u.Z,(0,s.Z)((0,s.Z)({ref:n},y),{},{className:i()(f,b),children:[(0,d.jsx)(u.Z.Toggle,{id:t,eventKey:null,active:j,disabled:Z,childBsPrefix:h,as:o.Z,children:a}),(0,d.jsx)(u.Z.Menu,{role:g,renderOnMount:m,rootCloseEvent:p,variant:v,children:l})]}))}));h.displayName="NavDropdown",n.Z=Object.assign(h,{Item:u.Z.Item,ItemText:u.Z.ItemText,Divider:u.Z.Divider,Header:u.Z.Header})},881:function(e,n,t){var s=t(6543);n.Z=(0,s.Z)("nav-item")},9102:function(e,n,t){var s=t(1413),r=t(885),a=t(5987),i=t(1694),l=t.n(i),c=t(2791),u=t(6445),o=t(4787),d=t(8633),x=t(162),h=t(184),f=["bsPrefix","className","as","active","eventKey"],p=c.forwardRef((function(e,n){var t=e.bsPrefix,i=e.className,c=e.as,p=void 0===c?u.Z:c,g=e.active,Z=e.eventKey,j=(0,a.Z)(e,f);t=(0,x.vE)(t,"nav-link");var m=(0,o.v)((0,s.Z)({key:(0,d.h)(Z,j.href),active:g},j)),v=(0,r.Z)(m,2),y=v[0],b=v[1];return(0,h.jsx)(p,(0,s.Z)((0,s.Z)((0,s.Z)({},j),y),{},{ref:n,className:l()(i,t,j.disabled&&"disabled",b.isActive&&"active")}))}));p.displayName="NavLink",p.defaultProps={disabled:!1},n.Z=p}}]);
//# sourceMappingURL=435.780ec3ab.chunk.js.map