"use strict";(self.webpackChunkatlas=self.webpackChunkatlas||[]).push([[435],{4435:function(e,n,t){t.r(n),t.d(n,{MainBody:function(){return G},MainNavBar:function(){return V}});var s=t(885),r=t(5861),a=t(7757),i=t.n(a),l=t(2791),c=t(4483),u=t(3174),o=t(2354),d=t(4817),x=t(7022),h=t(9249),f=t(6407),p=t(9743),g=t(2677),j=t(2591),m=t(9410),Z=t(4292),v=t(3360),y=t(7762),b=t(4775),S=t(1398),_=t(3350),w=t(3222),k=t(184);function C(e,n){if(localStorage.getItem("argos_currentPages")){var t=JSON.parse(localStorage.getItem("argos_currentPages"));t.find((function(n){return n.edition_id===e}))?localStorage.setItem("argos_currentPages",JSON.stringify(t.map((function(t){return t.edition_id!==e?t:{edition_id:e,scan_id:n}})))):(t.push({edition_id:e,scan_id:n}),localStorage.setItem("argos_currentPages",JSON.stringify(t)))}else localStorage.setItem("argos_currentPages",JSON.stringify([{edition_id:e,scan_id:n}]))}function N(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"???",s=localStorage.getItem("editions");s?((s=(s=JSON.parse(s)).filter((function(n){return n.id!==e}))).length>15&&s.splice(14),s.unshift({id:e,label:n,opus:t})):s=[{id:e,label:n,opus:t}],localStorage.setItem("editions",JSON.stringify(s))}function I(){var e=localStorage.getItem("editions");return e?JSON.parse(e):[]}function M(e){var n=(0,l.useState)("0.5"),t=(0,s.Z)(n,2),a=t[0],c=t[1],u=(0,l.useState)(null),o=(0,s.Z)(u,2),d=o[0],h=o[1],j=(0,l.useState)(f.Q.options.argos_query),m=(0,s.Z)(j,2),Z=m[0],v=m[1];(0,l.useEffect)((function(){f.Q.setOptions("argos_query",Z)}),[Z]);var b=(0,l.useState)([]),S=(0,s.Z)(b,2),_=S[0],C=S[1],N=(0,l.useState)(0),I=(0,s.Z)(N,2),M=I[0],T=I[1],R=(0,l.useState)(null),z=(0,s.Z)(R,2),A=z[0],L=z[1],O=(0,l.useState)(f.Q.options.argos_mode),P=(0,s.Z)(O,2),B=P[0],H=P[1];(0,l.useEffect)((function(){f.Q.setOptions("argos_mode",B)}),[B]);var F=(0,l.useState)(!1),J=(0,s.Z)(F,2),K=J[0],D=J[1],G=(0,l.useState)([]),V=(0,s.Z)(G,2),U=V[0],$=V[1],Y=(0,l.useState)(0),W=(0,s.Z)(Y,2),X=W[0],ee=W[1],ne=(0,l.useState)(!1),te=(0,s.Z)(ne,2),se=te[0],re=te[1],ae=(0,l.useState)(!1),ie=(0,s.Z)(ae,2),le=ie[0],ce=ie[1],ue=(0,l.useState)(!1),oe=(0,s.Z)(ue,2),de=oe[0],xe=oe[1],he=(0,l.useState)(f.Q.options.argos_zoom),fe=(0,s.Z)(he,2),pe=fe[0],ge=fe[1];(0,l.useEffect)((function(){f.Q.setOptions("argos_zoom",pe)}),[pe]);var je=[["ACTION+ESC",function(){e.loadMain(null,null)}],["ACTION+q",function(){h(null)}],["ACTION+e",function(){h("ressource"===d?null:"ressource")}],["ACTION+s",function(){h("scans"===d?null:"scans")}],["ACTION+o",function(){h("opera"===d?null:"opera")}],["ACTION+i",function(){h("content"===d?null:"content")}],["ACTION+b",function(){ce(!le)}],["ACTION+f",function(){var e=document.getElementById("searchInput");e&&e.focus()}],["Alt+ArrowRight",function(){_.length>M+1?T(M+1):T(0)}],["Alt+ArrowLeft",function(){T(0<=M-1?M-1:_.length-1)}],["CTRL+1",function(){H(0)}],["CTRL+2",function(){H(1)}],["CTRL+3",function(){H(2)}],["CTRL+,",function(){ge(pe-5)}],["CTRL+.",function(){ge(pe+5)}]];(0,w.XU)(je,!1),(0,l.useEffect)((function(){var n=function(){var n=(0,r.Z)(i().mark((function n(){var t,s,r;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.Q.edition.get({id:e.resId});case 2:return t=n.sent,L(t[0]),c(t[0].aspect_ratio?"".concat(t[0].aspect_ratio):"0.6"),n.next=7,f.Q.scan_lnk.get({edition_id:e.resId});case 7:return s=(s=n.sent).sort((function(e,n){return n.filename<e.filename})),$(s),localStorage.getItem("argos_currentPages")&&(r=JSON.parse(localStorage.getItem("argos_currentPages")).find((function(n){return n.edition_id===e.resId})))&&me(r.scan_id),n.next=13,(0,w._v)(400);case 13:xe(!0);case 14:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[e.resId]),(0,l.useEffect)((function(){var e,n=!1,t=(0,y.Z)(U);try{for(t.s();!(e=t.n()).done;){var s=e.value;if(null!==s.full_text&&""!==s.full_text){n=!0;break}}}catch(r){t.e(r)}finally{t.f()}n?D(!0):(D(!1),0!=B&&H(0))}),[U]),(0,l.useEffect)((function(){if(K&&Z.length>0){var e=U.filter((function(e){return e.full_text&&e.full_text.search(Z)>-1}));C(e),T(0),0===B&&H(1)}else C([]),T(0)}),[K,Z]),(0,l.useEffect)((function(){de&&_.length>0&&me(_[M].id)}),[M,_]);var me=function(){var e=(0,r.Z)(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n),e.next=3,(0,w._v)(100);case 3:(t=document.getElementById("p_".concat(n)))?t.scrollIntoView():console.log("page not found:",n);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(x.Z,{onScroll:function(e){!1===se&&(re(!0),ee(e.target.scrollTop),setTimeout((function(){re(!1)}),500))},style:{position:"fixed",top:"60px",left:"0",right:"0",bottom:"60px",overflow:"scroll"},fluid:!0,children:U.map((function(e){return(0,k.jsx)(p.Z,{children:(0,k.jsx)(g.Z,{align:"center",children:(0,k.jsx)(E,{aspectRatio:a,editMode:le,query:Z,mode:B,zoom:pe,scrollPos:X,page:e,ressource:A})})},e.scan_id)}))}),(0,k.jsx)(q,{scrollPageIntoView:function(e){me(e)},setEditMode:function(){ce(!le)},fullTxt:K,setSideMenu:function(e){h(e)},query:Z,setQuery:function(e){v(e)},queryResults:_,queryResultIndex:M,setQueryResultIndex:function(e){T(e)},mode:B,setMode:function(e){H(e)},zoom:pe,setZoom:function(e){ge(e)},pages:U}),(0,k.jsx)(Q,{ressource:A,pages:U,item:d,setSideMenu:function(e){h(e)}})]})}function Q(e){return(0,k.jsxs)(b.Z,{show:!!e.item,onHide:function(){e.setSideMenu(null)},placement:"end",children:[(0,k.jsx)(b.Z.Header,{closeButton:!0,children:(0,k.jsxs)(b.Z.Title,{children:["opera"===e.item&&"Angaben aus der opera-Liste","ressource"===e.item&&"Ressource (ID: ".concat(e.ressource.id,")"),"scans"===e.item&&"Scan-Seiten zuweisen"]})}),(0,k.jsxs)(b.Z.Body,{children:["opera"===e.item&&(0,k.jsx)(z,{ressource:e.ressource}),"ressource"===e.item&&(0,k.jsx)(A,{ressource:e.ressource}),"scans"===e.item&&(0,k.jsx)(R,{pages:e.pages,ressource:e.ressource}),"content"===e.item&&(0,k.jsx)(T,{setSideMenu:function(n){e.setSideMenu(n)},pages:e.pages,ressource:e.ressource})]})]})}function T(e){return(0,k.jsxs)(x.Z,{children:[(0,k.jsx)(p.Z,{className:"mb-4",children:(0,k.jsx)(g.Z,{children:(0,k.jsx)("h2",{children:"Inhaltsverzeichnis"})})}),(0,k.jsxs)(p.Z,{className:"mb-3",children:[(0,k.jsx)(g.Z,{xs:1}),(0,k.jsx)(g.Z,{children:(0,k.jsx)(S.Z,{variant:"flush",children:e.pages.map((function(n){return(0,k.jsx)(S.Z.Item,{style:{textAlign:"center",color:n.body_matter?"inherit":"var(--bs-gray-500)"},action:!0,onClick:function(){document.getElementById("p_".concat(n.scan_id)).scrollIntoView({behavior:"auto",block:"start"}),e.setSideMenu(null)},children:parseInt(n.filename)>0?parseInt(n.filename):n.filename},n.id)}))})}),(0,k.jsx)(g.Z,{xs:1})]})]})}function R(e){var n=(0,l.useState)([]),t=(0,s.Z)(n,2),a=t[0],c=t[1],u=(0,l.useState)(e.pages.map((function(e){return e.scan_id}))),o=(0,s.Z)(u,2),d=o[0],h=o[1];(0,l.useEffect)((function(){var n=function(){var n=(0,r.Z)(i().mark((function n(){var t;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.Q.scan.get({path:e.ressource.path});case 2:t=n.sent,c(t);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[]);var j=function(e){d.includes(e)?h(d.filter((function(n){return n!=e}))):h(d.concat([e]))};return(0,k.jsxs)(x.Z,{children:[(0,k.jsx)(p.Z,{className:"mb-2",children:(0,k.jsxs)(g.Z,{children:["Dateipfad: ",(0,k.jsx)("code",{children:e.ressource.path})]})}),(0,k.jsx)(p.Z,{className:"mb-4",children:(0,k.jsx)(g.Z,{children:(0,k.jsxs)("small",{children:["Einzelne Seiten k\xf6nnen mit einem Klick markiert werden. Mehrere Seiten k\xf6nnen mit einer Bewegung der Maus und dem gleichzeitigen Gedr\xfcckthalten der ",f.Q.me.selectKey,"-Taste aktiviert werden."]})})}),(0,k.jsx)(p.Z,{className:"mb-3",children:(0,k.jsx)(g.Z,{children:(0,k.jsx)(S.Z,{children:a.map((function(e){return(0,k.jsx)(S.Z.Item,{className:"mb-1",active:!!d.includes(e.id),onMouseEnter:function(n){("cmd"===f.Q.me.selectKey&&n.metaKey||"ctrl"===f.Q.me.selectKey&&n.ctrlKey)&&j(e.id)},onClick:function(){j(e.id)},action:!0,children:e.filename},e.id)}))})})}),(0,k.jsx)(p.Z,{className:"mb-3",children:(0,k.jsxs)(g.Z,{align:"right",children:["Auswahl: ",d.length]})}),(0,k.jsx)(p.Z,{children:(0,k.jsx)(g.Z,{children:(0,k.jsx)(w.YG,{onClick:(0,r.Z)(i().mark((function n(){var t;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e.pages.length>0)){n.next=3;break}return n.next=3,f.Q.scan_lnk.delete(e.pages.map((function(e){return e.id})));case 3:if(!(d.length>0)){n.next=8;break}return t=(t=d.sort()).map((function(n){return{edition_id:e.ressource.id,scan_id:n}})),n.next=8,f.Q.scan_lnk.save(t);case 8:return n.abrupt("return",{status:1});case 9:case"end":return n.stop()}}),n)}))),value:"speichern"})})})]})}function z(e){var n=(0,l.useState)({}),t=(0,s.Z)(n,2),a=t[0],c=t[1],u=(0,l.useState)({}),o=(0,s.Z)(u,2),d=o[0],h=o[1];return(0,l.useEffect)((function(){var n=function(){var n=(0,r.Z)(i().mark((function n(){var t,s;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.Q.work.get({id:e.ressource.work_id});case 2:return t=n.sent,c(t[0]),n.next=6,f.Q.author.get({id:t[0].author_id});case 6:s=n.sent,h(s[0]);case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[e.ressource]),(0,k.jsxs)(x.Z,{children:[(0,k.jsx)(p.Z,{className:"mb-2",children:(0,k.jsx)(g.Z,{dangerouslySetInnerHTML:(0,w.rg)(a.date_display?a.date_display:d.date_display)})}),(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsx)(g.Z,{xs:5,children:(0,k.jsx)("b",{children:(0,k.jsx)("aut",{children:a.author_display?a.author_display:d.abbr})})}),(0,k.jsx)(g.Z,{dangerouslySetInnerHTML:(0,w.rg)(a.author_display?null:d.full)})]}),(0,k.jsxs)(p.Z,{className:"mb-4",children:[(0,k.jsx)(g.Z,{xs:5,children:(0,k.jsx)("b",{style:{marginLeft:"10px"},dangerouslySetInnerHTML:(0,w.rg)(a.abbr)})}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("span",{style:{marginLeft:"10px"},dangerouslySetInnerHTML:(0,w.rg)(a.full)})})]}),(0,k.jsx)(p.Z,{className:"mb-2",children:(0,k.jsx)(g.Z,{children:(0,k.jsx)("i",{dangerouslySetInnerHTML:(0,w.rg)(a.bibliography?a.bibliography:d.bibliography)})})}),(0,k.jsx)(p.Z,{children:(0,k.jsxs)(g.Z,{children:[(0,k.jsx)("small",{dangerouslySetInnerHTML:(0,w.rg)(a.citation?a.citation:d.citation)})," ",(0,k.jsx)("small",{dangerouslySetInnerHTML:(0,w.rg)(a.txt_info?a.txt_info:d.txt_info)})]})})]})}function A(e){var n=(0,l.useState)(e.ressource.id),t=(0,s.Z)(n,2),a=t[0],c=(t[1],(0,l.useState)(e.ressource.ressource)),u=(0,s.Z)(c,2),o=u[0],d=u[1],h=(0,l.useState)(e.ressource.work_id),j=(0,s.Z)(h,2),m=j[0],Z=j[1],v=(0,l.useState)(e.ressource.ac_web),y=(0,s.Z)(v,2),b=y[0],S=y[1],_=(0,l.useState)(e.ressource.editor),C=(0,s.Z)(_,2),N=C[0],I=C[1],M=(0,l.useState)(e.ressource.year),Q=(0,s.Z)(M,2),T=Q[0],R=Q[1],z=(0,l.useState)(e.ressource.volume),A=(0,s.Z)(z,2),E=A[0],L=A[1],q=(0,l.useState)(e.ressource.vol_cont),O=(0,s.Z)(q,2),P=O[0],B=O[1],H=(0,l.useState)(e.ressource.serie),F=(0,s.Z)(H,2),J=F[0],K=F[1],D=(0,l.useState)(e.ressource.location),G=(0,s.Z)(D,2),V=G[0],U=G[1],$=(0,l.useState)(e.ressource.library),Y=(0,s.Z)($,2),W=Y[0],X=Y[1],ee=(0,l.useState)(e.ressource.signature),ne=(0,s.Z)(ee,2),te=ne[0],se=ne[1],re=(0,l.useState)(e.ressource.comment),ae=(0,s.Z)(re,2),ie=ae[0],le=ae[1],ce=(0,l.useState)(e.ressource.path),ue=(0,s.Z)(ce,2),oe=ue[0],de=ue[1],xe=(0,l.useState)(e.ressource.url),he=(0,s.Z)(xe,2),fe=he[0],pe=he[1],ge=(0,l.useState)(e.ressource.aspect_ratio),je=(0,s.Z)(ge,2),me=je[0],Ze=je[1],ve=(0,l.useState)(null),ye=(0,s.Z)(ve,2),be=ye[0],Se=ye[1];return(0,l.useEffect)((function(){var e=function(){var e=(0,r.Z)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(m>0)){e.next=5;break}return e.next=3,f.Q.work.get({id:m},{select:["bibliography"]});case 3:(n=e.sent).length>0?Se(n[0].bibliography):Se(null);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[m]),(0,k.jsxs)(x.Z,{children:[(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsx)(g.Z,{xs:3,children:"Werk:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)(w.Qc,{value:b||"",tbl:"work",searchCol:"ac_web",returnCol:"ac_web",onChange:function(e,n){S(e),Z(n)}})})]}),(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsx)(g.Z,{xs:3,children:(0,k.jsx)("small",{children:"Alter Dateiname:"})}),(0,k.jsx)(g.Z,{children:e.ressource.dir_name})]}),be&&(0,k.jsxs)(p.Z,{className:"mb-4",children:[(0,k.jsx)(g.Z,{xs:3,style:{backgroundColor:"var(--bs-gray-100"},children:(0,k.jsx)("small",{children:"Bibl. Angaben:"})}),(0,k.jsx)(g.Z,{style:{fontSize:"90%",backgroundColor:"var(--bs-gray-100"},children:be})]}),(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsx)(g.Z,{xs:3,children:"Ressource:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)(w.SA,{options:[[0,"Edition (relevant)"],[1,"Edition (veraltet)"],[2,"Handschrift"],[3,"Alter Druck (relevant)"],[4,"Alter Druck (veraltet)"],[5,"Sonstiges"]],value:o||"",onChange:function(e){d(parseInt(e.target.value))}})})]}),0===o||1===o||5===o?[(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsx)(g.Z,{xs:3,children:"Editor:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("input",{type:"text",style:{width:"100%"},value:N||"",onChange:function(e){I(e.target.value)}})})]},"0"),(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsx)(g.Z,{xs:3,children:"Jahr:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("input",{type:"text",style:{width:"100%"},value:T||"",onChange:function(e){R(e.target.value)}})})]},"1"),(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsx)(g.Z,{xs:3,children:"Band:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("input",{type:"text",style:{width:"100%"},value:E||"",onChange:function(e){L(e.target.value)}})})]},"2"),(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsx)(g.Z,{xs:3,children:"Bandinhalt:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("input",{type:"text",style:{width:"100%"},value:P||"",onChange:function(e){B(e.target.value)}})})]},"3"),(0,k.jsxs)(p.Z,{className:"mb-4",children:[(0,k.jsx)(g.Z,{xs:3,children:"Reihe:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)(w.SA,{options:[[0,""],[1,"Migne PL"],[2,"ASBen."],[3,"ASBoll."],[4,"AnalBoll."],[5,"Mon. Boica"],[6,"Ma. Schatzverzeichnisse"],[7,"Ma. Bibliothekskataloge"]],value:J||"",onChange:function(e){K(parseInt(e.target.value))}})})]},"4")]:null,2===o?[(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsx)(g.Z,{xs:3,children:"Stadt:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("input",{type:"text",style:{width:"100%"},value:V||"",onChange:function(e){U(e.target.value)}})})]},"5"),(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsx)(g.Z,{xs:3,children:"Bibliothek:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("input",{type:"text",style:{width:"100%"},value:W||"",onChange:function(e){X(e.target.value)}})})]},"6"),(0,k.jsxs)(p.Z,{className:"mb-4",children:[(0,k.jsx)(g.Z,{xs:3,children:"Signatur:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("input",{type:"text",style:{width:"100%"},value:te||"",onChange:function(e){se(e.target.value)}})})]},"7")]:null,3===o||4===o?[(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsx)(g.Z,{xs:3,children:"Drucker:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("input",{type:"text",style:{width:"100%"},value:N||"",onChange:function(e){I(e.target.value)}})})]},"8"),(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsx)(g.Z,{xs:3,children:"Ort:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("input",{type:"text",style:{width:"100%"},value:V||"",onChange:function(e){U(e.target.value)}})})]},"9"),(0,k.jsxs)(p.Z,{className:"mb-4",children:[(0,k.jsx)(g.Z,{xs:3,children:"Jahr:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("input",{type:"text",style:{width:"100%"},value:T||"",onChange:function(e){R(e.target.value)}})})]},"10")]:null,(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsx)(g.Z,{xs:3,children:"Kommentar:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("textarea",{style:{width:"250px",height:"100px"},value:ie||"",onChange:function(e){le(e.target.value)}})})]}),(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsx)(g.Z,{xs:3,children:"Dateipfad:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("input",{type:"text",style:{width:"100%"},value:oe||"",onChange:function(e){de(e.target.value)}})})]}),(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsxs)(g.Z,{xs:3,children:["Link:",(0,k.jsx)("br",{}),(0,k.jsx)("small",{children:"(externe Quellen)"})]}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("input",{type:"text",style:{width:"100%"},value:fe||"",onChange:function(e){pe(e.target.value)}})})]}),(0,k.jsxs)(p.Z,{className:"mb-4",children:[(0,k.jsx)(g.Z,{xs:3,children:"Seiten-verh\xe4ltnis:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("input",{type:"text",style:{width:"100%"},value:me||"",onChange:function(e){Ze(e.target.value.substring(0,5))}})})]}),(0,k.jsx)(p.Z,{className:"mb-2",children:(0,k.jsx)(g.Z,{children:(0,k.jsx)(w.YG,{value:"speichern",onClick:(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==o&&1!==o&&5!==o||N&&T){e.next=4;break}return e.abrupt("return",{status:!1,error:"Geben Sie den Editor und das Jahr ein."});case 4:return e.next=6,f.Q.edition.save({id:a,work_id:m,ressource:o,editor:N,year:T,volume:E,vol_cont:P,serie:J,comment:ie,location:V,library:W,signature:te,path:oe,url:fe,aspect_ratio:me});case 6:return e.abrupt("return",{status:!0});case 7:case"end":return e.stop()}}),e)})))})})})]})}function E(e){var n=e.zoom,t=(0,l.useState)(!1),a=(0,s.Z)(t,2),c=a[0],u=a[1],o=(0,l.useRef)(null),d=(0,l.useState)(null),x=(0,s.Z)(d,2),h=x[0],j=x[1];return(0,w.S1)({target:o,onIntersect:function(n,t){var r=(0,s.Z)(n,1)[0],a=r.intersectionRatio;r.isIntersecting&&!c&&u(!0),a>.1&&(document.getElementById("currentPageField").value=isNaN(e.page.filename)?e.page.filename:parseInt(e.page.filename),C(e.page.edition_id,e.page.scan_id),t.unobserve(o.current))}}),(0,l.useEffect)((function(){if(c){var n=function(){var n=(0,r.Z)(i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=j,n.next=3,f.Q.getScan(e.page.scan_id);case 3:n.t1=n.sent,(0,n.t0)(n.t1);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}else j(null)}),[c]),(0,k.jsxs)(p.Z,{id:"p_".concat(e.page.scan_id),className:"mb-4 px-5",children:[e.mode<2?(0,k.jsx)(g.Z,{children:(0,k.jsx)("div",{ref:o,style:{width:0===e.mode?"".concat(n,"%"):e.page.body_matter?"100%":"50%",aspectRatio:e.aspectRatio,boxShadow:"0 5px 10px var(--bs-gray-300)",borderRadius:"3px",overflow:"hidden"},children:(0,k.jsx)("img",{style:{width:"100%",height:"100%"},src:h,alt:e.page.filename})})}):null,e.mode>0&&(e.page.body_matter||e.editMode)?(0,k.jsx)(g.Z,{children:(0,k.jsx)(L,{editMode:e.editMode,ressource:e.ressource,page:e.page,query:e.query})}):null]})}function L(e){var n=(0,l.useState)(null),t=(0,s.Z)(n,2),a=t[0],o=t[1],d=(0,l.useState)(!1),h=(0,s.Z)(d,2),j=h[0],m=h[1],Z=(0,l.useState)(e.page.body_matter),y=(0,s.Z)(Z,2),b=y[0],S=y[1],C=(0,l.useState)(e.page.full_text),N=(0,s.Z)(C,2),I=N[0],M=N[1],Q=(0,l.useState)(0),T=(0,s.Z)(Q,2),R=T[0],z=T[1],A=(0,l.useRef)(null);return(0,l.useEffect)((function(){if(I){var n=e.query?I.replace(new RegExp("(".concat(e.query,")"),"gi"),"<mark>$1</mark>"):I;n=(n=(n=n.replace(/-\n([^ ]*) /g,"$1\n")).replace(/(\d+\.)/g,"</p><p><b>$1</b>")).replace(/</g,"&lt;").replace(/>/g,"&gt;");var t=(n=(n="<p>".concat(n,"</p>")).replace(/\n/g,"<br />")).indexOf("$$$$$");o(t>-1?[(0,k.jsx)(g.Z,{style:{textAlign:"justify",fontSize:"0.9rem"},dangerouslySetInnerHTML:(0,w.rg)(n.substring(0,t))},"0"),(0,k.jsx)(g.Z,{style:{textAlign:"justify",fontSize:"0.9rem"},dangerouslySetInnerHTML:(0,w.rg)(n.substring(t+9))},"1")]:[(0,k.jsx)(g.Z,{style:{textAlign:"justify",fontSize:"1rem",color:1===e.page.auto_text?"var(--bs-gray-500)":"inherit"},dangerouslySetInnerHTML:(0,w.rg)(n)},"0")])}else o([(0,k.jsx)(g.Z,{},"0")])}),[I,e.editMode,e.query]),(0,k.jsxs)(x.Z,{className:e.editMode?"bg-light":null,ref:A,style:{position:"relative",width:"100%",minHeight:"100%",boxShadow:"0 5px 10px var(--bs-gray-300)",borderRadius:"3px",overflow:"hidden",padding:"60px 40px"},children:[(0,k.jsxs)(p.Z,{className:"mb-4",children:[(0,k.jsx)(g.Z,{style:{textAlign:"left"},children:e.editMode?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(v.Z,{size:"sm",onClick:(0,r.Z)(i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.Q.scan.save({id:e.page.scan_id,body_matter:1===b?0:1,full_text:"",ocr_auto:"",ocr_auto_LENGTH:0});case 2:S(1===b?0:1),M("");case 4:case"end":return n.stop()}}),n)}))),children:(0,k.jsx)(c.G,{icon:u.Hkv})})," ",1===b?(0,k.jsx)(v.Z,{className:"ml-3",size:"sm",onClick:function(){m(!j)},children:(0,k.jsx)(c.G,{icon:u.TzT})}):null]}):null}),(0,k.jsx)(g.Z,{dangerouslySetInnerHTML:(0,w.rg)(e.ressource.opus)}),(0,k.jsx)(g.Z,{align:"right",children:isNaN(e.page.filename)?e.page.filename:parseInt(e.page.filename)})]}),b?j?(0,k.jsx)(_.Z.Control,{className:"pageTextEdit",style:{position:"absolute",height:"90%",width:"90%",border:1===R?"3px solid var(--bs-warning)":2===R?"3px solid var(--bs-success)":"inherit"},as:"textarea",value:I,onChange:function(e){M(e.target.value),1!==R&&z(1)},onBlur:function(){var n=(0,r.Z)(i().mark((function n(t){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(1!==R){n.next=4;break}return n.next=3,f.Q.scan.save({id:e.page.scan_id,full_text:t.target.value,ocr_auto:"",ocr_auto_LENGTH:0});case 3:z(2);case 4:case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}):I?(0,k.jsx)(p.Z,{children:a}):(0,k.jsx)(p.Z,{children:(0,k.jsx)(g.Z,{children:(0,k.jsx)("i",{children:"Es ist noch kein Flie\xdftext verf\xfcgbar."})})}):(0,k.jsx)(p.Z,{children:(0,k.jsx)(g.Z,{children:(0,k.jsx)("i",{children:"Es gibt keinen lateinischen Text auf dieser Seite."})})})]})}function q(e){var n=(0,l.useState)(null),t=(0,s.Z)(n,2),r=t[0],a=t[1],i=[["opera-Angaben",function(){e.setSideMenu("opera")}],["Inhaltsverzeichnis",function(){e.setSideMenu("content")}]];f.Q.access("e_edit")&&i.push(["Ressource bearbeiten",function(){e.setSideMenu("ressource")}]),f.Q.access("l_edit")&&i.push(["Scan-Seiten zuweisen",function(){e.setSideMenu("scans")}]),f.Q.access("e_edit")&&i.push(["Bearbeitungsmodus",function(){e.setEditMode()}]),!0===e.fullTxt&&(i.push(["Nur Text",function(){e.setMode(2)}]),i.push(["Scans&Text",function(){e.setMode(1)}]),i.push(["Nur Scans",function(){e.setMode(0)}]));var c=function(){1===e.queryResults.length?e.scrollPageIntoView(e.queryResults[e.queryResultIndex].id):e.queryResultIndex+1===e.queryResults.length?e.setQueryResultIndex(0):e.setQueryResultIndex(e.queryResultIndex+1)};return(0,k.jsx)(d.Z,{fixed:"bottom",bg:"light",children:(0,k.jsxs)(x.Z,{fluid:!0,children:[(0,k.jsxs)(d.Z.Collapse,{className:"justify-content-start",children:[e.fullTxt&&(0,k.jsx)(d.Z.Text,{children:(0,k.jsx)(_.Z.Control,{size:"sm",type:"text",id:"searchInput",placeholder:"Suche im Band...",value:e.query,onChange:function(n){e.setQuery(n.target.value)},onKeyUp:function(e){13===e.keyCode&&c()}})}),e.fullTxt&&e.queryResults.length>0&&(0,k.jsx)(d.Z.Text,{style:{marginLeft:"10px"},children:(0,k.jsxs)("div",{id:"navBox",style:{display:"flex",marginRight:"20px"},children:[(0,k.jsx)(v.Z,{style:{borderRadius:"0.2rem 0 0 0.2rem"},variant:"secondary",size:"sm",onClick:function(){1===e.queryResults.length?e.scrollPageIntoView(e.queryResults[e.queryResultIndex].id):e.queryResultIndex>0?e.setQueryResultIndex(e.queryResultIndex-1):e.setQueryResultIndex(e.queryResults.length-1)},children:"<"}),(0,k.jsxs)("div",{style:{borderBottom:"1px solid var(--bs-gray-600)",borderTop:"1px solid var(--bs-gray-600)",padding:"5px 10px",margin:"0"},children:[" ",(0,k.jsx)("input",{style:{width:"50px",border:"none",boxShadow:"none",padding:0,margin:0,textAlign:"right",background:"none",color:" var(--bs-gray-600)"},type:"text",value:e.queryResultIndex+1,onChange:function(n){""==n.target.value||isNaN(n.target.value)||e.setQueryResultIndex(parseInt(n.target.value)-1)}})," von ",e.queryResults.length]}),(0,k.jsx)(v.Z,{style:{borderRadius:"0 0.2rem 0.2rem 0"},variant:"secondary",size:"sm",onClick:function(){c()},children:">"})]})}),e.fullTxt&&0===e.queryResults.length&&e.query.length>0&&(0,k.jsx)(d.Z.Text,{style:{marginLeft:"10px"},children:(0,k.jsx)("small",{className:"text-danger",children:"Keine Stellen gefunden!"})})]}),(0,k.jsxs)(d.Z.Collapse,{children:[(0,k.jsxs)(d.Z.Text,{children:["Seite ",(0,k.jsx)("input",{type:"text",id:"currentPageField",onChange:function(){a(null)},onKeyDown:function(n){if(13===n.keyCode){n.preventDefault();var t=isNaN(n.target.value)?n.target.value:n.target.value.padStart(4,"0"),s=e.pages.find((function(e){return e.filename===t}));s?(a(null),e.scrollPageIntoView(s.scan_id)):a((0,k.jsx)("span",{className:"text-danger",children:"Seite nicht gefunden!"}))}}})," ",r]}),(0,k.jsx)(d.Z.Text,{})]}),(0,k.jsx)(d.Z.Collapse,{className:"justify-content-end",children:(0,k.jsxs)(d.Z.Text,{children:[0===e.mode&&(0,k.jsx)(_.Z.Range,{style:{position:"relative",top:"7px",marginRight:"10px",width:"400px"},min:"45",max:"95",value:e.zoom,onChange:function(n){e.setZoom(parseInt(n.target.value))},className:"slider"}),i.length>0?(0,k.jsx)(w.vW,{menuItems:i}):null]})})]})})}function O(e){var n=(0,l.useState)([]),t=(0,s.Z)(n,2),a=t[0],c=t[1],u=(0,l.useState)([]),o=(0,s.Z)(u,2),d=o[0],h=o[1],m=(0,l.useState)([]),Z=(0,s.Z)(m,2),v=Z[0],y=Z[1],b=(0,l.useState)(0),S=(0,s.Z)(b,2),_=S[0],C=S[1],I=(0,l.useState)(1),M=(0,s.Z)(I,2),Q=M[0],T=M[1],R=(0,l.useState)(""),z=(0,s.Z)(R,2),A=z[0],E=z[1],L=[["ACTION+f",function(){var e=document.getElementById("searchInput");e&&e.focus()}],["ACTION+ArrowRight",function(){Math.ceil(_/30)>=Q+1?T(Q+1):T(1)}],["ACTION+ArrowLeft",function(){T(0<Q-1?Q-1:Math.ceil(_/30))}]];(0,w.XU)(L,!1),(0,l.useEffect)((function(){var e=function(){var e=(0,r.Z)(i().mark((function e(){var n,t,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,t=[],s=[],""==A){e.next=9;break}return e.next=6,f.Q.scan_opera.search([{c:"search",o:"=",v:"".concat(A,"*")}],{count:!0});case 6:n=e.sent,e.next=12;break;case 9:return e.next=11,f.Q.scan_opera.getAll({count:!0});case 11:n=e.sent;case 12:C(n[0].count),h(s),c(t),T(1);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[A]),(0,l.useEffect)((function(){var e=function(){var e=(0,r.Z)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],""==A){e.next=7;break}return e.next=4,f.Q.scan_opera.search([{c:"search",o:"=",v:"".concat(A,"*")}],{limit:30,offset:30*(Q-1)});case 4:n=e.sent,e.next=10;break;case 7:return e.next=9,f.Q.scan_opera.getAll({limit:30,offset:30*(Q-1)});case 9:n=e.sent;case 10:y(n);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[A,Q,a]);var q=function(n,t,s,r){N(t,s,r),e.loadMain(n,"edition",t)};return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(x.Z,{children:(0,k.jsxs)(p.Z,{children:[(0,k.jsx)(g.Z,{xs:1}),(0,k.jsx)(g.Z,{children:(0,k.jsxs)(j.Z,{children:[(0,k.jsx)("thead",{children:(0,k.jsxs)("tr",{children:[(0,k.jsx)("th",{width:"40%",children:"Zitiertitel"}),(0,k.jsx)("th",{width:"30%",children:"relevant"}),(0,k.jsx)("th",{width:"15%",children:"veraltet"}),(0,k.jsx)("th",{width:"15%",children:"Sonstiges"})]})}),(0,k.jsx)("tbody",{children:v.map((function(e){var n=JSON.parse(e.editions_label),t=JSON.parse(e.editions_id),s=JSON.parse(e.editions_url),r=JSON.parse(e.editions_type),a=[];if(n&&n.length===t.length&&t.length===s.length){var i=-1;a=t.map((function(e){var t=d.filter((function(n){return n===parseInt(e)})).length;return i++,{id:e,label:n[i],url:s[i],type:r[i],hits:t}}))}return d.length>0&&(a=a.filter((function(e){return e.hits>0}))),(0,k.jsxs)("tr",{style:{color:e.in_use?null:"var(--bs-gray-500)",backgroundColor:e.in_use?null:"var(--bs-gray-100)"},children:[(0,k.jsx)("td",{dangerouslySetInnerHTML:(0,w.rg)(e.citation)}),(0,k.jsx)("td",{children:a.map((function(n){if(0===n.type||3===n.type)return(0,k.jsx)("div",{children:(0,k.jsxs)("a",{href:n.url?n.url:"#",target:n.url?"_blank":"",className:n.url?"link-warning":"link-primary",onClick:function(t){n.url||q(t,n.id,n.label,e.search)},children:[n.label,d.length>0?" ("+n.hits+")":null]})},n.id)}))}),(0,k.jsx)("td",{children:a.map((function(n){if(1===n.type||4===n.type)return(0,k.jsx)("div",{children:(0,k.jsx)("a",{href:n.url?n.url:"#",target:n.url?"_blank":"",onClick:function(t){n.url||q(t,n.id,n.label,e.search)},children:n.label})},n.id)}))}),(0,k.jsx)("td",{children:a.map((function(n){if(2===n.type||5===n.type)return(0,k.jsx)("div",{children:(0,k.jsx)("a",{href:n.url?n.url:"#",target:n.url?"_blank":"",onClick:function(t){n.url||q(t,n.id,n.label,e.search)},children:n.label})},n.id)}))})]},e.id)}))})]})}),(0,k.jsx)(g.Z,{xs:1})]})}),(0,k.jsx)(P,{operaCount:_,currentPage:Q,setCurrentPage:function(e){T(e)},setQuery:function(e){E(e)}})]})}function P(e){var n=(0,l.useState)(""),t=(0,s.Z)(n,2),r=t[0],a=t[1];return(0,k.jsx)(d.Z,{fixed:"bottom",bg:"light",children:(0,k.jsxs)(x.Z,{fluid:!0,children:[(0,k.jsx)(d.Z.Collapse,{className:"justify-content-start",children:(0,k.jsx)(d.Z.Text,{children:(0,k.jsxs)(m.Z,{children:[(0,k.jsx)(Z.Z,{placeholder:"Nach Zitiertitel suchen...",id:"searchInput",onChange:function(e){a(e.target.value)},value:r,onKeyUp:function(n){13===n.keyCode&&e.setQuery(r)}}),(0,k.jsx)(v.Z,{variant:"dark",onClick:function(){e.setQuery(r)},children:(0,k.jsx)(c.G,{icon:u.wn1})})]})})}),(0,k.jsxs)(d.Z.Collapse,{className:"justify-content-end",children:[(0,k.jsx)(d.Z.Text,{children:e.operaCount>0?(0,k.jsx)(w.C3,{loadPage:function(n){e.setCurrentPage(n)},currentPage:e.currentPage,maxPage:Math.ceil(e.operaCount/30)}):null}),(0,k.jsx)(d.Z.Text,{})]})]})})}var B=t(2583),H=t(2982),F=t(4849);function J(e){var n=(0,l.useState)(""),t=(0,s.Z)(n,2),a=t[0],o=t[1],h=(0,l.useState)(""),j=(0,s.Z)(h,2),Z=j[0],y=j[1],b=(0,l.useState)(0),S=(0,s.Z)(b,2),C=S[0],N=S[1],I=(0,l.useState)(0),M=(0,s.Z)(I,2),Q=M[0],T=M[1],R=(0,l.useState)([]),z=(0,s.Z)(R,2),A=z[0],E=z[1],L=(0,l.useState)(!1),q=(0,s.Z)(L,2),O=q[0],P=q[1],B=function(){if(""===a)E([]);else{var e=function(){var e=(0,r.Z)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y((0,k.jsx)(F.Z,{variant:"primary",animation:"border"})),e.next=3,f.Q.fulltext_search_view.search([{c:"full_text",o:"=",v:"*".concat(a,"*")},{c:"auto_text",o:O?">=":"=",v:0}],{select:["work_id"],group:"work_id"});case 3:n=e.sent,y("".concat(n.length," Werke gefunden.")),T(Math.floor(n.length/5)+1),H(1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}},H=function(){var e=(0,r.Z)(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(n),E([]),e.next=4,f.Q.fulltext_search_view.search([{c:"full_text",o:"=",v:"*".concat(a,"*")},{c:"auto_text",o:O?">=":"=",v:0}],{select:["work_id","opus"],group:"work_id",offset:5*(n-1),limit:5});case 4:t=e.sent,E(t);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(d.Z,{fixed:"bottom",bg:"light",children:(0,k.jsx)(x.Z,{fluid:!0,children:(0,k.jsx)(d.Z.Collapse,{className:"justify-content-end",children:(0,k.jsx)(d.Z.Text,{children:Q>0?(0,k.jsx)(w.C3,{loadPage:function(e){H(e)},currentPage:C,maxPage:Q}):null})})})}),(0,k.jsxs)(x.Z,{children:[(0,k.jsx)(p.Z,{children:(0,k.jsx)(g.Z,{children:(0,k.jsxs)(m.Z,{children:[(0,k.jsx)(_.Z.Control,{type:"text",id:"searchInput",placeholder:"Suche...",value:a,onChange:function(e){o(e.target.value)},onKeyUp:function(e){13===e.keyCode&&B()}}),(0,k.jsx)(v.Z,{style:{padding:"6px 40px"},onClick:function(){B()},children:(0,k.jsx)(c.G,{icon:u.wn1})})]})})}),(0,k.jsxs)(p.Z,{className:"mt-2",children:[(0,k.jsx)(g.Z,{children:Z}),(0,k.jsx)(g.Z,{}),(0,k.jsx)(g.Z,{children:(0,k.jsx)(_.Z.Check,{type:"switch",id:"custom-switch",label:"automatisch generierte Texte ber\xfccksichtigen",checked:O,value:O,onChange:function(e){P(e.target.checked)}})})]}),A.length>0?(0,k.jsx)(p.Z,{children:(0,k.jsx)(g.Z,{children:A.map((function(n){return(0,k.jsx)(K,{searchAutoText:O,loadMain:function(){e.loadMain.apply(e,arguments)},query:a,work:n},n.work_id)}))})}):null]})]})}function K(e){var n=(0,l.useState)([]),t=(0,s.Z)(n,2),a=t[0],c=t[1],u=(0,l.useState)(-1),o=(0,s.Z)(u,2),d=o[0],x=o[1];return(0,l.useEffect)((function(){var n=function(){var n=(0,r.Z)(i().mark((function n(){var t,s,r;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.Q.fulltext_search_view.search([{c:"full_text",o:"=",v:"*".concat(e.query,"*")},{c:"auto_text",o:e.searchAutoText?">=":"=",v:0},{c:"work_id",o:"=",v:e.work.work_id}],{select:["full_text","auto_text","page","edition_id","scan_id","opus","ac_web","label"]});case 2:t=n.sent,150,s=[],r=-1,t.forEach((function(n){for(var t=(0,H.Z)(n.full_text.matchAll(e.query)).length,a=-1,i=0;i<t;i++)r+=1,a=n.full_text.indexOf(e.query,a+1),s.push({id:r,scan_id:n.scan_id,auto_text:n.auto_text,edition_id:n.edition_id,opus:n.opus,ac_web:n.ac_web,label:n.label,page:n.page,section:(0,k.jsxs)("span",{children:["... ",n.full_text.substring(a-150,a),(0,k.jsx)("strong",{className:"text-primary",children:e.query}),n.full_text.substring(a+e.query.length,a+e.query.length+150)," ..."]})})})),c(s),x(r);case 9:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[]),(0,k.jsxs)(k.Fragment,{children:[a.length>0?(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)("h4",{className:"mt-4",style:{borderTop:"1px solid var(--bs-secondary)",paddingTop:"20px"},children:[(0,k.jsx)("span",{dangerouslySetInnerHTML:(0,w.rg)(e.work.opus)}),d>-1?(0,k.jsxs)("i",{style:{fontSize:"70%"},children:["(",d+1,")"]}):null]})}):null,a.length>0?a.map((function(n){return(0,k.jsxs)("div",{className:"mb-3",children:[(0,k.jsxs)("div",{style:{cursor:"pointer"},onClick:function(t){C(n.edition_id,n.scan_id),N(n.edition_id,n.label,n.ac_web),f.Q.setOptions("argos_mode",1),f.Q.setOptions("argos_query",e.query),e.loadMain(t,"edition",n.edition_id)},children:[(0,k.jsxs)("b",{children:["Seite ",isNaN(n.page)?n.page:parseInt(n.page),":"]}),n.auto_text?(0,k.jsx)("small",{style:{fontStyle:"italic"},className:"text-danger",children:"\xa0(auto)"}):null]}),(0,k.jsx)("div",{style:{marginLeft:"20px"},children:n.section})]},n.id)})):(0,k.jsx)("div",{children:(0,k.jsx)(F.Z,{variant:"primary",size:"sm",animation:"border"})})]})}var D=t(8491);function G(e){f.Q.changeLog=U,(0,l.useEffect)((function(){var n=function(){var n=(0,r.Z)(i().mark((function n(){var t,s;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=new URLSearchParams(window.location.search),null!==e.resId||!t.get("id")){n.next=6;break}return n.next=4,f.Q.edition.get({id:t.get("id")},{select:["id","label","ac_web"]});case 4:1===(s=n.sent).length&&(N(s[0].id,s[0].label,s[0].ac_web),e.loadMain(null,"edition",s[0].id));case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[]);var n=null;switch(e.res){case null:n=(0,k.jsx)(O,{loadMain:function(){e.loadMain.apply(e,arguments)}});break;case"edition":n=(0,k.jsx)(M,{resId:e.resId,loadMain:function(){e.loadMain.apply(e,arguments)}});break;case"changelog":n=(0,k.jsx)(B.v,{});break;case"search":n=(0,k.jsx)(J,{loadMain:function(){e.loadMain.apply(e,arguments)}});break;case"account":n=(0,k.jsx)(D.m,{});break;default:n=(0,k.jsxs)("div",{children:['Unbekannter Men\xfc-Punkt: "',e.res,'"']})}return n}function V(e){var n=(0,l.useState)([]),t=(0,s.Z)(n,2),a=t[0],f=t[1],p=(0,l.useState)("zuletzt ge\xf6ffnet"),g=(0,s.Z)(p,2),j=g[0],m=g[1];return(0,l.useEffect)((function(){var n=function(){var n=(0,r.Z)(i().mark((function n(){var t;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=I(),f(t.map((function(n){return(0,k.jsxs)(o.Z.Item,{onClick:function(t){N(n.id,n.label,n.opus),e.loadMain(t,"edition",n.id)},children:[n.label,n.opus?" (".concat(n.opus.substring(0,20)+(n.opus.length>20?"...":""),")"):null]},n.id)}))),"edition"===e.res?m(t[0].label+(t[0].opus?" (".concat(t[0].opus.substring(0,20)+(t[0].opus.length>20?"...":""),")"):null)):m("zuletzt ge\xf6ffnet");case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[e.res,e.resId]),(0,k.jsx)(d.Z,{bg:"dark",variant:"dark",fixed:"top",children:(0,k.jsxs)(x.Z,{fluid:!0,children:[(0,k.jsx)(d.Z.Brand,{style:{cursor:"pointer"},onClick:function(n){e.loadMain(n,null)},children:"Argos"}),(0,k.jsx)(d.Z.Toggle,{}),(0,k.jsx)(d.Z.Collapse,{className:"justify-content-end",children:(0,k.jsxs)(h.Z,{children:[(0,k.jsx)(h.Z.Link,{children:(0,k.jsx)("span",{onClick:function(n){e.loadMain(n,"search")},children:"Volltextsuche"})}),(0,k.jsx)(o.Z,{title:j,children:a}),(0,k.jsxs)(o.Z,{title:"Einstellungen",children:[(0,k.jsx)(o.Z.Item,{onClick:function(n){e.loadMain(n,"account")},children:"Konto"}),(0,k.jsx)(o.Z.Item,{onClick:function(n){e.loadMain(n,"changelog")},children:"\xc4nderungen"})]}),(0,k.jsx)(h.Z.Link,{children:(0,k.jsx)(c.G,{icon:u.jLD,onClick:function(n){e.loadMain(n,"logout")},title:"abmelden"})})]})})]})})}var U=[{title:"Beta 1.3",date:"2022-05-18",description:(0,k.jsx)(k.Fragment,{children:(0,k.jsx)("p",{children:"Volltextsuche angepasst und Shortcut-Taste \xfcber Einstellungen ver\xe4nderbar."})})},{title:"Beta 1.2",date:"2022-04-14",description:(0,k.jsx)(k.Fragment,{children:(0,k.jsx)("p",{children:"Shortcuts hinzugef\xfcgt."})})},{title:"Beta 1.1",date:"2022-03-31",description:(0,k.jsx)(k.Fragment,{children:(0,k.jsx)("p",{children:"Neue Version online!"})})},{title:"dDOM Update",date:"2022-06-03",description:(0,k.jsx)(k.Fragment,{children:(0,k.jsx)("p",{children:'Korrektur des Seitenverh\xe4ltnisses (auch \xfcber "Ressource bearbeiten" ver\xe4nderbar).'})})},{title:"Beta 1.0",date:"2022-02-26",description:(0,k.jsx)(k.Fragment,{children:(0,k.jsx)("p",{children:"Erste Version des neuen Scan-Viewers ist online."})})}]},2583:function(e,n,t){t.d(n,{v:function(){return u}});var s=t(885),r=t(7022),a=t(2469),i=t(6407),l=t(2791),c=t(184);function u(){i.Q.changeLog=i.Q.changeLog.sort((function(e,n){return e.date<n.date})),i.Q.changeLog=i.Q.changeLog.filter((function(e){return void 0===e.project||e.project===i.Q.project_name}));var e=(0,l.useState)(!(i.Q.changeLog.length>5)),n=(0,s.Z)(e,2),t=n[0],u=n[1];return(0,c.jsxs)(r.Z,{children:[i.Q.changeLog.map((function(e,n){return t||n<5?(0,c.jsxs)(a.Z,{variant:0===n?"primary":"secondary",children:[(0,c.jsx)(a.Z.Heading,{children:e.title}),(0,c.jsx)("i",{children:(s=e.date,"".concat(s.substring(8,10),". ").concat({"01":"Januar","02":"Februar","03":"M\xe4rz","04":"April","05":"Mai","06":"Juni","07":"Juli","08":"August","09":"September",10:"Oktober",11:"November",12:"Dezember"}[s.substring(5,7)]," ").concat(s.substring(0,4)))}),e.description]},n):null;var s})),t?null:(0,c.jsx)(a.Z,{style:{cursor:"pointer",marginTop:"100px",textAlign:"center"},variant:"info",onClick:function(){u(!0)},children:"Alle \xc4nderungen anzeigen."})]})}},8491:function(e,n,t){t.d(n,{m:function(){return p}});var s=t(5861),r=t(885),a=t(7757),i=t.n(a),l=t(9743),c=t(2677),u=t(3350),o=t(7022),d=t(2791),x=t(6407),h=t(3222),f=t(184);function p(){var e=(0,d.useState)(x.Q.me.first_name),n=(0,r.Z)(e,2),t=n[0],a=n[1],p=(0,d.useState)(x.Q.me.last_name),g=(0,r.Z)(p,2),j=g[0],m=g[1],Z=(0,d.useState)(x.Q.me.email),v=(0,r.Z)(Z,2),y=v[0],b=v[1],S=(0,d.useState)(""),_=(0,r.Z)(S,2),w=_[0],k=_[1],C=(0,d.useState)(""),N=(0,r.Z)(C,2),I=N[0],M=N[1],Q=(0,d.useState)(x.Q.options.z_width),T=(0,r.Z)(Q,2),R=T[0],z=T[1],A=(0,d.useState)(x.Q.options.action_key),E=(0,r.Z)(A,2),L=E[0],q=E[1],O=(0,d.useState)(x.Q.options.openExternally),P=(0,r.Z)(O,2),B=P[0],H=P[1],F=[(0,f.jsxs)(l.Z,{className:"mb-2",children:[(0,f.jsx)(c.Z,{xs:2,children:"Breite der Zettel:"}),(0,f.jsx)(c.Z,{children:(0,f.jsx)(u.Z.Range,{min:"400",max:"600",size:"sm",value:R,onChange:function(e){x.Q.setOptions("z_width",e.target.value),x.Q.setOptions("z_height",.7*parseInt(e.target.value)),z(e.target.value)}})})]},1),(0,f.jsxs)(l.Z,{className:"mb-2",children:[(0,f.jsx)(c.Z,{xs:4,children:"\xd6ffnen der Ressourcen (Zettel im Editor):"}),(0,f.jsx)(c.Z,{children:(0,f.jsxs)(u.Z.Select,{size:"sm",value:B,onChange:function(e){x.Q.setOptions("openExternally",parseInt(e.target.value)),H(e.target.value)},children:[(0,f.jsx)("option",{value:"0",children:"im gleichen Fenster"}),(0,f.jsx)("option",{value:"1",children:"in einem neuen Fenster"}),(0,f.jsx)("option",{value:"2",children:"in Echo"})]})})]},2)];return(0,f.jsxs)(o.Z,{style:{padding:"0 10% 0 10%"},children:[(0,f.jsx)(l.Z,{children:(0,f.jsx)(c.Z,{children:(0,f.jsx)("h3",{children:"Pers\xf6nliche Daten"})})}),(0,f.jsxs)(l.Z,{className:"mb-2",children:[(0,f.jsx)(c.Z,{xs:2,children:"Vorname:"}),(0,f.jsx)(c.Z,{children:(0,f.jsx)(u.Z.Control,{type:"text",size:"sm",value:t,onChange:function(e){a(e.target.value)}})})]}),(0,f.jsxs)(l.Z,{className:"mb-2",children:[(0,f.jsx)(c.Z,{xs:2,children:"Nachname:"}),(0,f.jsx)(c.Z,{children:(0,f.jsx)(u.Z.Control,{type:"text",size:"sm",value:j,onChange:function(e){m(e.target.value)}})})]}),(0,f.jsxs)(l.Z,{className:"mb-4",children:[(0,f.jsx)(c.Z,{xs:2,children:"Email-Adresse:"}),(0,f.jsx)(c.Z,{children:(0,f.jsx)(u.Z.Control,{type:"text",size:"sm",value:y,onChange:function(e){b(e.target.value)}})})]}),(0,f.jsxs)(l.Z,{className:"mb-4",children:[(0,f.jsx)(c.Z,{xs:2}),(0,f.jsx)(c.Z,{children:(0,f.jsx)(h.YG,{value:"speichern",onClick:(0,s.Z)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.Q.user.save({id:x.Q.me.id,first_name:t,last_name:j,email:y});case 2:return e.next=4,x.Q.getUser();case 4:return n=e.sent,x.Q.me=n,e.abrupt("return",{status:1});case 7:case"end":return e.stop()}}),e)})))})})]}),(0,f.jsx)(l.Z,{children:(0,f.jsx)(c.Z,{children:(0,f.jsx)("h3",{children:"Passwort"})})}),(0,f.jsxs)(l.Z,{className:"mb-2",children:[(0,f.jsx)(c.Z,{xs:2,children:"altes Passwort:"}),(0,f.jsx)(c.Z,{children:(0,f.jsx)(u.Z.Control,{type:"password",size:"sm",value:w,onChange:function(e){k(e.target.value)}})})]}),(0,f.jsxs)(l.Z,{className:"mb-4",children:[(0,f.jsx)(c.Z,{xs:2,children:"neues Passwort:"}),(0,f.jsx)(c.Z,{children:(0,f.jsx)(u.Z.Control,{type:"password",size:"sm",value:I,onChange:function(e){M(e.target.value)}})})]}),(0,f.jsxs)(l.Z,{className:"mb-4",children:[(0,f.jsx)(c.Z,{xs:2}),(0,f.jsx)(c.Z,{children:(0,f.jsx)(h.YG,{value:"speichern",onClick:(0,s.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.Q.user.save({id:x.Q.me.id,old_password:w,new_password:I});case 2:return e.abrupt("return",{status:1});case 3:case"end":return e.stop()}}),e)})))})})]}),(0,f.jsx)(l.Z,{children:(0,f.jsx)(c.Z,{children:(0,f.jsx)("h3",{children:"Darstellung und Benutzung"})})}),(0,f.jsxs)(l.Z,{className:"mb-4",children:[(0,f.jsx)(c.Z,{xs:4,children:"Funktionstaste f\xfcr Tastenk\xfcrzel"}),(0,f.jsxs)(c.Z,{children:[(0,f.jsxs)(u.Z.Select,{size:"sm",value:L,onChange:function(e){x.Q.setOptions("action_key",e.target.value),q(e.target.value)},children:[(0,f.jsx)("option",{value:"alt",children:"Alt"}),(0,f.jsx)("option",{value:"ctrl",children:"Strg"}),(0,f.jsx)("option",{value:"cmd",children:"Befehlstaste"})]}),(0,f.jsxs)("small",{children:["Eine Liste mit Tastenk\xfcrzeln finden Sie ",(0,f.jsx)("a",{className:"text-primary",rel:"noreferrer",href:"https://gitlab.lrz.de/haeberlin/dmlw/-/wikis/06-Argos#tastenk\xfcrzel",target:"_blank",children:"hier"}),"."]})]})]}),F]})}},3573:function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];function s(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];var r=null;return n.forEach((function(e){if(null==r){var n=e.apply(void 0,t);null!=n&&(r=n)}})),r}return(0,a.default)(s)};var s,r=t(6054),a=(s=r)&&s.__esModule?s:{default:s};e.exports=n.default},6054:function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){function n(n,t,s,r,a,i){var l=r||"<<anonymous>>",c=i||s;if(null==t[s])return n?new Error("Required "+a+" `"+c+"` was not specified in `"+l+"`."):null;for(var u=arguments.length,o=Array(u>6?u-6:0),d=6;d<u;d++)o[d-6]=arguments[d];return e.apply(void 0,[t,s,l,a,c].concat(o))}var t=n.bind(null,!1);return t.isRequired=n.bind(null,!0),t},e.exports=n.default},6040:function(e,n,t){var s=t(2791).createContext(null);s.displayName="CardHeaderContext",n.Z=s},9410:function(e,n,t){var s=t(5987),r=t(1413),a=t(1694),i=t.n(a),l=t(2791),c=t(6543),u=t(162),o=t(6882),d=t(1991),x=t(184),h=["bsPrefix","size","hasValidation","className","as"],f=(0,c.Z)("input-group-text",{Component:"span"}),p=l.forwardRef((function(e,n){var t=e.bsPrefix,a=e.size,c=e.hasValidation,o=e.className,f=e.as,p=void 0===f?"div":f,g=(0,s.Z)(e,h);t=(0,u.vE)(t,"input-group");var j=(0,l.useMemo)((function(){return{}}),[]);return(0,x.jsx)(d.Z.Provider,{value:j,children:(0,x.jsx)(p,(0,r.Z)((0,r.Z)({ref:n},g),{},{className:i()(o,t,a&&"".concat(t,"-").concat(a),c&&"has-validation")}))})}));p.displayName="InputGroup",n.Z=Object.assign(p,{Text:f,Radio:function(e){return(0,x.jsx)(f,{children:(0,x.jsx)(o.Z,(0,r.Z)({type:"radio"},e))})},Checkbox:function(e){return(0,x.jsx)(f,{children:(0,x.jsx)(o.Z,(0,r.Z)({type:"checkbox"},e))})}})},9249:function(e,n,t){var s=t(4942),r=t(1413),a=t(5987),i=t(1694),l=t.n(i),c=(t(3573),t(2791)),u=t(8580),o=t(1337),d=t(162),x=t(5715),h=t(6040),f=t(881),p=t(9102),g=t(184),j=["as","bsPrefix","variant","fill","justify","navbar","navbarScroll","className","activeKey"],m=c.forwardRef((function(e,n){var t,i,f,p=(0,u.Ch)(e,{activeKey:"onSelect"}),m=p.as,Z=void 0===m?"div":m,v=p.bsPrefix,y=p.variant,b=p.fill,S=p.justify,_=p.navbar,w=p.navbarScroll,k=p.className,C=p.activeKey,N=(0,a.Z)(p,j),I=(0,d.vE)(v,"nav"),M=!1,Q=(0,c.useContext)(x.Z),T=(0,c.useContext)(h.Z);return Q?(i=Q.bsPrefix,M=null==_||_):T&&(f=T.cardHeaderBsPrefix),(0,g.jsx)(o.Z,(0,r.Z)({as:Z,ref:n,activeKey:C,className:l()(k,(t={},(0,s.Z)(t,I,!M),(0,s.Z)(t,"".concat(i,"-nav"),M),(0,s.Z)(t,"".concat(i,"-nav-scroll"),M&&w),(0,s.Z)(t,"".concat(f,"-").concat(y),!!f),(0,s.Z)(t,"".concat(I,"-").concat(y),!!y),(0,s.Z)(t,"".concat(I,"-fill"),b),(0,s.Z)(t,"".concat(I,"-justified"),S),t))},N))}));m.displayName="Nav",m.defaultProps={justify:!1,fill:!1},n.Z=Object.assign(m,{Item:f.Z,Link:p.Z})},881:function(e,n,t){var s=t(6543);n.Z=(0,s.Z)("nav-item")}}]);
//# sourceMappingURL=435.2508db81.chunk.js.map