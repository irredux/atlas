"use strict";(self.webpackChunkatlas=self.webpackChunkatlas||[]).push([[303],{2583:function(e,t,n){n.d(t,{v:function(){return o}});var s=n(885),r=n(7022),i=n(2469),a=n(6407),l=n(2791),c=n(184);function o(){a.Q.changeLog=a.Q.changeLog.sort((function(e,t){return e.date<t.date})),a.Q.changeLog=a.Q.changeLog.filter((function(e){return void 0===e.project||e.project===a.Q.project_name}));var e=(0,l.useState)(!(a.Q.changeLog.length>5)),t=(0,s.Z)(e,2),n=t[0],o=t[1];return(0,c.jsxs)(r.Z,{children:[a.Q.changeLog.map((function(e,t){return n||t<5?(0,c.jsxs)(i.Z,{variant:0===t?"primary":"secondary",children:[(0,c.jsx)(i.Z.Heading,{children:e.title}),(0,c.jsx)("i",{children:(s=e.date,"".concat(s.substring(8,10),". ").concat({"01":"Januar","02":"Februar","03":"M\xe4rz","04":"April","05":"Mai","06":"Juni","07":"Juli","08":"August","09":"September",10:"Oktober",11:"November",12:"Dezember"}[s.substring(5,7)]," ").concat(s.substring(0,4)))}),e.description]},t):null;var s})),n?null:(0,c.jsx)(i.Z,{style:{cursor:"pointer",marginTop:"100px",textAlign:"center"},variant:"secondary",onClick:function(){o(!0)},children:"Alle \xc4nderungen anzeigen."})]})}},9303:function(e,t,n){n.r(t),n.d(t,{MainBody:function(){return ye},MainNavBar:function(){return Se}});var s,r,i,a,l,c=n(4165),o=n(5861),u=n(885),d=n(9806),h=n(1632),x=n(9506),p=n(7022),m=n(9249),f=n(2354),j=n(2469),g=n(2791),Z=n(2583),v=n(7762),b=n(5671),k=n(3144),w=n(136),y=n(1129),S=n(4849),_=n(2591),C=n(5167),D=n(6407),z=n(3222),E=n(184),N=function(e){(0,w.Z)(l,e);var t=(0,y.Z)(l);function l(e){var u;(0,b.Z)(this,l),(u=t.call(this,e)).state={item:null,newItemCreated:null,lemmaSearchItems:[["id","ID"]]};var d=function(){var t=(0,o.Z)((0,c.Z)().mark((function t(){var l;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(3545)("./".concat(e.PROJECT_NAME,".js"));case 2:l=t.sent,s=l.LemmaRow,r=l.LemmaHeader,a=l.lemmaSearchItems,i=l.LemmaAsideContent,u.setState({lemmaSearchItems:a()});case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return d(),u}return(0,k.Z)(l,[{key:"render",value:function(){var e=this;return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(x.Z,{fixed:"bottom",bg:"light",children:(0,E.jsxs)(p.Z,{fluid:!0,children:[(0,E.jsx)(x.Z.Collapse,{className:"justify-content-start",children:(0,E.jsx)(x.Z.Text,{children:(0,E.jsx)(z.Rj,{boxName:"lemma",searchQuery:function(t,n){e.searchQuery(t,n)},setupItems:this.state.newItemCreated,searchOptions:this.state.lemmaSearchItems,sortOptions:[['["id"]',"ID"],['["lemma"]',"Wort"]],status:this.state.searchStatus})})}),(0,E.jsxs)(x.Z.Collapse,{className:"justify-content-end",children:[(0,E.jsx)(x.Z.Text,{children:this.state.count>0?(0,E.jsx)(z.C3,{loadPage:function(t){e.loadPage(t)},currentPage:this.state.currentPage,maxPage:this.state.maxPage}):null}),(0,E.jsx)(x.Z.Text,{children:D.Q.access("l_edit")&&(0,E.jsx)(z.vW,{menuItems:[["neues Wort",(0,o.Z)((0,c.Z)().mark((function t(){var n;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Soll ein neues Wort erstellt werden?")){t.next=5;break}return t.next=3,D.Q.lemma.save({lemma_display:"Neues Wort",lemma:"NeuesWort"});case 3:n=t.sent,e.setState({newItemCreated:[{id:0,c:"id",o:"=",v:n}]});case 5:case"end":return t.stop()}}),t)})))]]})})]})]})}),(0,E.jsx)(p.Z,{className:"mainBody",children:(0,E.jsx)(I,{loadMain:function(t,n){e.props.loadMain(t,n)},loadPage:function(t){e.loadPage(t)},currentElements:this.state.currentElements,count:this.state.count,currentPage:this.state.currentPage,maxPage:this.state.maxPage,gridArea:this.state.item?"2/1/2/2":"2/1/2/3",showDetail:function(t){e.setState({item:t})}})}),D.Q.access("l_edit")&&this.state.item?(0,E.jsx)(Q,{item:this.state.item,onUpdate:function(t){e.reloadEntry(t)},onReload:function(){e.loadPage(e.state.currentPage)},onClose:function(){e.setState({item:null})}}):""]})}},{key:"reloadEntry",value:function(){var e=(0,o.Z)((0,c.Z)().mark((function e(t){var n,s,r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.Q.lemma.get({id:t});case 2:n=(n=e.sent)[0],s=this.state.currentElements,r=s.findIndex((function(e){return e.id===n.id})),s[r]=n,this.setState({currentElements:s,item:n});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"searchQuery",value:function(){var e=(0,o.Z)((0,c.Z)().mark((function e(t,n){var s,r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({searchStatus:(0,E.jsx)(S.Z,{animation:"border",size:"sm"})}),e.next=3,D.Q.lemma.search(t,{count:!0,order:n});case 3:return s=e.sent,e.next=6,D.Q.lemma.search(t,{limit:50,order:n});case 6:r=e.sent,s[0].count>1?this.setState({searchStatus:"".concat(s[0].count," Eintr\xe4ge gefunden.")}):1===s[0].count?this.setState({searchStatus:"1 Eintrag gefunden."}):this.setState({searchStatus:"Keine Eintr\xe4ge gefunden."}),this.setState({query:t,queryOrder:n,count:s[0].count,maxPage:Math.floor(s[0].count/50)+1,currentPage:1,currentElements:r,selectionDetail:{ids:[]}});case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadPage",value:function(){var e=(0,o.Z)((0,c.Z)().mark((function e(t){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.Q.lemma.search(this.state.query,{limit:50,offset:50*(t-1),order:this.state.queryOrder});case 2:n=e.sent,this.setState({currentPage:t,currentElements:n,selectionDetail:{ids:[]}});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),l}(g.Component),I=function(e){(0,w.Z)(n,e);var t=(0,y.Z)(n);function n(e){var s;return(0,b.Z)(this,n),(s=t.call(this,e)).state={selection:{currentId:null,ids:[]}},s}return(0,k.Z)(n,[{key:"render",value:function(){var e=this;if(this.props.count>0){var t,n=[],i=(0,v.Z)(this.props.currentElements);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.push((0,E.jsx)(s,{lemma:a,loadMain:function(t){e.props.loadMain(t,"zettel")},showDetail:function(t){e.props.showDetail(e.props.currentElements.find((function(e){return e.id===t})))}},a.id))}}catch(l){i.e(l)}finally{i.f()}return(0,E.jsx)("div",{style:{gridArea:this.props.gridArea,padding:"0 10px"},children:(0,E.jsxs)(_.Z,{striped:!0,width:"100%",children:[(0,E.jsx)("thead",{style:{textAlign:"left"},children:(0,E.jsx)(r,{})}),(0,E.jsx)("tbody",{children:n})]})})}return(0,E.jsx)(z.Km,{})}}]),n}(g.Component),Q=function(e){(0,w.Z)(n,e);var t=(0,y.Z)(n);function n(e){var s;return(0,b.Z)(this,n),(s=t.call(this,e)).state={id:s.props.item.id},s}return(0,k.Z)(n,[{key:"render",value:function(){var e=this;return(0,E.jsxs)(C.Z,{show:!0,placement:"end",scroll:!0,backdrop:!1,onHide:function(){e.props.onClose()},children:[(0,E.jsx)(C.Z.Header,{closeButton:!0,children:(0,E.jsxs)(C.Z.Title,{children:["ID ",this.props.item.id]})}),(0,E.jsx)(C.Z.Body,{children:(0,E.jsx)(i,{id:this.state.id,item:this.props.item,onUpdate:function(t){e.props.onUpdate(t)},onClose:function(){e.props.onClose()},onReload:function(){e.props.onReload()}})})]})}},{key:"componentDidUpdate",value:function(){this.state.id!==this.props.item.id&&this.setState({id:this.props.item.id})}}]),n}(g.Component),A=n(1395),B=n(5906),P=n(3440),L=n(9932),O=n(9743),R=n(2677),M=n(3360),K=function(e){(0,w.Z)(n,e);var t=(0,y.Z)(n);function n(e){var s;return(0,b.Z)(this,n),(s=t.call(this,e)).state={item:null,newItemCreated:null},s}return(0,k.Z)(n,[{key:"render",value:function(){var e=this;return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(x.Z,{fixed:"bottom",bg:"light",children:(0,E.jsxs)(p.Z,{fluid:!0,children:[(0,E.jsx)(x.Z.Collapse,{className:"justify-content-start",children:(0,E.jsx)(x.Z.Text,{children:(0,E.jsx)(z.Rj,{setupItems:this.state.newItemCreated,boxName:"seklit",searchQuery:function(t,n){e.searchQuery(t,n)},searchOptions:[["id","ID"]],sortOptions:[['["id"]',"ID"]],status:this.state.searchStatus})})}),(0,E.jsxs)(x.Z.Collapse,{className:"justify-content-end",children:[(0,E.jsx)(x.Z.Text,{children:this.state.count>0?(0,E.jsx)(z.C3,{loadPage:function(t){e.loadPage(t)},currentPage:this.state.currentPage,maxPage:this.state.maxPage}):null}),(0,E.jsx)(x.Z.Text,{children:D.Q.access("e_edit")&&(0,E.jsx)(z.vW,{menuItems:[["neuer Eintrag",(0,o.Z)((0,c.Z)().mark((function t(){var n;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Soll ein neuer Eintrag erstellt werden?")){t.next=5;break}return t.next=3,D.Q.seklit.save({titel:"neues Werk"});case 3:n=t.sent,e.setState({newItemCreated:[{id:0,c:"id",o:"=",v:n}]});case 5:case"end":return t.stop()}}),t)})))]]})})]})]})}),(0,E.jsx)(p.Z,{className:"mainBody",children:(0,E.jsx)(T,{loadPage:function(t){e.loadPage(t)},currentElements:this.state.currentElements,count:this.state.count,currentPage:this.state.currentPage,maxPage:this.state.maxPage,gridArea:this.state.item?"2/1/2/2":"2/1/2/3",showDetail:function(t){e.setState({item:t})}})}),D.Q.access("e_edit")&&this.state.item?(0,E.jsx)(W,{item:this.state.item,onUpdate:function(t){e.reloadEntry(t)},onReload:function(){e.loadPage(e.state.currentPage)},onClose:function(){e.setState({item:null})}}):""]})}},{key:"reloadEntry",value:function(){var e=(0,o.Z)((0,c.Z)().mark((function e(t){var n,s,r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t>0)){e.next=11;break}return e.next=3,D.Q.seklit.get({id:t});case 3:n=(n=e.sent)[0],s=this.state.currentElements,r=s.findIndex((function(e){return e.id===n.id})),s[r]=n,this.setState({currentElements:s,item:n}),e.next=12;break;case 11:this.setState({currentElements:[],item:null});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"searchQuery",value:function(){var e=(0,o.Z)((0,c.Z)().mark((function e(t,n){var s,r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.Q.seklit.search(t,{count:!0,order:n});case 2:return s=e.sent,e.next=5,D.Q.seklit.search(t,{limit:50,order:n});case 5:r=e.sent,s[0].count>1?this.setState({searchStatus:"".concat(s[0].count," Eintr\xe4ge gefunden.")}):1===s[0].count?this.setState({searchStatus:"1 Eintrag gefunden."}):this.setState({searchStatus:"Keine Eintr\xe4ge gefunden."}),this.setState({query:t,queryOrder:n,count:s[0].count,maxPage:Math.floor(s[0].count/50)+1,currentPage:1,currentElements:r,selectionDetail:{ids:[]}});case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadPage",value:function(){var e=(0,o.Z)((0,c.Z)().mark((function e(t){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.Q.seklit.search(this.state.query,{limit:50,offset:50*(t-1),order:this.state.queryOrder});case 2:n=e.sent,this.setState({currentPage:t,currentElements:n,selectionDetail:{ids:[]}});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(g.Component),T=function(e){(0,w.Z)(n,e);var t=(0,y.Z)(n);function n(e){var s;return(0,b.Z)(this,n),(s=t.call(this,e)).state={selection:{currentId:null,ids:[]}},s}return(0,k.Z)(n,[{key:"render",value:function(){var e=this;if(this.props.count>0){var t,n=[],s=(0,v.Z)(this.props.currentElements);try{for(s.s();!(t=s.n()).done;){var r=t.value;n.push((0,E.jsxs)("tr",{id:r.id,onDoubleClick:function(t){e.props.showDetail(e.props.currentElements.find((function(e){return e.id===parseInt(t.target.closest("tr").id)})))},children:[(0,E.jsx)("td",{title:"ID: "+r.id,children:r.kennziffer}),(0,E.jsxs)("td",{children:[r.signatur," ",r.alte_signatur?"(".concat(r.alte_signatur,")"):null]}),(0,E.jsxs)("td",{children:[r.name,", ",r.vorname,", ",(0,E.jsx)("b",{children:r.titel}),", ",r.reihe,", ",r.ort," ",r.jahr]}),(0,E.jsxs)("td",{children:[r.weitere_angaben,r.zusatz?" - "+r.zusatz:null]})]},r.id))}}catch(i){s.e(i)}finally{s.f()}return(0,E.jsx)("div",{style:{gridArea:this.props.gridArea,padding:"0 10px"},children:(0,E.jsxs)(_.Z,{width:"100%",striped:!0,children:[(0,E.jsx)("thead",{style:{textAlign:"left"},children:(0,E.jsxs)("tr",{children:[(0,E.jsx)("th",{width:"10%",children:"Kennziffer"}),(0,E.jsx)("th",{width:"10%",children:"Signatur"}),(0,E.jsx)("th",{width:"60%",children:"Werkbezeichnung"}),(0,E.jsx)("th",{children:"weitere Angaben"})]})}),(0,E.jsx)("tbody",{children:n})]})})}return(0,E.jsx)(z.Km,{})}}]),n}(g.Component),W=function(e){(0,w.Z)(n,e);var t=(0,y.Z)(n);function n(e){var s;return(0,b.Z)(this,n),(s=t.call(this,e)).state={id:s.props.item.id,kennziffer:s.props.item.kennziffer,signatur:s.props.item.signatur,alte_signatur:s.props.item.alte_signatur,name:s.props.item.name,vorname:s.props.item.vorname,titel:s.props.item.titel,reihe:s.props.item.reihe,weitere_angaben:s.props.item.weitere_angaben,ort:s.props.item.ort,jahr:s.props.item.jahr,zusatz:s.props.item.zusatz},s}return(0,k.Z)(n,[{key:"render",value:function(){var e=this;return(0,E.jsxs)(C.Z,{show:!0,placement:"end",scroll:!0,backdrop:!1,onHide:function(){e.props.onClose()},children:[(0,E.jsx)(C.Z.Header,{closeButton:!0,children:(0,E.jsxs)(C.Z.Title,{children:["ID ",this.state.id]})}),(0,E.jsxs)(C.Z.Body,{children:[(0,E.jsxs)(O.Z,{className:"mb-2",children:[(0,E.jsx)(R.Z,{xs:4,children:"Kennziffer:"}),(0,E.jsx)(R.Z,{children:(0,E.jsx)("input",{type:"text",value:this.state.kennziffer?this.state.kennziffer:"",onChange:function(t){e.setState({kennziffer:t.target.value})}})})]}),(0,E.jsxs)(O.Z,{className:"mb-2",children:[(0,E.jsx)(R.Z,{xs:4,children:"Signatur:"}),(0,E.jsx)(R.Z,{children:(0,E.jsx)("input",{type:"text",value:this.state.signatur?this.state.signatur:"",onChange:function(t){e.setState({signatur:t.target.value})}})})]}),(0,E.jsxs)(O.Z,{className:"mb-2",children:[(0,E.jsx)(R.Z,{xs:4,children:"alte Signatur:"}),(0,E.jsx)(R.Z,{children:(0,E.jsx)("input",{type:"text",value:this.state.alte_signatur?this.state.alte_signatur:"",onChange:function(t){e.setState({alte_signatur:t.target.value})}})})]}),(0,E.jsxs)(O.Z,{className:"mb-2",children:[(0,E.jsx)(R.Z,{xs:4,children:"Name:"}),(0,E.jsx)(R.Z,{children:(0,E.jsx)("input",{type:"text",value:this.state.name?this.state.name:"",onChange:function(t){e.setState({name:t.target.value})}})})]}),(0,E.jsxs)(O.Z,{className:"mb-2",children:[(0,E.jsx)(R.Z,{xs:4,children:"Vorname:"}),(0,E.jsx)(R.Z,{children:(0,E.jsx)("input",{type:"text",value:this.state.vorname?this.state.vorname:"",onChange:function(t){e.setState({vorname:t.target.value})}})})]}),(0,E.jsxs)(O.Z,{className:"mb-2",children:[(0,E.jsx)(R.Z,{xs:4,children:"Titel:"}),(0,E.jsx)(R.Z,{children:(0,E.jsx)("input",{type:"text",value:this.state.titel?this.state.titel:"",onChange:function(t){e.setState({titel:t.target.value})}})})]}),(0,E.jsxs)(O.Z,{className:"mb-2",children:[(0,E.jsx)(R.Z,{xs:4,children:"Reihe:"}),(0,E.jsx)(R.Z,{children:(0,E.jsx)("input",{type:"text",value:this.state.reihe?this.state.reihe:"",onChange:function(t){e.setState({reihe:t.target.value})}})})]}),(0,E.jsxs)(O.Z,{className:"mb-2",children:[(0,E.jsx)(R.Z,{xs:4,children:"Ort:"}),(0,E.jsx)(R.Z,{children:(0,E.jsx)("input",{type:"text",value:this.state.ort?this.state.ort:"",onChange:function(t){e.setState({ort:t.target.value})}})})]}),(0,E.jsxs)(O.Z,{className:"mb-2",children:[(0,E.jsx)(R.Z,{xs:4,children:"Jahr:"}),(0,E.jsx)(R.Z,{children:(0,E.jsx)("input",{type:"text",value:this.state.jahr?this.state.jahr:"",onChange:function(t){e.setState({jahr:t.target.value})}})})]}),(0,E.jsxs)(O.Z,{className:"mb-2",children:[(0,E.jsx)(R.Z,{xs:4,children:"weitere Angaben:"}),(0,E.jsx)(R.Z,{children:(0,E.jsx)("input",{type:"text",value:this.state.weitere_angaben?this.state.weitere_angaben:"",onChange:function(t){e.setState({weitere_angaben:t.target.value})}})})]}),(0,E.jsxs)(O.Z,{className:"mb-4",children:[(0,E.jsx)(R.Z,{xs:4,children:"Zusatz:"}),(0,E.jsx)(R.Z,{children:(0,E.jsx)("input",{type:"text",value:this.state.zusatz?this.state.zusatz:"",onChange:function(t){e.setState({zusatz:t.target.value})}})})]}),(0,E.jsx)(O.Z,{children:(0,E.jsxs)(R.Z,{children:[(0,E.jsx)(z.YG,{value:"speichern",onClick:(0,o.Z)((0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.Q.seklit.save({id:e.state.id,kennziffer:e.state.kennziffer,signatur:e.state.signature,alte_signatur:e.state.alte_signatur,name:e.state.name,vorname:e.state.vorname,titel:e.state.titel,reihe:e.state.reihe,weitere_angaben:e.state.weitere_angaben,ort:e.state.ort,jahr:e.state.jahr,zusatz:e.state.zusatz});case 2:return e.props.onUpdate(e.state.id),t.abrupt("return",{status:!0});case 4:case"end":return t.stop()}}),t)})))}),(0,E.jsx)(M.Z,{variant:"danger",style:{marginLeft:"10px"},onClick:(0,o.Z)((0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Soll der Eintrag gel\xf6scht werden? Dieser Schritt kann nicht r\xfcckg\xe4ngig gemacht werden!")){t.next=5;break}return t.next=3,D.Q.seklit.delete(e.state.id);case 3:e.props.onClose(),e.props.onReload();case 5:case"end":return t.stop()}}),t)}))),children:"l\xf6schen"})]})})]})]})}},{key:"componentDidUpdate",value:function(){this.state.id!==this.props.item.id&&this.setState({id:this.props.item.id,kennziffer:this.props.item.kennziffer,signatur:this.props.item.signatur,alte_signatur:this.props.item.alte_signatur,name:this.props.item.name,vorname:this.props.item.vorname,titel:this.props.item.titel,reihe:this.props.item.reihe,weitere_angaben:this.props.item.weitere_angaben,ort:this.props.item.ort,jahr:this.props.item.jahr,zusatz:this.props.item.zusatz})}}]),n}(g.Component),F=function(e){(0,w.Z)(n,e);var t=(0,y.Z)(n);function n(e){var s;return(0,b.Z)(this,n),(s=t.call(this,e)).state={item:null,newItemCreated:null,offset:0},s}return(0,k.Z)(n,[{key:"render",value:function(){var e=this;return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(x.Z,{fixed:"bottom",bg:"light",children:(0,E.jsxs)(p.Z,{fluid:!0,children:[(0,E.jsx)(x.Z.Collapse,{className:"justify-content-start",children:(0,E.jsx)(x.Z.Text,{children:(0,E.jsx)(z.Rj,{setupItems:this.state.newItemCreated,boxName:"ressources",searchQuery:function(t,n){e.searchQuery(t,n)},searchOptions:[["ac_web","Werk"],["work_id","Werk-ID"],["ressource","Ressource-Typ"],["id","ID"],["path","Dateipfad"]],sortOptions:[['["id"]',"ID"],['["label"]',"K\xfcrzel"],['["opus"]',"vrkn. Werk"]],status:this.state.searchStatus})})}),(0,E.jsxs)(x.Z.Collapse,{className:"justify-content-end",children:[(0,E.jsx)(x.Z.Text,{children:this.state.count>0?(0,E.jsx)(z.C3,{loadPage:function(t){e.loadPage(t)},currentPage:this.state.currentPage,maxPage:this.state.maxPage}):null}),(0,E.jsx)(x.Z.Text,{children:D.Q.access("l_edit")&&(0,E.jsx)(z.vW,{menuItems:[["neue Ressource",(0,o.Z)((0,c.Z)().mark((function t(){var n;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Soll eine neue Ressource erstellt werden?")){t.next=5;break}return t.next=3,D.Q.edition.save({ressource:0,editor:"Neue Ressource",year:(new Date).getFullYear()});case 3:n=t.sent,e.setState({newItemCreated:[{id:0,c:"id",o:"=",v:n}]});case 5:case"end":return t.stop()}}),t)})))]]})})]})]})}),(0,E.jsx)(p.Z,{className:"mainBody",children:(0,E.jsx)(J,{loadPage:function(t){e.loadPage(t)},currentElements:this.state.currentElements,count:this.state.count,currentPage:this.state.currentPage,maxPage:this.state.maxPage,gridArea:this.state.item?"2/1/2/2":"2/1/2/3",showDetail:function(t){e.setState({item:t})}})}),D.Q.access("e_edit")&&this.state.item?(0,E.jsx)(H,{item:this.state.item,onUpdate:function(t){e.reloadEntry(t)},onReload:function(){e.loadPage(e.state.currentPage)},onClose:function(){e.setState({item:null})}}):""]})}},{key:"reloadEntry",value:function(){var e=(0,o.Z)((0,c.Z)().mark((function e(t){var n,s,r,i;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t>0)){e.next=11;break}return e.next=3,D.Q.edition.get({id:t});case 3:n=(n=e.sent)[0],s=this.state.currentElements,r=s.findIndex((function(e){return e.id===n.id})),s[r]=n,this.setState({currentElements:s,item:n}),e.next=15;break;case 11:return e.next=13,D.Q.edition.search(this.state.query,{limit:50,offset:this.state.offset,order:this.state.queryOrder});case 13:i=e.sent,this.setState({currentElements:i,item:null});case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"searchQuery",value:function(){var e=(0,o.Z)((0,c.Z)().mark((function e(t,n){var s,r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.Q.edition.search(t,{count:!0,order:n});case 2:return s=e.sent,e.next=5,D.Q.edition.search(t,{limit:50,order:n});case 5:r=e.sent,s[0].count>1?this.setState({searchStatus:"".concat(s[0].count," Eintr\xe4ge gefunden.")}):1===s[0].count?this.setState({searchStatus:"1 Eintrag gefunden."}):this.setState({searchStatus:"Keine Eintr\xe4ge gefunden."}),this.setState({query:t,queryOrder:n,count:s[0].count,maxPage:Math.floor(s[0].count/50)+1,currentPage:1,currentElements:r,selectionDetail:{ids:[]}});case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadPage",value:function(){var e=(0,o.Z)((0,c.Z)().mark((function e(t){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.Q.edition.search(this.state.query,{limit:50,offset:50*(t-1),order:this.state.queryOrder});case 2:n=e.sent,this.setState({offset:50*(t-1),currentPage:t,currentElements:n,selectionDetail:{ids:[]}});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(g.Component),J=function(e){(0,w.Z)(n,e);var t=(0,y.Z)(n);function n(e){var s;return(0,b.Z)(this,n),(s=t.call(this,e)).state={selection:{currentId:null,ids:[]}},s}return(0,k.Z)(n,[{key:"render",value:function(){var e=this;if(this.props.count>0){var t,n={0:"Edition (relevant)",1:"Edition (veraltet)",2:"Handschrift",3:"Alter Druck (relevant)",4:"Alter Druck (veraltet)",5:"Sonstiges"},s=[],r=(0,v.Z)(this.props.currentElements);try{for(r.s();!(t=r.n()).done;){var i=t.value,a=i.url;""!==a&&null!==a||(a="/site/argos/"+i.id),s.push((0,E.jsxs)("tr",{id:i.id,onDoubleClick:function(t){e.props.showDetail(e.props.currentElements.find((function(e){return e.id===parseInt(t.target.closest("tr").id)})))},children:[(0,E.jsx)("td",{title:"ID: "+i.id,children:i.label}),(0,E.jsx)("td",{children:n[i.ressource]}),(0,E.jsx)("td",{dangerouslySetInnerHTML:(0,z.rg)(i.opus)}),(0,E.jsxs)("td",{children:[(0,E.jsx)("a",{href:a,target:"_blank",children:"\xf6ffnen"}),i.url?(0,E.jsx)(d.G,{style:{fontSize:"14px",marginLeft:"10px"},icon:h.Xjp}):null]})]},i.id))}}catch(l){r.e(l)}finally{r.f()}return(0,E.jsx)("div",{style:{gridArea:this.props.gridArea,padding:"0 10px"},children:(0,E.jsxs)(_.Z,{width:"100%",striped:!0,children:[(0,E.jsx)("thead",{style:{textAlign:"left"},children:(0,E.jsxs)("tr",{children:[(0,E.jsx)("th",{width:"20%",children:"K\xfcrzel"}),(0,E.jsx)("th",{width:"20%",children:"Typ"}),(0,E.jsx)("th",{children:"vrkn. Werk"}),(0,E.jsx)("th",{width:"10%",children:"Link"})]})}),(0,E.jsx)("tbody",{children:s})]})})}return(0,E.jsx)(z.Km,{})}}]),n}(g.Component),H=function(e){(0,w.Z)(n,e);var t=(0,y.Z)(n);function n(e){var s;return(0,b.Z)(this,n),(s=t.call(this,e)).state={id:s.props.item.id,ressource:s.props.item.ressource,work_id:s.props.item.work_id,ac_web:s.props.item.ac_web,editor:s.props.item.editor,year:s.props.item.year,volume:s.props.item.volume,vol_cont:s.props.item.vol_cont,serie:s.props.item.serie,location:s.props.item.location,library:s.props.item.library,signature:s.props.item.signature,comment:s.props.item.comment,path:s.props.item.path,url:s.props.item.url,aspect_ratio:s.props.item.aspect_ratio,bibliography_preview:null},s}return(0,k.Z)(n,[{key:"render",value:function(){var e=this;return(0,E.jsxs)(C.Z,{show:!0,placement:"end",scroll:!0,backdrop:!1,onHide:function(){e.props.onClose()},children:[(0,E.jsx)(C.Z.Header,{closeButton:!0,children:(0,E.jsxs)(C.Z.Title,{children:["ID ",this.state.id]})}),(0,E.jsxs)(C.Z.Body,{children:[(0,E.jsxs)(O.Z,{className:"mb-2",children:[(0,E.jsx)(R.Z,{xs:3,children:"Werk:"}),(0,E.jsx)(R.Z,{children:(0,E.jsx)(z.Qc,{value:this.state.ac_web?this.state.ac_web:"",tbl:"work",searchCol:"ac_web",returnCol:"ac_web",onChange:function(t,n){e.setState({ac_web:t,work_id:n}),e.updateBibliography(n)}})})]}),(0,E.jsxs)(O.Z,{className:"mb-2",children:[(0,E.jsx)(R.Z,{xs:3,children:"Alter Dateiname:"}),(0,E.jsx)(R.Z,{children:this.props.item.dir_name})]}),this.state.bibliography_preview&&(0,E.jsxs)(O.Z,{className:"mb-4",children:[(0,E.jsx)(R.Z,{xs:3,children:"Biblio-graphische Angaben:"}),(0,E.jsx)(R.Z,{style:{fontSize:"90%",backgroundColor:"var(--bs-gray-100"},children:this.state.bibliography_preview})]}),(0,E.jsxs)(O.Z,{className:"mb-2",children:[(0,E.jsx)(R.Z,{xs:3,children:"Ressource:"}),(0,E.jsx)(R.Z,{children:(0,E.jsx)(z.SA,{options:[[0,"Edition (relevant)"],[1,"Edition (veraltet)"],[2,"Handschrift"],[3,"Alter Druck (relevant)"],[4,"Alter Druck (veraltet)"],[5,"Sonstiges"]],value:this.state.ressource?this.state.ressource:"",onChange:function(t){e.setState({ressource:parseInt(t.target.value)})}})})]}),0===this.state.ressource||1===this.state.ressource||5===this.state.ressource?[(0,E.jsxs)(O.Z,{className:"mb-2",children:[(0,E.jsx)(R.Z,{xs:3,children:"Editor:"}),(0,E.jsx)(R.Z,{children:(0,E.jsx)("input",{type:"text",style:{width:"100%"},value:this.state.editor?this.state.editor:"",onChange:function(t){e.setState({editor:t.target.value})}})})]},"0"),(0,E.jsxs)(O.Z,{className:"mb-2",children:[(0,E.jsx)(R.Z,{xs:3,children:"Jahr:"}),(0,E.jsx)(R.Z,{children:(0,E.jsx)("input",{type:"text",style:{width:"100%"},value:this.state.year?this.state.year:"",onChange:function(t){e.setState({year:t.target.value})}})})]},"1"),(0,E.jsxs)(O.Z,{className:"mb-2",children:[(0,E.jsx)(R.Z,{xs:3,children:"Band:"}),(0,E.jsx)(R.Z,{children:(0,E.jsx)("input",{type:"text",style:{width:"100%"},value:this.state.volume?this.state.volume:"",onChange:function(t){e.setState({volume:t.target.value})}})})]},"2"),(0,E.jsxs)(O.Z,{className:"mb-2",children:[(0,E.jsx)(R.Z,{xs:3,children:"Bandinhalt:"}),(0,E.jsx)(R.Z,{children:(0,E.jsx)("input",{type:"text",style:{width:"100%"},value:this.state.vol_cont?this.state.vol_cont:"",onChange:function(t){e.setState({vol_cont:t.target.value})}})})]},"3"),(0,E.jsxs)(O.Z,{className:"mb-4",children:[(0,E.jsx)(R.Z,{xs:3,children:"Reihe:"}),(0,E.jsx)(R.Z,{children:(0,E.jsx)(z.SA,{options:[[0,""],[1,"Migne PL"],[2,"ASBen."],[3,"ASBoll."],[4,"AnalBoll."],[5,"Mon. Boica"],[6,"Ma. Schatzverzeichnisse"],[7,"Ma. Bibliothekskataloge"]],value:this.state.serie?this.state.serie:"",onChange:function(t){e.setState({serie:parseInt(t.target.value)})}})})]},"4")]:null,2===this.state.ressource?[(0,E.jsxs)(O.Z,{className:"mb-2",children:[(0,E.jsx)(R.Z,{xs:3,children:"Stadt:"}),(0,E.jsx)(R.Z,{children:(0,E.jsx)("input",{type:"text",style:{width:"100%"},value:this.state.location?this.state.location:"",onChange:function(t){e.setState({location:t.target.value})}})})]},"5"),(0,E.jsxs)(O.Z,{className:"mb-2",children:[(0,E.jsx)(R.Z,{xs:3,children:"Bibliothek:"}),(0,E.jsx)(R.Z,{children:(0,E.jsx)("input",{type:"text",style:{width:"100%"},value:this.state.library?this.state.library:"",onChange:function(t){e.setState({library:t.target.value})}})})]},"6"),(0,E.jsxs)(O.Z,{className:"mb-4",children:[(0,E.jsx)(R.Z,{xs:3,children:"Signatur:"}),(0,E.jsx)(R.Z,{children:(0,E.jsx)("input",{type:"text",style:{width:"100%"},value:this.state.signature?this.state.signature:"",onChange:function(t){e.setState({signature:t.target.value})}})})]},"7")]:null,3===this.state.ressource||4===this.state.ressource?[(0,E.jsxs)(O.Z,{className:"mb-2",children:[(0,E.jsx)(R.Z,{xs:3,children:"Drucker:"}),(0,E.jsx)(R.Z,{children:(0,E.jsx)("input",{type:"text",style:{width:"100%"},value:this.state.editor?this.state.editor:"",onChange:function(t){e.setState({editor:t.target.value})}})})]},"8"),(0,E.jsxs)(O.Z,{className:"mb-2",children:[(0,E.jsx)(R.Z,{xs:3,children:"Ort:"}),(0,E.jsx)(R.Z,{children:(0,E.jsx)("input",{type:"text",style:{width:"100%"},value:this.state.location?this.state.location:"",onChange:function(t){e.setState({location:t.target.value})}})})]},"9"),(0,E.jsxs)(O.Z,{className:"mb-4",children:[(0,E.jsx)(R.Z,{xs:3,children:"Jahr:"}),(0,E.jsx)(R.Z,{children:(0,E.jsx)("input",{type:"text",style:{width:"100%"},value:this.state.year?this.state.year:"",onChange:function(t){e.setState({year:t.target.value})}})})]},"10")]:null,(0,E.jsxs)(O.Z,{className:"mb-2",children:[(0,E.jsx)(R.Z,{xs:3,children:"Kommentar:"}),(0,E.jsx)(R.Z,{children:(0,E.jsx)("textarea",{style:{width:"267px",height:"100px"},value:this.state.comment?this.state.comment:"",onChange:function(t){e.setState({comment:t.target.value})}})})]}),(0,E.jsxs)(O.Z,{className:"mb-2",children:[(0,E.jsx)(R.Z,{xs:3,children:"Dateipfad:"}),(0,E.jsx)(R.Z,{children:(0,E.jsx)("input",{type:"text",style:{width:"100%"},value:this.state.path?this.state.path:"",onChange:function(t){e.setState({path:t.target.value})}})})]}),(0,E.jsxs)(O.Z,{className:"mb-4",children:[(0,E.jsxs)(R.Z,{xs:3,children:["Link:",(0,E.jsx)("br",{}),(0,E.jsx)("small",{children:"(externe Quellen)"})]}),(0,E.jsx)(R.Z,{children:(0,E.jsx)("input",{type:"text",style:{width:"100%"},value:this.state.url?this.state.url:"",onChange:function(t){e.setState({url:t.target.value})}})})]}),(0,E.jsxs)(O.Z,{className:"mb-4",children:[(0,E.jsx)(R.Z,{xs:3,children:"Seiten-verh\xe4ltnis:"}),(0,E.jsx)(R.Z,{children:(0,E.jsx)("input",{type:"text",style:{width:"100%"},value:this.state.aspect_ratio?this.state.aspect_ratio:"",onChange:function(t){e.setState({aspect_ratio:t.target.value.substring(0,5)})}})})]}),(0,E.jsx)(O.Z,{className:"mb-2",children:(0,E.jsxs)(R.Z,{children:[(0,E.jsx)(z.YG,{value:"speichern",onClick:(0,o.Z)((0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e.state.ressource&&1!==e.state.ressource&&5!==e.state.ressource||e.state.serie||e.state.editor&&e.state.year){t.next=4;break}return t.abrupt("return",{status:!1,error:"Geben Sie den Editor und das Jahr ein."});case 4:return t.next=6,D.Q.edition.save({id:e.state.id,work_id:e.state.work_id,ressource:e.state.ressource,editor:e.state.editor,year:e.state.year,volume:e.state.volume,vol_cont:e.state.vol_cont,serie:e.state.serie,comment:e.state.comment,location:e.state.location,library:e.state.library,signature:e.state.signature,path:e.state.path,url:e.state.url,aspect_ratio:e.state.aspect_ratio});case 6:return e.props.onUpdate(e.state.id),t.abrupt("return",{status:!0});case 8:case"end":return t.stop()}}),t)})))}),(0,E.jsx)(M.Z,{variant:"danger",style:{marginLeft:"20px"},onClick:(0,o.Z)((0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Soll die Ressource wirklich gel\xf6scht werden? Dieser Schritt kann nicht r\xfcckg\xe4ngig gemacht werden!")){t.next=5;break}return t.next=3,D.Q.edition.delete(e.state.id);case 3:e.props.onUpdate(null),e.props.onReload();case 5:case"end":return t.stop()}}),t)}))),children:"l\xf6schen"})]})})]})]})}},{key:"componentDidMount",value:function(){this.updateBibliography(this.props.item.work_id)}},{key:"componentDidUpdate",value:function(){this.state.id!==this.props.item.id&&(this.updateBibliography(this.props.item.work_id),this.setState({id:this.props.item.id,ressource:this.props.item.ressource,work_id:this.props.item.work_id,ac_web:this.props.item.ac_web,editor:this.props.item.editor,year:this.props.item.year,volume:this.props.item.volume,vol_cont:this.props.item.vol_cont,serie:this.props.item.serie,location:this.props.item.location,library:this.props.item.library,signature:this.props.item.signature,comment:this.props.item.comment,path:this.props.item.path,url:this.props.item.url,aspect_ratio:this.props.item.aspect_ratio}))}},{key:"updateBibliography",value:function(){var e=(0,o.Z)((0,c.Z)().mark((function e(t){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t>0)){e.next=5;break}return e.next=3,D.Q.work.get({id:t},{select:["bibliography"]});case 3:(n=e.sent).length>0?this.setState({bibliography_preview:n[0].bibliography}):this.setState({bibliography_preview:null});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(g.Component),G=n(8491),q=n(9485),V=n(1734),U=n(3350);n(444);function Y(e){var t=this,s=(0,g.useState)([]),r=(0,u.Z)(s,2),i=(r[0],r[1],(0,g.useState)(null)),a=(0,u.Z)(i,2),d=a[0],h=a[1],m=(0,g.useState)([]),f=(0,u.Z)(m,2),j=f[0],Z=f[1],v=(0,g.useState)([]),b=(0,u.Z)(v,2),k=b[0],w=b[1],y=(0,g.useState)([]),S=(0,u.Z)(y,2),_=S[0],C=S[1];return(0,g.useEffect)((function(){var e=function(){var e=(0,o.Z)((0,c.Z)().mark((function e(){var t,s,r,i,a;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.bind(n,5906));case 2:return t=e.sent,l=t.StatisticsChart,e.next=6,D.Q.statistics.getAll();case 6:s=e.sent,r=[],i=[],a=[],s.forEach((function(e){if("last_updated"===e.name)h(JSON.parse(e.data));else if("zettel"===e.name.substring(0,6))r.push((0,E.jsx)(l,{name:e.name,data:JSON.parse(e.data)},e.id));else if("lemma"===e.name.substring(0,5))i.push((0,E.jsx)(l,{name:e.name,data:JSON.parse(e.data)},e.id));else{if("ressource"!==e.name.substring(0,9))throw new Error("data type not found!");a.push((0,E.jsx)(l,{name:e.name,data:JSON.parse(e.data)},e.id))}})),Z(r),w(i),C(a);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(x.Z,{fixed:"bottom",bg:"light",children:(0,E.jsx)(p.Z,{fluid:!0,children:(0,E.jsx)(x.Z.Collapse,{className:"justify-content-end",children:(0,E.jsx)(x.Z.Text,{children:D.Q.access("l_edit")&&(0,E.jsx)(z.vW,{menuItems:[["Statistik aktualisieren",(0,o.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Sollen die Statistik aktualisiert werden? Dieser Prozess dauert ca. 30 Sekunden.")){e.next=10;break}return e.next=3,D.Q.exec("statistics_update");case 3:if(200!==e.sent){e.next=9;break}return t.getNumbers(),e.abrupt("return",{status:!0});case 9:return e.abrupt("return",{status:!1,error:"Die Aktualisierung war nicht erfolgreich."});case 10:case"end":return e.stop()}}),e)})))]]})})})})}),(0,E.jsxs)(p.Z,{className:"mainBody",children:[(0,E.jsxs)(q.Z,{defaultActiveKey:"lemma",className:"mb-3",children:[(0,E.jsx)(V.Z,{eventKey:"lemma",title:"Lemma",children:k}),(0,E.jsx)(V.Z,{eventKey:"zettel",title:"Zettel",children:j}),(0,E.jsx)(V.Z,{eventKey:"ressource",title:"Werke und Ressourcen",children:_})]}),(0,E.jsx)("div",{style:{float:"right",color:"var(--bs-gray-400"},children:d})]})]})}var X=function(e){(0,w.Z)(n,e);var t=(0,y.Z)(n);function n(e){var s;return(0,b.Z)(this,n),(s=t.call(this,e)).state={ocrJobs:[],faszikelJobs:[],users:[],ocrDisplayAll:!1},s}return(0,k.Z)(n,[{key:"render",value:function(){var e=this,t="";return D.Q.access("ocr_jobs")?t="o":D.Q.access("faszikel")?t="d":D.Q.access("admin")&&(t="a"),(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(p.Z,{className:"mainBody",children:(0,E.jsxs)(q.Z,{defaultActiveKey:t,className:"mb-5",children:[D.Q.access("ocr_jobs")&&(0,E.jsxs)(V.Z,{eventKey:"o",title:"ocr-Auftr\xe4ge",style:{padding:"0 25%"},children:[(0,E.jsx)(O.Z,{className:"mb-2",children:(0,E.jsx)(R.Z,{children:"Hier finden Sie die auf dem Server laufenden und abgeschlossenen Auftr\xe4ge."})}),(0,E.jsx)(O.Z,{children:(0,E.jsxs)(R.Z,{children:[(0,E.jsx)(z.YG,{value:"neuen Zettel-Auftrag aufgeben",onClick:(0,o.Z)((0,c.Z)().mark((function t(){var n;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.Q.exec("ocr_job");case 2:if(200!==(n=t.sent)){t.next=10;break}return t.next=6,(0,z._v)(1e3);case 6:return e.loadOcrJobs(),t.abrupt("return",{status:!0});case 10:if(409!==n){t.next=14;break}return t.abrupt("return",{status:!1,error:"Es ist bereits ein Auftrag aktiv! Warten Sie, bis dieser abgeschlossen ist."});case 14:return t.abrupt("return",{status:!1,error:"Es ist ein Fehler aufgetreten."});case 15:case"end":return t.stop()}}),t)})))}),(0,E.jsx)(z.YG,{style:{float:"right"},value:"neuen Scan-Auftrag aufgeben",onClick:(0,o.Z)((0,c.Z)().mark((function t(){var n;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.Q.exec("ocr_job_scans");case 2:if(200!==(n=t.sent)){t.next=10;break}return t.next=6,(0,z._v)(1e3);case 6:return e.loadOcrJobs(),t.abrupt("return",{status:!0});case 10:if(409!==n){t.next=14;break}return t.abrupt("return",{status:!1,error:"Es ist bereits ein Auftrag aktiv! Warten Sie, bis dieser abgeschlossen ist."});case 14:return t.abrupt("return",{status:!1,error:"Es ist ein Fehler aufgetreten."});case 15:case"end":return t.stop()}}),t)})))})]})}),(0,E.jsx)(O.Z,{children:(0,E.jsx)(R.Z,{children:(0,E.jsxs)(_.Z,{striped:!0,width:"100%",children:[(0,E.jsx)("thead",{children:(0,E.jsxs)("tr",{children:[(0,E.jsx)("th",{children:"Datum"}),(0,E.jsx)("th",{children:"Objekte"}),(0,E.jsx)("th",{children:"Status"}),(0,E.jsx)("th",{children:"Gesamtauftrag"}),(0,E.jsx)("th",{children:"bearbeitet"})]})}),(0,E.jsx)("tbody",{children:this.state.ocrJobs.map((function(t,n){if(e.state.ocrDisplayAll||n<12){var s=(0,E.jsx)("td",{className:"text-primary",children:"aktiv"});return 1===t.finished?s=(0,E.jsx)("td",{className:"text-secondary",children:"beendet"}):new Date-(0,z.SE)(t.u_date)>18e5&&(s=(0,E.jsx)("td",{className:"text-warning",children:"inaktiv"})),(0,E.jsxs)("tr",{children:[(0,E.jsx)("td",{children:t.c_date.substring(0,10)}),(0,E.jsx)("td",{children:t.source}),s,(0,E.jsx)("td",{children:t.total}),(0,E.jsxs)("td",{children:[Math.round(1e3/t.total*t.count)/10,"%"]})]},t.id)}return null}))})]})})}),this.state.ocrDisplayAll?null:(0,E.jsx)(j.Z,{style:{cursor:"pointer",marginTop:"50px",textAlign:"center"},variant:"secondary",onClick:function(){e.setState({ocrDisplayAll:!0})},children:"Alle Eintr\xe4ge anzeigen."})]}),D.Q.access("faszikel")&&(0,E.jsxs)(V.Z,{eventKey:"d",title:"Druckausgabe",style:{padding:"0 25%"},children:[(0,E.jsx)(O.Z,{className:"mb-2",children:(0,E.jsx)(R.Z,{children:"Hier finden Sie die auf dem Server laufenden und abgeschlossenen Auftr\xe4ge zum Erstellen der Druckausgabe."})}),(0,E.jsx)(O.Z,{children:(0,E.jsx)(R.Z,{children:(0,E.jsx)(_.Z,{striped:!0,width:"100%",children:(0,E.jsx)("tbody",{children:this.state.faszikelJobs.map((function(e){if(e.log){var t=e.date.split("");t[10]=" ",t[13]=":",t[16]=":";var n=t.join("").substring(0,19);return(0,E.jsxs)("tr",{style:{verticalAlign:"top"},children:[(0,E.jsxs)("td",{style:{padding:"10px 0px"},children:[(0,E.jsx)("b",{children:e.name?e.name.substring(0,e.name.length-4):(0,E.jsx)("i",{children:"Eintrag"})}),(0,E.jsx)("br",{}),(0,E.jsx)("i",{className:"minorTxt",children:n})]}),(0,E.jsx)("td",{children:e.name?(0,E.jsx)("a",{target:"_blank",href:"/file/faszikel/".concat(e.date,"/").concat(e.name),children:"pdf"}):null}),(0,E.jsx)("td",{children:(0,E.jsx)("a",{target:"_blank",href:"/file/faszikel/".concat(e.date,"/zip"),children:"Artikel"})}),(0,E.jsx)("td",{children:(0,E.jsx)("a",{target:"_blank",href:"/file/faszikel/".concat(e.date,"/log"),children:"log-Datei"})})]})}return(0,E.jsxs)("tr",{style:{verticalAlign:"top"},children:[(0,E.jsx)("td",{style:{padding:"10px 0px"},children:(0,E.jsx)("b",{children:"Neuer Auftrag in Bearbeitung"})}),(0,E.jsx)("td",{}),(0,E.jsx)("td",{})]})}))})})})})]}),D.Q.access("admin")&&(0,E.jsx)(V.Z,{eventKey:"a",title:"Kontenverwaltung",style:{padding:"0 20%"},children:(0,E.jsxs)(_.Z,{striped:!0,width:"100%",children:[(0,E.jsx)("thead",{style:{textAlign:"left"},children:(0,E.jsxs)("tr",{children:[(0,E.jsx)("th",{width:"25%",children:"Name"}),(0,E.jsx)("th",{width:"30%",children:"Rechte"}),(0,E.jsx)("th",{width:"35%",children:"Browser"}),(0,E.jsx)("th",{width:"10%",children:"Aktiv"})]})}),(0,E.jsx)("tbody",{children:this.state.users.map((function(t){return(0,E.jsxs)("tr",{children:[(0,E.jsx)("td",{children:(0,E.jsxs)("a",{className:"text-dark",onClick:function(){e.setState({item:t})},children:[t.first_name," ",t.last_name]})}),(0,E.jsx)("td",{children:JSON.parse(t.access).join(", ")}),(0,E.jsx)("td",{children:t.agent}),(0,E.jsx)("td",{children:t.session_last_active&&new Date-(0,z.SE)(t.session_last_active)<18e5?(0,E.jsx)(d.G,{icon:h.enB,color:"gold",style:{fontSize:"25px",marginLeft:"20px"}}):(0,E.jsx)(d.G,{icon:h.DBF,color:"silver",style:{fontSize:"20px",marginLeft:"20px"}})})]},t.id)}))})]})})]})}),this.state.item&&(0,E.jsx)($,{onReload:function(){e.loadUsers()},onClose:function(){e.setState({item:null})},item:this.state.item,onUpdate:function(e){}})]})}},{key:"componentDidMount",value:function(){D.Q.access("admin")&&this.loadUsers(),D.Q.access("ocr_jobs")&&this.loadOcrJobs(),D.Q.access("faszikel")&&this.loadFaszikelJobs()}},{key:"loadFaszikelJobs",value:function(){var e=(0,o.Z)((0,c.Z)().mark((function e(){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({faszikelJobs:[]}),e.next=3,D.Q.exec("get_faszikel_jobs",!0);case 3:t=e.sent,this.setState({faszikelJobs:t});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadOcrJobs",value:function(){var e=(0,o.Z)((0,c.Z)().mark((function e(){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({ocrJobs:[]}),e.next=3,D.Q.ocr_jobs.getAll();case 3:(t=e.sent).sort((function(e,t){return e.c_date<t.c_date})),this.setState({ocrJobs:t});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadUsers",value:function(){var e=(0,o.Z)((0,c.Z)().mark((function e(){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({users:[]}),e.next=3,D.Q.user.getAll({order:["last_name"]});case 3:t=e.sent,this.setState({users:t});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(g.Component),$=function(e){(0,w.Z)(n,e);var t=(0,y.Z)(n);function n(e){var s;return(0,b.Z)(this,n),(s=t.call(this,e)).state={access:JSON.parse(s.props.item.access)},s}return(0,k.Z)(n,[{key:"render",value:function(){for(var e=this,t=[],n=function(){var n=(0,u.Z)(r[s],2),i=n[0],a=n[1],l="";e.state.access.includes(i)&&(l="accessMarked"),t.push((0,E.jsx)("div",{style:{cursor:"pointer"},className:l,onClick:function(){var t=e.state.access;t.includes(i)?t=t.map((function(e){if(e!=i)return e})):t.push(i),e.setState({access:t})},children:a},i))},s=0,r=Object.entries({auth:"Profil aktiviert",admin:"Adminrechte",o_view:"Kommentarspalte (opera-Listen)",o_edit:"opera-Listen bearbeiten",z_add:"Zettel importieren",z_edit:"Zettel bearbeiten",l_edit:"Lemma-Liste bearbeiten",library:"Zugriff auf Bibliothek",e_edit:"Bibliothek bearbeiten",setup:"Zugriff auf Datenbanksetup",module:"Zugriff \xfcber Python-Modul",editor:"Zugriff auf Lemmastrecken-Editor",comment:"Zugriff auf Kommentarfunktion",comment_moderator:"Kommentare moderieren",faszikel:"Faszikel konvertieren",ocr_jobs:"OCR-Auftr\xe4ge aufgeben",geschichtsquellen:"Zugriff auf Geschichtsquellen-Verkn\xfcpfung"});s<r.length;s++)n();return(0,E.jsxs)(C.Z,{show:!0,placement:"end",scroll:!0,backdrop:!1,onHide:function(){e.props.onClose()},children:[(0,E.jsx)(C.Z.Header,{closeButton:!0,children:(0,E.jsxs)(C.Z.Title,{children:[this.props.item.first_name," ",this.props.item.last_name," (ID ",this.props.item.id,")"]})}),(0,E.jsx)(C.Z.Body,{children:(0,E.jsxs)(p.Z,{children:[(0,E.jsx)(O.Z,{className:"mb-1",children:(0,E.jsxs)(R.Z,{children:["Am ",this.props.item.session_last_active," zuletzt online."]})}),(0,E.jsx)(O.Z,{className:"mb-3",children:(0,E.jsx)(R.Z,{style:{border:"1px solid var(--bs-secondary)",borderRadius:"2px",color:"var(--bs-secondary)",margin:"10px 0",padding:"10px"},children:this.props.item.agent})}),(0,E.jsx)(O.Z,{children:(0,E.jsx)(R.Z,{children:(0,E.jsx)("h4",{children:"Rechte"})})}),(0,E.jsx)(O.Z,{className:"mb-3",children:(0,E.jsx)(R.Z,{style:{border:"1px solid var(--bs-secondary)",borderRadius:"2px",color:"var(--bs-secondary)",margin:"10px 0",padding:"10px"},children:t})}),(0,E.jsxs)(O.Z,{children:[(0,E.jsx)(R.Z,{children:(0,E.jsx)(z.YG,{value:"speichern",onClick:function(){return D.Q.user.save({id:e.props.item.id,access:JSON.stringify(e.state.access)}),e.props.onReload(),{status:!0}}})}),(0,E.jsx)(R.Z,{children:(0,E.jsx)(M.Z,{variant:"danger",onClick:(0,o.Z)((0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Soll der Account wirklich gel\xf6scht werden? Dieser Schritt kann nicht mehr r\xfcckg\xe4ngig gemacht werden!")){t.next=5;break}return t.next=3,D.Q.user.delete(e.props.item.id);case 3:e.props.onClose(),e.props.onReload();case 5:case"end":return t.stop()}}),t)}))),children:"Account l\xf6schen"})})]})]})})]})}},{key:"componentDidUpdate",value:function(e){e.item.id!=this.props.item.id&&this.setState({access:JSON.parse(this.props.item.access)})}}]),n}(g.Component);function ee(e){var t=(0,g.useState)(),n=(0,u.Z)(t,2),s=n[0],r=n[1],i=(0,g.useState)(),a=(0,u.Z)(i,2),l=a[0],d=a[1],h=(0,g.useState)(),x=(0,u.Z)(h,2),p=x[0],m=x[1];return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(O.Z,{className:"mb-1",children:[(0,E.jsx)(R.Z,{xs:3,children:"Ressource:"}),(0,E.jsx)(R.Z,{children:(0,E.jsx)(z.Qc,{style:{width:"100%"},value:s||"",tbl:"scan_paths",placeholder:"/A/...",searchCol:"path",returnCol:"path",onChange:function(){var e=(0,o.Z)((0,c.Z)().mark((function e(t,n){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r(t),d(n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()})})]}),(0,E.jsxs)(O.Z,{className:"mb-2",children:[(0,E.jsx)(R.Z,{xs:3}),(0,E.jsx)(R.Z,{children:(0,E.jsx)("small",{className:"text-danger",children:"Achtung: Die Vorschlagsliste muss manuell aktualisiert werden."})})]}),(0,E.jsxs)(O.Z,{className:"mb-4",children:[(0,E.jsx)(R.Z,{xs:3,children:".txt-Dateien:"}),(0,E.jsx)(R.Z,{children:(0,E.jsx)(U.Z.Group,{children:(0,E.jsx)(U.Z.Control,{type:"file",multiple:!0,accept:"text/plain",onChange:function(e){m(e.target.files)}})})})]}),(0,E.jsxs)(O.Z,{children:[(0,E.jsx)(R.Z,{xs:3}),(0,E.jsx)(R.Z,{children:(0,E.jsx)(z.YG,{type:"button",value:"hochladen",onClick:(0,o.Z)((0,c.Z)().mark((function e(){var t,n,r,i,a,o;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=p){e.next=4;break}return e.abrupt("return",{status:!1,error:"Geben Sie Dateien zum Hochladen an."});case 4:if(null!=l){e.next=8;break}return e.abrupt("return",{status:!1,error:"W\xe4hlen Sie einen Ordner aus."});case 8:return e.next=10,D.Q.scan.get({path:s},{select:["id","filename"]});case 10:t=e.sent,n=[],r=[],i=(0,v.Z)(p),e.prev=14,o=(0,c.Z)().mark((function e(){var s,i,l,o;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=a.value,i=s.name.substring(0,s.name.length-4),!(l=t.find((function(e){return e.filename==i})))){e.next=10;break}return e.next=6,s.text();case 6:o=e.sent,r.push({id:l.id,full_text:o}),e.next=11;break;case 10:n.push(s.name);case 11:case"end":return e.stop()}}),e)})),i.s();case 17:if((a=i.n()).done){e.next=21;break}return e.delegateYield(o(),"t0",19);case 19:e.next=17;break;case 21:e.next=26;break;case 23:e.prev=23,e.t1=e.catch(14),i.e(e.t1);case 26:return e.prev=26,i.f(),e.finish(26);case 29:if(!(r.length>0)){e.next=32;break}return e.next=32,D.Q.scan.save(r);case 32:if(!(n.length>1)){e.next=37;break}return console.log("\xfcbersprungene Dateien: ".concat(n.join(", "))),e.abrupt("return",{status:!0,success:"Dateien wurden hochgeladen. ".concat(n.length," Dateien konnten nicht zugewiesen werden (s. Konsole).")});case 37:if(1!=n.length){e.next=42;break}return console.log("\xfcbersprungene Dateien: ".concat(n.join(", "))),e.abrupt("return",{status:!0,success:"Dateien wurden hochgeladen. 1 Datei konnte nicht zugewiesen werden (s. Konsole)."});case 42:return e.abrupt("return",{status:!0});case 43:case"end":return e.stop()}}),e,null,[[14,23,26,29]])})))})})]})]})}function te(e){var t=(0,g.useState)(null),n=(0,u.Z)(t,2),s=n[0],r=n[1],i=function(){var e=(0,o.Z)((0,c.Z)().mark((function e(t,n){var s,r,i,a,l;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/"!=t.path.substring(0,1)&&(t.path="/"+t.path),"/"!=t.path.substring(t.path.length-1)&&(t.path=t.path+"/"),e.next=4,D.Q.edition.save(t);case 4:if(!((s=e.sent)>0)){e.next=31;break}for((r=new FormData).append("edition_id",s),r.append("path",t.path),i=n.length,a=0;a<i;a++)r.append("files",n[a]);return e.next=13,D.Q.importScans(r);case 13:if(400!==(l=e.sent).status){e.next=18;break}return e.abrupt("return",{status:!1,error:"Fehler beim Hochladen der Dateien. Eine neue Ressource mit ID ".concat(s," wurde aber bereits erstellt.")});case 18:if(1!=l.body.length){e.next=23;break}return console.log("Bereits auf dem Server und deshalb \xfcbersprungen: ".concat(l.body.join(", "))),e.abrupt("return",{status:!0,success:"Das Hochladen war erfolgreich. Eine Datei wurde \xfcbersprungen (s. Konsole). Eine neue Ressource mit ID ".concat(s," wurde erstellt.")});case 23:if(!(l.body.length>0)){e.next=28;break}return console.log("Bereits auf dem Server und deshalb \xfcbersprungen: ".concat(l.body.join(", "))),e.abrupt("return",{status:!0,success:"Das Hochladen war erfolgreich. ".concat(l.body.length," Dateien wurden \xfcbersprungen (s. Konsole). Eine neue Ressource mit ID ").concat(s," wurde erstellt.")});case 28:return e.abrupt("return",{status:!0,success:"Eine neue Ressource mit ID ".concat(s," wurde erstellt.")});case 29:e.next=32;break;case 31:return e.abrupt("return",{status:!1,error:"Edition konnte nicht erstellt werden. Keine Bilder wurden hochgeladen."});case 32:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),a=function(){var e=(0,o.Z)((0,c.Z)().mark((function e(t,n,s,i,a){var l,o,u,d,h,x,p,m,f,j,g,Z,v;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(100,l=100,o=-1,u=[],(d=Array.from(n)).sort((function(e,t){return t.name<e.name?1:-1})),h=0;h<d.length;h++)l>=100&&(l=0,o++,u.push(new FormData),u[o].append("letter",s),u[o].append("type",i),u[o].append("user_id_id",a)),l++,u[o].append("files",d[h]);x=0,p=0,m=u.length,f=0,j=0,g=u;case 12:if(!(j<g.length)){e.next=24;break}return Z=g[j],e.next=16,D.Q.importZettel(Z);case 16:v=e.sent,0===x&&(x=v[0]),p=v[1],f++,t(100/m*f);case 21:j++,e.next=12;break;case 24:return r([x,p]),e.abrupt("return",{status:!0});case 26:case"end":return e.stop()}}),e)})));return function(t,n,s,r,i){return e.apply(this,arguments)}}(),l=null;"mlw"===D.Q.project_name?l=(0,E.jsx)(B.MLWImportRessource,{importRessource:i}):"tll"===D.Q.project_name?l=(0,E.jsx)(L.TLLImportRessource,{importRessource:i}):"dom"===D.Q.project_name&&(l=(0,E.jsx)(P.DOMImportRessource,{importRessource:i}));var d=null;return"mlw"===D.Q.project_name?d=(0,E.jsx)(B.MLWImportZettel,{importZettel:a}):"tll"===D.Q.project_name?d=(0,E.jsx)(L.TLLImportZettel,{importZettel:a}):"dom"===D.Q.project_name&&(d=(0,E.jsx)(P.DOMImportZettel,{importZettel:a})),(0,E.jsx)(p.Z,{className:"mainBody",children:(0,E.jsxs)(q.Z,{defaultActiveKey:"r",className:"mb-5",children:[D.Q.access("e_edit")&&(0,E.jsx)(V.Z,{eventKey:"r",title:"Ressource",style:{padding:"0 25%"},children:l}),D.Q.access("e_edit")&&(0,E.jsx)(V.Z,{eventKey:"o",title:"ocr-Dateien",style:{padding:"0 25%"},children:(0,E.jsx)(ee,{})}),D.Q.access("z_add")&&(0,E.jsxs)(V.Z,{eventKey:"z",title:"Zettel",style:{padding:"0 25%"},children:[d,s&&(0,E.jsx)(O.Z,{children:(0,E.jsx)(R.Z,{children:(0,E.jsxs)(j.Z,{variant:"success",onClose:function(){r(null)},dismissible:!0,children:[(0,E.jsx)(j.Z.Heading,{children:"Hochladen erfolgreich!"}),(0,E.jsxs)("p",{children:["Die neuen Zettel haben IDs zwischen ",(0,E.jsx)("b",{children:s[0]})," und ",(0,E.jsx)("b",{children:s[1]}),". M\xf6chten Sie die neuen Zettel in Zettel-Datenbank ",(0,E.jsx)(j.Z.Link,{href:"#",onClick:function(t){localStorage.setItem("".concat(D.Q.project_name,"_searchBox_zettel"),'[[{"id":0,"c":"id","o":">=","v":'.concat(s[0],'},{"id":1,"c":"id","o":"<=","v":').concat(s[1],'}],1,["id"]]')),e.loadMain(t,"zettel")},children:"\xf6ffnen"}),"?"]})]})})}),"mlw"===D.Q.project_name&&(0,E.jsx)(O.Z,{className:"mt-4",children:(0,E.jsxs)(R.Z,{children:["Eine Anleitung zum Hochladen der Zettel finden Sie ",(0,E.jsx)("a",{href:"https://gitlab.lrz.de/haeberlin/dmlw/-/wikis/09-HiwiHow:-Zettel-scannen-und-hochladen",children:"hier"}),"."]})})]}),"mlw"===D.Q.project_name&&D.Q.access("geschichtsquellen")&&(0,E.jsx)(V.Z,{eventKey:"g",title:"Geschichtsquellen-Daten",style:{padding:"0 25%"},children:(0,E.jsx)(B.GeschichtsquellenImport,{})})]})})}var ne,se,re,ie,ae,le,ce,oe,ue,de,he=n(8949),xe=function(e){(0,w.Z)(s,e);var t=(0,y.Z)(s);function s(e){var r;(0,b.Z)(this,s),(r=t.call(this,e)).state={zettelSearchItems:[["id","ID"]],searchStatus:"",setupItems:null,showPreset:!1,showDetail:!0,count:0,selectionDetail:{ids:[],currentId:null,sortOptions:null,presetOptions:null}};var i=function(){var t=(0,o.Z)((0,c.Z)().mark((function t(){var s;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(3545)("./".concat(e.PROJECT_NAME,".js"));case 2:s=t.sent,ne=s.zettelSearchItems,re=s.ZettelCard,se=s.zettelBatchOptions,ie=s.BatchInputType,ae=s.ZettelAddLemmaContent,le=s.ZettelSingleContent,ce=s.newZettelObject,oe=s.exportZettelObject,ue=s.zettelPresetOptions,de=s.zettelSortOptions,r.setState({zettelSearchItems:ne(),sortOptions:de(),presetOptions:ue()});case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return i(),r}return(0,k.Z)(s,[{key:"render",value:function(){var e=this,t=[["Suchergebnisse exportieren",(0,o.Z)((0,c.Z)().mark((function t(){var n;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.Q.zettel.search(e.state.query,{select:oe(),export:!0,order:e.state.queryOrder});case 2:n=t.sent,window.open(n,"_blank");case 4:case"end":return t.stop()}}),t)})))]];return D.Q.access("z_edit")&&t.push(["neuer Zettel erstellen",(0,o.Z)((0,c.Z)().mark((function t(){var n;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Soll ein neuer Zettel erstellt werden?")){t.next=5;break}return t.next=3,D.Q.zettel.save(ce());case 3:n=t.sent,e.setState({setupItems:[{id:0,c:"id",o:"=",v:n}]});case 5:case"end":return t.stop()}}),t)})))]),(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(x.Z,{fixed:"bottom",bg:"light",children:(0,E.jsxs)(p.Z,{fluid:!0,children:[(0,E.jsx)(x.Z.Collapse,{className:"justify-content-start",children:(0,E.jsx)(x.Z.Text,{children:this.state.sortOptions?(0,E.jsx)(z.Rj,{boxName:"zettel",searchQuery:function(t,n){e.searchQuery(t,n)},setupItems:this.state.setupItems,searchOptions:this.state.zettelSearchItems,sortOptions:this.state.sortOptions,status:this.state.searchStatus,presetOptions:this.state.presetOptions}):null})}),(0,E.jsxs)(x.Z.Collapse,{className:"justify-content-end",children:[(0,E.jsx)(x.Z.Text,{children:this.state.count>0?(0,E.jsx)(z.C3,{loadPage:function(t){e.loadPage(t)},currentPage:this.state.currentPage,maxPage:this.state.maxPage}):null}),(0,E.jsx)(x.Z.Text,{children:(0,E.jsx)(z.vW,{menuItems:t})})]})]})}),(0,E.jsxs)(p.Z,{className:"mainBody",children:[(0,E.jsx)(pe,{loadPage:function(t){e.loadPage(t)},currentElements:this.state.currentElements,count:this.state.count,currentPage:this.state.currentPage,maxPage:this.state.maxPage,presetSelection:this.state.presetSelection,gridArea:this.state.selectionDetail.ids.length>0?"2/1/2/2":"2/1/2/3",toggleShowDetail:function(t){e.setState({selectionDetail:t.selection,itemDetail:t.item})},showDetail:this.state.showDetail}),0==this.state.count?(0,E.jsx)(z.Km,{}):null]}),D.Q.access("z_edit")&&this.state.selectionDetail.ids.length>0?(0,E.jsx)(me,{onReload:function(){e.loadPage(e.state.currentPage)},onClose:function(){e.setState({selectionDetail:{ids:[]}})},selection:this.state.selectionDetail,item:this.state.itemDetail,onUpdate:function(){var t=(0,o.Z)((0,c.Z)().mark((function t(n){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.reloadZettel(n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),showDetail:this.state.showDetail,openNextItem:function(){e.openNextItem()},toggleShowDetail:function(){e.setState({showDetail:!e.state.showDetail})}}):""]})}},{key:"openNextItem",value:function(){var e=(0,o.Z)((0,c.Z)().mark((function e(){var t,n,s,r,i=this;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.Q.zettel.get({id:this.state.itemDetail.id});case 2:t=(t=e.sent)[0],n=this.state.currentElements,s=n.findIndex((function(e){return e.id===t.id})),n[s]=t,r=this.state.currentElements.findIndex((function(e){return e.id===i.state.itemDetail.id})),this.state.currentElements.length>r+1&&this.setState({currentElements:n,itemDetail:this.state.currentElements[r+1],presetSelection:[this.state.currentElements[r+1].id]});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"reloadZettel",value:function(){var e=(0,o.Z)((0,c.Z)().mark((function e(t){var n,s,r,i=this;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,v.Z)(t),e.prev=1,r=(0,c.Z)().mark((function e(){var n,r,a,l;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.value,e.next=3,D.Q.zettel.get({id:n});case 3:r=(r=e.sent)[0],a=i.state.currentElements,l=a.findIndex((function(e){return e.id===r.id})),a[l]=r,i.setState({currentElements:a,selectionDetail:{ids:t},itemDetail:r});case 9:case"end":return e.stop()}}),e)})),n.s();case 4:if((s=n.n()).done){e.next=8;break}return e.delegateYield(r(),"t0",6);case 6:e.next=4;break;case 8:e.next=13;break;case 10:e.prev=10,e.t1=e.catch(1),n.e(e.t1);case 13:return e.prev=13,n.f(),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(t){return e.apply(this,arguments)}}()},{key:"searchQuery",value:function(){var e=(0,o.Z)((0,c.Z)().mark((function e(t,n){var s,r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({searchStatus:(0,E.jsx)(S.Z,{animation:"border",size:"sm"})}),e.next=3,D.Q.zettel.search(t,{count:!0,order:n});case 3:return s=e.sent,e.next=6,D.Q.zettel.search(t,{limit:50,order:n});case 6:r=e.sent,s[0].count>1?this.setState({searchStatus:"".concat(s[0].count," Eintr\xe4ge gefunden.")}):1===s[0].count?this.setState({searchStatus:"1 Eintrag gefunden."}):this.setState({searchStatus:"Keine Eintr\xe4ge gefunden."}),this.setState({query:t,queryOrder:n,count:s[0].count,maxPage:Math.floor(s[0].count/50)+1,currentPage:1,currentElements:r,selectionDetail:{ids:[]}});case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadPage",value:function(){var e=(0,o.Z)((0,c.Z)().mark((function e(t){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.Q.zettel.search(this.state.query,{limit:50,offset:50*(t-1),order:this.state.queryOrder});case 2:n=e.sent,this.setState({currentPage:t,currentElements:n,selectionDetail:{ids:[]}});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),s}(g.Component),pe=function(e){(0,w.Z)(n,e);var t=(0,y.Z)(n);function n(e){var s;return(0,b.Z)(this,n),(s=t.call(this,e)).state={selection:{currentId:null,ids:[]}},s}return(0,k.Z)(n,[{key:"render",value:function(){var e=this;if(this.props.count>0){var t,n=[],s=(0,v.Z)(this.props.currentElements);try{for(s.s();!(t=s.n()).done;){var r=t.value;n.push((0,E.jsx)(re,{showDetail:this.props.showDetail,testProp:r.id+"_test",id:r.id,item:r},r.id))}}catch(i){s.e(i)}finally{s.f()}return(0,E.jsx)("div",{style:{gridArea:this.props.gridArea,padding:"0 10px"},children:(0,E.jsx)(z.Qf,{multiSelect:!0,className:"zettel_box",selectCallback:function(t,n){e.selectCallback(t,n)},preset:this.props.presetSelection,children:n})})}return null}},{key:"selectCallback",value:function(e,t){e?this.props.toggleShowDetail({selection:t,item:e.props.item}):this.props.toggleShowDetail({selection:t,item:null})}}]),n}(g.Component);function me(e){var t=(0,g.useState)(1===e.selection.ids.length?"single":"batch"),n=(0,u.Z)(t,2),s=n[0],r=n[1],i=(0,g.useState)("batch"),a=(0,u.Z)(i,2),l=a[0],d=a[1],h=(0,g.useState)(!1),x=(0,u.Z)(h,2),p=x[0],m=x[1],f=(0,g.useState)(null),j=(0,u.Z)(f,2),Z=j[0],b=j[1],k=(0,g.useState)(null),w=(0,u.Z)(k,2),y=w[0],S=w[1],_=(0,g.useState)(null),z=(0,u.Z)(_,2),N=(z[0],z[1]);(0,g.useEffect)((function(){r(1===e.selection.ids.length?"single":"batch")}),[e.selection.ids]),(0,g.useEffect)((function(){switch(s){case"batch":b((0,E.jsx)(je,{openAddLemma:function(e,t){return Q(e,t)},saveBatch:function(){var e=(0,o.Z)((0,c.Z)().mark((function e(t,n,s){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t,n,s);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,s){return e.apply(this,arguments)}}(),onUpdate:e.onUpdate,selection:e.selection}));break;case"single":b((0,E.jsx)(fe,{openAddLemma:function(e,t,n){return Q(e,t,n)},onClose:e.onClose,onReload:e.onReload,showDetail:e.showDetail,toggleShowDetail:function(){e.toggleShowDetail()},item:e.item,openNextItem:e.openNextItem,onUpdate:e.onUpdate}));break;case"lemma":b((0,E.jsx)(ge,{saveAfterAddLemma:function(){var e=(0,o.Z)((0,c.Z)().mark((function e(t,n){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),newLemma:y,newLemmaDisplay:y,closeAddLemma:function(){r(l)}}));break;default:b(null)}}),[s,e.item.id,e.showDetail]);var I=function(){var t=(0,o.Z)((0,c.Z)().mark((function t(n,s,r){var i,a,l,o,u,d,h;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=null,a=null,1!==n||""==s||null!==r){t.next=7;break}return Q(s,s),t.abrupt("return",{status:!0});case 7:if(!0!==se()[n-1][3]||null==r){t.next=12;break}i=se()[n-1][2],a=r,t.next=18;break;case 12:if(!1!==se()[n-1][3]||null==s||""==s){t.next=17;break}i=se()[n-1][2],a=s,t.next=18;break;case 17:return t.abrupt("return",{status:!1,error:"Bitte tragen Sie einen g\xfcltigen Wert ein."});case 18:l=[],o=(0,v.Z)(e.selection.ids);try{for(o.s();!(u=o.n()).done;)d=u.value,(h={id:d,user_id:D.Q.me.id})[i]=a,l.push(h)}catch(c){o.e(c)}finally{o.f()}return t.next=23,D.Q.zettel.save(l);case 23:return t.next=25,e.onUpdate(e.selection.ids);case 25:return t.abrupt("return",{status:!0});case 26:case"end":return t.stop()}}),t)})));return function(e,n,s){return t.apply(this,arguments)}}(),Q=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];d(s),S(e),N(t),r("lemma"),m(n)},A=function(){var t=(0,o.Z)((0,c.Z)().mark((function t(n,s){var i;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1!==e.selection.ids.length){t.next=11;break}return t.next=3,D.Q.zettel.save({id:e.item.id,lemma_id:s});case 3:if(!p){t.next=7;break}e.openNextItem(),t.next=9;break;case 7:return t.next=9,e.onUpdate([e.item.id]);case 9:t.next=14;break;case 11:return t.next=13,I(1,n,s);case 13:i=t.sent;case 14:return r(l),t.abrupt("return",i);case 16:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return(0,E.jsx)(C.Z,{show:!0,placement:"end",scroll:!0,backdrop:!1,onHide:function(){"lemma"!=s?e.onClose():r(l)},children:Z})}function fe(e){var t=(0,g.useState)(0),n=(0,u.Z)(t,2),s=n[0],r=n[1],i=(0,g.useState)([]),a=(0,u.Z)(i,2),l=a[0],d=a[1],h=(0,g.useState)(""),x=(0,u.Z)(h,2),p=x[0],m=x[1],f=(0,g.useState)({}),j=(0,u.Z)(f,2),Z=j[0],v=j[1],b=(0,g.useState)(null),k=(0,u.Z)(b,2),w=k[0],y=k[1];(0,g.useEffect)((function(){var e=function(){var e=(0,o.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=d,e.next=3,D.Q.edition.get({work_id:Z.work_id});case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Z.work_id>0&&e()}),[Z.work_id]);var S=function(){var t=(0,o.Z)((0,c.Z)().mark((function t(){var n,s,r=arguments;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.length>0&&void 0!==r[0]&&r[0],!w||2!==w.status){t.next=5;break}return t.abrupt("return",{status:-1,error:w.msg});case 5:if(!(null===w||1===w.status&&window.confirm(w.msg))){t.next=14;break}return(s=Z).user_id=D.Q.me.id,t.next=10,D.Q.zettel.save(s);case 10:return null===s.lemma_id&&""!==p&&null!==p&&void 0!==p?(document.querySelector(".onOpenSetFocus").focus(),e.openAddLemma(p,p,n)):n?(document.querySelector(".onOpenSetFocus").focus(),e.openNextItem()):e.onUpdate([e.item.id]),t.abrupt("return",{status:1});case 14:return t.abrupt("return",{status:0});case 15:case 16:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(C.Z.Header,{closeButton:!0,children:(0,E.jsxs)(C.Z.Title,{children:["ID ",e.item.id]})}),(0,E.jsxs)(C.Z.Body,{children:[(0,E.jsxs)(he.Z,{defaultActiveKey:0,children:[(0,E.jsxs)(he.Z.Item,{eventKey:0,children:[(0,E.jsx)(he.Z.Header,{children:"\xdcbersicht"}),(0,E.jsxs)(he.Z.Body,{children:[(0,E.jsx)(le,{setLemma:function(e){m(e)},setZettelObjectErr:function(e){y(e)},setZettelObject:function(e){v(e)},item:e.item}),(0,E.jsx)(O.Z,{className:"mb-3 mt-4",children:(0,E.jsxs)(R.Z,{children:[(0,E.jsx)(z.YG,{style:{marginRight:"10px"},onClick:function(){return S(!0)},value:"speichern&weiter"}),(0,E.jsx)(z.YG,{onClick:function(){return S()},value:"speichern"})]})}),(0,E.jsx)(O.Z,{children:(0,E.jsx)(R.Z,{children:(0,E.jsx)(U.Z,{children:(0,E.jsx)(U.Z.Check,{size:"sm",type:"switch",label:e.showDetail?"Details ausblenden":"Details einblenden",checked:e.showDetail,onChange:e.toggleShowDetail})})})})]})]}),(0,E.jsxs)(he.Z.Item,{eventKey:4,children:[(0,E.jsx)(he.Z.Header,{children:"Flie\xdftext"}),(0,E.jsxs)(he.Z.Body,{children:[(0,E.jsx)("p",{children:e.item.ocr_text_corr}),(0,E.jsx)("p",{children:e.item.scan_id})]})]}),l.length>0&&(0,E.jsxs)(he.Z.Item,{eventKey:1,children:[(0,E.jsx)(he.Z.Header,{children:"Ressourcen"}),(0,E.jsx)(he.Z.Body,{children:l.map((function(e){return(0,E.jsx)("div",{children:(0,E.jsx)("a",{href:null===e.url||""===e.url?"/site/argos/".concat(e.id):e.url,target:"_blank",rel:"noreferrer",children:e.label})},e.id)}))})]}),D.Q.access("comment")?(0,E.jsxs)(he.Z.Item,{eventKey:2,children:[(0,E.jsxs)(he.Z.Header,{children:["Kommentare",s>0?(0,E.jsxs)("small",{style:{marginLeft:"5px"},children:["(",s,")"]}):null]}),(0,E.jsx)(he.Z.Body,{children:(0,E.jsx)(z.q5,{tbl:"zettel",id:e.item.id,setCommentCount:r})})]}):null,D.Q.access("admin")&&(0,E.jsxs)(he.Z.Item,{eventKey:3,children:[(0,E.jsx)(he.Z.Header,{children:"Zettel l\xf6schen"}),(0,E.jsx)(he.Z.Body,{children:(0,E.jsx)(M.Z,{variant:"danger",onClick:(0,o.Z)((0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Soll der Zettel wirklich gel\xf6scht werden? Dieser Schritt kann nicht mehr r\xfcckg\xe4ngig gemacht werden.")){t.next=5;break}return t.next=3,D.Q.zettel.delete(e.item.id);case 3:e.onClose(),e.onReload();case 5:case"end":return t.stop()}}),t)}))),children:"Zettel l\xf6schen"})})]})]}),e.item.editor&&(0,E.jsx)(O.Z,{className:"mt-2",children:(0,E.jsx)(R.Z,{children:(0,E.jsxs)("small",{className:"text-secondary",style:{float:"right"},children:[e.item.editor," am ",e.item.u_date?e.item.u_date.substring(0,16):null]})})})]})]})}function je(e){var t=(0,g.useState)(1),n=(0,u.Z)(t,2),s=n[0],r=n[1],i=(0,g.useState)(""),a=(0,u.Z)(i,2),l=a[0],d=a[1],h=(0,g.useState)(null),x=(0,u.Z)(h,2),p=x[0],m=x[1],f=se();return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(C.Z.Header,{closeButton:!0,children:(0,E.jsxs)(C.Z.Title,{children:[e.selection.ids.length," Zettel"]})}),(0,E.jsxs)(C.Z.Body,{children:[(0,E.jsxs)(O.Z,{className:"mb-3",children:[(0,E.jsx)(R.Z,{children:(0,E.jsx)(z.SA,{style:{width:"110px"},options:f,onChange:function(e){d(""),r(parseInt(e.target.value))}})}),(0,E.jsx)(R.Z,{children:(0,E.jsx)(ie,{batchType:s,batchValue:l,batchValueId:p,setBatchValue:function(e){d(e)},setBatchValueId:function(e){m(e)}})})]}),(0,E.jsx)(O.Z,{children:(0,E.jsx)(R.Z,{children:(0,E.jsx)(z.YG,{value:"f\xfcr alle \xfcbernehmen",onClick:(0,o.Z)((0,c.Z)().mark((function t(){var n;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.saveBatch(s,l,p);case 2:return n=t.sent,d(""),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})))})})})]})]})}function ge(e){var t=(0,g.useState)({}),n=(0,u.Z)(t,2),s=n[0],r=n[1],i=(0,g.useState)(!1),a=(0,u.Z)(i,2),l=a[0],d=a[1];return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(C.Z.Header,{closeButton:!0,children:(0,E.jsx)(C.Z.Title,{children:"Soll ein neues Wort erstellt werden?"})}),(0,E.jsxs)(C.Z.Body,{children:[(0,E.jsx)(ae,{setNewLemmaOK:d,newLemma:e.newLemma,newLemmaDisplay:e.newLemmaDisplay,setLemmaObject:function(e){r(e)}}),(0,E.jsx)(O.Z,{children:(0,E.jsxs)(R.Z,{children:[(0,E.jsx)(z.YG,{type:"button",value:"neues Wort erstellen",onClick:(0,o.Z)((0,c.Z)().mark((function t(){var n;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!l){t.next=9;break}return t.next=3,D.Q.lemma.save(s);case 3:return n=t.sent,t.next=6,e.saveAfterAddLemma(s.lemma,n);case 6:return t.abrupt("return",t.sent);case 9:return t.abrupt("return",{status:!1,error:"Bitte f\xfcllen Sie alle Angaben korrekt aus!"});case 10:case"end":return t.stop()}}),t)})))}),(0,E.jsx)(M.Z,{variant:"secondary",style:{marginLeft:"10px"},onClick:function(){e.closeAddLemma()},children:"abbrechen"})]})})]})]})}var Ze,ve,be,ke=n(1398);function we(e){var t=100,s=(0,g.useState)(null),r=(0,u.Z)(s,2),i=r[0],a=r[1],l=(0,g.useState)([]),x=(0,u.Z)(l,2),m=x[0],f=x[1],j=(0,g.useState)(null),Z=(0,u.Z)(j,2),v=Z[0],b=Z[1],k=(0,g.useState)([]),w=(0,u.Z)(k,2),y=w[0],S=w[1],_=(0,g.useState)(0),C=(0,u.Z)(_,2),D=C[0],N=C[1],I=(0,g.useState)(!1),Q=(0,u.Z)(I,2),A=Q[0],B=Q[1],P=(0,g.useState)(!1),L=(0,u.Z)(P,2),O=L[0],R=L[1],M=(0,g.useState)([]),K=(0,u.Z)(M,2),T=K[0],W=K[1];(0,g.useEffect)((function(){var t=function(){var t=(0,o.Z)((0,c.Z)().mark((function t(){var s;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(3545)("./".concat(e.PROJECT_NAME,".js"));case 2:return s=t.sent,Ze=s.fetchIndexBoxData,ve=s.IndexBoxDetail,t.t0=W,t.next=8,Ze();case 8:t.t1=t.sent,(0,t.t0)(t.t1),a("");case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[]),(0,g.useEffect)((function(){if(null!==i&&""!==i){var e=i.toLowerCase(),t=i.length,n=T.filter((function(n){return n.lemma.substring(0,t)===e}));S(n),n.length>0&&N(n[0].id)}else""===i&&(S([]),N(0))}),[i]),(0,g.useEffect)((function(){if(y.length>0){var e=T.findIndex((function(e){return e.id===D})),n=T.slice(e-t>=0?e-t:0,e),s=T.slice(e,e+t);f(n.concat(s)),B(e>0),R(!(e+t>=T.length-1));var r=function(){var e=(0,o.Z)((0,c.Z)().mark((function e(){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,z._v)(200);case 2:(t=document.querySelector(".indexBox_result_hit"))&&t.scrollIntoView({block:"center",behavior:"auto"});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();r()}else{f(T.slice(0,t));var i=document.getElementsByClassName("indexBoxLstResultBox");i.length>0&&i[0].scroll(0,0),R(!0)}}),[y,D]);var F=function(){var e=T.findIndex((function(e){return e.id===m[0].id}));return B(e-t>=0),T.slice(e-t>=0?e-t:0,e)},J=function(){var e=T.findIndex((function(e){return e.id===m[m.length-1].id}));return R(!(e+1+t>=T.length-1)),T.slice(e+1,e+1+t)};return T.length>0?(0,E.jsxs)(p.Z,{className:"mainBody",children:[(0,E.jsxs)("div",{className:"indexBoxLst",children:[(0,E.jsx)("input",{type:"text",style:{width:"100%",margin:"10px 0px 10px 0"},value:i,onChange:function(e){a(e.target.value)},onKeyDown:function(e){if(13===e.keyCode&e.shiftKey){var t=y.findIndex((function(e){return e.id===D}));N(0===t?y[y.length-1].id:y[t-1].id)}else if(9===e.keyCode)e.preventDefault(),b(D);else if(13===e.keyCode){var n=y.findIndex((function(e){return e.id===D}));n+1<y.length?N(y[n+1].id):y.length>0&&N(y[0].id)}else 27===e.keyCode&&a("")}}),(0,E.jsx)("div",{children:y.length>0?(0,E.jsxs)("small",{style:{float:"right"},children:[(0,E.jsxs)("span",{style:{marginRight:"15px"},children:[y.findIndex((function(e){return e.id===D}))+1,(0,E.jsx)("span",{style:{margin:"0 3px 0 3px"},children:"/"}),y.length," "]}),(0,E.jsx)(d.G,{style:{marginRight:"5px"},icon:h.EyR,onClick:function(){var e=y.findIndex((function(e){return e.id===D}));N(0===e?y[y.length-1].id:y[e-1].id)}}),(0,E.jsx)(d.G,{style:{marginRight:"3px"},icon:h.yOZ,onClick:function(){var e=y.findIndex((function(e){return e.id===D}));e+1<y.length?N(y[e+1].id):N(y[0].id)}})]}):null}),(0,E.jsx)(ke.Z,{variant:"flush",className:"indexBoxLstResultBox",onScroll:function(e){!function(e){if(O&&e.target.scrollHeight-e.target.scrollTop-e.target.offsetHeight<500){var t=J();f(m.concat(t))}else if(A&&e.target.scrollTop<500){var n=F(),s=document.getElementsByClassName("indexBoxLstResultBox");s[0].style.overflow="hidden",f(n.concat(m)),setTimeout((function(){s[0].style.overflow="scroll"}),500)}}(e)},children:m.map((function(e){return(0,E.jsx)(ke.Z.Item,{className:D===e.id?"indexBox_result_hit":y.map((function(e){return e.id})).includes(e.id)?"indexBox_result":null,action:!0,onClick:function(){b(e.id)},dangerouslySetInnerHTML:(0,z.rg)(e.lemma_display)},e.id)}))})]}),(0,E.jsx)("div",{className:"indexBoxDetail",children:v?(0,E.jsx)(ve,{lemma_id:v}):null})]}):(0,E.jsx)("div",{children:"Daten werden geladen..."})}function ye(e){D.Q.changeLog=_e;var t={null:(0,E.jsx)(Z.v,{}),ressources:(0,E.jsx)(F,{}),stats:(0,E.jsx)(Y,{PROJECT_NAME:e.PROJECT_NAME}),server:(0,E.jsx)(X,{}),lemma:(0,E.jsx)(N,{PROJECT_NAME:e.PROJECT_NAME,loadMain:function(t,n){e.loadMain(t,n)}}),import:(0,E.jsx)(te,{loadMain:function(t,n){e.loadMain(t,n)}}),zettel:(0,E.jsx)(xe,{PROJECT_NAME:e.PROJECT_NAME}),indexbox:(0,E.jsx)(we,{PROJECT_NAME:e.PROJECT_NAME}),account:(0,E.jsx)(G.m,{}),seklit:(0,E.jsx)(K,{}),maiora:(0,E.jsx)(A.Opera,{listName:"opera_maiora"}),minora:(0,E.jsx)(A.Opera,{listName:"opera_minora"}),geschichtsquellen:(0,E.jsx)(B.GeschichtsquellenInterface,{}),externalConnectionAuthor:(0,E.jsx)(B.ExternalConnectionAuthorInterface,{}),externalConnectionWork:(0,E.jsx)(B.ExternalConnectionWorkInterface,{}),konkordanz:(0,E.jsx)(P.Konkordanz,{}),quellenverzeichnis:(0,E.jsx)(P.DOMOpera,{}),etudaus:(0,E.jsx)(P.Etudaus,{}),domressource:(0,E.jsx)(P.DOMRessource,{}),index:(0,E.jsx)(A.Opera,{listName:"tll_index"}),tllressource:(0,E.jsx)(L.TLLRessource,{})};return null===e||null===e.res||Object.keys(t).includes(e?e.res:null)?t[e?e.res:null]:(0,E.jsxs)("div",{className:"text-danger",style:{textAlign:"center",marginTop:"100px"},children:["Unbekannter Men\xfc-Punkt '",e.res,"'."]})}function Se(e){var t=(0,g.useState)(!1),s=(0,u.Z)(t,2),r=s[0],i=s[1];(0,g.useEffect)((function(){var t=function(){var t=(0,o.Z)((0,c.Z)().mark((function t(){var s;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(3545)("./".concat(e.PROJECT_NAME,".js"));case 2:s=t.sent,be=s.MainMenuContent,i(!0);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[]);var a="Datenbank";switch(e.PROJECT_NAME){case"mlw":a="dMLW";break;case"dom":a="dDOM";break;default:a="Datenbank"}return(0,E.jsx)(x.Z,{bg:"dark",variant:"dark",fixed:"top",children:(0,E.jsxs)(p.Z,{fluid:!0,children:[(0,E.jsx)(x.Z.Brand,{style:{cursor:"pointer"},onClick:function(t){e.loadMain(t,null)},children:a}),(0,E.jsx)(x.Z.Toggle,{}),(0,E.jsx)(x.Z.Collapse,{className:"justify-content-end",children:(0,E.jsxs)(m.Z,{children:[(0,E.jsxs)(f.Z,{title:"Zettel- und Wortmaterial",children:[(0,E.jsx)(f.Z.Item,{onClick:function(t){e.loadMain(t,"zettel")},children:"Zettel-Datenbank"}),(0,E.jsx)(f.Z.Item,{onClick:function(t){e.loadMain(t,"lemma")},children:"Wortliste"})]}),(0,E.jsx)(f.Z,{title:"Verzeichnisse",children:r?(0,E.jsx)(be,{loadMain:function(){e.loadMain.apply(e,arguments)}}):null}),(0,E.jsxs)(f.Z,{title:"Einstellungen",children:[(0,E.jsx)(f.Z.Item,{onClick:function(t){e.loadMain(t,"account")},children:"Konto"}),(0,E.jsx)(f.Z.Item,{onClick:function(t){e.loadMain(t,"server")},children:"Server"}),(0,E.jsx)(f.Z.Item,{onClick:function(t){e.loadMain(t,"import")},children:"Import"}),(0,E.jsx)(f.Z.Item,{onClick:function(t){e.loadMain(t,"stats")},children:"Statistik"})]}),(0,E.jsx)(m.Z.Link,{children:(0,E.jsx)(d.G,{icon:h.jLD,onClick:function(t){e.loadMain(t,"logout")},title:"abmelden"})})]})})]})})}var _e=[{project:"tll",title:"Import und Ressourcen",date:"2022-07-12",description:(0,E.jsx)(E.Fragment,{children:(0,E.jsx)("p",{children:"Zettel, Ressourcen und Volltexte k\xf6nnen importiert werden. Die Ressourcen k\xf6nnen hinzugef\xfcgt und verwaltet werden, sie werden im Index angezeigt. Argos ist allerdings erst begrenzt lauff\xe4hig."})})},{project:"dom",title:"Import und Ressourcen",date:"2022-07-12",description:(0,E.jsx)(E.Fragment,{children:(0,E.jsx)("p",{children:"Zettel, Ressourcen und Volltexte k\xf6nnen importiert werden. Die Ressourcen k\xf6nnen hinzugef\xfcgt und verwaltet werden, sie werden im Quellenverzeichnis angezeigt. Argos ist allerdings erst begrenzt lauff\xe4hig."})})},{project:"mlw",title:"Geschichtsquellen",date:"2022-07-08",description:(0,E.jsx)(E.Fragment,{children:(0,E.jsxs)("p",{children:["Die Geschichtsquellen-Datens\xe4tze k\xf6nnen nun mit den dMLW-Datens\xe4tzen verkn\xfcpft werden. Bereits gemachte Verkn\xfcpfungen werden mit einem ",(0,E.jsx)(d.G,{icon:h.eW2})," in den ",(0,E.jsx)("i",{children:"opera"}),"-Listen angezeigt. In den n\xe4chsten Wochen sollen alle Verkn\xfcpfungen eingetragen werden."]})})},{project:"tll",title:"Testversion",date:"2022-06-20",description:(0,E.jsx)(E.Fragment,{children:(0,E.jsxs)("p",{children:["Eine erste Testversion ist online! Die Lemmaliste wurde von der ",(0,E.jsx)("a",{target:"_blank",href:"https://publikationen.badw.de/de/thesaurus/",children:"TLL Open Access Lemmasuche"})," \xfcbernommen, der Index vom ",(0,E.jsx)("a",{target:"_blank",href:"https://thesaurus.badw.de/tll-digital/index/a.html#pJ4",children:"TLL Open Access Index"}),"."]})})},{title:"Beta 12.10",date:"2022-06-10",description:(0,E.jsx)(E.Fragment,{children:(0,E.jsxs)("p",{children:["Die Suchfunktion (",(0,E.jsx)(d.G,{icon:h.wn1}),') unterst\xfctzt nun regul\xe4re Ausdr\xfccke: W\xe4hlen Sie "re" als Operator aus. Weitere Hinweise finden Sie ',(0,E.jsx)("a",{href:"https://mariadb.com/kb/en/regular-expressions-overview/",target:"_blank",children:"hier"}),"."]})})},{project:"dom",title:"dDOM Update",date:"2022-06-03",description:(0,E.jsx)(E.Fragment,{children:(0,E.jsx)("p",{children:"Die neue Version ist online!"})})},{title:"Beta 12.10",date:"2022-05-04",description:(0,E.jsx)(E.Fragment,{children:(0,E.jsxs)("p",{children:["Zettel k\xf6nnen nun aus der Zettel-Datenbank als pdf exportiert werden. Benutzen Sie das Kontextmen\xfc ",(0,E.jsx)(d.G,{icon:h.iV1}),' in der Zettel-Datenbank (rechts unten) und w\xe4hlen Sie "Suchergebnisse exportieren" aus.']})})},{project:"mlw",title:"Beta 12.9",date:"2022-04-29",description:(0,E.jsx)(E.Fragment,{children:(0,E.jsxs)("p",{children:["Kleine Verbesserung in der Darstellung der ",(0,E.jsx)("i",{children:"opera"}),"-Listen."]})})},{project:"mlw",title:"Beta 12.8",date:"2022-04-14",description:(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("p",{children:"Kleine Verbesserungen in Darstellung und Benutzung:"}),(0,E.jsxs)("ul",{children:[(0,E.jsx)("li",{children:'Ressourcen: "Autor/Jahr-Angabe"-Fehler bei Angabe der Serie behoben.'}),(0,E.jsx)("li",{children:"Ressourcen: Bandinhalt-Fehler behoben."}),(0,E.jsx)("li",{children:"Ressourcen: Seitenverh\xe4ltnis der Bilder kann ver\xe4ndert werden."})]}),(0,E.jsxs)("p",{children:["Einige Fehler in den Ressourcen wurden behoben. Ins System aufgenommen ",(0,E.jsx)("i",{children:"(falls Ressourcen zu diesen B\xe4nden in den opera-Listen fehlen, schreiben Sie unbedingt ein Ticket!)"}),":"]}),(0,E.jsxs)("ul",{children:[(0,E.jsx)("li",{children:"MGH Poet. I"}),(0,E.jsx)("li",{children:"MGH Poet. IV (Winterfeld)"})]})]})},{project:"mlw",title:"Beta 12.7",date:"2022-02-26",description:(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("p",{children:"Kleine Verbesserungen in Darstellung und Benutzung:"}),(0,E.jsxs)("ul",{children:[(0,E.jsx)("li",{children:"\xc4nderungen beim Zettel-Upload: Buchstaben U/V und I/J wurden zusammengefasst."}),(0,E.jsx)("li",{children:"Korrekturen bei der Zitiertitel-Suche der opera-Listen."}),(0,E.jsx)("li",{children:"Korrekturen beim Upload von Scan-Bildern."})]})]})},{project:"mlw",title:"Beta 12.6",date:"2022-02-23",description:(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("p",{children:"Kleine Verbesserungen in Darstellung und Benutzung:"}),(0,E.jsxs)("ul",{children:[(0,E.jsx)("li",{children:"Suche in opera-Listen funktioniert wieder."}),(0,E.jsx)("li",{children:"Korrektur bei der voreingestellten Suche."}),(0,E.jsx)("li",{children:"Links auf Wiki angepasst."})]})]})},{title:"Beta 12.5",date:"2022-02-18",description:(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("p",{children:"Kleine Verbesserungen in Darstellung und Benutzung:"}),(0,E.jsxs)("ul",{children:[(0,E.jsx)("li",{children:'ocr-Funktionen des Servers in Modul "archimedes.py" verschoben.'}),(0,E.jsx)("li",{children:"Darstellung der Detailansicht f\xfcr Ressourcen und Sekund\xe4rliteratur \xfcberarbeitet."}),(0,E.jsx)("li",{children:"Neuladen der Ansicht beim L\xf6schen von Elementen."}),(0,E.jsx)("li",{children:"Opera-Listen werden automatisch neu geladen, wenn die Listen auf dem Server aktualisiert wurden oder wenn Autoren oder Werke erstellt oder gel\xf6scht wurden."}),(0,E.jsx)("li",{children:"Altes Benachrichtigungssystem (StatusBox) entfernt."})]})]})},{title:"Beta 12.4",date:"2022-02-15",description:(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("p",{children:"Kleine Verbesserungen in Darstellung und Benutzung:"}),(0,E.jsxs)("ul",{children:[(0,E.jsx)("li",{children:"Gr\xf6sse der abgebildeten W\xf6rter begrenzt auf digitalen und gescannten Zetteln."}),(0,E.jsx)("li",{children:"Wiki-Anleitung f\xfcr das Hochladen der Zettel verlinkt."}),(0,E.jsx)("li",{children:"Zettel-Reihenfolge beim Hochladen stimmt jetzt auch mit Chrome."}),(0,E.jsx)("li",{children:"Veraltete Daten und Links von fr\xfcherer Version entfernt."})]})]})},{title:"Beta 12.3",date:"2022-02-14",description:(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("p",{children:"Kleine Verbesserungen in Darstellung und Benutzung:"}),(0,E.jsxs)("ul",{children:[(0,E.jsx)("li",{children:"ocr-Verfahren f\xfcr neue Zettel \xfcberarbeitet (s. Einstellungen > Server) und automatische Typ-Erkennung aktiviert."}),(0,E.jsx)("li",{children:"Konto-Verwaltung \xfcberarbeitet (L\xf6schen von Accounts jetzt m\xf6glich)."})]})]})},{title:"Beta 12.2",date:"2022-02-13",description:(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("p",{children:"Kleine Verbesserungen in Darstellung und Benutzung:"}),(0,E.jsxs)("ul",{children:[(0,E.jsx)("li",{children:(0,E.jsx)(j.Z.Link,{href:"https://gitlab.lrz.de/haeberlin/dmlw/-/issues/194",children:"Issue #194"})}),(0,E.jsx)("li",{children:'"Details ein-/ausblenden" unter "speichern" und "speichern&weiter" verschoben.'}),(0,E.jsx)("li",{children:"Kleiner Fehler bei Stapelverabeitung behoben (\xc4nderugnen wurde nicht angezeigt)."}),(0,E.jsx)("li",{children:'Mit "X" kann die Detailansicht in der Zettel-DB geschlossen werden.'}),(0,E.jsx)("li",{children:"Wenn ein neues Wort in der Zettel-DB erstellt wurde, wird es automatisch mit dem aktuellen Zettel verkn\xfcpft."}),(0,E.jsx)("li",{children:"Man kann nun aus der Stapel-Ansicht neue W\xf6rter erstellen."}),(0,E.jsx)("li",{children:"Die Hilfe zum Erstellen von W\xf6rtern wird nun auch in der Wortliste angezeigt."}),(0,E.jsx)("li",{children:"Import-Formulare \xfcberarbeitet und verbessert."})]})]})},{title:"Beta 12.1",date:"2022-02-11",description:(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("p",{children:"Kleine Verbesserungen in Darstellung und Benutzung:"}),(0,E.jsxs)("ul",{children:[(0,E.jsx)("li",{children:"Mit einem Klick auf den Wortansatz in der Wortliste wird die Zettel-Datenbank ge\xf6ffnet und die mit diesem Wort verkn\xfcpften Zettel angezeigt."}),(0,E.jsx)("li",{children:'Suchfelder in Wortliste hinzugef\xfcgt: "W\xf6rterb\xfccher", "Kommentar", "Zahlzeichen", "im W\xf6rterbuch (MLW)", "Stern", "Fragezeichen".'}),(0,E.jsx)("li",{children:'Verbesserung des Fehlers mit "speichern&weiter".'}),(0,E.jsx)("li",{children:'"Lemmaliste" in "Wortliste" umbenannt. Ebenso "Lemma" in "Wort" (usw.).'}),(0,E.jsxs)("li",{children:["Kontextmen\xfc ",(0,E.jsx)(d.G,{icon:h.iV1})," der opera-Listen: Alle sollen nun die Listen aktualisieren k\xf6nnen."]}),(0,E.jsx)("li",{children:'opera-Listen k\xf6nnen nicht mehr von "Einstellungen"->"Server" aktualisiert werden.'}),(0,E.jsxs)("li",{children:["Die Statistiken k\xf6nnen nur noch \xfcber das Kontextmen\xfc ",(0,E.jsx)(d.G,{icon:h.iV1}),' unter "Einstellungen"->"Statistik" aktualisiert werden.']}),(0,E.jsx)("li",{children:"Alle Links sollten mit CTRL/CMD+Klick in einem neuen Fenster/Tab ge\xf6ffnet werden k\xf6nnen."}),(0,E.jsx)("li",{children:"Dark-Mode deaktiviert (wird sp\xe4ter wieder eingef\xfchrt)."})]})]})},{title:"Beta 12.0",date:"2022-02-09",description:(0,E.jsx)(E.Fragment,{children:(0,E.jsxs)("p",{children:["Neues Design und Steuerelemente mit ",(0,E.jsx)(j.Z.Link,{target:"_blank",href:"https://react-bootstrap.github.io",children:"Bootstrap"}),". Die Suchfunktion befindet sich links unten auf der Seite (",(0,E.jsx)(d.G,{icon:h.wn1}),")."]})})}]},8491:function(e,t,n){n.d(t,{m:function(){return p}});var s=n(4165),r=n(5861),i=n(885),a=n(9743),l=n(2677),c=n(3350),o=n(7022),u=n(2791),d=n(6407),h=n(3222),x=n(184);function p(){var e=(0,u.useState)(d.Q.me.first_name),t=(0,i.Z)(e,2),n=t[0],p=t[1],m=(0,u.useState)(d.Q.me.last_name),f=(0,i.Z)(m,2),j=f[0],g=f[1],Z=(0,u.useState)(d.Q.me.email),v=(0,i.Z)(Z,2),b=v[0],k=v[1],w=(0,u.useState)(""),y=(0,i.Z)(w,2),S=y[0],_=y[1],C=(0,u.useState)(""),D=(0,i.Z)(C,2),z=D[0],E=D[1],N=(0,u.useState)(d.Q.options.z_width),I=(0,i.Z)(N,2),Q=I[0],A=I[1],B=(0,u.useState)(d.Q.options.action_key),P=(0,i.Z)(B,2),L=P[0],O=P[1],R=(0,u.useState)(d.Q.options.openExternally),M=(0,i.Z)(R,2),K=M[0],T=M[1],W=[(0,x.jsxs)(a.Z,{className:"mb-2",children:[(0,x.jsx)(l.Z,{xs:2,children:"Breite der Zettel:"}),(0,x.jsx)(l.Z,{children:(0,x.jsx)(c.Z.Range,{min:"400",max:"600",size:"sm",value:Q,onChange:function(e){d.Q.setOptions("z_width",e.target.value),d.Q.setOptions("z_height",.7*parseInt(e.target.value)),A(e.target.value)}})})]},1),(0,x.jsxs)(a.Z,{className:"mb-2",children:[(0,x.jsx)(l.Z,{xs:4,children:"\xd6ffnen der Ressourcen (Zettel im Editor):"}),(0,x.jsx)(l.Z,{children:(0,x.jsxs)(c.Z.Select,{size:"sm",value:K,onChange:function(e){d.Q.setOptions("openExternally",parseInt(e.target.value)),T(e.target.value)},children:[(0,x.jsx)("option",{value:"0",children:"im gleichen Fenster"}),(0,x.jsx)("option",{value:"1",children:"in einem neuen Fenster"}),(0,x.jsx)("option",{value:"2",children:"in Echo"})]})})]},2)];return(0,x.jsxs)(o.Z,{style:{padding:"0 10% 0 10%"},children:[(0,x.jsx)(a.Z,{children:(0,x.jsx)(l.Z,{children:(0,x.jsx)("h3",{children:"Pers\xf6nliche Daten"})})}),(0,x.jsxs)(a.Z,{className:"mb-2",children:[(0,x.jsx)(l.Z,{xs:2,children:"Vorname:"}),(0,x.jsx)(l.Z,{children:(0,x.jsx)(c.Z.Control,{type:"text",size:"sm",value:n,onChange:function(e){p(e.target.value)}})})]}),(0,x.jsxs)(a.Z,{className:"mb-2",children:[(0,x.jsx)(l.Z,{xs:2,children:"Nachname:"}),(0,x.jsx)(l.Z,{children:(0,x.jsx)(c.Z.Control,{type:"text",size:"sm",value:j,onChange:function(e){g(e.target.value)}})})]}),(0,x.jsxs)(a.Z,{className:"mb-4",children:[(0,x.jsx)(l.Z,{xs:2,children:"Email-Adresse:"}),(0,x.jsx)(l.Z,{children:(0,x.jsx)(c.Z.Control,{type:"text",size:"sm",value:b,onChange:function(e){k(e.target.value)}})})]}),(0,x.jsxs)(a.Z,{className:"mb-4",children:[(0,x.jsx)(l.Z,{xs:2}),(0,x.jsx)(l.Z,{children:(0,x.jsx)(h.YG,{value:"speichern",onClick:(0,r.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Q.user.save({id:d.Q.me.id,first_name:n,last_name:j,email:b});case 2:return e.next=4,d.Q.getUser();case 4:return t=e.sent,d.Q.me=t,e.abrupt("return",{status:1});case 7:case"end":return e.stop()}}),e)})))})})]}),(0,x.jsx)(a.Z,{children:(0,x.jsx)(l.Z,{children:(0,x.jsx)("h3",{children:"Passwort"})})}),(0,x.jsxs)(a.Z,{className:"mb-2",children:[(0,x.jsx)(l.Z,{xs:2,children:"altes Passwort:"}),(0,x.jsx)(l.Z,{children:(0,x.jsx)(c.Z.Control,{type:"password",size:"sm",value:S,onChange:function(e){_(e.target.value)}})})]}),(0,x.jsxs)(a.Z,{className:"mb-4",children:[(0,x.jsx)(l.Z,{xs:2,children:"neues Passwort:"}),(0,x.jsx)(l.Z,{children:(0,x.jsx)(c.Z.Control,{type:"password",size:"sm",value:z,onChange:function(e){E(e.target.value)}})})]}),(0,x.jsxs)(a.Z,{className:"mb-4",children:[(0,x.jsx)(l.Z,{xs:2}),(0,x.jsx)(l.Z,{children:(0,x.jsx)(h.YG,{value:"speichern",onClick:(0,r.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Q.user.save({id:d.Q.me.id,old_password:S,new_password:z});case 2:return e.abrupt("return",{status:1});case 3:case"end":return e.stop()}}),e)})))})})]}),(0,x.jsx)(a.Z,{children:(0,x.jsx)(l.Z,{children:(0,x.jsx)("h3",{children:"Darstellung und Benutzung"})})}),(0,x.jsxs)(a.Z,{className:"mb-4",children:[(0,x.jsx)(l.Z,{xs:4,children:"Funktionstaste f\xfcr Tastenk\xfcrzel"}),(0,x.jsxs)(l.Z,{children:[(0,x.jsxs)(c.Z.Select,{size:"sm",value:L,onChange:function(e){d.Q.setOptions("action_key",e.target.value),O(e.target.value)},children:[(0,x.jsx)("option",{value:"alt",children:"Alt"}),(0,x.jsx)("option",{value:"ctrl",children:"Strg"}),(0,x.jsx)("option",{value:"cmd",children:"Befehlstaste"})]}),(0,x.jsxs)("small",{children:["Eine Liste mit Tastenk\xfcrzeln finden Sie ",(0,x.jsx)("a",{className:"text-primary",rel:"noreferrer",href:"https://gitlab.lrz.de/haeberlin/dmlw/-/wikis/06-Argos#tastenk\xfcrzel",target:"_blank",children:"hier"}),"."]})]})]}),W]})}}}]);
//# sourceMappingURL=303.59da62b0.chunk.js.map