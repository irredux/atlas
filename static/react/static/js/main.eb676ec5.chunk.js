(this["webpackJsonpmlw-react"]=this["webpackJsonpmlw-react"]||[]).push([[0],{27:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var s=n(2),i=n.n(s),a=n(8),r=n(4),c=n(5),l=n(7),o=n(6),u=n(3),d=n.n(u),p=n(15),h=n.n(p),m=n(9),b=n(10),j=(n(27),n(11)),x=function(){function e(t,n,s){Object(r.a)(this,e),this.tblName=t,this.url=n,this.key=s}return Object(c.a)(e,[{key:"getAll",value:function(){var e=Object(a.a)(i.a.mark((function e(){var t,n=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.search([{c:"id",o:">",v:0}],t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(a.a)(i.a.mark((function e(t){var n,s,a,r=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in n=r.length>1&&void 0!==r[1]?r[1]:{},s=[],t)s.push({c:a,o:"=",v:t[a]});return e.next=5,this.search(s,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"search",value:function(){var e=Object(a.a)(i.a.mark((function e(t){var n,s,a=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},s="".concat(this.url,"/data/").concat(this.tblName,"?query=").concat(JSON.stringify(t)),!0===n.count&&(s+="&count=1"),n.limit&&(s+="&limit="+n.limit),n.offset&&(s+="&offset="+n.offset),n.select&&(s+="&select="+JSON.stringify(n.select)),n.order&&(s+="&order="+JSON.stringify(n.order)),s=encodeURI(s),e.next=10,fetch(s,{headers:{Authorization:"Bearer ".concat(this.key)}}).then((function(e){if(200===e.status)return e.json();var t=new CustomEvent("arachneError",{detail:{method:"search",status:e.status}});window.dispatchEvent(t)}));case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Object(a.a)(i.a.mark((function e(t){var n,s,a,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="POST",s="",a=1,Array.isArray(t)?s="".concat(this.url,"/data_batch/").concat(this.tblName):(s="".concat(this.url,"/data/").concat(this.tblName),a=t.id,null!=t.id&&(s+="/".concat(t.id),n="PATCH",delete t.id)),e.next=6,fetch(s,{method:n,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.key)},body:JSON.stringify(t)});case 6:if(201!==(r=e.sent).status||"POST"!==n){e.next=21;break}if(!Array.isArray(t)){e.next=14;break}return e.next=11,a;case 11:return e.abrupt("return",e.sent);case 14:return e.t0=parseInt,e.next=17,r.text();case 17:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 19:e.next=27;break;case 21:if(200!==r.status||"PATCH"!==n){e.next=25;break}return e.abrupt("return",a);case 25:c=new CustomEvent("arachneError",{detail:{method:"save",status:r.status}}),window.dispatchEvent(c);case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),f=new(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Object(r.a)(this,e),this.url=t,this.key=null}return Object(c.a)(e,[{key:"open",value:function(){var e=Object(a.a)(i.a.mark((function e(t,n){var s,a,r,c,l,o,u=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=u.length>2&&void 0!==u[2]?u[2]:null,e.next=3,fetch(this.url+"/session",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:t,password:n})});case 3:if(200!==(a=e.sent).status){e.next=27;break}return e.next=7,a.text();case 7:return this.key=e.sent,e.next=10,fetch(this.url+"/session",{headers:{Authorization:"Bearer ".concat(this.key)}});case 10:if(r=e.sent,200!==a.status){e.next=17;break}return e.next=14,r.json();case 14:this.user=e.sent,e.next=18;break;case 17:return e.abrupt("return",!1);case 18:if(null!=s){e.next=22;break}return e.next=21,this.tables();case 21:s=e.sent;case 22:c=Object(j.a)(s);try{for(c.s();!(l=c.n()).done;)this[o=l.value]=new x(o,this.url,this.key)}catch(i){c.e(i)}finally{c.f()}return e.abrupt("return",!0);case 27:return e.abrupt("return",!1);case 28:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"close",value:function(){var e=Object(a.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.key=null;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}()),v=n(0),g=function(e){Object(l.a)(n,e);var t=Object(o.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return Object(v.jsxs)("div",{style:{padding:"20px 40px"},children:[Object(v.jsxs)("p",{children:[Object(v.jsx)("a",{href:"https://gitlab.lrz.de/haeberlin/dmlw/-/wikis/00-Start",children:"Hilfe und Informationen"})," zu dMLW finden Sie auf unsererer ",Object(v.jsx)("a",{href:"https://gitlab.lrz.de/haeberlin/dmlw",children:"GitLab-Seite"}),"."]}),Object(v.jsxs)("p",{children:["Informationen zu der aktuellen Version von dMLW und den Ver\xe4nderungen finden Sie ",Object(v.jsx)("a",{href:"https://gitlab.lrz.de/haeberlin/dmlw/-/blob/master/CHANGELOG.md",children:"in unserem Changelog"}),"."]}),Object(v.jsxs)("p",{children:["Informationen zum W\xf6rterbuch-Projekt auf ",Object(v.jsx)("a",{href:"www.mlw.badw.de",children:"www.mlw.badw.de"})]})]})}}]),n}(d.a.Component),y=n(16),O=n.n(y),w=function(e){Object(l.a)(n,e);var t=Object(o.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).state={id:s.props.status.id,visible:!1},s.statusBox=d.a.createRef(),s.timeOutHandle=null,s}return Object(c.a)(n,[{key:"render",value:function(){var e=this;if(this.state.visible){var t="",n=null;switch(this.state.type){case"searching":n=Object(v.jsx)("div",{style:{display:"inline-block",backgroundColor:"#246EB9"},children:Object(v.jsx)(m.a,{color:"#FDFFFC",style:{padding:"3px",fontSize:"40px"},icon:b.h,spin:!0})}),t="Suche l\xe4uft...",null!=this.timeOutHandle&&clearTimeout(this.timeOutHandle);break;case"found":n=Object(v.jsx)(m.a,{color:"#FDFFFC",style:{padding:"3px",backgroundColor:"#4CB944",fontSize:"40px"},icon:b.e}),t="Eintr\xe4ge gefunden!",null!=this.timeOutHandle&&clearTimeout(this.timeOutHandle),this.timeOutHandle=setTimeout((function(){e.statusBox.current.style.opacity="0",setTimeout((function(){e.setState({visible:!1})}),500)}),3e3);break;case"notFound":n=Object(v.jsx)(m.a,{color:"#FDFFFC",style:{padding:"3px",backgroundColor:"#353535",fontSize:"40px"},icon:b.b}),t="Keine Eintr\xe4ge gefunden!",null!=this.timeOutHandle&&clearTimeout(this.timeOutHandle),this.timeOutHandle=setTimeout((function(){e.statusBox.current.style.opacity="0",setTimeout((function(){e.setState({visible:!1})}),500)}),3e3);break;case"saved":n=Object(v.jsx)(m.a,{color:"#FDFFFC",style:{padding:"3px",backgroundColor:"#4CB944",fontSize:"40px"},icon:b.c}),t="Speichern erfolgreich.",null!=this.timeOutHandle&&clearTimeout(this.timeOutHandle),this.timeOutHandle=setTimeout((function(){e.statusBox.current.style.opacity="0",setTimeout((function(){e.setState({visible:!1})}),500)}),2e3);break;case"error":n=Object(v.jsx)(m.a,{color:"#FDFFFC",style:{padding:"3px",backgroundColor:"#F06543",fontSize:"40px"},icon:b.i}),t="Ein Fehler ist aufgetreten.",null!=this.timeOutHandle&&clearTimeout(this.timeOutHandle),this.timeOutHandle=setTimeout((function(){e.statusBox.current.style.opacity="0",setTimeout((function(){e.setState({visible:!1})}),500)}),3e3);break;case"saving":t="Eintr\xe4ge werden gespeichert.",n=Object(v.jsx)("div",{style:{display:"inline-block",backgroundColor:"#246EB9"},children:Object(v.jsx)(m.a,{color:"#FDFFFC",style:{padding:"3px",fontSize:"40px"},icon:b.h,spin:!0})}),null!=this.timeOutHandle&&clearTimeout(this.timeOutHandle),this.timeOutHandle=null;break;default:t="Programm arbeitet.",n=Object(v.jsx)(m.a,{color:"#FDFFFC",style:{padding:"3px",backgroundColor:"#F5EE9E",fontSize:"40px"},icon:b.d}),null!=this.timeOutHandle&&clearTimeout(this.timeOutHandle),this.timeOutHandle=setTimeout((function(){e.statusBox.current.style.opacity="0",setTimeout((function(){e.setState({visible:!1})}),500)}),2e3)}return null!=this.state.value&&(t=this.state.value),Object(v.jsxs)("div",{ref:this.statusBox,style:{position:"fixed",bottom:"30px",left:"30px",backgroundColor:"white",boxShadow:"0 2px 5px #d9d9d9",transition:"opacity 0.5s",opacity:"1",borderRadius:"3px",overflow:"hidden",zIndex:9e6},children:[n,Object(v.jsx)("span",{style:{position:"relative",top:"-10px",padding:"10px 20px"},children:t})]})}return null}},{key:"componentDidUpdate",value:function(){this.props.status.id!=this.state.id&&this.setState({id:this.props.status.id,visible:!0,type:this.props.status.type,value:this.props.status.value})}}]),n}(d.a.Component),k=function(e){Object(l.a)(n,e);var t=Object(o.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e,t=this,n=[],s=Object(j.a)(this.props.options);try{for(s.s();!(e=s.n()).done;){var i=e.value;n.push(Object(v.jsx)("option",{value:i[0],children:i[1]},i[0]))}}catch(a){s.e(a)}finally{s.f()}return Object(v.jsxs)("div",{style:this.props.style,children:[Object(v.jsx)("select",{value:this.props.value,style:{width:"100%"},onChange:function(e){t.props.onChange(e)},children:n}),Object(v.jsx)("div",{style:{pointerEvents:"none",textAlign:"right",margin:"-26px 10px 0 0"},children:Object(v.jsx)(m.a,{color:"LightGray",icon:b.a})})]})}},{key:"componentDidUpdate",value:function(){}}]),n}(d.a.Component),S=function(e){Object(l.a)(n,e);var t=Object(o.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).state={defaultValue:s.props.value,cInput:s.props.value,items:[],currentItemId:null},s}return Object(c.a)(n,[{key:"render",value:function(){var e=this,t=[],n={position:"absolute",backgroundColor:"white",boxShadow:"0 1px 5px #d9d9d9",padding:"10px 15px",zIndex:1e6},s={};if(1===this.state.items.length&&this.state.items[0][this.props.col]===this.state.cInput)s={color:"#2364AA"},n.display="none";else if(this.state.items.length>0){var i,a=Object(j.a)(this.state.items);try{for(a.s();!(i=a.n()).done;){var r=i.value,c={};this.state.currentItemId===r.id&&(c.color="#2364AA"),t.push(Object(v.jsx)("div",{onClick:function(t){e.selectItemClick(t.target.textContent)},style:c,children:r[this.props.col]},r.id))}}catch(l){a.e(l)}finally{a.f()}}else n.display="none";return Object(v.jsxs)("div",{children:[Object(v.jsx)("input",{type:"text",style:s,onKeyDown:function(t){e.selectItem(t.keyCode)},onBlur:function(){setTimeout((function(){e.leave()}),100)},onChange:function(t){e.change(t.target.value)},value:this.state.cInput}),Object(v.jsx)("div",{style:n,children:t})]})}},{key:"selectItemClick",value:function(e){this.change(e)}},{key:"selectItem",value:function(e){38===e&&this.state.currentItemIndex>0?this.setState({currentItemIndex:this.state.currentItemIndex-1,currentItemId:this.state.items[this.state.currentItemIndex-1].id}):40===e&&this.state.currentItemIndex<this.state.items.length?this.setState({currentItemIndex:this.state.currentItemIndex+1,currentItemId:this.state.items[this.state.currentItemIndex+1].id}):13===e&&this.change(this.state.items[this.state.currentItemIndex][this.props.col])}},{key:"leave",value:function(){this.state.items.length>1&&this.setState({items:[]})}},{key:"change",value:function(e){var t=this;if(""!==e&&e!==this.state.cInput){var n={};n[this.props.col]=e+"*",f[this.props.tbl].get(n,{select:["id",this.props.col],limit:10,order:[this.props.col]}).then((function(n){n.length>0?(t.props.onChange(1===n.length&&n[0][t.props.col]===e?n[0].id:null,e),t.setState({cInput:e,items:n,currentItemIndex:0,currentItemId:n[0].id})):(t.props.onChange(null,e),t.setState({cInput:e,items:[]}))}))}else""===e&&(this.props.onChange(null,e),this.setState({cInput:"",items:[]}))}},{key:"componentDidUpdate",value:function(){this.state.defaultValue!==this.props.value&&this.setState({defaultValue:this.props.value,cInput:this.props.value})}}]),n}(d.a.Component),C=function(e){Object(l.a)(n,e);var t=Object(o.a)(n);function n(e){return Object(r.a)(this,n),t.call(this,e)}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return Object(v.jsx)("div",{className:"selectWrapper",style:this.props.style,id:this.props.children.props.id,ref:this.element,onClick:function(e){e.stopPropagation()},onMouseUp:function(t){e.props.onSelect(e.props.children,{shift:t.shiftKey,meta:t.metaKey,ctrl:t.ctrlKey})},children:this.props.children})}}]),n}(d.a.Component),_=function(e){Object(l.a)(n,e);var t=Object(o.a)(n);function n(e){var s;Object(r.a)(this,n);var i={};return(s=t.call(this,e)).props.multiSelect&&(i.userSelect="none",i.msUserSelect="none",i.WebkitUserSelect="none"),s.state={currentId:0,ids:[],style:i},s}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return Object(v.jsx)("div",{style:this.state.style,className:this.props.className,onClick:function(){e.select(null,{})},children:d.a.Children.map(this.props.children,(function(t){return Object(v.jsx)(C,{style:{boxShadow:e.state.ids.includes(t.props.id)?"0px 3px 18px var(--shadowBG)":null,transition:"box-shadow 0.3s",margin:"10px 5px"},onSelect:function(t,n){e.select(t,n)},children:t})}))})}},{key:"select",value:function(e,t){var n=this;if(null===e)this.setState({currentId:0,ids:[]}),this.props.selectCallback(null,{currentId:0,ids:[]});else{var s=e.props.id;if(this.props.multiSelect&&t.shift){var i=!1,a=[];d.a.Children.forEach(this.props.children,(function(t){0!=i||t.props.id!==s&&t.props.id!==n.state.currentId?i&&t.props.id!==s&&t.props.id!==n.state.currentId?a.push(t.props.id):i&&(i=!1,a.push(t.props.id)):(i=!0,a.push(t.props.id)),n.setState({currentId:s,ids:a}),n.props.selectCallback(e,{currentId:s,ids:a})}))}else if(this.props.multiSelect&&t.meta){var r=this.state.ids;r.includes(s)?r=r.filter((function(e){return e!=s})):r.push(s),this.setState({currentId:s,ids:r}),this.props.selectCallback(e,{currentId:s,ids:r})}else this.setState({currentId:s,ids:[s]}),this.props.selectCallback(e,{currentId:s,ids:[s]})}}}]),n}(d.a.Component);function I(e){return null==e?{__html:null}:{__html:O.a.sanitize(e.replace(/&lt;/g,"<").replace(/&gt;/g,">"),{ADD_TAGS:["aut","gruen","gelb","rot","blau"]})}}var L=function(e){Object(l.a)(n,e);var t=Object(o.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).item=e.item,s}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return Object(v.jsxs)("div",{className:"searchFields",style:{boxShadow:"rgb(217, 217, 217) 0px 0px 2px",marginRight:"10px",marginBottom:"10px",padding:"10px 15px 10px 15px",backgroundColor:"white"},children:[Object(v.jsxs)("select",{style:{width:"100px",marginRight:"0px",border:"none",color:"#284b63"},children:[Object(v.jsx)("option",{value:"lemma",children:"Lemma"}),Object(v.jsx)("option",{value:"type",children:"Typ"}),Object(v.jsx)("option",{value:"id",children:"ID"}),Object(v.jsx)("option",{value:"opus",children:"Werk"})]}),Object(v.jsxs)("select",{style:{width:"40px",marginRight:"0px",border:"none",color:"#284b63"},children:[Object(v.jsx)("option",{value:"=",children:"="}),Object(v.jsx)("option",{value:"!=",children:"!="}),Object(v.jsx)("option",{value:">",children:">"}),Object(v.jsx)("option",{value:"<",children:"<"})]}),Object(v.jsx)("input",{type:"text",placeholder:"...",style:{width:"100px",marginRight:"22px",border:"none"}}),Object(v.jsx)(m.a,{color:"LightGray",icon:b.f,onClick:function(){e.props.removeSearchFields(e.props.item.id)}})]})}}]),n}(d.a.Component),T=function(e){Object(l.a)(n,e);var t=Object(o.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).queryTxt="",s.state={nextID:1,searchFields:[{id:0,c:"lemma",o:"=",v:""}]},s.sOrder=null,s}return Object(c.a)(n,[{key:"render",value:function(){var e,t=this,n=[],s=Object(j.a)(this.state.searchFields);try{for(s.s();!(e=s.n()).done;){var i=e.value;n.push(Object(v.jsx)(L,{removeSearchFields:function(e){t.removeSearchFields(e)},item:i},i.id))}}catch(a){s.e(a)}finally{s.f()}return Object(v.jsxs)("div",{style:{gridArea:this.props.gridArea},children:[Object(v.jsxs)("div",{style:{boxShadow:"0 0 2px #d9d9d9",backgroundColor:"rgb(253, 253, 253)",margin:"0 -20px 0 -20px",padding:"12px 24px",display:"flex",flexWrap:"wrap",alignItems:"center"},children:[n,Object(v.jsx)(m.a,{color:"LightGray",icon:b.g,style:{color:"var(--mainColor)",backgroundColor:"var(--mainBG)",position:"relative",top:"-5px",fontSize:"25px"},onClick:function(){t.addSearchFields()}})]}),Object(v.jsxs)("div",{style:{float:"right",marginTop:"10px",marginRight:"20px"},children:[Object(v.jsx)("input",{type:"button",value:"suchen",onClick:function(){t.sendQuery()}}),Object(v.jsx)("span",{style:{marginLeft:"50px",marginRight:"10px"},className:"minorTxt",children:"sortieren:"}),Object(v.jsx)(k,{style:{display:"inline-block",width:"100px"},options:[['["id"]',"ID"],['["lemma", "lemma_nr", "date_sort", "date_type"]',"Datum"]],onChange:function(e){t.sOrder=JSON.parse(e.target.value)}})]})]})}},{key:"removeSearchFields",value:function(e){var t=this.state.searchFields.filter((function(t){return t.id!==e}));this.setState({searchFields:t})}},{key:"addSearchFields",value:function(){var e=this.state.searchFields;e.push({id:this.state.nextID,c:"lemma",o:"=",v:""}),this.setState({nextID:this.state.nextID+1,searchFields:e})}},{key:"sendQuery",value:function(){var e,t=[],n=document.querySelectorAll(".searchFields"),s=Object(j.a)(n);try{for(s.s();!(e=s.n()).done;){var i=e.value;""!==i.children[2].value&&t.push({c:i.children[0].value,o:i.children[1].value,v:i.children[2].value})}}catch(a){s.e(a)}finally{s.f()}t.length>0?this.props.searchQuery(t,this.sOrder):alert("Geben Sie einen Suchtext ein!")}}]),n}(d.a.Component),A=function(e){Object(l.a)(n,e);var t=Object(o.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).state={count:0,selectionDetail:{ids:[],currentId:null}},s}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return Object(v.jsxs)("div",{style:{padding:"0 10px",display:"grid",gridTemplateColumns:"auto 420px",gridTemplateRows:"min-content auto",rowGap:"15px"},children:[Object(v.jsx)(T,{searchQuery:function(t,n){e.searchQuery(t,n)},gridArea:this.state.selectionDetail.ids.length>0?"1/1/1/2":"1/1/1/3"}),Object(v.jsx)(z,{loadPage:function(t){e.loadPage(t)},currentElements:this.state.currentElements,count:this.state.count,currentPage:this.state.currentPage,pageMax:this.state.pageMax,gridArea:this.state.selectionDetail.ids.length>0?"2/1/2/2":"2/1/2/3",showDetail:function(t){e.setState({selectionDetail:t.selection,itemDetail:t.item})}}),this.state.selectionDetail.ids.length>0?Object(v.jsx)(F,{status:this.props.status,close:function(){e.setState({itemDetail:null})},selection:this.state.selectionDetail,item:this.state.itemDetail}):""]})}},{key:"searchQuery",value:function(){var e=Object(a.a)(i.a.mark((function e(t,n){var s,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.status("searching"),e.next=3,f.zettel.search(t,{count:!0,order:n});case 3:return s=e.sent,e.next=6,f.zettel.search(t,{limit:50,order:n});case 6:a=e.sent,console.log(s),s[0].count>1?this.props.status("found","".concat(s[0].count," Eintr\xe4ge gefunden.")):1===s[0].count?this.props.status("found","1 Eintrag gefunden."):this.props.status("notFound"),this.setState({query:t,queryOrder:n,count:s[0].count,pageMax:Math.floor(s[0].count/50)+1,currentPage:1,currentElements:a,selectionDetail:{ids:[]}});case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadPage",value:function(){var e=Object(a.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.state.currentPage+t>0&&this.state.currentPage+t<=this.state.pageMax)){e.next=5;break}return e.next=3,f.zettel.search(this.state.query,{limit:50,offset:50*(this.state.currentPage+t-1),order:this.state.queryOrder});case 3:n=e.sent,this.setState({currentPage:this.state.currentPage+t,currentElements:n});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(d.a.Component),z=function(e){Object(l.a)(n,e);var t=Object(o.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).state={selection:{currentId:null,ids:[]}},s}return Object(c.a)(n,[{key:"render",value:function(){var e=this;if(this.props.count>0){var t,n=[],s=Object(j.a)(this.props.currentElements);try{for(s.s();!(t=s.n()).done;){var i=t.value;n.push(Object(v.jsx)(D,{testProp:i.id+"_test",id:i.id,item:i},i.id))}}catch(a){s.e(a)}finally{s.f()}return Object(v.jsxs)("div",{style:{gridArea:this.props.gridArea,padding:"0 10px"},children:[Object(v.jsxs)("div",{id:"navItems",children:[Object(v.jsx)("span",{onClick:function(){e.props.loadPage(-1)},children:"<"}),Object(v.jsxs)("span",{id:"navSelect",children:[this.props.currentPage," von ",this.props.pageMax]}),Object(v.jsx)("span",{onClick:function(){e.props.loadPage(1)},children:">"})]}),Object(v.jsx)(_,{multiSelect:!0,className:"zettel_box",selectCallback:function(t,n){e.selectCallback(t,n)},children:n})]})}return null}},{key:"selectCallback",value:function(e,t){e?this.props.showDetail({selection:t,item:e.props.item}):this.props.showDetail({selection:t,item:null})}}]),n}(d.a.Component),D=function(e){Object(l.a)(n,e);var t=Object(o.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props.item,t={width:"500px"};if(null!=e.img_path){var n="";return 0===e.in_use?n+="zettel_img no_use":n+="zettel_img in_use",Object(v.jsxs)("div",{className:"zettel",id:e.id,style:t,onClick:function(){},children:[Object(v.jsx)("img",{className:n,src:e.img_path+".jpg"}),Object(v.jsx)("div",{className:"zettel_msg"}),Object(v.jsxs)("div",{className:"zettel_menu",children:[Object(v.jsx)("span",{style:{float:"left"},dangerouslySetInnerHTML:I(e.lemma_display)}),Object(v.jsx)("span",{style:{float:"right"},dangerouslySetInnerHTML:I(e.opus)})]})]})}return Object(v.jsx)("div",{className:"zettel",id:e.id,style:t,onClick:function(){},children:Object(v.jsxs)("div",{className:"digitalZettel",children:[Object(v.jsx)("div",{className:"digitalZettelLemma",dangerouslySetInnerHTML:I(e.lemma_display)}),Object(v.jsx)("div",{className:"digitalZettelDate",dangerouslySetInnerHTML:I(e.date_display)}),Object(v.jsx)("div",{className:"digitalZettelWork",dangerouslySetInnerHTML:I(e.opus)}),Object(v.jsx)("div",{className:"digitalZettelText",dangerouslySetInnerHTML:I(e.txt)})]})})}}]),n}(d.a.Component),F=function(e){Object(l.a)(n,e);var t=Object(o.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).state={addLemma:!1,item:s.props.item,ressources:[],batchType:1,newLemma_Lemma:"",newLemma_LemmaDisplay:"",batch_lemma_id:null,batch_work_id:null,batch_type:null},s}return Object(c.a)(n,[{key:"render",value:function(){var e=this,t={position:"fixed",top:0,bottom:0,right:0,width:"400px",padding:"10px 15px",backgroundColor:"white",boxShadow:"rgb(60, 110, 113) 0px 0px 2px"};if(this.state.addLemma)return Object(v.jsxs)("div",{style:t,children:[Object(v.jsx)("div",{style:{margin:"50px 0 10px 0"},children:Object(v.jsxs)("p",{children:[Object(v.jsx)("b",{children:"Soll ein neues Lemma erstellt werden?"}),Object(v.jsx)("br",{}),Object(v.jsxs)("span",{className:"minorTxt",children:[Object(v.jsx)("a",{href:"https://gitlab.lrz.de/haeberlin/dmlw/-/wikis/10-WikiHow:-Neues-Lemma-erstellen#3-maske-ausf\xfcllen",target:"_blank",children:"Hier"})," finden Sie Informationen zum Erstellen neuer Lemmata."]})]})}),Object(v.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"150px auto",gridTemplateRows:"1fr 1fr",rowGap:"10px",margin:"50px 0"},children:[Object(v.jsx)("div",{style:{gridArea:"1/1/1/2"},children:"Lemma:"}),Object(v.jsx)("div",{style:{gridArea:"1/2/1/3"},children:Object(v.jsx)("input",{type:"text",value:this.state.newLemma_Lemma,onChange:function(t){e.setState({newLemma_Lemma:t.target.value})}})}),Object(v.jsx)("div",{style:{gridArea:"2/1/2/2"},children:"Lemma-Anzeige:"}),Object(v.jsx)("div",{style:{gridArea:"2/2/2/3"},children:Object(v.jsx)("input",{type:"text",value:this.state.newLemma_LemmaDisplay,onChange:function(t){e.setState({newLemma_LemmaDisplay:t.target.value})}})})]}),Object(v.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"150px auto",gridTemplateRows:"1fr 1fr 1fr 1fr",rowGap:"10px",margin:"50px 0"},children:[Object(v.jsx)("div",{style:{gridArea:"1/1/1/2"},children:"Zahlzeichen:"}),Object(v.jsx)("div",{style:{gridArea:"1/2/1/3"},children:Object(v.jsx)(k,{options:[[0,""],[1,1],[2,2],[3,3],[4,4],[5,5],[6,6]],onChange:function(t){e.setState({newLemma_Homonym:t.target.value})}})}),Object(v.jsx)("div",{style:{gridArea:"2/1/2/2"},children:"im W\xf6rterbuch:"}),Object(v.jsx)("div",{style:{gridArea:"2/2/2/3"},children:Object(v.jsx)(k,{options:[[0,"Nein"],[1,"Ja"]],onChange:function(t){e.setState({newLemma_MLW:t.target.value})}})}),Object(v.jsx)("div",{style:{gridArea:"3/1/3/2"},children:"Stern:"}),Object(v.jsx)("div",{style:{gridArea:"3/2/3/3"},children:Object(v.jsx)(k,{options:[[0,"Nein"],[1,"Ja"]],onChange:function(t){e.setState({newLemma_Stern:t.target.value})}})}),Object(v.jsx)("div",{style:{gridArea:"4/1/4/2"},children:"Fragezeichen:"}),Object(v.jsx)("div",{style:{gridArea:"4/2/4/3"},children:Object(v.jsx)(k,{options:[[0,"Nein"],[1,"Ja"]],onChange:function(t){e.setState({newLemma_LemmaFrage:t.target.value})}})})]}),Object(v.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"150px auto",gridTemplateRows:"1fr",rowGap:"10px",margin:"50px 0"},children:[Object(v.jsx)("div",{style:{gridArea:"1/1/1/2"},children:Object(v.jsx)("input",{type:"button",value:"erstellen",onClick:Object(a.a)(i.a.mark((function t(){var n,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(""===e.state.newLemma_Lemma||e.state.newLemma_Lemma.indexOf(" ")>-1)){t.next=4;break}e.props.status("error","Bitte ein g\xfcltiges Lemma eintragen!"),t.next=17;break;case 4:if(""!==e.state.newLemma_LemmaDisplay){t.next=8;break}e.props.status("error","Bitte tragen Sie eine g\xfcltige Lemma-Anzeige ein!"),t.next=17;break;case 8:return n={lemma:e.state.newLemma_Lemma,lemma_display:e.state.newLemma_LemmaDisplay,MLW:e.state.newLemma_MLW,Fragezeichen:e.state.newLemma_LemmaFrage,Stern:e.state.newLemma_Stern},e.state.newLemma_Homonym>0&&(n.lemma_nr=e.state.newLemma_Homonym),t.next=12,f.lemma.save(n);case 12:s=t.sent,e.props.status("saved","Neue ID: ".concat(s)),e.setItem("lemma_ac",e.state.newLemma_Lemma),e.setItem("lemma_id",s),e.setState({addLemma:!1});case 17:case"end":return t.stop()}}),t)})))})}),Object(v.jsx)("div",{style:{gridArea:"1/2/1/3"},children:Object(v.jsx)("input",{type:"button",value:"abbrechen",onClick:function(){e.setState({addLemma:!1})}})})]})]});if(1===this.props.selection.ids.length){var n=[];if(this.state.ressources.length>0){var s,r=-1,c=Object(j.a)(this.state.ressources);try{for(c.s();!(s=c.n()).done;){var l=s.value;r++;var o=l.url;""===o&&(o="/site/viewer/".concat(l.id)),n.push(Object(v.jsx)("div",{children:Object(v.jsx)("a",{href:o,children:l.label})},r))}}catch(h){c.e(h)}finally{c.f()}}var u="",d={borderTop:"1px solid #f2f2f2",paddingTop:"30px",display:"grid",gridTemplateColumns:"150px auto",gridTemplateRows:"1fr",rowGap:"10px",margin:"10px 0 30px 0"};return 9===this.state.item.date_type&&(d.gridTemplateRows="1fr 1fr 1fr 1fr",u=[Object(v.jsx)("div",{style:{gridArea:"2/1/2/3"},children:Object(v.jsxs)("span",{className:"minorTxt",children:[Object(v.jsx)("b",{children:"Achtung:"})," Dieser Zettel ben\xf6tigt eine eigene Datierung."]})},"1"),Object(v.jsx)("div",{style:{gridArea:"3/1/3/2"},children:"Eigenes Sortier-datum:"},"2"),Object(v.jsx)("div",{style:{gridArea:"3/2/3/3"},children:Object(v.jsx)("input",{type:"text"})},"3"),Object(v.jsx)("div",{style:{gridArea:"4/1/4/2"},children:"Eigenes Anzeigedatum:"},"4"),Object(v.jsx)("div",{style:{gridArea:"4/2/4/3"},children:Object(v.jsx)("input",{type:"text"})},"5")]),Object(v.jsxs)("div",{style:t,children:[Object(v.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"150px auto",gridTemplateRows:"1fr 5px 1fr 1fr 1fr",rowGap:"10px",margin:"35px 0 30px 0"},children:[Object(v.jsx)("div",{className:"minorTxt",style:{gridArea:"1/1/1/3",textAlign:"right"},children:Object(v.jsxs)("i",{children:["ID ",this.state.item.id]})}),Object(v.jsx)("div",{style:{gridArea:"3/1/3/2"},children:"Zetteltyp:"}),Object(v.jsx)("div",{style:{gridArea:"3/2/3/3"},children:Object(v.jsx)(k,{style:{width:"86%"},value:this.state.item.type,options:[[0,"..."],[1,"verzettelt"],[2,"Exzerpt"],[3,"Index"],[4,"Literatur"]],onChange:function(t){e.setItem("type",parseInt(t.target.value))}})}),Object(v.jsx)("div",{style:{gridArea:"4/1/4/2"},children:"Lemma:"}),Object(v.jsx)("div",{style:{gridArea:"4/2/4/3"},children:Object(v.jsx)(S,{onChange:function(t,n){e.setItem("lemma_id",t),e.setState({newLemma_Lemma:n,newLemma_LemmaDisplay:n})},value:this.state.item.lemma_ac,tbl:"lemma",col:"lemma_ac"})}),4!==this.state.item.type?Object(v.jsx)("div",{style:{gridArea:"5/1/5/2"},children:"Werk:"}):null,4!==this.state.item.type?Object(v.jsx)("div",{style:{gridArea:"5/2/5/3"},children:Object(v.jsx)(S,{value:this.state.item.ac_web,tbl:"work",col:"ac_web",onChange:function(t,n){e.setItem("work_id",t)}})}):null]}),4!==this.state.item.type?Object(v.jsxs)("div",{style:d,children:[Object(v.jsx)("div",{style:{gridArea:"1/1/1/2"},children:"Datierung:"}),Object(v.jsx)("div",{style:{gridArea:"1/2/1/3"},children:Object(v.jsx)("span",{dangerouslySetInnerHTML:I(this.state.item.date_display)})}),u]}):null,this.state.ressources.length>0?Object(v.jsxs)("div",{style:{borderTop:"1px solid #f2f2f2",paddingTop:"30px",display:"grid",gridTemplateColumns:"150px auto",gridTemplateRows:"1fr",rowGap:"10px",margin:"10px 0 30px 0"},children:[Object(v.jsx)("div",{style:{gridArea:"1/1/1/2"},children:"Ressourcen:"}),Object(v.jsx)("div",{style:{gridArea:"1/2/1/3"},children:n})]}):null,Object(v.jsx)("div",{style:{borderTop:"1px solid #f2f2f2",paddingTop:"30px",display:"grid",gridTemplateColumns:"150px auto",gridTemplateRows:"1fr",rowGap:"10px",margin:"10px 0 30px 0"},children:Object(v.jsx)("div",{style:{gridArea:"1/2/1/3"},children:Object(v.jsx)("input",{type:"button",value:"speichern",onClick:Object(a.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n={id:e.state.item.id,type:e.state.item.type,work_id:e.state.item.work_id},null!=e.state.item.lemma_id||""==e.state.newLemma_Lemma){t.next=9;break}return e.props.status("saving"),t.next=5,f.zettel.save(n);case 5:e.props.status("saved"),e.setState({addLemma:!0}),t.next=14;break;case 9:return n.lemma_id=e.state.item.lemma_id,e.props.status("saving"),t.next=13,f.zettel.save(n);case 13:e.props.status("saved");case 14:case"end":return t.stop()}}),t)})))})})})]})}var p="";switch(this.state.batchType){case 1:p=Object(v.jsx)(S,{onChange:function(t,n){e.setState({batch_lemma_id:t})},value:"",tbl:"lemma",col:"lemma_ac"});break;case 2:p=Object(v.jsx)(S,{value:"",tbl:"work",col:"ac_web",onChange:function(t,n){e.setState({batch_work_id:t})}});break;case 3:p=Object(v.jsx)(k,{style:{width:"86%"},options:[[0,"..."],[1,"verzettelt"],[2,"Exzerpt"],[3,"Index"],[4,"Literatur"]],onChange:function(t){e.setState({batch_type:t.target.value})}})}return Object(v.jsx)("div",{style:t,children:Object(v.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"150px auto",gridTemplateRows:"1fr 25px 1fr 15px 1fr",rowGap:"10px",margin:"35px 0 30px 0"},children:[Object(v.jsx)("span",{style:{gridArea:"1/1/1/3",textAlign:"right"},className:"minorTxt",children:Object(v.jsxs)("i",{children:[this.props.selection.ids.length," Zettel"]})}),Object(v.jsx)("div",{style:{gridArea:"3/1/3/2"},children:Object(v.jsx)(k,{style:{width:"86%"},options:[[1,"Lemma"],[2,"Zitiertitel"],[3,"Zettel-Typ"]],onChange:function(t){e.setState({batchType:parseInt(t.target.value)})}})}),Object(v.jsx)("div",{style:{gridArea:"3/2/3/3"},children:p}),Object(v.jsx)("div",{style:{gridArea:"5/2/5/3"},children:Object(v.jsx)("input",{type:"button",value:"f\xfcr alle \xfcbernehmen",onClick:Object(a.a)(i.a.mark((function t(){var n,s,a,r,c,l,o,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=!1,s="",a="",1===e.state.batchType&&null!=e.state.batch_lemma_id?(a="lemma_id",s=e.state.batch_lemma_id):2===e.state.batchType&&null!=e.state.batch_work_id?(a="work_id",s=e.state.batch_work_id):3===e.state.batchType&&null!=e.state.batch_type?(a="type",s=e.state.batch_type):(n=!0,e.props.status("error","Bitte tragen Sie einen g\xfcltigen Wert ein.")),!1!==n){t.next=12;break}r=[],c=Object(j.a)(e.props.selection.ids);try{for(c.s();!(l=c.n()).done;)o=l.value,(u={id:o})[a]=s,r.push(u)}catch(h){c.e(h)}finally{c.f()}return e.props.status("saving"),t.next=11,f.zettel.save(r);case 11:e.props.status("saved");case 12:case"end":return t.stop()}}),t)})))})})]})})}},{key:"componentDidMount",value:function(){var e=this;this.state.item.work_id>0&&f.edition.get({work_id:this.state.item.work_id}).then((function(t){e.setState({ressources:t})})).catch((function(e){throw e}))}},{key:"setItem",value:function(e,t){var n=this.state.item;n[e]!==t&&(n[e]=t,this.setState({item:n}))}},{key:"componentDidUpdate",value:function(){var e=this;this.state.item.id!==this.props.item.id&&(this.props.item.work_id>0?f.edition.get({work_id:this.props.item.work_id}).then((function(t){e.setState({addLemma:!1,item:e.props.item,ressources:t})})).catch((function(e){throw e})):this.setState({addLemma:!1,item:this.props.item,ressources:[]}))}}]),n}(d.a.Component),E="#3c6e71",H=function(e){Object(l.a)(n,e);var t=Object(o.a)(n);function n(e){var s;Object(r.a)(this,n);return(s=t.call(this,e)).state={menuEntries:{"Zettel- und Wortmaterial":{visible:!1,items:{"Zettel-Datenbank":"zettel"}},Einstellungen:{visible:!1,items:{Hilfe:"help",abmelden:"logout"}}},currentSubmenu:null},s}return Object(c.a)(n,[{key:"render",value:function(){var e=this,t={position:"fixed",top:0,left:0,boxShadow:"0 0 2px ".concat(E),padding:"10px 15px",zIndex:1e6,backgroundColor:"white"},n=[];if(1===this.props.onTop){t.right=0,t.display="flex",t.position="absolute",t.justifyContent="space-evenly";var s=-1,i=function(t){s++;var i="";if(e.state.currentSubmenu===t){var a=[],r=function(n){a.push(Object(v.jsx)("div",{style:{margin:"10px 0 10px 10px"},onClick:function(){e.setState({currentSubmenu:""}),e.props.loadMain(e.state.menuEntries[t].items[n])},children:Object(v.jsx)("span",{style:{cursor:"pointer"},children:n})},n))};for(var c in e.state.menuEntries[t].items)r(c);i=Object(v.jsx)("div",{style:{position:"absolute",boxShadow:"rgb(60, 110, 113) 0px 0px 2px",backgroundColor:"white",top:"43px",padding:"10px 25px",marginLeft:"-10px"},children:a},a)}n.push(Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{style:{cursor:"pointer"},onClick:function(){e.setState({currentSubmenu:t})},children:t}),i]},s))};for(var a in this.state.menuEntries)i(a)}else{t.transition="left 0.5s",this.state.hidden&&(t.left="-290px"),t.bottom="0",t.width="300px";var r=-1,c=function(t){n.push(Object(v.jsx)("div",{style:{marginTop:"15px",cursor:"default"},children:t},t));var s=function(s){r++,n.push(Object(v.jsx)("div",{style:{marginLeft:"15px",display:"inline-block",cursor:"pointer"},onClick:function(){e.props.loadMain(e.state.menuEntries[t].items[s])},children:s},s)),n.push(Object(v.jsx)("br",{},r))};for(var i in e.state.menuEntries[t].items)s(i)};for(var l in this.state.menuEntries)c(l)}return Object(v.jsx)("nav",{className:"mainMenu",style:t,onClick:function(){1!==e.props.onTop&&(e.state.hidden?e.setState({hidden:!1}):e.setState({hidden:!0}))},children:n})}}]),n}(d.a.Component),N=function(e){Object(l.a)(n,e);var t=Object(o.a)(n);function n(e){var s;Object(r.a)(this,n);s=t.call(this,e);var i=1;return window.innerWidth<1e3&&(i=0),s.state={login:!1,res:null,mainMenuPos:i,status:{}},window.addEventListener("resize",(function(){window.innerWidth<1e3?s.setState({mainMenuPos:0}):s.setState({mainMenuPos:1})})),window.addEventListener("arachneError",(function(e){401===e.detail.status?s.newStatus("error","Der Server hat die Zugangsdaten abgelehnt. Melden Sie sich neu an!"):s.newStatus("error","Die Verbindung zum Server ist unterbrochen.")})),s}return Object(c.a)(n,[{key:"loadMain",value:function(e){"logout"===e?(f.close(),this.setState({login:!1,res:null})):this.setState({res:e})}},{key:"render",value:function(){var e=this;if(this.state.login){var t=null;switch(this.state.res){case null:break;case"help":t=Object(v.jsx)(g,{});break;case"zettel":t=Object(v.jsx)(A,{status:function(t,n){e.newStatus(t,n)}});break;default:throw new Error("ARGOS: unknown res in 'loadMain': ".concat(this.state.res))}return Object(v.jsxs)("div",{style:1===this.state.mainMenuPos?{marginTop:"60px"}:{marginLeft:"40px"},children:[Object(v.jsx)(H,{onTop:this.state.mainMenuPos,loadMain:function(t){e.loadMain(t)}}),t,Object(v.jsx)(w,{status:this.state.status})]})}return Object(v.jsxs)("div",{style:{position:"absolute",display:"grid",height:"100%",width:"100%",gridTemplateColumns:"1fr 2fr 1fr",gridTemplateRows:"1fr 2fr 1fr"},children:[Object(v.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gridTemplateRows:"auto 100px 50px 50px 50px auto",gridColumn:"2",gridRow:"2",padding:"10px 15px",borderRadius:"5px",boxShadow:"0 1.2px 6px ".concat(E)},children:[Object(v.jsx)("h1",{style:{textAlign:"center",gridArea:"2/2/2/4"},children:"dMLW"}),Object(v.jsx)("span",{style:{gridArea:"3/2/3/3"},children:"Email:"}),Object(v.jsx)("div",{style:{gridArea:"3/3/3/4"},children:Object(v.jsx)("input",{type:"text",name:"email",style:{width:"300px"}})}),Object(v.jsx)("span",{style:{gridArea:"4/2/4/3"},children:"Passwort:"}),Object(v.jsx)("div",{style:{gridArea:"4/3/4/4"},children:Object(v.jsx)("input",{type:"password",name:"password",style:{width:"300px"}})}),Object(v.jsx)("div",{style:{gridArea:"5/3/5/4"},children:Object(v.jsx)("input",{type:"submit",value:"anmelden",onClick:function(){e.login()}})})]}),Object(v.jsx)("div",{className:"cat",children:Object(v.jsx)(m.a,{color:"black",icon:b.b})})]})}},{key:"login",value:function(){var e=Object(a.a)(i.a.mark((function e(){var t,n,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.querySelector("input[name=email]").value,n=document.querySelector("input[name=password]").value,s=["edition","lemma","work","zettel"],e.t0=""!==t&&""!==n,!e.t0){e.next=8;break}return e.next=7,f.open(t,n,s);case 7:e.t0=e.sent;case 8:if(!e.t0){e.next=12;break}this.setState({login:!0}),e.next=13;break;case 12:alert("Geben Sie eine g\xfcltige Email-Adresse und Passwort ein!");case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"newStatus",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.setState({status:{id:Date.now(),visible:!0,type:e,value:t}})}}]),n}(d.a.Component);h.a.render(Object(v.jsx)(N,{}),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.eb676ec5.chunk.js.map