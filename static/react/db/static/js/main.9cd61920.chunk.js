(this["webpackJsonpmlw-react"]=this["webpackJsonpmlw-react"]||[]).push([[0],{200:function(e,t,s){},607:function(e,t,s){"use strict";s.r(t);var a=s(1),r=s.n(a),n=s(6),i=s(3),c=s(4),o=s(8),l=s(7),u=s(5),d=s.n(u),p=s(28),h=s.n(p),j=s(10),b=s(11),x=(s(200),s(9)),m=function(){function e(t,s,a){Object(i.a)(this,e),this.tblName=t,this.url=s,this.key=a}return Object(c.a)(e,[{key:"getAll",value:function(){var e=Object(n.a)(r.a.mark((function e(){var t,s=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},e.next=3,this.search([{c:"id",o:">",v:0}],t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(n.a)(r.a.mark((function e(t){var s,a,n,i=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n in s=i.length>1&&void 0!==i[1]?i[1]:{},a=[],t)a.push({c:n,o:"=",v:t[n]});return e.next=5,this.search(a,s);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"search",value:function(){var e=Object(n.a)(r.a.mark((function e(t){var s,a,n=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.length>1&&void 0!==n[1]?n[1]:{},a="".concat(this.url,"/data/").concat(this.tblName,"?query=").concat(JSON.stringify(t)),!0===s.count&&(a+="&count=1"),s.limit&&(a+="&limit="+s.limit),s.offset&&(a+="&offset="+s.offset),s.select&&(a+="&select="+JSON.stringify(s.select)),s.order&&(a+="&order="+JSON.stringify(s.order)),a=encodeURI(a),e.next=10,fetch(a,{headers:{Authorization:"Bearer ".concat(this.key)}}).then((function(e){if(200===e.status)return e.json();var t=new CustomEvent("arachneError",{detail:{method:"search",status:e.status}});window.dispatchEvent(t)}));case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(n.a)(r.a.mark((function e(t){var s,a,n,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="".concat(this.url,"/data/").concat(this.tblName,"/").concat(t),a=null,Array.isArray(t)&&(s="".concat(this.url,"/data_batch/").concat(this.tblName),a=JSON.stringify(t)),e.next=5,fetch(s,{method:"delete",headers:{Authorization:"Bearer ".concat(this.key),"Content-Type":"application/json"},body:a});case 5:if(200!==(n=e.sent).status){e.next=10;break}return e.abrupt("return",!0);case 10:i=new CustomEvent("arachneError",{detail:{method:"delete",status:n.status}}),window.dispatchEvent(i);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Object(n.a)(r.a.mark((function e(t){var s,a,n,i,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="POST",a="",n=1,Array.isArray(t)?a="".concat(this.url,"/data_batch/").concat(this.tblName):(a="".concat(this.url,"/data/").concat(this.tblName),n=t.id,null!=t.id&&(a+="/".concat(t.id),s="PATCH",delete t.id)),e.next=6,fetch(a,{method:s,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.key)},body:JSON.stringify(t)});case 6:if(201!==(i=e.sent).status||"POST"!==s){e.next=21;break}if(!Array.isArray(t)){e.next=14;break}return e.next=11,n;case 11:return e.abrupt("return",e.sent);case 14:return e.t0=parseInt,e.next=17,i.text();case 17:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 19:e.next=27;break;case 21:if(200!==i.status||"PATCH"!==s){e.next=25;break}return e.abrupt("return",n);case 25:c=new CustomEvent("arachneError",{detail:{method:"save",status:i.status}}),window.dispatchEvent(c);case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),v=new(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Object(i.a)(this,e),""===t&&"http://localhost:3000"===window.location.origin?this.url="http://localhost:8080":this.url=t,this.key=null,this.me=null;var s=localStorage.getItem("dmlwOptions");s?(s=JSON.parse(s),this.options={z_width:s.z_width?s.z_width:500,z_height:s.z_height?s.z_height:350}):this.options={z_width:500,z_height:350},console.log(this.options)}return Object(c.a)(e,[{key:"setOptions",value:function(e,t){this.options[e]=t,localStorage.setItem("dmlwOptions",JSON.stringify(this.options))}},{key:"login",value:function(){var e=Object(n.a)(r.a.mark((function e(t,s){var a,n,i=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>2&&void 0!==i[2]?i[2]:null,e.next=3,fetch(this.url+"/session",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:t,password:s})});case 3:if(200!==(n=e.sent).status){e.next=11;break}return e.next=7,n.text();case 7:return this.key=e.sent,e.abrupt("return",this.open(a));case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,this)})));return function(t,s){return e.apply(this,arguments)}}()},{key:"open",value:function(){var e=Object(n.a)(r.a.mark((function e(){var t,s,a,n,i,c=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:null,e.next=3,this.getUser();case 3:if(!(s=e.sent)){e.next=10;break}this.me=s,this.me.selectKey="ctrl",navigator.appVersion.indexOf("Mac")>-1&&(this.me.selectKey="cmd"),e.next=11;break;case 10:return e.abrupt("return",!1);case 11:if(null!=t){e.next=15;break}return e.next=14,this.tables();case 14:t=e.sent;case 15:a=Object(x.a)(t);try{for(a.s();!(n=a.n()).done;)this[i=n.value]=new m(i,this.url,this.key)}catch(r){a.e(r)}finally{a.f()}return e.abrupt("return",!0);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"close",value:function(){var e=Object(n.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.key=null;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUser",value:function(){var e=Object(n.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.url+"/session",{headers:{Authorization:"Bearer ".concat(this.key)}});case 2:if(200!==(t=e.sent).status){e.next=9;break}return e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createAccount",value:function(){var e=Object(n.a)(r.a.mark((function e(t){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.url+"/data/user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return s=e.sent,e.abrupt("return",s.status);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"importScans",value:function(){var e=Object(n.a)(r.a.mark((function e(t){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.url+"/file/scan",{method:"POST",headers:{Authorization:"Bearer ".concat(this.key)},body:t});case 2:return s=e.sent,e.t0=s.status,e.next=6,s.json();case 6:return e.t1=e.sent,e.abrupt("return",{status:e.t0,body:e.t1});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"importZettel",value:function(){var e=Object(n.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.url+"/file/zettel",{method:"POST",body:t,headers:{Authorization:"Bearer ".concat(this.key)}});case 2:if(201==e.sent.status){e.next=6;break}throw alert("Ein Fehler ist aufgetreten! Bitte \xfcberpr\xfcfen Sie die hochgeladenen Zettel."),"Error: Fehler beim Zettel-Upload!";case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"exec",value:function(){var e=Object(n.a)(r.a.mark((function e(t){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.url+"/exec/"+t,{method:"GET",headers:{Authorization:"Bearer ".concat(this.key)}});case 2:return s=e.sent,e.abrupt("return",s.status);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"access",value:function(e){var t=this;return!!this.me&&("string"===typeof e&&(e=JSON.parse('["'.concat(e,'"]'))),e.every((function(e){return t.me.access.includes(e)})))}},{key:"getScan",value:function(){var e=Object(n.a)(r.a.mark((function e(t){var s,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.url,"/file/scan/").concat(t),{headers:{Authorization:"Bearer ".concat(this.key)}}).then((function(e){return e.blob()}));case 2:return s=e.sent,a=URL.createObjectURL(s),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),g=s(189),f=s.n(g),O=s(0),y=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={id:a.props.itemId,c:a.props.c,o:a.props.o,v:a.props.v},a.item=e.item,a}return Object(c.a)(s,[{key:"render",value:function(){var e,t=this,s=[],a=Object(x.a)(this.props.searchOptions);try{for(a.s();!(e=a.n()).done;){var r=e.value;s.push(Object(O.jsx)("option",{value:r[0],children:r[1]},r[0]))}}catch(n){a.e(n)}finally{a.f()}return Object(O.jsxs)("div",{className:"searchFields mainColors",style:{boxShadow:"rgb(217, 217, 217) 0px 0px 2px",marginRight:"10px",marginBottom:"10px",padding:"10px 15px 10px 15px"},children:[Object(O.jsx)("select",{style:{width:"100px",marginRight:"0px",border:"none",color:"#284b63"},value:this.state.c,onChange:function(e){t.setState({c:e.target.value})},children:s}),Object(O.jsxs)("select",{style:{width:"40px",marginRight:"0px",border:"none",color:"#284b63"},value:this.state.o,onChange:function(e){t.setState({o:e.target.value})},children:[Object(O.jsx)("option",{value:"=",children:"="}),Object(O.jsx)("option",{value:"!=",children:"\u2260"}),Object(O.jsx)("option",{value:">",children:">"}),Object(O.jsx)("option",{value:">=",children:"\u2265"}),Object(O.jsx)("option",{value:"<",children:"<"}),Object(O.jsx)("option",{value:"<=",children:"\u2264"})]}),Object(O.jsx)("input",{type:"text",placeholder:"...",style:{width:"100px",marginRight:"22px",border:"none"},onKeyUp:function(e){13===e.keyCode&&t.props.clickButton()},value:this.state.v,onChange:function(e){t.setState({v:e.target.value})}}),Object(O.jsx)(j.a,{color:"LightGray",icon:b.j,onClick:function(){t.props.removeSearchFields(t.props.itemId)}})]})}},{key:"componentDidUpdate",value:function(e,t){t.c==this.state.c&&t.o==this.state.o&&t.v==this.state.v||this.props.changeItem(this.state)}}]),s}(d.a.Component),w=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).queryTxt="",a.state={sOrder:null,nextID:1,searchFields:[]},a}return Object(c.a)(s,[{key:"render",value:function(){var e,t=this,s=[],a=Object(x.a)(this.state.searchFields);try{for(a.s();!(e=a.n()).done;){var r=e.value;s.push(Object(O.jsx)(y,{searchOptions:this.props.searchOptions,removeSearchFields:function(e){t.removeSearchFields(e)},itemId:r.id,c:r.c,o:r.o,v:r.v,clickButton:function(){t.sendQuery()},changeItem:function(e){t.setState({searchFields:t.state.searchFields.map((function(t){return t.id===e.id?e:t}))})}},r.id))}}catch(n){a.e(n)}finally{a.f()}return Object(O.jsxs)("div",{style:{gridArea:this.props.gridArea},children:[Object(O.jsxs)("div",{className:"searchBox",children:[s,Object(O.jsx)(j.a,{color:"LightGray",icon:b.l,style:{color:"var(--mainColor)",position:"relative",top:"-5px",fontSize:"25px"},onClick:function(){t.addSearchFields()}})]}),Object(O.jsxs)("div",{style:{float:"right",marginTop:"10px",marginRight:"20px"},children:[Object(O.jsx)("input",{type:"button",value:"suchen",onClick:function(){t.sendQuery()}}),Object(O.jsx)("span",{style:{marginLeft:"50px",marginRight:"10px"},className:"minorTxt",children:"sortieren:"}),Object(O.jsx)(_,{style:{display:"inline-block",width:"100px"},options:this.props.sortOptions,onChange:function(e){t.setState({sOrder:JSON.parse(e.target.value)})}})]})]})}},{key:"componentDidMount",value:function(){var e=sessionStorage.getItem("searchBox_"+this.props.boxName);this.props.setupItems?this.setState({forceSearch:!0,searchFields:this.props.setupItems,nextID:this.props.setupItems.length}):e?(e=JSON.parse(e),this.setState({forceSearch:!0,searchFields:e[0],nextID:e[1],sOrder:e[2]})):this.setState({searchFields:[{id:0,c:"lemma",o:"=",v:""}]})}},{key:"componentDidUpdate",value:function(e){if(this.state.forceSearch)this.sendQuery(),this.setState({forceSearch:!1});else if(e.setupItems!=this.props.setupItems){var t=this.state.nextID,s=this.props.setupItems.map((function(e){return e.id=t,t++,e}));this.setState({forceSearch:!0,searchFields:s,nextID:t+1})}}},{key:"removeSearchFields",value:function(e){var t=this.state.searchFields.filter((function(t){return t.id!==e}));this.setState({searchFields:t})}},{key:"addSearchFields",value:function(){var e=this.state.searchFields;e.push({id:this.state.nextID,c:"lemma",o:"=",v:""}),this.setState({nextID:this.state.nextID+1,searchFields:e})}},{key:"sendQuery",value:function(){var e,t=[],s=document.querySelectorAll(".searchFields"),a=Object(x.a)(s);try{for(a.s();!(e=a.n()).done;){var r=e.value;""!==r.children[2].value&&t.push({c:r.children[0].value,o:r.children[1].value,v:r.children[2].value})}}catch(n){a.e(n)}finally{a.f()}t.length>0?(sessionStorage.setItem("searchBox_"+this.props.boxName,JSON.stringify([this.state.searchFields,this.state.nextID,this.state.sOrder])),this.props.searchQuery(t,this.state.sOrder)):alert("Geben Sie einen Suchtext ein!")}}]),s}(d.a.Component),k=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={currentPage:a.props.currentPage},a}return Object(c.a)(s,[{key:"render",value:function(){var e=this;return Object(O.jsxs)("div",{id:"navBox",children:[Object(O.jsx)("div",{id:"navScreen",onClick:function(){window.scrollTo(0,0)},children:Object(O.jsx)(j.a,{icon:b.b})}),Object(O.jsxs)("div",{id:"navPage",children:[Object(O.jsx)("span",{onClick:function(){window.scrollTo(0,0),e.loadPage(-1)},children:"<"}),Object(O.jsxs)("span",{id:"navSelect",children:[" ",Object(O.jsx)("input",{style:{width:"30px",border:"none",boxShadow:"none",padding:0,margin:0,textAlign:"right"},type:"text",value:this.state.currentPage,onChange:function(t){e.setState({currentPage:t.target.value})},onBlur:function(t){isNaN(t.target.value)?e.setState({currentPage:e.props.currentPage}):(window.scrollTo(0,0),e.loadPage(parseInt(t.target.value)-e.props.currentPage))}})," von ",this.props.maxPage]}),Object(O.jsx)("span",{onClick:function(){window.scrollTo(0,0),e.loadPage(1)},children:">"})]})]})}},{key:"componentDidUpdate",value:function(e){e.currentPage!=this.props.currentPage&&this.setState({currentPage:this.props.currentPage})}},{key:"loadPage",value:function(e){this.props.currentPage+e>0&&this.props.currentPage+e<=this.props.maxPage?this.props.loadPage(this.props.currentPage+e):this.setState({currentPage:this.props.currentPage})}}]),s}(d.a.Component),S=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={id:a.props.status.id,visible:!1},a.statusBox=d.a.createRef(),a.timeOutHandle=null,a}return Object(c.a)(s,[{key:"render",value:function(){var e=this;if(this.state.visible){var t="",s=null;switch(this.state.type){case"searching":s=Object(O.jsx)("div",{style:{display:"inline-block",backgroundColor:"#246EB9"},children:Object(O.jsx)(j.a,{color:"#FDFFFC",style:{padding:"3px",fontSize:"40px"},icon:b.o,spin:!0})}),t="Suche l\xe4uft...",null!=this.timeOutHandle&&clearTimeout(this.timeOutHandle);break;case"found":s=Object(O.jsx)(j.a,{color:"#FDFFFC",style:{padding:"3px",backgroundColor:"#4CB944",fontSize:"40px"},icon:b.g}),t="Eintr\xe4ge gefunden!",null!=this.timeOutHandle&&clearTimeout(this.timeOutHandle),this.timeOutHandle=setTimeout((function(){e.statusBox.current.style.opacity="0",setTimeout((function(){e.setState({visible:!1})}),500)}),3e3);break;case"notFound":s=Object(O.jsx)(j.a,{color:"#FDFFFC",style:{padding:"3px",backgroundColor:"#353535",fontSize:"40px"},icon:b.d}),t="Keine Eintr\xe4ge gefunden!",null!=this.timeOutHandle&&clearTimeout(this.timeOutHandle),this.timeOutHandle=setTimeout((function(){e.statusBox.current.style.opacity="0",setTimeout((function(){e.setState({visible:!1})}),500)}),3e3);break;case"saved":s=Object(O.jsx)(j.a,{color:"#FDFFFC",style:{padding:"3px",backgroundColor:"#4CB944",fontSize:"40px"},icon:b.e}),t="Speichern erfolgreich.",null!=this.timeOutHandle&&clearTimeout(this.timeOutHandle),this.timeOutHandle=setTimeout((function(){e.statusBox.current.style.opacity="0",setTimeout((function(){e.setState({visible:!1})}),500)}),2e3);break;case"error":s=Object(O.jsx)(j.a,{color:"#FDFFFC",style:{padding:"3px",backgroundColor:"#F06543",fontSize:"40px"},icon:b.p}),t="Ein Fehler ist aufgetreten.",null!=this.timeOutHandle&&clearTimeout(this.timeOutHandle),this.timeOutHandle=setTimeout((function(){e.statusBox.current.style.opacity="0",setTimeout((function(){e.setState({visible:!1})}),500)}),3e3);break;case"saving":t="Eintr\xe4ge werden gespeichert.",s=Object(O.jsx)("div",{style:{display:"inline-block",backgroundColor:"#246EB9"},children:Object(O.jsx)(j.a,{color:"#FDFFFC",style:{padding:"3px",fontSize:"40px"},icon:b.o,spin:!0})}),null!=this.timeOutHandle&&clearTimeout(this.timeOutHandle),this.timeOutHandle=null;break;case"deleting":t="Eintrag wird gel\xf6scht.",s=Object(O.jsx)("div",{style:{display:"inline-block",backgroundColor:"#246EB9"},children:Object(O.jsx)(j.a,{color:"#FDFFFC",style:{padding:"3px",fontSize:"40px"},icon:b.m,spin:!0})}),null!=this.timeOutHandle&&clearTimeout(this.timeOutHandle),this.timeOutHandle=null;break;case"deleted":s=Object(O.jsx)(j.a,{color:"#FDFFFC",style:{padding:"3px",backgroundColor:"#F06543",fontSize:"40px"},icon:b.q}),t="L\xf6schen erfolgreich.",null!=this.timeOutHandle&&clearTimeout(this.timeOutHandle),this.timeOutHandle=setTimeout((function(){e.statusBox.current.style.opacity="0",setTimeout((function(){e.setState({visible:!1})}),500)}),2e3);break;default:t="Programm arbeitet.",s=Object(O.jsx)(j.a,{color:"#FDFFFC",style:{padding:"3px",backgroundColor:"#F5EE9E",fontSize:"40px"},icon:b.f}),null!=this.timeOutHandle&&clearTimeout(this.timeOutHandle),this.timeOutHandle=setTimeout((function(){e.statusBox.current.style.opacity="0",setTimeout((function(){e.setState({visible:!1})}),500)}),2e3)}return null!=this.state.value&&(t=this.state.value),Object(O.jsxs)("div",{ref:this.statusBox,style:{position:"fixed",bottom:"30px",left:"30px",boxShadow:"0 2px 5px #d9d9d9",transition:"opacity 0.5s",opacity:"1",borderRadius:"3px",overflow:"hidden",zIndex:9e6},className:"mainColors",children:[s,Object(O.jsx)("span",{style:{position:"relative",top:"-10px",padding:"10px 20px"},children:t})]})}return null}},{key:"componentDidUpdate",value:function(){this.props.status.id!=this.state.id&&this.setState({id:this.props.status.id,visible:!0,type:this.props.status.type,value:this.props.status.value})}}]),s}(d.a.Component),_=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(){return Object(i.a)(this,s),t.apply(this,arguments)}return Object(c.a)(s,[{key:"render",value:function(){var e,t=this,s=[],a=Object(x.a)(this.props.options);try{for(a.s();!(e=a.n()).done;){var r=e.value;s.push(Object(O.jsx)("option",{value:r[0],children:r[1]},r[0]))}}catch(n){a.e(n)}finally{a.f()}return Object(O.jsxs)("div",{style:this.props.style,children:[Object(O.jsx)("select",{className:this.props.classList,value:this.props.value,style:{width:"100%"},onChange:function(e){t.props.onChange(e)},children:s}),Object(O.jsx)("div",{style:{pointerEvents:"none",textAlign:"right",margin:"-26px 10px 0 0"},children:Object(O.jsx)(j.a,{color:"LightGray",icon:b.a})})]})}}]),s}(d.a.Component),C=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={options:[],currentOptionId:null,userSelected:!1},a}return Object(c.a)(s,[{key:"render",value:function(){var e=this,t=[];if(this.state.options.length>0&&!1===this.state.userSelected){var s,a=-1,r=Object(x.a)(this.state.options);try{for(r.s();!(s=r.n()).done;){var n=s.value;a++,t.push(Object(O.jsx)("div",{id:a,"data-id":n.id,"data-value":n[this.props.returnCol],onClick:function(t){e.props.onChange(t.target.dataset.value,t.target.dataset.id),e.setState({userSelected:!0})},style:{cursor:"default",color:this.state.currentOptionId===a?"#2364AA":"inherit"},children:n[this.props.returnCol]},n.id))}}catch(i){r.e(i)}finally{r.f()}}return Object(O.jsxs)("div",{children:[Object(O.jsx)("input",{type:"text",value:this.props.value,onBlur:function(){setTimeout((function(){e.setState({userSelected:!0})}),300)},onChange:function(t){e.changeInputValue(t.target.value)},onKeyDown:function(t){e.changeSelectedOption(t)}}),t.length>0?Object(O.jsx)("div",{style:{position:"absolute",boxShadow:"0 1px 5px #d9d9d9",padding:"10px 15px",zIndex:1e6},className:"mainColors",children:t}):null]})}},{key:"changeInputValue",value:function(){var e=Object(n.a)(r.a.mark((function e(t){var s,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.onChange(t,null),""==t){e.next=10;break}return(s={})[this.props.searchCol]=t+"*",e.next=6,v[this.props.tbl].get(s,{select:["id",this.props.returnCol],limit:10,order:[this.props.searchCol]});case 6:a=e.sent,this.setState({currentOptionId:a.length>0?0:null,options:a,userSelected:!1}),e.next=11;break;case 10:this.setState({currentOptionId:null,options:[],userSelected:!1});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"changeSelectedOption",value:function(e){38===e.keyCode&&this.state.currentOptionId>0?this.setState({currentOptionId:this.state.currentOptionId-1}):40===e.keyCode&&this.state.currentOptionId<this.state.options.length-1?this.setState({currentOptionId:this.state.currentOptionId+1}):13===e.keyCode&&(this.props.onChange(this.state.options[this.state.currentOptionId][this.props.returnCol],this.state.options[this.state.currentOptionId].id),this.setState({userSelected:!0}))}}]),s}(d.a.Component),A=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){return Object(i.a)(this,s),t.call(this,e)}return Object(c.a)(s,[{key:"render",value:function(){var e=this;return Object(O.jsx)("div",{className:"selectWrapper"+("1"===this.props.isSelected?" selMarked":""),style:{display:"block",transition:"box-shadow 0.3s",margin:"10px 5px",marginLeft:"auto",marginRight:"auto",width:v.options.z_width+"px",height:v.options.z_height+"px"},id:this.props.children.props.id,ref:this.element,onClick:function(e){e.stopPropagation()},onMouseUp:function(t){e.props.onSelect(e.props.children,{shift:t.shiftKey,meta:t.metaKey,ctrl:t.ctrlKey})},children:this.props.children})}}]),s}(d.a.Component),z=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var a;Object(i.a)(this,s);var r={display:"block",textAlign:"center"};return(a=t.call(this,e)).props.multiSelect&&(r.userSelect="none",r.msUserSelect="none",r.WebkitUserSelect="none"),a.state={currentId:0,ids:[],style:r},a}return Object(c.a)(s,[{key:"render",value:function(){var e=this,t=d.a.Children.map(this.props.children,(function(t){return Object(O.jsx)(A,{isSelected:e.state.ids.includes(t.props.id)?"1":"0",onSelect:function(t,s){e.select(t,s)},children:t})}));return Object(O.jsx)("div",{style:this.state.style,className:this.props.className,onClick:function(){e.select(null,{})},children:t})}},{key:"select",value:function(e,t){var s=this;if(null===e)this.setState({currentId:0,ids:[]}),this.props.selectCallback(null,{currentId:0,ids:[]});else{var a=e.props.id;if(this.props.multiSelect&&t.shift){var r=!1,n=[];d.a.Children.forEach(this.props.children,(function(t){0!=r||t.props.id!==a&&t.props.id!==s.state.currentId?r&&t.props.id!==a&&t.props.id!==s.state.currentId?n.push(t.props.id):r&&(r=!1,n.push(t.props.id)):(r=!0,n.push(t.props.id)),s.setState({currentId:a,ids:n}),s.props.selectCallback(e,{currentId:a,ids:n})}))}else if(this.props.multiSelect&&("cmd"===v.me.selectKey&&t.meta||"ctrl"===v.me.selectKey&&t.ctrl)){var i=this.state.ids;i.includes(a)?i=i.filter((function(e){return e!=a})):i.push(a),this.setState({currentId:a,ids:i}),this.props.selectCallback(e,{currentId:a,ids:i})}else this.setState({currentId:a,ids:[a]}),this.props.selectCallback(e,{currentId:a,ids:[a]})}}},{key:"componentDidUpdate",value:function(e){e.preset!=this.props.preset&&(setTimeout((function(){var e=document.querySelector("div.selMarked");e&&e.scrollIntoView({behavior:"smooth",block:"center"})}),300),this.setState({ids:this.props.preset}))}}]),s}(d.a.Component);function D(e){return null==e?{__html:null}:{__html:f.a.sanitize(e.replace(/&lt;/g,"<").replace(/&gt;/g,">"),{ADD_TAGS:["aut","gruen","gelb","rot","blau"]})}}var N=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={item:null,newItemCreated:null},a}return Object(c.a)(s,[{key:"render",value:function(){var e=this;return Object(O.jsxs)("div",{style:{padding:"0 10px",display:"grid",gridTemplateColumns:"auto 420px",gridTemplateRows:"min-content auto",rowGap:"15px"},children:[Object(O.jsx)(w,{setupItems:this.state.newItemCreated,boxName:"lemma",searchQuery:function(t,s){e.searchQuery(t,s)},searchOptions:[["lemma","Lemma"],["lemma_ac","Lemma-Anzeige"],["id","ID"]],sortOptions:[['["id"]',"ID"],['["lemma"]',"Lemma"]],gridArea:this.state.item?"1/1/1/2":"1/1/1/3"}),Object(O.jsx)(T,{loadPage:function(t){e.loadPage(t)},currentElements:this.state.currentElements,count:this.state.count,currentPage:this.state.currentPage,maxPage:this.state.maxPage,gridArea:this.state.item?"2/1/2/2":"2/1/2/3",showDetail:function(t){e.setState({item:t})}}),this.state.item?Object(O.jsx)(L,{status:this.props.status,item:this.state.item,onUpdate:function(t){e.reloadEntry(t)},onClose:function(){e.setState({item:null})}}):"",v.access("l_edit")&&Object(O.jsx)("div",{style:{position:"fixed",bottom:"20px",right:"20px",fontSize:"30px"},children:Object(O.jsx)(j.a,{id:"mainAddButton",icon:b.l,onClick:Object(n.a)(r.a.mark((function t(){var s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Soll ein neues Lemma erstellt werden?")){t.next=8;break}return e.props.status("saving"),t.next=4,v.lemma.save({lemma_display:"Neues Lemma",lemma:"Neues Lemma"});case 4:s=t.sent,console.log("new ID:",s),e.setState({newItemCreated:[{c:"id",o:"=",v:s}]}),e.props.status("saved","Neuer Eintrag erstellt.");case 8:case"end":return t.stop()}}),t)})))})})]})}},{key:"reloadEntry",value:function(){var e=Object(n.a)(r.a.mark((function e(t){var s,a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.lemma.get({id:t});case 2:s=(s=e.sent)[0],a=this.state.currentElements,n=a.findIndex((function(e){return e.id===s.id})),a[n]=s,this.setState({currentElements:a,item:s});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"searchQuery",value:function(){var e=Object(n.a)(r.a.mark((function e(t,s){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.status("searching"),e.next=3,v.lemma.search(t,{count:!0,order:s});case 3:return a=e.sent,e.next=6,v.lemma.search(t,{limit:50,order:s});case 6:n=e.sent,console.log(a),a[0].count>1?this.props.status("found","".concat(a[0].count," Eintr\xe4ge gefunden.")):1===a[0].count?this.props.status("found","1 Eintrag gefunden."):this.props.status("notFound"),this.setState({query:t,queryOrder:s,count:a[0].count,maxPage:Math.floor(a[0].count/50)+1,currentPage:1,currentElements:n,selectionDetail:{ids:[]}});case 10:case"end":return e.stop()}}),e,this)})));return function(t,s){return e.apply(this,arguments)}}()},{key:"loadPage",value:function(){var e=Object(n.a)(r.a.mark((function e(t){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.lemma.search(this.state.query,{limit:50,offset:50*(t-1),order:this.state.queryOrder});case 2:s=e.sent,this.setState({currentPage:t,currentElements:s,selectionDetail:{ids:[]}});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),s}(d.a.Component),T=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={selection:{currentId:null,ids:[]}},a}return Object(c.a)(s,[{key:"render",value:function(){var e=this;if(this.props.count>0){var t,s=[],a=Object(x.a)(this.props.currentElements);try{for(a.s();!(t=a.n()).done;){var r=t.value;s.push(Object(O.jsxs)("tr",{id:r.id,onDoubleClick:function(t){e.props.showDetail(e.props.currentElements.find((function(e){return e.id===parseInt(t.target.closest("tr").id)})))},children:[Object(O.jsx)("td",{title:"ID: "+r.id,dangerouslySetInnerHTML:D(r.lemma_display)}),Object(O.jsx)("td",{children:r.dicts}),Object(O.jsx)("td",{dangerouslySetInnerHTML:D(r.comment)})]},r.id))}}catch(n){a.e(n)}finally{a.f()}return Object(O.jsxs)("div",{style:{gridArea:this.props.gridArea,padding:"0 10px"},children:[Object(O.jsx)(k,{loadPage:function(t){e.props.loadPage(t)},currentPage:this.props.currentPage,maxPage:this.props.maxPage}),Object(O.jsxs)("table",{width:"100%",children:[Object(O.jsx)("thead",{style:{textAlign:"left"},children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"Lemmaansatz"}),Object(O.jsx)("th",{children:"W\xf6rterb\xfccher"}),Object(O.jsx)("th",{children:"Kommentar"})]})}),Object(O.jsx)("tbody",{children:s})]})]})}return null}}]),s}(d.a.Component),L=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={id:a.props.item.id,lemma:a.props.item.lemma,lemma_display:a.props.item.lemma_display,homonym:a.props.item.homonym,MLW:a.props.item.MLW,Stern:a.props.item.Stern,Fragezeichen:a.props.item.Fragezeichen},a}return Object(c.a)(s,[{key:"render",value:function(){var e,t=this;return Object(O.jsxs)("div",{style:{position:"fixed",top:0,bottom:0,right:0,width:"400px",padding:"10px 15px",boxShadow:"rgb(60, 110, 113) 0px 0px 2px"},className:"mainColors",children:[Object(O.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"150px auto",gridTemplateRows:"1fr 5px 1fr 1fr",rowGap:"10px",margin:"50px 0"},children:[Object(O.jsxs)("div",{className:"minorTxt",style:{gridArea:"1/1/1/3",textAlign:"right"},children:[Object(O.jsxs)("i",{children:["ID ",this.state.id]}),Object(O.jsx)(j.a,{style:{position:"relative",top:"4px",marginLeft:"10px",fontSize:"23px"},className:"closeButton",icon:b.p,onClick:function(){t.props.onClose()}})]}),Object(O.jsx)("div",{style:{gridArea:"3/1/3/2"},children:"Lemma:"}),Object(O.jsx)("div",{style:{gridArea:"3/2/3/3"},children:Object(O.jsx)("input",{type:"text",value:this.state.lemma,onChange:function(e){t.setState({lemma:e.target.value})}})}),Object(O.jsx)("div",{style:{gridArea:"4/1/4/2"},children:"Lemma-Anzeige:"}),Object(O.jsx)("div",{style:{gridArea:"4/2/4/3"},children:Object(O.jsx)("input",{type:"text",value:(e=this.state.lemma_display,null==e?"":e.replace(/&lt;/g,"<").replace(/&gt;/g,">")),onChange:function(e){t.setState({lemma_display:e.target.value})}})})]}),Object(O.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"150px auto",gridTemplateRows:"1fr 1fr 1fr 1fr",rowGap:"10px",margin:"50px 0"},children:[Object(O.jsx)("div",{style:{gridArea:"1/1/1/2"},children:"Zahlzeichen:"}),Object(O.jsx)("div",{style:{gridArea:"1/2/1/3"},children:Object(O.jsx)(_,{options:[[0,""],[1,1],[2,2],[3,3],[4,4],[5,5],[6,6]],onChange:function(e){t.setState({homonym:e.target.value})},value:this.state.homonym})}),Object(O.jsx)("div",{style:{gridArea:"2/1/2/2"},children:"im W\xf6rterbuch:"}),Object(O.jsx)("div",{style:{gridArea:"2/2/2/3"},children:Object(O.jsx)(_,{options:[[0,"Nein"],[1,"Ja"]],onChange:function(e){t.setState({MLW:e.target.value})},value:this.state.MLW})}),Object(O.jsx)("div",{style:{gridArea:"3/1/3/2"},children:"Stern:"}),Object(O.jsx)("div",{style:{gridArea:"3/2/3/3"},children:Object(O.jsx)(_,{options:[[0,"Nein"],[1,"Ja"]],onChange:function(e){t.setState({Stern:e.target.value})},value:this.state.Stern})}),Object(O.jsx)("div",{style:{gridArea:"4/1/4/2"},children:"Fragezeichen:"}),Object(O.jsx)("div",{style:{gridArea:"4/2/4/3"},children:Object(O.jsx)(_,{options:[[0,"Nein"],[1,"Ja"]],onChange:function(e){t.setState({Fragezeichen:e.target.value})},value:this.state.Fragezeichen})}),Object(O.jsx)("div",{style:{gridArea:"6/2/6/3"},children:Object(O.jsx)("input",{type:"button",value:"speichern",onClick:Object(n.a)(r.a.mark((function e(){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(""===t.state.lemma||t.state.lemma.indexOf(" ")>-1)){e.next=4;break}t.props.status("error","Bitte ein g\xfcltiges Lemma eintragen!"),e.next=15;break;case 4:if(""!==t.state.lemma_display){e.next=8;break}t.props.status("error","Bitte tragen Sie eine g\xfcltige Lemma-Anzeige ein!"),e.next=15;break;case 8:return s={id:t.state.id,lemma:t.state.lemma,lemma_display:t.state.lemma_display,MLW:t.state.MLW,Fragezeichen:t.state.Fragezeichen,Stern:t.state.Stern},t.state.homonym>0&&(s.lemma_nr=t.state.homonym),e.next=12,v.lemma.save(s);case 12:e.sent,t.props.status("saved"),t.props.onUpdate(t.state.id);case 15:case"end":return e.stop()}}),e)})))})})]})]})}},{key:"componentDidUpdate",value:function(){this.state.id!==this.props.item.id&&(console.log("NOW!"),this.setState({id:this.props.item.id,lemma:this.props.item.lemma,lemma_display:this.props.item.lemma_display,homonym:this.props.item.homonym,MLW:this.props.item.MLW,Stern:this.props.item.Stern,Fragezeichen:this.props.item.Fragezeichen}))}}]),s}(d.a.Component),F=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={author:null,work:null,authorLst:[]},a}return Object(c.a)(s,[{key:"render",value:function(){var e=this;return Object(O.jsxs)("div",{style:{position:"fixed",overflow:"scroll",top:0,bottom:0,right:0,width:"400px",padding:"10px 15px",boxShadow:"rgb(60, 110, 113) 0px 0px 2px"},className:"mainColors",children:[Object(O.jsx)("div",{style:{position:"absolute",top:"50px",right:"10px"},children:Object(O.jsx)(j.a,{style:{position:"relative",top:"4px",marginLeft:"10px",fontSize:"23px"},className:"closeButton",icon:b.p,onClick:function(){e.props.onClose()}})}),this.state.author&&Object(O.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"150px auto",rowGap:"10px",margin:"50px 0"},children:[Object(O.jsxs)("h3",{children:["Autor ",Object(O.jsxs)("i",{style:{fontSize:"60%"},children:["ID: ",this.state.author.id,")"]})]}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{children:"Name:"}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{type:"text",value:this.state.author.full?this.state.author.full.replace(/&lt;/g,"<").replace(/&gt;/g,">"):"",onChange:function(t){var s=e.state.author;s.full=t.target.value,e.setState({author:s})}})}),Object(O.jsx)("div",{children:"Abk\xfcrzung:"}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{type:"text",value:this.state.author.abbr,onChange:function(t){var s=e.state.author;s.abbr=t.target.value,e.setState({author:s})}})}),Object(O.jsx)("div",{children:"Abk\xfcrzung (Sortierung):"}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{type:"text",value:this.state.author.abbr_sort,onChange:function(t){var s=e.state.author;s.abbr_sort=t.target.value,e.setState({author:s})}})}),Object(O.jsx)("div",{children:"Anzeigedatum:"}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{type:"text",value:this.state.author.date_display,onChange:function(t){var s=e.state.author;s.date_display=t.target.value,e.setState({author:s})}})}),Object(O.jsx)("div",{children:"Sortierdatum:"}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{type:"text",value:this.state.author.date_sort,onChange:function(t){var s=e.state.author;s.date_sort=t.target.value,e.setState({author:s})}})}),Object(O.jsx)("div",{children:"Sortierdatum-Typ:"}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{type:"text",value:this.state.author.date_type,onChange:function(t){var s=e.state.author;s.date_type=t.target.value,e.setState({author:s})}})}),Object(O.jsx)("div",{children:"in Benutzung:"}),Object(O.jsx)("div",{children:Object(O.jsx)(_,{style:{width:"86%"},options:[[0,"Nein"],[1,"Ja"]],value:this.state.author.in_use,onChange:function(t){var s=e.state.author;s.in_use=t.target.value,e.setState({author:s})}})}),Object(O.jsx)("div",{}),Object(O.jsxs)("div",{children:[Object(O.jsx)("input",{type:"button",value:"speichern",onClick:Object(n.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.props.status("saving"),t.next=3,v.author.save(e.state.author);case 3:e.props.status("saved"),e.props.onUpdate();case 5:case"end":return t.stop()}}),t)})))}),Object(O.jsx)("input",{type:"button",value:"l\xf6schen",style:{marginLeft:"10px"},onClick:Object(n.a)(r.a.mark((function t(){var s,a,n,i,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.work.search([{c:"author_id",o:"=",v:e.state.author.id}],{select:["id"]});case 2:s=t.sent,a=[],n=Object(x.a)(s);try{for(n.s();!(i=n.n()).done;)c=i.value,a.push(c.id)}catch(r){n.e(r)}finally{n.f()}if(!window.confirm("Soll der Autor wirklich gel\xf6scht werden? ".concat(a.length," damit ").concat(a.length>1?"verkn\xfcpfte Werke werden":"verkn\xfcpftes Werk wird"," ebenfalls gel\xf6scht. Dieser Schritt kann nicht mehr r\xfcckg\xe4ngig gemacht werden!"))){t.next=16;break}if(e.props.status("deleting"),!(a.length>0)){t.next=11;break}return t.next=11,v.work.delete(a);case 11:return t.next=14,v.author.delete(e.state.author.id);case 14:e.props.status("deleted"),e.props.onUpdate();case 16:case"end":return t.stop()}}),t)})))})]})]}),this.state.work&&Object(O.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"150px auto",rowGap:"10px",margin:"50px 0"},children:[Object(O.jsxs)("h3",{children:["Werk ",Object(O.jsxs)("i",{style:{fontSize:"60%"},children:["(ID: ",this.state.work.id,")"]})]}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{children:"Werktitel:"}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{type:"text",value:this.state.work.full?this.state.work.full.replace(/&lt;/g,"<").replace(/&gt;/g,">"):"",onChange:function(t){var s=e.state.work;s.full=t.target.value,e.setState({work:s})}})}),Object(O.jsx)("div",{children:"Abk\xfcrzung:"}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{type:"text",value:this.state.work.abbr,onChange:function(t){var s=e.state.work;s.abbr=t.target.value,e.setState({work:s})}})}),Object(O.jsx)("div",{children:"Abk\xfcrzung (Sortierung):"}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{type:"text",value:this.state.work.abbr_sort,onChange:function(t){var s=e.state.work;s.abbr_sort=t.target.value,e.setState({work:s})}})}),Object(O.jsx)("div",{children:"Anzeigedatum:"}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{type:"text",value:this.state.work.date_display,onChange:function(t){var s=e.state.work;s.date_display=t.target.value,e.setState({work:s})}})}),Object(O.jsx)("div",{children:"Sortierdatum:"}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{type:"text",value:this.state.work.date_sort,onChange:function(t){var s=e.state.work;s.date_sort=t.target.value,e.setState({work:s})}})}),Object(O.jsx)("div",{children:"Sortierdatum-Typ:"}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{type:"text",value:this.state.work.date_type,onChange:function(t){var s=e.state.work;s.date_type=t.target.value,e.setState({work:s})}})}),Object(O.jsxs)("div",{children:["Abweichender Autorenname (z.B. bei ",Object(O.jsx)("aut",{children:"Vita"}),"):"]}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{type:"text",value:this.state.work.author_display,onChange:function(t){var s=e.state.work;s.author_display=t.target.value,e.setState({work:s})}})}),Object(O.jsx)("div",{children:"verknpft. Autor:"}),Object(O.jsx)("div",{children:Object(O.jsx)(_,{style:{width:"86%"},options:this.state.authorLst,value:this.state.work.author_id,onChange:function(t){var s=e.state.work;s.author_id=t.target.value,e.setState({work:s})}})}),Object(O.jsxs)("div",{children:["Stellenangabe: ",Object(O.jsx)("span",{className:"minorTxt",children:"(Bsp.)"})]}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{type:"text",value:this.state.work.citation,onChange:function(t){var s=e.state.work;s.citation=t.target.value,e.setState({work:s})}})}),Object(O.jsxs)("div",{children:["Stellenangabe Bibliographie: ",Object(O.jsx)("i",{className:"minorTxt",children:"(nur minora)"})]}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{type:"text",value:this.state.work.bibliography_cit,onChange:function(t){var s=e.state.work;s.bibliography_cit=t.target.value,e.setState({work:s})}})}),Object(O.jsx)("div",{children:"Referenz:"}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{type:"text",value:this.state.work.reference,onChange:function(t){var s=e.state.work;s.reference=t.target.value,e.setState({work:s})}})}),Object(O.jsx)("div",{children:"in Benutzung:"}),Object(O.jsx)("div",{children:Object(O.jsx)(_,{style:{width:"86%"},options:[[0,"Nein"],[1,"Ja"]],value:this.state.work.in_use,onChange:function(t){var s=e.state.work;s.in_use=t.target.value,e.setState({work:s})}})}),Object(O.jsx)("div",{children:"Kommentar:"}),Object(O.jsx)("div",{children:Object(O.jsx)("textarea",{value:this.state.work.txt_info,onChange:function(t){var s=e.state.work;s.txt_info=t.target.value,e.setState({work:s})},style:{width:"205px",height:"130px"}})}),Object(O.jsx)("div",{children:"Bibliographie:"}),Object(O.jsx)("div",{children:Object(O.jsx)("textarea",{value:this.state.work.bibliography,onChange:function(t){var s=e.state.work;s.bibliography=t.target.value,e.setState({work:s})},style:{width:"205px",height:"130px"}})}),Object(O.jsx)("div",{}),Object(O.jsxs)("div",{children:[Object(O.jsx)("input",{type:"button",value:"speichern",onClick:Object(n.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.props.status("saving"),t.next=3,v.work.save(e.state.work);case 3:e.props.status("saved"),e.props.onUpdate();case 5:case"end":return t.stop()}}),t)})))}),Object(O.jsx)("input",{type:"button",value:"l\xf6schen",style:{marginLeft:"10px"},onClick:Object(n.a)(r.a.mark((function t(){var s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.work.search([{c:"author_id",o:"=",v:e.state.work.author_id}],{count:!0});case 2:if(s=t.sent,!(s[0].count<2)){t.next=8;break}alert("Das Werk kann nicht gel\xf6scht werden, da es das lezte Werk des Autors ist. Um dieses Werk zu l\xf6schen, m\xfcssen Sie ein neues Werk erstellen und dem Autor zuweisen."),t.next=14;break;case 8:if(!window.confirm("Soll das Werk wirklich gel\xf6scht werden? Dieser Schritt kann nicht mehr r\xfcckg\xe4ngig gemacht werden!")){t.next=14;break}return e.props.status("deleting"),t.next=12,v.work.delete(e.state.work.id);case 12:e.props.status("deleted"),e.props.onUpdate();case 14:case"end":return t.stop()}}),t)})))})]})]})]})}},{key:"componentDidMount",value:function(){var e=this;(function(){var t=Object(n.a)(r.a.mark((function t(){var s,a,n,i,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.author.getAll({select:["id","abbr"],order:["abbr_sort"]});case 2:s=t.sent,a=[],n=Object(x.a)(s);try{for(n.s();!(i=n.n()).done;)c=i.value,a.push([c.id,c.abbr])}catch(r){n.e(r)}finally{n.f()}e.setState({authorLst:a});case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),this.props.item.author_id>0)&&function(){var t=Object(n.a)(r.a.mark((function t(){var s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.author.get({id:e.props.item.author_id});case 2:s=t.sent,e.setState({author:s[0]});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()();this.props.item.work_id>0&&function(){var t=Object(n.a)(r.a.mark((function t(){var s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.work.get({id:e.props.item.work_id});case 2:s=t.sent,e.setState({work:s[0]});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}},{key:"componentDidUpdate",value:function(e){var t=this;e.item.author_id!=this.props.item.author_id&&(this.props.item.author_id>0?function(){var e=Object(n.a)(r.a.mark((function e(){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.author.get({id:t.props.item.author_id});case 2:s=e.sent,t.setState({author:s[0]});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()():this.setState({author:null}));e.item.work_id!=this.props.item.work_id&&(this.props.item.work_id>0?function(){var e=Object(n.a)(r.a.mark((function e(){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.work.get({id:t.props.item.work_id});case 2:s=e.sent,t.setState({work:s[0]});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()():this.setState({work:null}))}}]),s}(d.a.Component),E=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={oLst:[],cTrLst:[]},a.resultsOnPage=18,a.modeName="opera",a}return Object(c.a)(s,[{key:"render",value:function(){var e=this,t=[],s=[],a=0,i=0,c=this.state.hits&&this.state.hits.length>0?this.state.hits[this.state.hitIndex].id:0;this.scrollRef=null;var o,l=Object(x.a)(this.state.cTrLst);try{var u=function(){var r=o.value;a++;var n={};r.o.id===c?(n="searchHit",e.scrollRef=d.a.createRef()):c>0&&e.state.hits.some((function(e){return e.id===r.o.id}))&&(n="searchAllHits"),t.push(Object(O.jsx)("tr",{className:n,ref:r.o.id===c?e.scrollRef:null,onDoubleClick:function(t){t.stopPropagation(),e.props.showDetail(r.o)},children:r.data},a)),t.length>=e.resultsOnPage&&(i++,s.push(Object(O.jsxs)("div",{id:"operaBox_"+i,style:{borderBottom:"1px dotted black",paddingBottom:"15px",margin:"10px"},children:[Object(O.jsx)("table",{children:Object(O.jsx)("tbody",{children:t})}),Object(O.jsx)("div",{style:{textAlign:"center"},children:i})]},i)),t=[])};for(l.s();!(o=l.n()).done;)u()}catch(p){l.e(p)}finally{l.f()}return i>0&&s.push(Object(O.jsxs)("div",{id:"operaBox_"+(i+1),style:{margin:"10px"},children:[Object(O.jsx)("table",{children:Object(O.jsx)("tbody",{children:t})}),Object(O.jsx)("div",{style:{textAlign:"center"},children:i+1})]},i+1)),Object(O.jsxs)("div",{style:{gridArea:this.props.gridArea},children:[0===s.length?null:Object(O.jsx)("div",{className:"operaBox",children:s}),Object(O.jsxs)("div",{className:"SearchBar mainColors",children:[Object(O.jsx)("input",{type:"text",style:{boxShadow:"none",padding:"0px"},placeholder:"Suche nach Zitiertitel...",onKeyUp:function(){var t=Object(n.a)(r.a.mark((function t(s){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(13!==s.keyCode){t.next=9;break}if(""==s.target.value||e.state.cSearch==s.target.value){t.next=8;break}return t.next=4,v[e.props.listName].search([{c:"search",o:"=",v:"*".concat(s.target.value,"*")}],{select:["id"]});case 4:(a=t.sent).length>0?e.setState({hitIndex:0,cSearch:s.target.value,maxHits:a.length,hits:a}):e.setState({cSearch:s.target.value,maxHits:0,hits:[]}),t.next=9;break;case 8:e.state.maxHits>0&&e.gotoSearchResult(1);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),this.state.maxHits>0&&Object(O.jsxs)("div",{style:{display:"inline",marginLeft:"20px"},children:[Object(O.jsx)(j.a,{icon:b.c,style:{fontSize:"14px"},onClick:function(){e.gotoSearchResult(-1)}})," ",Object(O.jsx)("span",{children:this.state.hitIndex+1}),"/",Object(O.jsx)("span",{children:this.state.maxHits})," ",Object(O.jsx)(j.a,{icon:b.i,style:{fontSize:"14px"},onClick:function(){e.gotoSearchResult(1)}})]}),Object(O.jsx)("div",{style:{float:"right"},children:Object(O.jsx)("input",{type:"text",style:{textAlign:"right",width:"60px",boxShadow:"none",padding:"0px"},placeholder:"Seite...",onKeyUp:function(e){if(13===e.keyCode){var t=document.querySelector("div#operaBox_"+e.target.value);t&&t.scrollIntoView({behavior:"smooth"})}}})})]})]})}},{key:"createOperaLists",value:function(e,t){var s,a=[],r=Object(x.a)(e);try{for(r.s();!(s=r.n()).done;){var n=s.value,i=[];if(n.editions_id)for(var c=JSON.parse(n.editions_id),o=JSON.parse(n.editions_url),l=JSON.parse(n.editions_label),u=0;u<c.length;u++){var d="/site/viewer/"+c[u],p="";o&&""!=o[u]&&(d=o[u],p=Object(O.jsxs)("span",{children:[" ",Object(O.jsx)(j.a,{style:{fontSize:"14px"},icon:b.h})]}));var h="FEHLER!";l&&(h=l[u]),i.push(Object(O.jsx)("li",{children:Object(O.jsxs)("a",{href:d,target:"_blank",rel:"noreferrer",children:[h,p]})},u))}if("opera_maiora"==t){var m="<aut>".concat(n.abbr,"</aut>"),v=n.full;n.work_id>0&&null===n.author_id&&(m="<span>&nbsp;&nbsp;&nbsp;".concat(n.abbr,"</span>"),v="<span>&nbsp;&nbsp;&nbsp;".concat(n.full,"</span>")),a.push({o:n,data:[Object(O.jsx)("td",{className:"c1",dangerouslySetInnerHTML:D(n.date_display)},"0"),Object(O.jsx)("td",{className:"c2",dangerouslySetInnerHTML:D(m)},"1"),Object(O.jsx)("td",{className:"c3",dangerouslySetInnerHTML:D(v)},"2"),Object(O.jsxs)("td",{className:"c4",children:[n.bibliography,Object(O.jsx)("ul",{className:"noneLst",children:i})]},"3"),Object(O.jsx)("td",{className:"c5",dangerouslySetInnerHTML:D(n.comment)},"4")]})}else"opera_minora"===t&&a.push({o:n,data:[Object(O.jsx)("td",{className:"c1_min",dangerouslySetInnerHTML:D(n.date_display)},"0"),Object(O.jsx)("td",{className:"c2_min",dangerouslySetInnerHTML:D(n.citation)},"1"),Object(O.jsxs)("td",{className:"c5_min",children:[Object(O.jsx)("span",{dangerouslySetInnerHTML:D(n.bibliography)}),Object(O.jsx)("ul",{className:"noneLst",children:i})]},"2")]})}}catch(g){r.e(g)}finally{r.f()}return a}},{key:"gotoSearchResult",value:function(e){1===e&&this.state.hitIndex<this.state.maxHits-1?this.setState({hitIndex:this.state.hitIndex+1}):1===e?this.setState({hitIndex:0}):-1===e&&this.state.hitIndex>0?this.setState({hitIndex:this.state.hitIndex-1}):-1===e&&this.setState({hitIndex:this.state.maxHits-1})}},{key:"loadPage",value:function(){var e=Object(n.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this;(function(){var t=Object(n.a)(r.a.mark((function t(){var s,a,n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v[e.props.listName].getAll({count:!0});case 2:return s=t.sent,t.next=5,v[e.props.listName].getAll();case 5:a=t.sent,n=e.createOperaLists(a,e.props.listName),e.setState({listName:e.props.listName,cTrLst:n,oMax:Math.floor(s[0].count/e.resultsOnPage)+1,currentPage:1});case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}},{key:"componentDidUpdate",value:function(e){var t=this;if(this.props.listName!=e.listName){var s=function(){var e=Object(n.a)(r.a.mark((function e(){var s,a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v[t.props.listName].getAll({count:!0});case 2:return s=e.sent,e.next=5,v[t.props.listName].getAll();case 5:a=e.sent,n=t.createOperaLists(a,t.props.listName),t.setState({cTrLst:n,listName:t.props.listName,oMax:Math.floor(s[0].count/t.resultsOnPage)+1,currentPage:1});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();this.setState({cTrLst:[]}),s()}this.scrollRef&&this.scrollRef.current.scrollIntoView({behavior:"smooth",block:"center"})}}]),s}(d.a.Component),I=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={selectionDetail:null},a}return Object(c.a)(s,[{key:"render",value:function(){var e=this;return Object(O.jsxs)("div",{style:{padding:"0 10px",display:"grid",gridTemplateColumns:"auto 420px",gridTemplateRows:"auto",rowGap:"15px"},children:[Object(O.jsx)(E,{listName:this.props.listName,loadPage:function(t){e.loadPage(t)},currentElements:this.state.currentElements,count:this.state.count,currentPage:this.state.currentPage,pageMax:this.state.pageMax,gridArea:this.state.selectionDetail?"2/1/2/2":"2/1/2/3",showDetail:function(t){e.setState({item:t})}}),this.state.item?Object(O.jsx)(F,{status:this.props.status,item:this.state.item,onUpdate:function(){e.setState({item:null})},onClose:function(){e.setState({item:null})}}):null,v.access("o_edit")&&Object(O.jsx)("div",{style:{position:"fixed",bottom:"40px",right:"15px",fontSize:"30px"},children:Object(O.jsx)(j.a,{id:"mainAddButton",icon:b.l,onClick:Object(n.a)(r.a.mark((function t(){var s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Soll ein neues Werk erstellt werden? (Das Werk wird ABBO FLOR. zugewiesen.")){t.next=8;break}return e.props.status("saving"),t.next=4,v.work.save({full:"Neues Werk",abbr:"Neues Werk",abbr_sort:"Neues Werk",author_id:1,is_maior:1,in_use:1});case 4:t.sent,e.props.status("saved","Neues Werk erstellt."),t.next=16;break;case 8:if(!window.confirm("Soll ein neuer Autor erstellt werden? Er heisst '+NEUER AUTOR'")){t.next=16;break}return e.props.status("saving"),t.next=12,v.author.save({full:"+Neuer Autor",abbr:"+Neuer Autor",abbr_sort:"+Neuer Autor",in_use:1});case 12:return s=t.sent,t.next=15,v.work.save({full:"Neues Werk",abbr:"Neues Werk",abbr_sort:"Neues Werk",author_id:s,is_maior:1,in_use:1});case 15:e.props.status("saved","Neuer Autor erstellt.");case 16:case"end":return t.stop()}}),t)})))})})]})}}]),s}(d.a.Component),P=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={item:null,newItemCreated:null},a}return Object(c.a)(s,[{key:"render",value:function(){var e=this;return Object(O.jsxs)("div",{style:{padding:"0 10px",display:"grid",gridTemplateColumns:"auto 420px",gridTemplateRows:"min-content auto",rowGap:"15px"},children:[Object(O.jsx)(w,{setupItems:this.state.newItemCreated,boxName:"seklit",searchQuery:function(t,s){e.searchQuery(t,s)},searchOptions:[["id","ID"]],sortOptions:[['["id"]',"ID"]],gridArea:this.state.item?"1/1/1/2":"1/1/1/3"}),Object(O.jsx)(B,{loadPage:function(t){e.loadPage(t)},currentElements:this.state.currentElements,count:this.state.count,currentPage:this.state.currentPage,maxPage:this.state.maxPage,gridArea:this.state.item?"2/1/2/2":"2/1/2/3",showDetail:function(t){e.setState({item:t})}}),this.state.item?Object(O.jsx)(M,{status:this.props.status,item:this.state.item,onUpdate:function(t){e.reloadEntry(t)},onClose:function(){e.setState({item:null})}}):"",v.access("e_edit")&&Object(O.jsx)("div",{style:{position:"fixed",bottom:"20px",right:"20px",fontSize:"30px"},children:Object(O.jsx)(j.a,{id:"mainAddButton",icon:b.l,onClick:Object(n.a)(r.a.mark((function t(){var s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Soll ein neuer Eintrag erstellt werden?")){t.next=7;break}return e.props.status("saving"),t.next=4,v.seklit.save({titel:"neues Werk"});case 4:s=t.sent,e.setState({newItemCreated:[{c:"id",o:"=",v:s}]}),e.props.status("saved","Neuer Eintrag erstellt.");case 7:case"end":return t.stop()}}),t)})))})})]})}},{key:"reloadEntry",value:function(){var e=Object(n.a)(r.a.mark((function e(t){var s,a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.seklit.get({id:t});case 2:s=(s=e.sent)[0],a=this.state.currentElements,n=a.findIndex((function(e){return e.id===s.id})),a[n]=s,this.setState({currentElements:a,item:s});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"searchQuery",value:function(){var e=Object(n.a)(r.a.mark((function e(t,s){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.status("searching"),e.next=3,v.seklit.search(t,{count:!0,order:s});case 3:return a=e.sent,e.next=6,v.seklit.search(t,{limit:50,order:s});case 6:n=e.sent,a[0].count>1?this.props.status("found","".concat(a[0].count," Eintr\xe4ge gefunden.")):1===a[0].count?this.props.status("found","1 Eintrag gefunden."):this.props.status("notFound"),this.setState({query:t,queryOrder:s,count:a[0].count,maxPage:Math.floor(a[0].count/50)+1,currentPage:1,currentElements:n,selectionDetail:{ids:[]}});case 9:case"end":return e.stop()}}),e,this)})));return function(t,s){return e.apply(this,arguments)}}()},{key:"loadPage",value:function(){var e=Object(n.a)(r.a.mark((function e(t){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.seklit.search(this.state.query,{limit:50,offset:50*(t-1),order:this.state.queryOrder});case 2:s=e.sent,this.setState({currentPage:t,currentElements:s,selectionDetail:{ids:[]}});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),s}(d.a.Component),B=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={selection:{currentId:null,ids:[]}},a}return Object(c.a)(s,[{key:"render",value:function(){var e=this;if(this.props.count>0){var t,s=[],a=Object(x.a)(this.props.currentElements);try{for(a.s();!(t=a.n()).done;){var r=t.value;s.push(Object(O.jsxs)("tr",{id:r.id,onDoubleClick:function(t){e.props.showDetail(e.props.currentElements.find((function(e){return e.id===parseInt(t.target.closest("tr").id)})))},children:[Object(O.jsx)("td",{title:"ID: "+r.id,children:r.kennziffer}),Object(O.jsxs)("td",{children:[r.signatur," ",r.alte_signatur?"(".concat(r.alte_signatur,")"):null]}),Object(O.jsxs)("td",{children:[r.name,", ",r.vorname,", ",Object(O.jsx)("b",{children:r.titel}),", ",r.reihe,", ",r.ort," ",r.jahr]}),Object(O.jsxs)("td",{children:[r.weitere_angaben,r.zusatz?" - "+r.zusatz:null]})]},r.id))}}catch(n){a.e(n)}finally{a.f()}return Object(O.jsxs)("div",{style:{gridArea:this.props.gridArea,padding:"0 10px"},children:[Object(O.jsx)(k,{loadPage:function(t){e.props.loadPage(t)},currentPage:this.props.currentPage,maxPage:this.props.maxPage}),Object(O.jsxs)("table",{width:"100%",children:[Object(O.jsx)("thead",{style:{textAlign:"left"},children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"Kennziffer"}),Object(O.jsx)("th",{children:"Signatur"}),Object(O.jsx)("th",{children:"Werkbezeichnung"}),Object(O.jsx)("th",{children:"weitere Angaben"})]})}),Object(O.jsx)("tbody",{children:s})]})]})}return null}}]),s}(d.a.Component),M=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={id:a.props.item.id,kennziffer:a.props.item.kennziffer,signatur:a.props.item.signatur,alte_signatur:a.props.item.alte_signatur,name:a.props.item.name,vorname:a.props.item.vorname,titel:a.props.item.titel,reihe:a.props.item.reihe,weitere_angaben:a.props.item.weitere_angaben,ort:a.props.item.ort,jahr:a.props.item.jahr,zusatz:a.props.item.zusatz},a}return Object(c.a)(s,[{key:"render",value:function(){var e=this;return Object(O.jsx)("div",{style:{position:"fixed",top:0,bottom:0,right:0,width:"400px",padding:"10px 15px",boxShadow:"rgb(60, 110, 113) 0px 0px 2px"},className:"mainColors",children:Object(O.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"120px auto",gridTemplateRows:"1fr 5px 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr",rowGap:"10px",margin:"35px 0 30px 0"},children:[Object(O.jsxs)("div",{className:"minorTxt",style:{gridArea:"1/1/1/3",textAlign:"right"},children:[Object(O.jsxs)("i",{children:["ID ",this.state.id]}),Object(O.jsx)(j.a,{style:{position:"relative",top:"4px",marginLeft:"10px",fontSize:"23px"},className:"closeButton",icon:b.p,onClick:function(){e.props.onClose()}})]}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{children:"Kennziffer:"}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{type:"text",value:this.state.kennziffer,onChange:function(t){e.setState({kennziffer:t.target.value})}})}),Object(O.jsx)("div",{children:"Signatur:"}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{type:"text",value:this.state.signatur,onChange:function(t){e.setState({signatur:t.target.value})}})}),Object(O.jsx)("div",{children:"alte Signatur:"}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{type:"text",value:this.state.alte_signatur,onChange:function(t){e.setState({alte_signatur:t.target.value})}})}),Object(O.jsx)("div",{children:"Name:"}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{type:"text",value:this.state.name,onChange:function(t){e.setState({name:t.target.value})}})}),Object(O.jsx)("div",{children:"Vorname:"}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{type:"text",value:this.state.vorname,onChange:function(t){e.setState({vorname:t.target.value})}})}),Object(O.jsx)("div",{children:"Titel:"}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{type:"text",value:this.state.titel,onChange:function(t){e.setState({titel:t.target.value})}})}),Object(O.jsx)("div",{children:"Reihe"}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{type:"text",value:this.state.reihe,onChange:function(t){e.setState({reihe:t.target.value})}})}),Object(O.jsx)("div",{children:"Ort:"}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{type:"text",value:this.state.ort,onChange:function(t){e.setState({ort:t.target.value})}})}),Object(O.jsx)("div",{children:"Jahr:"}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{type:"text",value:this.state.jahr,onChange:function(t){e.setState({jahr:t.target.value})}})}),Object(O.jsx)("div",{children:"weitere Angaben:"}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{type:"text",value:this.state.weitere_angaben,onChange:function(t){e.setState({weitere_angaben:t.target.value})}})}),Object(O.jsx)("div",{children:"Zusatz:"}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{type:"text",value:this.state.zusatz,onChange:function(t){e.setState({zusatz:t.target.value})}})}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{type:"button",value:"speichern",onClick:Object(n.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.props.status("saving"),t.next=3,v.seklit.save({id:e.state.id,kennziffer:e.state.kennziffer,signatur:e.state.signature,alte_signatur:e.state.alte_signatur,name:e.state.name,vorname:e.state.vorname,titel:e.state.titel,reihe:e.state.reihe,weitere_angaben:e.state.weitere_angaben,ort:e.state.ort,jahr:e.state.jahr,zusatz:e.state.zusatz});case 3:e.props.status("saved","Das Speichern war erfolgreich."),e.props.onUpdate(e.state.id);case 5:case"end":return t.stop()}}),t)})))})})]})})}},{key:"componentDidUpdate",value:function(){this.state.id!==this.props.item.id&&this.setState({id:this.props.item.id,kennziffer:this.props.item.kennziffer,signatur:this.props.item.signatur,alte_signatur:this.props.item.alte_signatur,name:this.props.item.name,vorname:this.props.item.vorname,titel:this.props.item.titel,reihe:this.props.item.reihe,weitere_angaben:this.props.item.weitere_angaben,ort:this.props.item.ort,jahr:this.props.item.jahr,zusatz:this.props.item.zusatz})}}]),s}(d.a.Component),R=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={item:null,newItemCreated:null},a}return Object(c.a)(s,[{key:"render",value:function(){var e=this;return Object(O.jsxs)("div",{style:{padding:"0 10px",display:"grid",gridTemplateColumns:"auto 420px",gridTemplateRows:"min-content auto",rowGap:"15px"},children:[Object(O.jsx)(w,{setupItems:this.state.newItemCreated,boxName:"ressources",searchQuery:function(t,s){e.searchQuery(t,s)},searchOptions:[["ac_web","Werk"],["work_id","Werk-ID"],["ressource","Ressource-Typ"],["id","ID"],["path","Dateipfad"]],sortOptions:[['["id"]',"ID"],['["label"]',"K\xfcrzel"],['["opus"]',"vrkn. Werk"]],gridArea:this.state.item?"1/1/1/2":"1/1/1/3"}),Object(O.jsx)(W,{loadPage:function(t){e.loadPage(t)},currentElements:this.state.currentElements,count:this.state.count,currentPage:this.state.currentPage,maxPage:this.state.maxPage,gridArea:this.state.item?"2/1/2/2":"2/1/2/3",showDetail:function(t){e.setState({item:t})}}),this.state.item?Object(O.jsx)(H,{status:this.props.status,item:this.state.item,onUpdate:function(t){e.reloadEntry(t)},onClose:function(){e.setState({item:null})}}):"",v.access("e_edit")&&Object(O.jsx)("div",{style:{position:"fixed",bottom:"20px",right:"20px",fontSize:"30px"},children:Object(O.jsx)(j.a,{id:"mainAddButton",icon:b.l,onClick:Object(n.a)(r.a.mark((function t(){var s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Soll eine neue Ressource erstellt werden?")){t.next=7;break}return e.props.status("saving"),t.next=4,v.edition.save({ressource:0,editor:"Neue Edition",year:2021});case 4:s=t.sent,e.setState({newItemCreated:[{c:"id",o:"=",v:s}]}),e.props.status("saved","Neue Ressource erstellt.");case 7:case"end":return t.stop()}}),t)})))})})]})}},{key:"reloadEntry",value:function(){var e=Object(n.a)(r.a.mark((function e(t){var s,a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.edition.get({id:t});case 2:s=(s=e.sent)[0],a=this.state.currentElements,n=a.findIndex((function(e){return e.id===s.id})),a[n]=s,this.setState({currentElements:a,item:s});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"searchQuery",value:function(){var e=Object(n.a)(r.a.mark((function e(t,s){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.status("searching"),e.next=3,v.edition.search(t,{count:!0,order:s});case 3:return a=e.sent,e.next=6,v.edition.search(t,{limit:50,order:s});case 6:n=e.sent,console.log(a),a[0].count>1?this.props.status("found","".concat(a[0].count," Eintr\xe4ge gefunden.")):1===a[0].count?this.props.status("found","1 Eintrag gefunden."):this.props.status("notFound"),this.setState({query:t,queryOrder:s,count:a[0].count,maxPage:Math.floor(a[0].count/50)+1,currentPage:1,currentElements:n,selectionDetail:{ids:[]}});case 10:case"end":return e.stop()}}),e,this)})));return function(t,s){return e.apply(this,arguments)}}()},{key:"loadPage",value:function(){var e=Object(n.a)(r.a.mark((function e(t){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.edition.search(this.state.query,{limit:50,offset:50*(t-1),order:this.state.queryOrder});case 2:s=e.sent,this.setState({currentPage:t,currentElements:s,selectionDetail:{ids:[]}});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),s}(d.a.Component),W=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={selection:{currentId:null,ids:[]}},a}return Object(c.a)(s,[{key:"render",value:function(){var e=this;if(this.props.count>0){var t,s={0:"Edition (relevant)",1:"Edition (veraltet)",2:"Handschrift",3:"Alter Druck (relevant)",4:"Alter Druck (veraltet)",5:"Sonstiges"},a=[],r=Object(x.a)(this.props.currentElements);try{for(r.s();!(t=r.n()).done;){var n=t.value,i=n.url;""!==i&&null!==i||(i="/site/viewer/"+n.id),a.push(Object(O.jsxs)("tr",{id:n.id,onDoubleClick:function(t){e.props.showDetail(e.props.currentElements.find((function(e){return e.id===parseInt(t.target.closest("tr").id)})))},children:[Object(O.jsx)("td",{title:"ID: "+n.id,children:n.label}),Object(O.jsx)("td",{children:s[n.ressource]}),Object(O.jsx)("td",{dangerouslySetInnerHTML:D(n.opus)}),Object(O.jsxs)("td",{children:[Object(O.jsx)("a",{href:i,target:"_blank",children:"\xf6ffnen"}),n.url?Object(O.jsx)(j.a,{style:{fontSize:"14px",marginLeft:"10px"},icon:b.h}):null]})]},n.id))}}catch(c){r.e(c)}finally{r.f()}return Object(O.jsxs)("div",{style:{gridArea:this.props.gridArea,padding:"0 10px"},children:[Object(O.jsx)(k,{loadPage:function(t){e.props.loadPage(t)},currentPage:this.props.currentPage,maxPage:this.props.maxPage}),Object(O.jsxs)("table",{width:"100%",children:[Object(O.jsx)("thead",{style:{textAlign:"left"},children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"K\xfcrzel"}),Object(O.jsx)("th",{children:"Typ"}),Object(O.jsx)("th",{children:"vrkn. Werk"}),Object(O.jsx)("th",{children:"Link"})]})}),Object(O.jsx)("tbody",{children:a})]})]})}return null}}]),s}(d.a.Component),H=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={id:a.props.item.id,ressource:a.props.item.ressource,work_id:a.props.item.work_id,ac_web:a.props.item.ac_web,editor:a.props.item.editor,year:a.props.item.year,volume:a.props.item.volume,volumeContent:a.props.item.volumeContent,serie:a.props.item.serie,location:a.props.item.location,library:a.props.item.library,signature:a.props.item.signature,comment:a.props.item.comment,path:a.props.item.path,url:a.props.item.url,bibliography_preview:null},a}return Object(c.a)(s,[{key:"render",value:function(){var e=this;return Object(O.jsx)("div",{style:{position:"fixed",top:0,bottom:0,right:0,width:"400px",padding:"10px 15px",boxShadow:"rgb(60, 110, 113) 0px 0px 2px",overflow:"scroll"},className:"mainColors",children:Object(O.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"120px auto",gridTemplateRows:"1fr 5px",rowGap:"10px",margin:"35px 0 30px 0"},children:[Object(O.jsxs)("div",{className:"minorTxt",style:{gridArea:"1/1/1/3",textAlign:"right"},children:[Object(O.jsxs)("i",{children:["ID ",this.state.id]}),Object(O.jsx)(j.a,{style:{position:"relative",top:"4px",marginLeft:"10px",fontSize:"23px"},className:"closeButton",icon:b.p,onClick:function(){e.props.onClose()}})]}),Object(O.jsx)("div",{style:{gridArea:"3/1/3/2"},children:Object(O.jsx)("span",{title:this.props.item.dir_name,children:"Werk:"})}),Object(O.jsx)("div",{style:{gridArea:"3/2/3/3"},children:Object(O.jsx)(C,{value:this.state.ac_web?this.state.ac_web:"",tbl:"work",searchCol:"ac_web",returnCol:"ac_web",onChange:function(t,s){e.setState({ac_web:t,work_id:s}),e.updateBibliography(s)}})}),this.state.bibliography_preview?Object(O.jsx)("div",{className:"minorTxt",style:{gridArea:"4/1/4/2"},children:"Biblio-graphische Angaben:"}):null,this.state.bibliography_preview?Object(O.jsx)("div",{className:"minorTxt",style:{gridArea:"4/2/4/3",boxShadow:"0 1px 2px lightgray",backgroundColor:"#F4F4F4",padding:"5px 10px"},children:this.state.bibliography_preview}):null,Object(O.jsx)("div",{style:{gridArea:"5/1/5/2"},children:"Ressource:"}),Object(O.jsx)("div",{style:{gridArea:"5/2/5/3"},children:Object(O.jsx)(_,{options:[[0,"Edition (relevant)"],[1,"Edition (veraltet)"],[2,"Handschrift"],[3,"Alter Druck (relevant)"],[4,"Alter Druck (veraltet)"],[5,"Sonstiges"]],value:this.state.ressource,onChange:function(t){e.setState({ressource:parseInt(t.target.value)})}})}),0===this.state.ressource||1===this.state.ressource||5===this.state.ressource?[Object(O.jsx)("div",{style:{gridArea:"6/1/6/2"},children:"Editor:"},"0"),Object(O.jsx)("div",{style:{gridArea:"6/2/6/3"},children:Object(O.jsx)("input",{type:"text",style:{width:"96%"},value:this.state.editor,onChange:function(t){e.setState({editor:t.target.value})}})},"1"),Object(O.jsx)("div",{style:{gridArea:"7/1/7/2"},children:"Jahr:"},"2"),Object(O.jsx)("div",{style:{gridArea:"7/2/7/3"},children:Object(O.jsx)("input",{type:"text",style:{width:"96%"},value:this.state.year,onChange:function(t){e.setState({year:t.target.value})}})},"3"),Object(O.jsx)("div",{style:{gridArea:"8/1/8/2"},children:"Band:"},"4"),Object(O.jsx)("div",{style:{gridArea:"8/2/8/3"},children:Object(O.jsx)("input",{type:"text",style:{width:"96%"},value:this.state.volume,onChange:function(t){e.setState({volume:t.target.value})}})},"5"),Object(O.jsx)("div",{style:{gridArea:"9/1/9/2"},children:"Bandinhalt:"},"6"),Object(O.jsx)("div",{style:{gridArea:"9/2/9/3"},children:Object(O.jsx)("input",{type:"text",style:{width:"96%"},value:this.state.volumeContent,onChange:function(t){e.setState({volumeContent:t.target.value})}})},"7"),Object(O.jsx)("div",{style:{gridArea:"10/1/10/2"},children:"Reihe:"},"8"),Object(O.jsx)("div",{style:{gridArea:"10/2/10/3"},children:Object(O.jsx)(_,{options:[[0,""],[1,"Migne PL"],[2,"ASBen."],[3,"ASBoll."],[4,"AnalBoll."],[5,"Mon. Boica"],[6,"Ma. Schatzverzeichnisse"],[7,"Ma. Bibliothekskataloge"]],value:this.state.serie,onChange:function(t){e.setState({serie:parseInt(t.target.value)})}})},"9")]:null,2===this.state.ressource?[Object(O.jsx)("div",{style:{gridArea:"6/1/6/2"},children:"Stadt:"},"0"),Object(O.jsx)("div",{style:{gridArea:"6/2/6/3"},children:Object(O.jsx)("input",{type:"text",style:{width:"96%"},value:this.state.location,onChange:function(t){e.setState({location:t.target.value})}})},"1"),Object(O.jsx)("div",{style:{gridArea:"7/1/7/2"},children:"Bibliothek:"},"2"),Object(O.jsx)("div",{style:{gridArea:"7/2/7/3"},children:Object(O.jsx)("input",{type:"text",style:{width:"96%"},value:this.state.library,onChange:function(t){e.setState({library:t.target.value})}})},"3"),Object(O.jsx)("div",{style:{gridArea:"8/1/8/2"},children:"Signatur:"},"4"),Object(O.jsx)("div",{style:{gridArea:"8/2/8/3"},children:Object(O.jsx)("input",{type:"text",style:{width:"96%"},value:this.state.signature,onChange:function(t){e.setState({signature:t.target.value})}})},"5")]:null,3===this.state.ressource||4===this.state.ressource?[Object(O.jsx)("div",{style:{gridArea:"6/1/6/2"},children:"Drucker:"},"0"),Object(O.jsx)("div",{style:{gridArea:"6/2/6/3"},children:Object(O.jsx)("input",{type:"text",style:{width:"96%"},value:this.state.editor,onChange:function(t){e.setState({editor:t.target.value})}})},"1"),Object(O.jsx)("div",{style:{gridArea:"7/1/7/2"},children:"Ort:"},"2"),Object(O.jsx)("div",{style:{gridArea:"7/2/7/3"},children:Object(O.jsx)("input",{type:"text",style:{width:"96%"},value:this.state.location,onChange:function(t){e.setState({location:t.target.value})}})},"3"),Object(O.jsx)("div",{style:{gridArea:"8/1/8/2"},children:"Jahr:"},"4"),Object(O.jsx)("div",{style:{gridArea:"8/2/8/3"},children:Object(O.jsx)("input",{type:"text",style:{width:"96%"},value:this.state.year,onChange:function(t){e.setState({year:t.target.value})}})},"5")]:null,Object(O.jsx)("div",{style:{gridArea:"12/1/12/2"},children:"Kommentar:"}),Object(O.jsx)("div",{style:{gridArea:"12/2/12/3"},children:Object(O.jsx)("textarea",{style:{width:"270px",height:"100px"},value:this.state.comment,onChange:function(t){e.setState({comment:t.target.value})}})}),Object(O.jsx)("div",{style:{gridArea:"13/1/13/2"},children:Object(O.jsx)("span",{title:this.props.item.dir_name,children:"Dateipfad:"})}),Object(O.jsx)("div",{style:{gridArea:"13/2/13/3"},children:Object(O.jsx)("input",{type:"text",style:{width:"96%"},value:this.state.path,onChange:function(t){e.setState({path:t.target.value})}})}),Object(O.jsx)("div",{style:{gridArea:"14/1/14/2"},children:Object(O.jsxs)("span",{title:this.props.item.dir_name,children:["Link ",Object(O.jsx)("i",{className:"minorTxt",children:"(nur externe Quellen)"}),":"]})}),Object(O.jsx)("div",{style:{gridArea:"14/2/14/3"},children:Object(O.jsx)("input",{type:"text",style:{width:"96%"},value:this.state.url,onChange:function(t){e.setState({url:t.target.value})}})}),Object(O.jsx)("div",{style:{gridArea:"15/2/15/3"},children:Object(O.jsx)("input",{type:"button",value:"speichern",onClick:Object(n.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e.state.type&&1!==e.state.type&&5!==e.state.type||e.state.editor&&e.state.year){t.next=4;break}e.props.status("error","Geben Sie den Editor und das Jahr ein."),t.next=9;break;case 4:return e.props.status("saving","Die Dateien werden hochgeladen."),t.next=7,v.edition.save({id:e.state.id,work_id:e.state.work_id,ressource:e.state.ressource,editor:e.state.editor,year:e.state.year,volume:e.state.volume,vol_cont:e.state.volumeContent,serie:e.state.serie,comment:e.state.comment,location:e.state.location,library:e.state.library,signature:e.state.signature,path:e.props.item.path,url:e.props.item.url});case 7:e.props.status("saved","Das Speichern war erfolgreich."),e.props.onUpdate(e.state.id);case 9:case"end":return t.stop()}}),t)})))})})]})})}},{key:"componentDidMount",value:function(){this.updateBibliography(this.props.item.work_id)}},{key:"componentDidUpdate",value:function(){this.state.id!==this.props.item.id&&(this.updateBibliography(this.props.item.work_id),this.setState({id:this.props.item.id,ressource:this.props.item.ressource,work_id:this.props.item.work_id,ac_web:this.props.item.ac_web,editor:this.props.item.editor,year:this.props.item.year,volume:this.props.item.volume,volumeContent:this.props.item.volumeContent,serie:this.props.item.serie,location:this.props.item.location,library:this.props.item.library,signature:this.props.item.signature,comment:this.props.item.comment,path:this.props.item.path,url:this.props.item.url}))}},{key:"updateBibliography",value:function(){var e=Object(n.a)(r.a.mark((function e(t){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t>0)){e.next=5;break}return e.next=3,v.work.get({id:t},{select:["bibliography"]});case 3:(s=e.sent).length>0?this.setState({bibliography_preview:s[0].bibliography}):this.setState({bibliography_preview:null});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),s}(d.a.Component),J=s(66),U=s(38),G=(s(307),function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={firstName:v.me.first_name,lastName:v.me.last_name,eMail:v.me.email,user:v.me,oldPassword:null,newPassword:null,z_width:v.options.z_width},a}return Object(c.a)(s,[{key:"render",value:function(){var e=this;return Object(O.jsxs)("div",{style:{margin:"0 20px"},children:[Object(O.jsx)("h3",{children:"Pers\xf6nliche Daten"}),Object(O.jsxs)("div",{style:{padding:"0 20px",display:"grid",gridTemplateColumns:"200px 400px",rowGap:"10px",margin:"50px 0"},children:[Object(O.jsx)("div",{children:"Vorname:"}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{style:{width:"100%"},type:"text",value:this.state.firstName,onChange:function(t){e.setState({firstName:t.target.value})}})}),Object(O.jsx)("div",{children:"Nachname:"}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{style:{width:"100%"},type:"text",value:this.state.lastName,onChange:function(t){e.setState({lastName:t.target.value})}})}),Object(O.jsx)("div",{children:"Email-Adresse:"}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{style:{width:"100%"},type:"text",value:this.state.user.email,onChange:function(t){e.setState({eMail:t.target.value})}})}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{type:"button",value:"speichern",onClick:Object(n.a)(r.a.mark((function t(){var s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.props.status("saving"),t.next=3,v.user.save({id:v.me.id,first_name:e.state.firstName,last_name:e.state.lastName,email:e.state.eMail});case 3:return t.next=5,v.getUser();case 5:s=t.sent,v.me=s,e.props.status("saved");case 8:case"end":return t.stop()}}),t)})))})})]}),Object(O.jsx)("h3",{children:"Passwort"}),Object(O.jsxs)("div",{style:{padding:"0 20px",display:"grid",gridTemplateColumns:"200px 400px",rowGap:"10px",margin:"50px 0"},children:[Object(O.jsx)("div",{children:"altes Passwort:"}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{style:{width:"100%"},type:"password",onChange:function(t){e.setState({oldPassword:t.target.value})}})}),Object(O.jsx)("div",{children:"neues Passwort:"}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{style:{width:"100%"},type:"password",onChange:function(t){e.setState({newPassword:t.target.value})}})}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{type:"button",value:"speichern",onClick:Object(n.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.props.status("saving"),t.next=3,v.user.save({id:v.me.id,old_password:e.state.oldPassword,new_password:e.state.newPassword});case 3:e.props.status("saved");case 4:case"end":return t.stop()}}),t)})))})})]}),Object(O.jsx)("h3",{children:"Darstellung der Webseite"}),Object(O.jsxs)("div",{style:{padding:"0 20px",display:"grid",gridTemplateColumns:"200px 400px",rowGap:"10px",margin:"50px 0"},children:[Object(O.jsx)("div",{children:"Breite der Zettel:"}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{type:"range",min:"400",max:"600",value:this.state.z_width,className:"slider",id:"zettelWidthRange",onChange:function(t){v.setOptions("z_width",t.target.value),v.setOptions("z_height",.7*parseInt(t.target.value)),e.setState({z_width:t.target.value})}})})]})]})}}]),s}(d.a.Component)),Z=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={tab:"lemma",zettel_process:null,lemma_letters:null,ressource_work:null},a}return Object(c.a)(s,[{key:"render",value:function(){var e=this,t=null;if(this.state.zettel_process){var s=[],a={labels:["abgeschlossen","nur Lemma","unbearbeitet"],datasets:[{label:"# of Votes",data:this.state.zettel_process,backgroundColor:["#114B79","#347F9F","#EAF2F3"],borderColor:["#1B3B6F","#065A82","#E8F1F2"],borderWidth:1}]};s.push(Object(O.jsxs)("div",{style:{margin:"auto",marginBottom:"80px",width:"450px",height:"450px"},children:[Object(O.jsx)("h4",{children:"nach Bearbeitungsstand"}),Object(O.jsx)(U.b,{options:{plugins:{legend:{position:"bottom"}}},data:a})]},"1"));var r={labels:["verzetteltes Material","Exzerpt","Index","Literatur","Index (unkl. Werk)","Notiz","kein Typ"],datasets:[{label:"# of Votes",data:this.state.zettel_types,backgroundColor:["#114B79","#347F9F","#8FC9D9","#D2EFF4","#EAF2F3","#EFEFEF","#FFFFFF"],borderColor:["#1B3B6F","#065A82","#61A4BC","#BCEDF6","#E8F1F2","#EEEEEE","#EFEFEF"],borderWidth:1}]};s.push(Object(O.jsxs)("div",{style:{margin:"auto",marginBottom:"80px",width:"450px",height:"450px"},children:[Object(O.jsx)("h4",{children:"nach Typen"}),Object(O.jsx)(U.b,{options:{plugins:{legend:{position:"bottom"}}},data:r})]},"2"));var n={labels:["2020","2021"],datasets:[{label:"ver\xe4ndert",data:this.state.zettel_changed,backgroundColor:["#114B79"],borderColor:["#114B79"],borderWidth:1,type:"line"},{label:"erstellt",data:this.state.zettel_created,backgroundColor:["#347F9F"],borderColor:["#347F9F"],borderWidth:1}]};s.push(Object(O.jsxs)("div",{style:{marginBottom:"80px",width:"100%",height:"400px"},children:[Object(O.jsx)("h4",{children:"nach Jahren"}),Object(O.jsx)(U.a,{options:{aspectRatio:!1,plugins:{legend:{display:!0,position:"bottom"}}},data:n})]},"3"));var i={labels:["Jan.","Feb.","M\xe4r.","Apr.","Mai","Jun.","Jul.","Aug.","Sep.","Okt.","Nov.","Dez."],datasets:[{label:"ver\xe4ndert",data:this.state.zettel_changed_current,backgroundColor:["#114B79"],borderColor:["#114B79"],borderWidth:1,type:"line"},{label:"bearbeitet",data:this.state.zettel_created_current,backgroundColor:["#347F9F"],borderColor:["#347F9F"],borderWidth:1}]};s.push(Object(O.jsxs)("div",{style:{marginBottom:"80px",width:"100%",height:"400px"},children:[Object(O.jsx)("h4",{children:"in diesem Jahr"}),Object(O.jsx)(U.a,{options:{aspectRatio:!1,plugins:{legend:{display:!0,position:"bottom"}}},data:i})]},"4")),t=Object(O.jsx)("div",{children:s})}var c=null;if(this.state.lemma_letters){var o=[],l={labels:["A","B","C","D","E","F","G","H","I","K","L","M","N","O","P","Q","R","S","T","U","V","X","Y","Z"],datasets:[{label:"",data:this.state.lemma_letters,backgroundColor:["#114B79","#347F9F","#8FC9D9","#D2EFF4","#EAF2F3"],borderColor:["#1B3B6F","#065A82","#61A4BC","#BCEDF6","#E8F1F2"],borderWidth:1}]};o.push(Object(O.jsxs)("div",{style:{margin:"auto",marginBottom:"80px",width:"450px",height:"450px"},children:[Object(O.jsx)("h4",{children:"nach Buchstaben"}),Object(O.jsx)(U.b,{options:{plugins:{legend:{display:!1,position:"bottom"}}},data:l})]},"1"));var u={labels:["relevant","nicht relevant"],datasets:[{label:"",data:this.state.lemma_mlw,backgroundColor:["#114B79","#EAF2F3"],borderColor:["#1B3B6F","#E8F1F2"],borderWidth:1}]};o.push(Object(O.jsxs)("div",{style:{margin:"auto",marginBottom:"80px",width:"450px",height:"450px"},children:[Object(O.jsx)("h4",{children:"nach Relevanz f\xfcrs W\xf6rterbuch"}),Object(O.jsx)(U.b,{options:{plugins:{legend:{display:!0,position:"bottom"}}},data:u})]},"2")),c=Object(O.jsx)("div",{style:{display:"flex",flexWrap:"wrap"},children:o})}var d=null;if(this.state.ressource_work){var p=[];console.log(this.state.ressource_work);var h={labels:["mit Volltext und pdf","nur mit pdf","ohne pdf und Volltext"],datasets:[{label:"",data:this.state.ressource_work,backgroundColor:["#114B79","#347F9F","#EAF2F3"],borderColor:["#1B3B6F","#065A82","#E8F1F2"],borderWidth:1}]};p.push(Object(O.jsxs)("div",{style:{margin:"auto",marginBottom:"80px",width:"450px",height:"450px"},children:[Object(O.jsx)("h4",{children:"Werke nach Volltext und pdfs"}),Object(O.jsx)(U.b,{options:{plugins:{legend:{position:"bottom"}}},data:h})]},"1")),d=Object(O.jsx)("div",{style:{display:"flex",flexWrap:"wrap"},children:p})}var j={boxShadow:"0px 2px 7px rgb(217, 217, 217)",padding:"40px 10% 20px 10%",display:"block"},b=Object(O.jsx)("div",{style:j});switch(this.state.tab){case"lemma":b=Object(O.jsx)("div",{style:j,children:c});break;case"zettel":b=Object(O.jsx)("div",{style:j,children:t});break;case"ressource":b=Object(O.jsx)("div",{style:j,children:d});break;default:b=Object(O.jsx)("div",{children:"Tab nicht erkannt!"})}var x={padding:"5px 10px",cursor:"default"},m={padding:"5px 10px",borderBottom:"1px solid red",cursor:"default"};return Object(O.jsxs)("div",{style:{padding:"20px 10% 0 10%"},children:[Object(O.jsxs)("div",{style:{display:"flex",justifyContent:"space-evenly",padding:"10px 20px"},children:[Object(O.jsx)("div",{style:"lemma"===this.state.tab?m:x,onClick:function(){e.setState({tab:"lemma"})},children:"Lemma"}),Object(O.jsx)("div",{style:"zettel"===this.state.tab?m:x,onClick:function(){e.setState({tab:"zettel"})},children:"Zettel"}),Object(O.jsx)("div",{style:"ressource"===this.state.tab?m:x,onClick:function(){e.setState({tab:"ressource"})},children:"Werke und Ressourcen"})]}),b,Object(O.jsxs)("div",{style:{color:"lightgray",float:"right",marginTop:"20px",fontSize:"14px"},children:["Stand: ",this.state.last_updated]})]})}},{key:"componentDidMount",value:function(){var e=this;(function(){var t=Object(n.a)(r.a.mark((function t(){var s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.statistics.getAll();case 2:s=t.sent,console.log(s),e.setState({last_updated:JSON.parse(s.find((function(e){return"last_updated"===e.name})).data),zettel_process:JSON.parse(s.find((function(e){return"zettel_process"===e.name})).data),zettel_types:JSON.parse(s.find((function(e){return"zettel_type"===e.name})).data),zettel_created:JSON.parse(s.find((function(e){return"zettel_created"===e.name})).data),zettel_changed:JSON.parse(s.find((function(e){return"zettel_changed"===e.name})).data),zettel_created_current:JSON.parse(s.find((function(e){return"zettel_created_current"===e.name})).data),zettel_changed_current:JSON.parse(s.find((function(e){return"zettel_changed_current"===e.name})).data),lemma_letters:JSON.parse(s.find((function(e){return"lemma_letter"===e.name})).data),lemma_mlw:JSON.parse(s.find((function(e){return"lemma_mlw"===e.name})).data),ressource_work:JSON.parse(s.find((function(e){return"ressource_work"===e.name})).data)});case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}}]),s}(d.a.Component),K=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={tab:"updateOpera",users:[]},a}return Object(c.a)(s,[{key:"render",value:function(){var e=this,t={boxShadow:"0px 2px 7px rgb(217, 217, 217)",padding:"40px 10% 20px 10%",display:"grid",gridTemplateColumns:"200px auto",gridTemplateRows:"1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr auto",gridGap:"15px"},s=Object(O.jsx)("div",{style:t});switch(this.state.tab){case"updateOpera":t.gridTemplateRows="1fr 1fr",s=Object(O.jsxs)("div",{style:t,children:[Object(O.jsxs)("div",{style:{gridArea:"1/1/1/3",textAlign:"justify"},children:["Damit \xc4nderungen in den ",Object(O.jsx)("i",{children:"opera"}),"-Listen oder \xc4nderungen in den Ressourcen in den Listen sichtbar werden, m\xfcssen sie auf dem Server aktualisiert werden. Dieser Prozess kann 30 Sekunden bis 1 Minute dauern.",Object(O.jsx)("br",{}),Object(O.jsx)("b",{children:"Wechseln oder schlie\xdfen Sie nicht die Ansicht, w\xe4hrend die Aktualisierung ausgef\xfchrt wird."})]}),Object(O.jsx)("div",{style:{gridArea:"2/2/2/3",textAlign:"right"},children:Object(O.jsx)("input",{type:"button",value:"opera-Listen aktualisieren",onClick:Object(n.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.props.status("saving","Aktualisierung wird ausgef\xfchrt."),t.next=3,v.exec("opera_update");case 3:200===t.sent?e.props.status("saved","Aktualisierung erfolgreich."):e.props.status("error","Die Aktualisierung war nicht erfolgreich.");case 5:case"end":return t.stop()}}),t)})))})})]});break;case"updateStatistics":t.gridTemplateRows="1fr 1fr",s=Object(O.jsxs)("div",{style:t,children:[Object(O.jsxs)("div",{style:{gridArea:"1/1/1/3",textAlign:"justify"},children:["Um die Zahlen in der Statistik-Ansicht zu aktualisieren, m\xfcssen sie auf dem Server neu berechnet werden. Dieser Prozess kann 30 Sekunden bis 1 Minute dauern.",Object(O.jsx)("br",{}),Object(O.jsx)("b",{children:"Wechseln oder schlie\xdfen Sie nicht die Ansicht, w\xe4hrend die Aktualisierung ausgef\xfchrt wird."})]}),Object(O.jsx)("div",{style:{gridArea:"2/2/2/3",textAlign:"right"},children:Object(O.jsx)("input",{type:"button",value:"Statistik aktualisieren",onClick:Object(n.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.props.status("saving","Aktualisierung wird ausgef\xfchrt."),t.next=3,v.exec("statistics_update");case 3:200===t.sent?e.props.status("saved","Aktualisierung erfolgreich."):e.props.status("error","Die Aktualisierung war nicht erfolgreich.");case 5:case"end":return t.stop()}}),t)})))})})]});break;case"accounts":t.display="block";var a,i=[],c=Object(x.a)(this.state.users);try{var o=function(){var t=a.value;i.push(Object(O.jsxs)("tr",{onDoubleClick:function(s){s.stopPropagation(),e.setState({item:t})},children:[Object(O.jsxs)("td",{children:[t.first_name," ",t.last_name]}),Object(O.jsx)("td",{children:JSON.parse(t.access).join(", ")}),Object(O.jsx)("td",{children:t.agent}),Object(O.jsx)("td",{children:Date.now()-new Date(t.session_last_active)<18e5?Object(O.jsx)(j.a,{icon:b.n,color:"gold",style:{fontSize:"25px",marginLeft:"20px"}}):Object(O.jsx)(j.a,{icon:b.k,color:"silver",style:{fontSize:"20px",marginLeft:"20px"}})})]},t.id))};for(c.s();!(a=c.n()).done;)o()}catch(d){c.e(d)}finally{c.f()}s=Object(O.jsx)("div",{style:t,children:Object(O.jsx)("table",{className:"minorTxt",width:"100%",children:Object(O.jsx)("tbody",{children:i})})});break;default:s=Object(O.jsx)("div",{children:"Tab nicht erkannt!"})}var l={padding:"5px 10px",cursor:"default"},u={padding:"5px 10px",borderBottom:"1px solid red",cursor:"default"};return Object(O.jsxs)("div",{style:{padding:"20px 20% 0 20%"},onDoubleClick:function(){e.setState({item:null})},children:[Object(O.jsxs)("div",{style:{display:"flex",justifyContent:"space-evenly",padding:"10px 20px"},children:[Object(O.jsx)("div",{style:"updateOpera"===this.state.tab?u:l,onClick:function(){e.setState({tab:"updateOpera"})},children:"Opera-Listen"}),Object(O.jsx)("div",{style:"updateStatistics"===this.state.tab?u:l,onClick:function(){e.setState({tab:"updateStatistics"})},children:"Statistiken"}),v.access("admin")?Object(O.jsx)("div",{style:"accounts"===this.state.tab?u:l,onClick:function(){e.setState({tab:"accounts"})},children:"Kontenverwaltung"}):null]}),s,this.state.item?Object(O.jsx)(V,{status:this.props.status,item:this.state.item,onUpdate:function(e){alert("Ansicht updaten!")}}):null]})}},{key:"componentDidMount",value:function(){var e=this;v.access("admin")&&function(){var t=Object(n.a)(r.a.mark((function t(){var s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.user.getAll({order:["last_name"]});case 2:s=t.sent,e.setState({users:s});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}}]),s}(d.a.Component),V=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={access:JSON.parse(a.props.item.access)},a}return Object(c.a)(s,[{key:"render",value:function(){for(var e=this,t=[],s=function(){var s=Object(J.a)(r[a],2),n=s[0],i=s[1],c="";e.state.access.includes(n)&&(c="accessMarked"),t.push(Object(O.jsx)("div",{className:c,onClick:function(){var t=e.state.access;t.includes(n)?t=t.map((function(e){if(e!=n)return e})):t.push(n),e.setState({access:t})},children:i},n))},a=0,r=Object.entries({auth:"Profil aktiviert",admin:"Adminrechte",o_view:"Kommentarspalte (opera-Listen)",o_edit:"opera-Listen bearbeiten",z_add:"Zettel importieren",z_edit:"Zettel bearbeiten",l_edit:"Lemma-Liste bearbeiten",library:"Zugriff auf Bibliothek",e_edit:"Bibliothek bearbeiten",setup:"Zugriff auf Datenbanksetup",module:"Zugriff \xfcber Python-Modul",editor:"Zugriff auf Lemmastrecken-Editor",comment:"Zugriff auf Kommentarfunktion",comment_moderator:"Kommentare moderieren"});a<r.length;a++)s();return Object(O.jsxs)("div",{style:{position:"fixed",overflow:"scroll",top:0,bottom:0,right:0,width:"400px",padding:"25px 15px 10px 15px",boxShadow:"rgb(60, 110, 113) 0px 0px 2px"},className:"mainColors",children:[Object(O.jsxs)("h3",{children:[this.props.item.first_name," ",this.props.item.last_name]}),Object(O.jsxs)("div",{children:["Am ",this.props.item.session_last_active," zuletzt online."]}),Object(O.jsx)("div",{style:{border:"1px solid black",margin:"10px 0",padding:"10px"},children:this.props.item.agent}),Object(O.jsx)("h4",{children:"Rechte"}),Object(O.jsx)("div",{className:"accessBox",children:t}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{type:"button",style:{float:"right",marginTop:"20px"},value:"speichern",onClick:function(){e.props.status("saving"),v.user.save({id:e.props.item.id,access:JSON.stringify(e.state.access)}),e.props.status("saved")}})})]})}},{key:"componentDidUpdate",value:function(e){e.item.id!=this.props.item.id&&this.setState({access:JSON.parse(this.props.item.access)})}}]),s}(d.a.Component),q=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={tab:"res",workLst:[],pathLst:[],scanWork:1,scanType:0,scanEditor:null,scanYear:null,scanVolume:null,scanVolumeContent:null,scanSerie:null,scanLibrary:null,scanLocation:null,scanSignature:null,scanFiles:null,ocrRessource:1,ocrFiles:null,zettelLetter:"A",zettelType:0,zettelFiles:null,zettelEditors:[[v.me.id,v.me.last_name]],zettelEditorSelected:v.me.id},a}return Object(c.a)(s,[{key:"render",value:function(){var e=this,t={boxShadow:"0px 2px 7px rgb(217, 217, 217)",padding:"40px 10% 20px 10%",display:"grid",gridTemplateColumns:"200px auto",gridTemplateRows:"1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr auto",gridGap:"15px"},s=Object(O.jsx)("div",{style:t});switch(this.state.tab){case"res":s=Object(O.jsxs)("div",{style:t,children:[Object(O.jsx)("div",{style:{gridArea:"1/1/1/2"},children:"Werk:"}),Object(O.jsx)("div",{style:{gridArea:"1/2/1/3"},children:Object(O.jsx)(_,{options:this.state.workLst,onChange:function(t){e.setState({scanWork:t.target.value})}})}),Object(O.jsx)("div",{style:{gridArea:"2/1/2/2"},children:"Ressource:"}),Object(O.jsx)("div",{style:{gridArea:"2/2/2/3"},children:Object(O.jsx)(_,{options:[[0,"Edition (relevant)"],[1,"Edition (veraltet)"],[2,"Handschrift"],[3,"Alter Druck (relevant)"],[4,"Alter Druck (veraltet)"],[5,"Sonstiges"]],onChange:function(t){e.setState({scanType:parseInt(t.target.value)})}})}),0===this.state.scanType||1===this.state.scanType||5===this.state.scanType?[Object(O.jsx)("div",{style:{gridArea:"3/1/3/2"},children:"Editor:"},"0"),Object(O.jsx)("div",{style:{gridArea:"3/2/3/3"},children:Object(O.jsx)("input",{type:"text",style:{width:"96%"},onChange:function(t){e.setState({scanEditor:t.target.value})}})},"1"),Object(O.jsx)("div",{style:{gridArea:"4/1/4/2"},children:"Jahr:"},"2"),Object(O.jsx)("div",{style:{gridArea:"4/2/4/3"},children:Object(O.jsx)("input",{type:"text",style:{width:"96%"},onChange:function(t){e.setState({scanYear:t.target.value})}})},"3"),Object(O.jsx)("div",{style:{gridArea:"5/1/5/2"},children:"Band:"},"4"),Object(O.jsx)("div",{style:{gridArea:"5/2/5/3"},children:Object(O.jsx)("input",{type:"text",style:{width:"96%"},onChange:function(t){e.setState({scanVolume:t.target.value})}})},"5"),Object(O.jsx)("div",{style:{gridArea:"6/1/6/2"},children:"Bandinhalt:"},"6"),Object(O.jsx)("div",{style:{gridArea:"6/2/6/3"},children:Object(O.jsx)("input",{type:"text",style:{width:"96%"},onChange:function(t){e.setState({scanVolumeContent:t.target.value})}})},"7"),Object(O.jsx)("div",{style:{gridArea:"7/1/7/2"},children:"Reihe:"},"8"),Object(O.jsx)("div",{style:{gridArea:"7/2/7/3"},children:Object(O.jsx)(_,{options:[[0,""],[1,"Migne PL"],[2,"ASBen."],[3,"ASBoll."],[4,"AnalBoll."],[5,"Mon. Boica"],[6,"Ma. Schatzverzeichnisse"],[7,"Ma. Bibliothekskataloge"]],onChange:function(t){e.setState({scanSerie:parseInt(t.target.value)})}})},"9")]:null,2===this.state.scanType?[Object(O.jsx)("div",{style:{gridArea:"3/1/3/2"},children:"Stadt:"},"0"),Object(O.jsx)("div",{style:{gridArea:"3/2/3/3"},children:Object(O.jsx)("input",{type:"text",style:{width:"96%"},onChange:function(t){e.setState({scanLocation:t.target.value})}})},"1"),Object(O.jsx)("div",{style:{gridArea:"4/1/4/2"},children:"Bibliothek:"},"2"),Object(O.jsx)("div",{style:{gridArea:"4/2/4/3"},children:Object(O.jsx)("input",{type:"text",style:{width:"96%"},onChange:function(t){e.setState({scanLibrary:t.target.value})}})},"3"),Object(O.jsx)("div",{style:{gridArea:"5/1/5/2"},children:"Signatur:"},"4"),Object(O.jsx)("div",{style:{gridArea:"5/2/5/3"},children:Object(O.jsx)("input",{type:"text",style:{width:"96%"},onChange:function(t){e.setState({scanSignature:t.target.value})}})},"5")]:null,3===this.state.scanType||4===this.state.scanType?[Object(O.jsx)("div",{style:{gridArea:"3/1/3/2"},children:"Drucker:"},"0"),Object(O.jsx)("div",{style:{gridArea:"3/2/3/3"},children:Object(O.jsx)("input",{type:"text",style:{width:"96%"},onChange:function(t){e.setState({scanEditor:t.target.value})}})},"1"),Object(O.jsx)("div",{style:{gridArea:"4/1/4/2"},children:"Ort:"},"2"),Object(O.jsx)("div",{style:{gridArea:"4/2/4/3"},children:Object(O.jsx)("input",{type:"text",style:{width:"96%"},onChange:function(t){e.setState({scanLocation:t.target.value})}})},"3"),Object(O.jsx)("div",{style:{gridArea:"5/1/5/2"},children:"Jahr:"},"4"),Object(O.jsx)("div",{style:{gridArea:"5/2/5/3"},children:Object(O.jsx)("input",{type:"text",style:{width:"96%"},onChange:function(t){e.setState({scanYear:t.target.value})}})},"5")]:null,Object(O.jsx)("div",{style:{gridArea:"9/1/9/2"},children:"Dateipfad:"}),Object(O.jsx)("div",{style:{gridArea:"9/2/9/3"},children:Object(O.jsx)("input",{type:"text",style:{width:"96%"},onChange:function(t){e.setState({scanPath:t.target.value})}})}),Object(O.jsx)("div",{style:{gridArea:"10/1/10/2"},children:".png-Dateien:"}),Object(O.jsx)("div",{style:{gridArea:"10/2/10/3"},children:Object(O.jsx)("input",{type:"file",name:"files",accept:"image/png",multiple:!0,onChange:function(t){e.setState({scanFiles:t.target.files})}})}),Object(O.jsx)("div",{style:{gridArea:"12/2/12/3"},children:Object(O.jsx)("input",{type:"button",value:"hochladen",onClick:Object(n.a)(r.a.mark((function t(){var s,a,n,i,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=e.state.scanFiles){t.next=4;break}e.props.status("error","Geben Sie Dateien zum Hochladen an."),t.next=30;break;case 4:if(0!==e.state.scanType&&1!==e.state.scanType&&5!==e.state.scanType||e.state.scanEditor&&e.state.scanYear){t.next=8;break}e.props.status("error","Geben Sie den Editor und das Jahr ein."),t.next=30;break;case 8:if(!e.state.scanPath||!e.state.scanWork){t.next=29;break}return e.props.status("saving","Die Dateien werden hochgeladen."),t.next=12,v.edition.save({work_id:e.state.scanWork,ressource:e.state.scanType,editor:e.state.scanEditor,year:e.state.scanYear,volume:e.state.scanVolume,vol_cont:e.state.scanVolumeContent,serie:e.state.scanSerie,location:e.state.scanLocation,library:e.state.scanLibrary,signature:e.state.scanSignature,path:e.state.scanPath,url:""});case 12:if(s=t.sent,console.log("new edition id:",s),!(s>0)){t.next=26;break}for((a=new FormData).append("edition_id",s),a.append("path",e.state.scanPath),n=e.state.scanFiles.length,i=0;i<n;i++)a.append("files",e.state.scanFiles[i]);return t.next=22,v.importScans(a);case 22:400===(c=t.sent).status?e.props.status("error","Fehler beim Hochladen der Dateien."):1==c.body.length?(e.props.status("saved","Das Hochladen war erfolgreich. Eine Datei wurde \xfcbersprungen (s. Konsole)."),console.log("Bereits auf dem Server und deshalb \xfcbersprungen: ".concat(c.body.join(", ")))):c.body.length>0?(e.props.status("saved","Das Hochladen war erfolgreich. ".concat(c.body.length," Dateien wurden \xfcbersprungen (s. Konsole).")),console.log("Bereits auf dem Server und deshalb \xfcbersprungen: ".concat(c.body.join(", ")))):e.props.status("saved","Das Hochladen war erfolgreich."),t.next=27;break;case 26:e.props.status("error","Edition konnte nicht erstellt werden.");case 27:t.next=30;break;case 29:e.props.status("error","Geben Sie einen g\xfcltigen Pfad ein!");case 30:case"end":return t.stop()}}),t)})))})})]});break;case"ocr":t.gridTemplateRows="1fr 1fr 1fr 1fr auto",s=Object(O.jsxs)("div",{style:t,children:[Object(O.jsx)("div",{children:"Ressource:"}),Object(O.jsx)("div",{children:Object(O.jsx)(_,{options:this.state.pathLst,onChange:function(){var t=Object(n.a)(r.a.mark((function t(s){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({ocrRessource:s.target.value});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})}),Object(O.jsx)("div",{children:".txt-Dateien:"}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{type:"file",accept:"text/plain",multiple:!0,onChange:function(t){e.setState({ocrFiles:t.target.files})}})}),Object(O.jsx)("div",{style:{gridArea:"4/2/4/3"},children:Object(O.jsx)("input",{type:"button",value:"hochladen",onClick:Object(n.a)(r.a.mark((function t(){var s,a,n,i,c,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=e.state.ocrFiles){t.next=4;break}e.props.status("error","Geben Sie Dateien zum Hochladen an."),t.next=35;break;case 4:if(null!=e.state.ocrRessource){t.next=8;break}e.props.status("error","W\xe4hlen Sie einen Ordner aus."),t.next=35;break;case 8:return e.props.status("saving","Die Dateien werden hochgeladen."),t.next=11,v.scan.get({path:e.state.ocrRessource},{select:["id","filename"]});case 11:s=t.sent,console.log(s),a=[],n=[],i=Object(x.a)(e.state.ocrFiles),t.prev=16,o=r.a.mark((function e(){var t,i,o,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.value,i=t.name.substring(0,t.name.length-4),!(o=s.find((function(e){return e.filename==i})))){e.next=11;break}return console.log(o),e.next=7,t.text();case 7:l=e.sent,n.push({id:o.id,full_text:l}),e.next=12;break;case 11:a.push(t.name);case 12:case"end":return e.stop()}}),e)})),i.s();case 19:if((c=i.n()).done){t.next=23;break}return t.delegateYield(o(),"t0",21);case 21:t.next=19;break;case 23:t.next=28;break;case 25:t.prev=25,t.t1=t.catch(16),i.e(t.t1);case 28:return t.prev=28,i.f(),t.finish(28);case 31:if(!(n.length>0)){t.next=34;break}return t.next=34,v.scan.save(n);case 34:a.length>1?(e.props.status("saved","Dateien wurden hochgeladen. ".concat(a.length," Dateien konnten nicht zugewiesen werden (s. Konsole).")),console.log("\xfcbersprungene Dateien: ".concat(a.join(", ")))):1==a.length?(e.props.status("saved","Dateien wurden hochgeladen. 1 Datei konnte nicht zugewiesen werden (s. Konsole)."),console.log("\xfcbersprungene Dateien: ".concat(a.join(", ")))):e.props.status("saved","Dateien wurden hochgeladen.");case 35:case"end":return t.stop()}}),t,null,[[16,25,28,31]])})))})})]});break;case"zettel":t.gridTemplateRows="1fr 1fr 1fr 1fr 1fr auto",s=Object(O.jsxs)("div",{style:t,children:[Object(O.jsx)("div",{children:"Buchstabe:"}),Object(O.jsx)("div",{children:Object(O.jsx)(_,{options:[["A","A"],["B","B"],["C","C"],["D","D"],["E","E"],["F","F"],["G","G"],["H","H"],["I","I"],["J","J"],["K","K"],["L","L"],["M","M"],["N","N"],["O","O"],["P","P"],["Q","Q"],["R","R"],["S","S"],["T","T"],["U","U"],["V","V"],["W","W"],["X","X"],["Y","Y"],["Z","Z"]],onChange:function(t){e.setState({zettelLetter:t.target.value})}})}),Object(O.jsx)("div",{children:"erstellt von:"}),Object(O.jsx)("div",{children:Object(O.jsx)(_,{options:this.state.zettelEditors,onChange:function(t){e.setState({zettelEditorSelected:t.target.value})}})}),Object(O.jsx)("div",{children:"Zettel-Typ:"}),Object(O.jsx)("div",{children:Object(O.jsx)(_,{options:[[0,"Index-/Exzerpt-Zettel"],[1,"verzetteltes Material"],[4,"Literatur"]],onChange:function(t){e.setState({zettelType:t.target.value})}})}),Object(O.jsx)("div",{children:"Dateien:"}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{type:"file",accept:"image/jpeg",multiple:!0,onChange:function(t){e.setState({zettelFiles:t.target.files})}})}),Object(O.jsx)("div",{style:{gridArea:"5/2/5/3"},children:Object(O.jsx)("input",{type:"button",value:"hochladen",onClick:Object(n.a)(r.a.mark((function t(){var s,a,n,i,c,o,l,u;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=e.state.zettelFiles){t.next=4;break}e.props.status("error","Geben Sie Dateien zum Hochladen an."),t.next=21;break;case 4:for(e.props.status("saving","Die Dateien werden vorbereitet."),100,s=100,a=-1,n=[],i=e.state.zettelFiles.length,c=0;c<i;c++)s>=100&&(s=0,a++,n.push(new FormData),n[a].append("letter",e.state.zettelLetter),n[a].append("type",e.state.zettelType),n[a].append("user_id_id",e.state.zettelEditorSelected)),s++,n[a].append("files",e.state.zettelFiles[c]);e.props.status("saving","Die Dateien werden hochgeladen."),o=0,l=n;case 13:if(!(o<l.length)){t.next=20;break}return u=l[o],t.next=17,v.importZettel(u);case 17:o++,t.next=13;break;case 20:e.props.status("saved","Dateien wurden hochgeladen.");case 21:case"end":return t.stop()}}),t)})))})})]});break;default:s=Object(O.jsx)("div",{children:"Tab nicht gefunden."})}var a={padding:"5px 10px",cursor:"default"},i={padding:"5px 10px",borderBottom:"1px solid red",cursor:"default"};return Object(O.jsxs)("div",{style:{padding:"20px 20% 0 20%"},children:[Object(O.jsxs)("div",{style:{display:"flex",justifyContent:"space-evenly",padding:"10px 20px"},children:[Object(O.jsx)("div",{style:"res"===this.state.tab?i:a,onClick:function(){e.setState({tab:"res"})},children:"Ressource"}),Object(O.jsx)("div",{style:"ocr"===this.state.tab?i:a,onClick:function(){e.setState({tab:"ocr"})},children:"ocr-Dateien"}),Object(O.jsx)("div",{style:"zettel"===this.state.tab?i:a,onClick:function(){e.setState({tab:"zettel"})},children:"Zettel"})]}),s]})}},{key:"componentDidMount",value:function(){var e=this;(function(){var t=Object(n.a)(r.a.mark((function t(){var s,a,n,i,c,o,l,u,d,p;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.work.get({in_use:1},{select:["id","ac_web"],order:["ac_web"]});case 2:s=t.sent,a=[],n=Object(x.a)(s);try{for(n.s();!(i=n.n()).done;)c=i.value,a.push([c.id,c.ac_web])}catch(r){n.e(r)}finally{n.f()}return e.setState({workLst:a}),t.next=9,v.scan_paths.getAll({select:["path"],order:["path"]});case 9:o=t.sent,l=[],u=Object(x.a)(o);try{for(u.s();!(d=u.n()).done;)p=d.value,l.push([p.path,p.path])}catch(r){u.e(r)}finally{u.f()}e.setState({pathLst:l,ocrRessource:l[0][0]});case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()(),v.access("admin")&&v.user.getAll({order:["last_name"]}).then((function(t){var s,a=[],r=Object(x.a)(t);try{for(r.s();!(s=r.n()).done;){var n=s.value;a.push([n.id,n.last_name])}}catch(i){r.e(i)}finally{r.f()}e.setState({zettelEditors:a})})).catch((function(e){throw e}))}}]),s}(d.a.Component),Q=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(){return Object(i.a)(this,s),t.apply(this,arguments)}return Object(c.a)(s,[{key:"render",value:function(){return Object(O.jsxs)("div",{style:{padding:"20px 40px"},children:[Object(O.jsxs)("p",{children:[Object(O.jsx)("a",{href:"https://gitlab.lrz.de/haeberlin/dmlw/-/wikis/00-Start",children:"Hilfe und Informationen"})," zu dMLW finden Sie auf unsererer ",Object(O.jsx)("a",{href:"https://gitlab.lrz.de/haeberlin/dmlw",children:"GitLab-Seite"}),"."]}),Object(O.jsxs)("p",{children:["Informationen zu der aktuellen Version von dMLW und den Ver\xe4nderungen finden Sie ",Object(O.jsx)("a",{href:"https://gitlab.lrz.de/haeberlin/dmlw/-/blob/master/CHANGELOG.md",children:"in unserem Changelog"}),"."]}),Object(O.jsxs)("p",{children:["Informationen zum W\xf6rterbuch-Projekt auf ",Object(O.jsx)("a",{href:"www.mlw.badw.de",children:"www.mlw.badw.de"})]})]})}}]),s}(d.a.Component),Y=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={showDate:!0,count:0,selectionDetail:{ids:[],currentId:null,activeProjects:[]}},a}return Object(c.a)(s,[{key:"render",value:function(){var e=this;return Object(O.jsxs)("div",{style:{padding:"0 10px",display:"grid",gridTemplateColumns:"auto 420px",gridTemplateRows:"min-content auto",rowGap:"15px"},children:[Object(O.jsx)(w,{boxName:"zettel",searchQuery:function(t,s){e.searchQuery(t,s)},searchOptions:[["lemma","Lemma"],["type","Typ"],["id","ID"],["opus","Werk"],["date_type","Datum-Typ"]],sortOptions:[['["id"]',"ID"],['["lemma", "lemma_nr", "date_sort", "date_type"]',"Datum"]],gridArea:this.state.selectionDetail.ids.length>0?"1/1/1/2":"1/1/1/3"}),Object(O.jsx)(X,{loadPage:function(t){e.loadPage(t)},currentElements:this.state.currentElements,count:this.state.count,currentPage:this.state.currentPage,maxPage:this.state.maxPage,presetSelection:this.state.presetSelection,gridArea:this.state.selectionDetail.ids.length>0?"2/1/2/2":"2/1/2/3",showDetail:function(t){e.setState({selectionDetail:t.selection,itemDetail:t.item})},showDate:this.state.showDate}),this.state.selectionDetail.ids.length>0?Object(O.jsx)(ee,{activeProjects:this.state.activeProjects,status:this.props.status,selection:this.state.selectionDetail,item:this.state.itemDetail,onUpdate:function(t){e.reloadZettel(t)},openNextItem:function(){e.openNextItem()},toggleShowDate:function(){e.state.showDate?e.setState({showDate:!1}):e.setState({showDate:!0})}}):""]})}},{key:"openNextItem",value:function(){var e=Object(n.a)(r.a.mark((function e(){var t,s,a,n,i=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.zettel.get({id:this.state.itemDetail.id});case 2:t=(t=e.sent)[0],s=this.state.currentElements,a=s.findIndex((function(e){return e.id===t.id})),s[a]=t,n=this.state.currentElements.findIndex((function(e){return e.id===i.state.itemDetail.id})),this.state.currentElements.length>n+1&&this.setState({currentElements:s,itemDetail:this.state.currentElements[n+1],presetSelection:[this.state.currentElements[n+1].id]});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"reloadZettel",value:function(){var e=Object(n.a)(r.a.mark((function e(t){var s,a,n,i=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=Object(x.a)(t),e.prev=1,n=r.a.mark((function e(){var s,n,c,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a.value,e.next=3,v.zettel.get({id:s});case 3:n=(n=e.sent)[0],c=i.state.currentElements,o=c.findIndex((function(e){return e.id===n.id})),c[o]=n,i.setState({currentElements:c,selectionDetail:{ids:t},itemDetail:n});case 9:case"end":return e.stop()}}),e)})),s.s();case 4:if((a=s.n()).done){e.next=8;break}return e.delegateYield(n(),"t0",6);case 6:e.next=4;break;case 8:e.next=13;break;case 10:e.prev=10,e.t1=e.catch(1),s.e(e.t1);case 13:return e.prev=13,s.f(),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(t){return e.apply(this,arguments)}}()},{key:"searchQuery",value:function(){var e=Object(n.a)(r.a.mark((function e(t,s){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.status("searching"),e.next=3,v.zettel.search(t,{count:!0,order:s});case 3:return a=e.sent,e.next=6,v.zettel.search(t,{limit:50,order:s});case 6:n=e.sent,a[0].count>1?this.props.status("found","".concat(a[0].count," Eintr\xe4ge gefunden.")):1===a[0].count?this.props.status("found","1 Eintrag gefunden."):this.props.status("notFound"),this.setState({query:t,queryOrder:s,count:a[0].count,maxPage:Math.floor(a[0].count/50)+1,currentPage:1,currentElements:n,selectionDetail:{ids:[]}});case 9:case"end":return e.stop()}}),e,this)})));return function(t,s){return e.apply(this,arguments)}}()},{key:"loadPage",value:function(){var e=Object(n.a)(r.a.mark((function e(t){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.zettel.search(this.state.query,{limit:50,offset:50*(t-1),order:this.state.queryOrder});case 2:s=e.sent,this.setState({currentPage:t,currentElements:s,selectionDetail:{ids:[]}});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this;v.access("editor")&&v.project.get({status:1}).then((function(t){var s,a=[],r=Object(x.a)(t);try{for(r.s();!(s=r.n()).done;){var n=s.value;a.push([n.id,n.name])}}catch(i){r.e(i)}finally{r.f()}e.setState({activeProjects:a})})).catch((function(e){throw e}))}}]),s}(d.a.Component),X=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={selection:{currentId:null,ids:[]}},a}return Object(c.a)(s,[{key:"render",value:function(){var e=this;if(this.props.count>0){var t,s=[],a=Object(x.a)(this.props.currentElements);try{for(a.s();!(t=a.n()).done;){var r=t.value;s.push(Object(O.jsx)($,{showDate:this.props.showDate,testProp:r.id+"_test",id:r.id,item:r},r.id))}}catch(n){a.e(n)}finally{a.f()}return Object(O.jsxs)("div",{style:{gridArea:this.props.gridArea,padding:"0 10px"},children:[Object(O.jsx)(k,{loadPage:function(t){e.props.loadPage(t)},currentPage:this.props.currentPage,maxPage:this.props.maxPage}),Object(O.jsx)(z,{multiSelect:!0,className:"zettel_box",selectCallback:function(t,s){e.selectCallback(t,s)},preset:this.props.presetSelection,children:s})]})}return null}},{key:"selectCallback",value:function(e,t){e?this.props.showDetail({selection:t,item:e.props.item}):this.props.showDetail({selection:t,item:null})}}]),s}(d.a.Component),$=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(){return Object(i.a)(this,s),t.apply(this,arguments)}return Object(c.a)(s,[{key:"render",value:function(){var e=this.props.item,t={height:v.options.z_height+"px",width:v.options.z_width+"px"};if(null!=e.img_path){var s="";return 0===e.in_use?s+="zettel_img no_use":s+="zettel_img in_use",Object(O.jsxs)("div",{className:"zettel",id:e.id,style:t,children:[Object(O.jsx)("img",{alt:"",style:{objectFit:"fill",borderRadius:"7px"},className:s,src:e.img_path+".jpg"}),this.props.showDate?Object(O.jsx)("div",{className:"zettel_msg",dangerouslySetInnerHTML:D(e.date_display)}):null,Object(O.jsxs)("div",{className:"zettel_menu",children:[Object(O.jsx)("span",{style:{float:"left"},dangerouslySetInnerHTML:D(e.lemma_display)}),Object(O.jsx)("span",{style:{float:"right"},dangerouslySetInnerHTML:D(e.opus)})]})]})}return Object(O.jsx)("div",{className:"zettel",id:e.id,style:t,children:Object(O.jsxs)("div",{className:"digitalZettel",children:[Object(O.jsx)("div",{className:"digitalZettelLemma",dangerouslySetInnerHTML:D(e.lemma_display)}),Object(O.jsx)("div",{className:"digitalZettelDate",dangerouslySetInnerHTML:D(e.date_display)}),Object(O.jsx)("div",{className:"digitalZettelWork",dangerouslySetInnerHTML:D(e.opus)}),Object(O.jsx)("div",{className:"digitalZettelText",dangerouslySetInnerHTML:D(e.txt)})]})})}}]),s}(d.a.Component),ee=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={addLemma:!1,ressources:[],batchType:1,id:a.props.item.id,type:a.props.item.type,date_display:a.props.item.date_display,date_type:a.props.item.date_type,lemma_id:a.props.item.lemma_id,lemma_ac:a.props.item.lemma_ac,work_id:a.props.item.work_id,ac_web:a.props.item.ac_web,date_own:a.props.item.date_own,date_own_display:a.props.item.date_own_display,newLemma_Lemma:"",newLemma_LemmaDisplay:"",batch_lemma_id:null,batch_lemma_ac:"",batch_work_id:null,batch_ac_web:"",batch_type:null,batch_project:null},a}return Object(c.a)(s,[{key:"render",value:function(){var e=this,t={position:"fixed",top:0,bottom:0,right:0,width:"400px",padding:"10px 15px",boxShadow:"rgb(60, 110, 113) 0px 0px 2px",overflow:"scroll"};if(this.state.addLemma)return Object(O.jsxs)("div",{style:t,className:"mainColors",children:[Object(O.jsx)("div",{style:{margin:"50px 0 10px 0"},children:Object(O.jsxs)("p",{children:[Object(O.jsx)("b",{children:"Soll ein neues Lemma erstellt werden?"}),Object(O.jsx)("br",{}),Object(O.jsxs)("span",{className:"minorTxt",children:[Object(O.jsx)("a",{href:"https://gitlab.lrz.de/haeberlin/dmlw/-/wikis/10-WikiHow:-Neues-Lemma-erstellen#3-maske-ausf\xfcllen",target:"_blank",rel:"noreferrer",children:"Hier"})," finden Sie Informationen zum Erstellen neuer Lemmata."]})]})}),Object(O.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"150px auto",gridTemplateRows:"1fr 1fr",rowGap:"10px",margin:"50px 0"},children:[Object(O.jsx)("div",{style:{gridArea:"1/1/1/2"},children:"Lemma:"}),Object(O.jsx)("div",{style:{gridArea:"1/2/1/3"},children:Object(O.jsx)("input",{type:"text",value:this.state.newLemma_Lemma,onChange:function(t){e.setState({newLemma_Lemma:t.target.value})}})}),Object(O.jsx)("div",{style:{gridArea:"2/1/2/2"},children:"Lemma-Anzeige:"}),Object(O.jsx)("div",{style:{gridArea:"2/2/2/3"},children:Object(O.jsx)("input",{type:"text",value:this.state.newLemma_LemmaDisplay,onChange:function(t){e.setState({newLemma_LemmaDisplay:t.target.value})}})})]}),Object(O.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"150px auto",gridTemplateRows:"1fr 1fr 1fr 1fr",rowGap:"10px",margin:"50px 0"},children:[Object(O.jsx)("div",{style:{gridArea:"1/1/1/2"},children:"Zahlzeichen:"}),Object(O.jsx)("div",{style:{gridArea:"1/2/1/3"},children:Object(O.jsx)(_,{options:[[0,""],[1,1],[2,2],[3,3],[4,4],[5,5],[6,6]],onChange:function(t){e.setState({newLemma_Homonym:t.target.value})}})}),Object(O.jsx)("div",{style:{gridArea:"2/1/2/2"},children:"im W\xf6rterbuch:"}),Object(O.jsx)("div",{style:{gridArea:"2/2/2/3"},children:Object(O.jsx)(_,{options:[[0,"Nein"],[1,"Ja"]],onChange:function(t){e.setState({newLemma_MLW:t.target.value})}})}),Object(O.jsx)("div",{style:{gridArea:"3/1/3/2"},children:"Stern:"}),Object(O.jsx)("div",{style:{gridArea:"3/2/3/3"},children:Object(O.jsx)(_,{options:[[0,"Nein"],[1,"Ja"]],onChange:function(t){e.setState({newLemma_Stern:t.target.value})}})}),Object(O.jsx)("div",{style:{gridArea:"4/1/4/2"},children:"Fragezeichen:"}),Object(O.jsx)("div",{style:{gridArea:"4/2/4/3"},children:Object(O.jsx)(_,{options:[[0,"Nein"],[1,"Ja"]],onChange:function(t){e.setState({newLemma_LemmaFrage:t.target.value})}})})]}),Object(O.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"150px auto",gridTemplateRows:"1fr",rowGap:"10px",margin:"50px 0"},children:[Object(O.jsx)("div",{style:{gridArea:"1/1/1/2"},children:Object(O.jsx)("input",{type:"button",value:"erstellen",onClick:Object(n.a)(r.a.mark((function t(){var s,a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(""===e.state.newLemma_Lemma||e.state.newLemma_Lemma.indexOf(" ")>-1)){t.next=4;break}e.props.status("error","Bitte ein g\xfcltiges Lemma eintragen!"),t.next=15;break;case 4:if(""!==e.state.newLemma_LemmaDisplay){t.next=8;break}e.props.status("error","Bitte tragen Sie eine g\xfcltige Lemma-Anzeige ein!"),t.next=15;break;case 8:return s={lemma:e.state.newLemma_Lemma,lemma_display:e.state.newLemma_LemmaDisplay,MLW:e.state.newLemma_MLW,Fragezeichen:e.state.newLemma_LemmaFrage,Stern:e.state.newLemma_Stern},e.state.newLemma_Homonym>0&&(s.lemma_nr=e.state.newLemma_Homonym),t.next=12,v.lemma.save(s);case 12:a=t.sent,e.props.status("saved","Neue ID: ".concat(a)),e.setState({lemma_ac:e.state.newLemma_Lemma,lemma_id:a,addLemma:!1});case 15:case"end":return t.stop()}}),t)})))})}),Object(O.jsx)("div",{style:{gridArea:"1/2/1/3"},children:Object(O.jsx)("input",{type:"button",value:"abbrechen",onClick:function(){e.setState({addLemma:!1})}})})]})]});if(1===this.props.selection.ids.length){var s=[];if(this.state.ressources.length>0){var a,i=-1,c=Object(x.a)(this.state.ressources);try{for(c.s();!(a=c.n()).done;){var o=a.value;i++;var l=o.url;null!==l&&""!==l||(l="/site/viewer/".concat(o.id)),s.push(Object(O.jsx)("div",{children:Object(O.jsx)("a",{href:l,target:"_blank",rel:"noreferrer",children:o.label})},i))}}catch(m){c.e(m)}finally{c.f()}}var u="",d={borderTop:"1px solid #f2f2f2",paddingTop:"30px",display:"grid",gridTemplateColumns:"150px auto",gridTemplateRows:"1fr",rowGap:"10px",margin:"10px 0 30px 0"};return 9===this.state.date_type&&(d.gridTemplateRows="1fr 1fr 1fr 1fr",u=[Object(O.jsx)("div",{style:{gridArea:"2/1/2/3"},children:Object(O.jsxs)("span",{className:"minorTxt",children:[Object(O.jsx)("b",{children:"Achtung:"})," Dieser Zettel ben\xf6tigt eine ",Object(O.jsx)("a",{href:"https://gitlab.lrz.de/haeberlin/dmlw/-/wikis/10-WikiHow:-Zettel-verkn\xfcpfen#datierung-der-zettel",target:"_blank",rel:"noreferrer",children:"eigene Datierung"}),"."]})},"1"),Object(O.jsx)("div",{style:{gridArea:"3/1/3/2"},children:"Sortierdatum:"},"2"),Object(O.jsx)("div",{style:{gridArea:"3/2/3/3"},children:Object(O.jsx)("input",{type:"text",value:this.state.date_own?this.state.date_own:"",onChange:function(t){isNaN(t.target.value)||""===t.target.value||" "===t.target.value?e.props.status("error","Sortierdatum muss eine Ganzzahl sein!"):e.setState({date_own:parseInt(t.target.value)})}})},"3"),Object(O.jsx)("div",{style:{gridArea:"4/1/4/2"},children:"Anzeigedatum:"},"4"),Object(O.jsx)("div",{style:{gridArea:"4/2/4/3"},children:Object(O.jsx)("input",{type:"text",value:this.state.date_own_display?this.state.date_own_display:"",onChange:function(t){e.setState({date_own_display:t.target.value})}})},"5")]),Object(O.jsxs)("div",{style:t,className:"mainColors",children:[Object(O.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"150px auto",gridTemplateRows:"1fr 5px 1fr 1fr 1fr",rowGap:"10px",margin:"35px 0 30px 0"},children:[Object(O.jsx)("div",{className:"minorTxt",style:{gridArea:"1/1/1/3",textAlign:"right"},children:Object(O.jsxs)("i",{children:["ID ",this.state.id]})}),Object(O.jsx)("div",{style:{gridArea:"3/1/3/2"},children:"Zetteltyp:"}),Object(O.jsx)("div",{style:{gridArea:"3/2/3/3"},children:Object(O.jsx)(_,{style:{width:"86%"},value:this.state.type?this.state.type:0,options:[[0,"..."],[1,"verzettelt"],[2,"Exzerpt"],[3,"Index"],[4,"Literatur"],[6,"Index (unkl. Werk)"],[7,"Notiz"]],onChange:function(t){e.setState({type:parseInt(t.target.value)})},classList:"zettel_type"})}),Object(O.jsx)("div",{style:{gridArea:"4/1/4/2"},children:"Lemma:"}),Object(O.jsx)("div",{style:{gridArea:"4/2/4/3"},children:Object(O.jsx)(C,{onChange:function(t,s){e.setState({lemma_ac:t,lemma_id:s,newLemma_Lemma:t,newLemma_LemmaDisplay:t})},value:this.state.lemma_ac?this.state.lemma_ac:"",tbl:"lemma",searchCol:"lemma",returnCol:"lemma_ac"})}),4!==this.state.type&&this.state.type<6?Object(O.jsx)("div",{style:{gridArea:"5/1/5/2"},children:"Werk:"}):null,4!==this.state.type&&this.state.type<6?Object(O.jsx)("div",{style:{gridArea:"5/2/5/3"},children:Object(O.jsx)(C,{value:this.state.ac_web?this.state.ac_web:"",tbl:"work",searchCol:"ac_web",returnCol:"ac_web",onChange:function(t,s){e.setState({ac_web:t,work_id:s})}})}):null]}),4!==this.state.type&&this.state.type<6&&this.state.work_id>0?Object(O.jsxs)("div",{style:d,children:[Object(O.jsx)("div",{style:{gridArea:"1/1/1/2"},children:"Datierung:"}),Object(O.jsx)("div",{style:{gridArea:"1/2/1/3"},children:Object(O.jsx)("span",{dangerouslySetInnerHTML:D(this.state.date_display)})}),u]}):null,4!==this.state.type&&this.state.type<6&&this.state.work_id>0?Object(O.jsx)("div",{style:{textAlign:"right",marginBottom:"20px"},children:Object(O.jsx)("a",{className:"minorTxt",onClick:this.props.toggleShowDate,children:"Datierung ein-/ausblenden"})}):null,Object(O.jsx)("div",{style:{borderTop:"1px solid #f2f2f2",paddingTop:"30px",display:"grid",gridTemplateColumns:"150px auto",gridTemplateRows:"1fr",rowGap:"10px",margin:"10px 0 30px 0"},children:Object(O.jsxs)("div",{style:{gridArea:"1/2/1/3"},children:[Object(O.jsx)("input",{type:"button",value:"speichern&weiter",style:{marginBottom:"10px"},onClick:function(){e.saveDetail(!0)}}),Object(O.jsx)("input",{type:"button",value:"speichern",onClick:function(){e.saveDetail()}})]})}),this.state.ressources.length>0&&4!==this.state.type&&this.state.type<6?Object(O.jsxs)("div",{style:{borderTop:"1px solid #f2f2f2",paddingTop:"30px",display:"grid",gridTemplateColumns:"150px auto",gridTemplateRows:"1fr",rowGap:"10px",margin:"10px 0 30px 0"},children:[Object(O.jsx)("div",{style:{gridArea:"1/1/1/2"},children:"Ressourcen:"}),Object(O.jsx)("div",{style:{gridArea:"1/2/1/3"},children:s})]}):null,v.access("admin")?Object(O.jsx)("div",{style:{textAlign:"right",fontSize:"25px",marginRight:"10px"},children:Object(O.jsx)(j.a,{icon:b.q,onClick:function(){window.confirm("Soll der Zettel wirklich gel\xf6scht werden? Dieser Schritt kann nicht mehr r\xfcckg\xe4ngig gemacht werden.")&&(e.props.status("deleting"),v.zettel.delete(e.state.id),e.props.status("deleted"))}})}):null]})}var p="";switch(this.state.batchType){case 1:p=Object(O.jsx)(C,{onChange:function(t,s){e.setState({batch_lemma_ac:t,batch_lemma_id:s})},value:this.state.batch_lemma_ac,tbl:"lemma",searchCol:"lemma",returnCol:"lemma_ac"});break;case 2:p=Object(O.jsx)(C,{value:this.state.batch_ac_web,tbl:"work",searchCol:"ac_web",returnCol:"ac_web",onChange:function(t,s){e.setState({batch_ac_web:t,batch_work_id:s})}});break;case 3:p=Object(O.jsx)(_,{style:{width:"86%"},options:[[0,"..."],[1,"verzettelt"],[2,"Exzerpt"],[3,"Index"],[4,"Literatur"],[6,"Index (unkl. Stelle)"],[7,"Notiz"]],onChange:function(t){e.setState({batch_type:t.target.value})}});break;case 4:break;default:p=Object(O.jsx)("div",{style:{color:"red"},children:"Unbekannter Stapel-Typ!"})}var h=[[1,"Lemma"],[2,"Werk"],[3,"Zettel-Typ"]];return v.access("editor")&&h.push([4,"Projekt"]),Object(O.jsx)("div",{style:t,className:"mainColors",children:Object(O.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"150px auto",gridTemplateRows:"1fr 25px 1fr 15px 1fr",rowGap:"10px",margin:"35px 0 30px 0"},children:[Object(O.jsx)("span",{style:{gridArea:"1/1/1/3",textAlign:"right"},className:"minorTxt",children:Object(O.jsxs)("i",{children:[this.props.selection.ids.length," Zettel"]})}),Object(O.jsx)("div",{style:{gridArea:"3/1/3/2"},children:Object(O.jsx)(_,{style:{width:"86%"},options:h,onChange:function(t){e.setState({batchType:parseInt(t.target.value)})}})}),Object(O.jsx)("div",{style:{gridArea:"3/2/3/3"},children:p}),Object(O.jsx)("div",{style:{gridArea:"5/2/5/3"},children:Object(O.jsx)("input",{type:"button",value:"f\xfcr alle \xfcbernehmen",onClick:Object(n.a)(r.a.mark((function t(){var s,a,n,i,c,o,l,u,d,p;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=!1,a="",n="",1===e.state.batchType&&null!=e.state.batch_lemma_id?(n="lemma_id",a=e.state.batch_lemma_id):2===e.state.batchType&&null!=e.state.batch_work_id?(n="work_id",a=e.state.batch_work_id):3===e.state.batchType&&null!=e.state.batch_type?(n="type",a=e.state.batch_type):4===e.state.batchType&&null!=e.state.batch_project?(n="project",a=e.state.batch_project):(s=!0,e.props.status("error","Bitte tragen Sie einen g\xfcltigen Wert ein.")),!(!1===s&&e.state.batchType<4)){t.next=15;break}i=[],c=Object(x.a)(e.props.selection.ids);try{for(c.s();!(o=c.n()).done;)l=o.value,(u={id:l,user_id:v.me.id})[n]=a,i.push(u)}catch(m){c.e(m)}finally{c.f()}return e.props.status("saving"),t.next=11,v.zettel.save(i);case 11:e.props.status("saved"),e.props.onUpdate(e.props.selection.ids),t.next=28;break;case 15:if(!1!==s||4!==e.state.batchType){t.next=28;break}return t.next=18,v.article.get({project_id:e.state.batch_project,sort_nr:0,parent_id:0});case 18:if(1==(d=t.sent).length){t.next=23;break}alert("Ein Fehler ist aufgetreten: Die Zettel k\xf6nnen dem Projekt nicht zugewiesen werden!"),t.next=28;break;case 23:return p=e.props.selection.ids.map((function(e){return{zettel_id:e,article_id:d[0].id}})),e.props.status("saving"),t.next=27,v.zettel_lnk.save(p);case 27:e.props.status("saved");case 28:case"end":return t.stop()}}),t)})))})})]})})}},{key:"componentDidMount",value:function(){var e=this;this.state.work_id>0&&v.edition.get({work_id:this.state.work_id}).then((function(t){e.setState({ressources:t})})).catch((function(e){throw e}))}},{key:"componentDidUpdate",value:function(){var e=this;this.state.id!==this.props.item.id&&(this.props.item.work_id>0?v.edition.get({work_id:this.props.item.work_id}).then((function(t){e.setState({addLemma:!1,id:e.props.item.id,type:e.props.item.type,date_display:e.props.item.date_display,date_type:e.props.item.date_type,lemma_id:e.props.item.lemma_id,lemma_ac:e.props.item.lemma_ac,work_id:e.props.item.work_id,ac_web:e.props.item.ac_web,date_own:e.props.item.date_own,date_own_display:e.props.item.date_own_display,ressources:t})})).catch((function(e){throw e})):this.setState({addLemma:!1,id:this.props.item.id,type:this.props.item.type,date_display:this.props.item.date_display,date_type:this.props.item.date_type,lemma_id:this.props.item.lemma_id,lemma_ac:this.props.item.lemma_ac,work_id:this.props.item.work_id,ac_web:this.props.item.ac_web,date_own:this.props.item.date_own,date_own_display:this.props.item.date_own_display,ressources:[]}))}},{key:"saveDetail",value:function(){var e=Object(n.a)(r.a.mark((function e(){var t,s,a=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]&&a[0],!(this.state.work_id>0&&9===this.state.date_type&&""!=this.state.date_own)||Number.isInteger(this.state.date_own)){e.next=5;break}this.props.status("error","Sortierdatum muss eine Ganzzahl sein!"),e.next=14;break;case 5:return s={id:this.state.id,type:this.state.type,user_id:v.me.id},this.state.work_id>0?s.work_id=this.state.work_id:s.work_id=null,this.props.status("saving"),null===this.state.lemma_id&&""!==this.state.newLemma_Lemma?this.setState({addLemma:!0}):this.state.lemma_id>0?s.lemma_id=this.state.lemma_id:s.lemma_id=null,9===this.state.date_type&&""!=this.state.date_own&&Number.isInteger(this.state.date_own)?(s.date_own=this.state.date_own,s.date_own_display=this.state.date_own_display):(s.date_own=null,s.date_own_display=null),e.next=12,v.zettel.save(s);case 12:this.props.status("saved"),t?(document.querySelector("select.zettel_type").focus(),this.props.openNextItem()):this.props.onUpdate([this.state.id]);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),s}(d.a.Component),te=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){return Object(i.a)(this,s),t.call(this,e)}return Object(c.a)(s,[{key:"render",value:function(){return Object(O.jsxs)("div",{children:["Der Lemmastrecken-Editor ist nur in der alten Version verf\xfcgbar. Klicken Sie ",Object(O.jsx)("a",{href:"/site",children:"hier"})," um ihn zu \xf6ffnen."]})}}]),s}(d.a.Component),se="#3c6e71",ae=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var a;Object(i.a)(this,s);return(a=t.call(this,e)).state={menuEntries:{"Zettel- und Wortmaterial":{visible:!1,items:{"Zettel-Datenbank":"zettel",Lemmaliste:"lemma"}},Verzeichnisse:{visible:!1,items:{"opera-maiora":"maiora","opera-minora":"minora",Ressourcen:"ressources","Sekund\xe4rliteratur":"seklit"}},Editor:{visible:!1,items:{"Projekt\xfcbersicht":"overview"}},Einstellungen:{visible:!1,items:{Hilfe:"help",Konto:"account",Server:"server",Import:"import",Statistiken:"stats",abmelden:"logout"}}},currentSubmenu:null},a}return Object(c.a)(s,[{key:"render",value:function(){var e=this,t={position:"fixed",top:0,left:0,boxShadow:"0 0 2px ".concat(se),padding:"10px 15px",zIndex:2e6},s=[];if(1===this.props.onTop){t.right=0,t.display="flex",t.position="absolute",t.justifyContent="space-evenly";var a=-1,r=function(t){a++;var r="";if(e.state.currentSubmenu===t){var n=[],i=function(s){n.push(Object(O.jsx)("div",{style:{margin:"10px 0 10px 10px"},onClick:function(){e.setState({currentSubmenu:""}),e.props.loadMain(e.state.menuEntries[t].items[s])},children:Object(O.jsx)("span",{style:{cursor:"pointer"},children:s})},s))};for(var c in e.state.menuEntries[t].items)i(c);r=Object(O.jsx)("div",{className:"mainColors",style:{position:"absolute",boxShadow:"rgb(60, 110, 113) 0px 0px 2px",top:"43px",padding:"10px 25px",marginLeft:"-10px"},children:n},n)}s.push(Object(O.jsxs)("div",{children:[Object(O.jsx)("span",{style:{cursor:"pointer"},onClick:function(){e.state.currentSubmenu===t?e.setState({currentSubmenu:null}):e.setState({currentSubmenu:t})},children:t}),r]},a))};for(var n in this.state.menuEntries)r(n)}else{t.transition="left 0.5s",this.state.hidden&&(t.left="-290px"),t.bottom="0",t.width="300px";var i=-1,c=function(t){s.push(Object(O.jsx)("div",{style:{marginTop:"15px",cursor:"default"},children:t},t));var a=function(a){i++,s.push(Object(O.jsx)("div",{style:{marginLeft:"15px",display:"inline-block",cursor:"pointer"},onClick:function(){e.props.loadMain(e.state.menuEntries[t].items[a])},children:a},a)),s.push(Object(O.jsx)("br",{},i))};for(var r in e.state.menuEntries[t].items)a(r)};for(var o in this.state.menuEntries)c(o)}return Object(O.jsx)("nav",{className:"mainColors",style:t,onClick:function(){1!==e.props.onTop&&(e.state.hidden?e.setState({hidden:!1}):e.setState({hidden:!0}))},children:s})}}]),s}(d.a.Component),re=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var a;Object(i.a)(this,s);a=t.call(this,e);var r=1;return window.innerWidth<1e3&&(r=0),a.state={mode:"login",res:null,mainMenuPos:r,status:{}},window.addEventListener("resize",(function(){window.innerWidth<1e3?a.setState({mainMenuPos:0}):a.setState({mainMenuPos:1})})),window.addEventListener("arachneError",(function(e){401===e.detail.status?a.newStatus("error","Der Server hat die Zugangsdaten abgelehnt. Melden Sie sich neu an!"):a.newStatus("error","Die Verbindung zum Server ist unterbrochen.")})),a.tbls=["author","edition","lemma","opera_maiora","opera_minora","scan","scan_lnk","work","zettel","user","seklit","project","article","zettel_lnk","statistics","scan_paths"],a}return Object(c.a)(s,[{key:"loadMain",value:function(e){"logout"===e?(v.close(),this.setState({mode:"login",res:null})):this.setState({res:e})}},{key:"render",value:function(){var e=this;if("main"===this.state.mode){var t=null;switch(this.state.res){case null:break;case"overview":t=Object(O.jsx)(te,{status:function(t,s){e.newStatus(t,s)}});break;case"ressources":t=Object(O.jsx)(R,{status:function(t,s){e.newStatus(t,s)}});break;case"seklit":t=Object(O.jsx)(P,{status:function(t,s){e.newStatus(t,s)}});break;case"stats":t=Object(O.jsx)(Z,{status:function(t,s){e.newStatus(t,s)}});break;case"server":t=Object(O.jsx)(K,{status:function(t,s){e.newStatus(t,s)}});break;case"lemma":t=Object(O.jsx)(N,{status:function(t,s){e.newStatus(t,s)}});break;case"maiora":t=Object(O.jsx)(I,{listName:"opera_maiora",status:function(t,s){e.newStatus(t,s)}});break;case"minora":t=Object(O.jsx)(I,{listName:"opera_minora",status:function(t,s){e.newStatus(t,s)}});break;case"help":t=Object(O.jsx)(Q,{});break;case"import":t=Object(O.jsx)(q,{status:function(t,s){e.newStatus(t,s)}});break;case"zettel":t=Object(O.jsx)(Y,{status:function(t,s){e.newStatus(t,s)}});break;case"account":t=Object(O.jsx)(G,{status:function(t,s){e.newStatus(t,s)}});break;default:t=Object(O.jsxs)("div",{children:["Unbekannter Men\xfc-Punkt ",this.state.res]})}return Object(O.jsxs)("div",{style:1===this.state.mainMenuPos?{marginTop:"60px"}:{marginLeft:"40px"},children:[Object(O.jsx)(ae,{onTop:this.state.mainMenuPos,loadMain:function(t){e.loadMain(t)}}),t,Object(O.jsx)(S,{status:this.state.status})]})}return"create"===this.state.mode?Object(O.jsxs)("div",{style:{position:"absolute",display:"grid",height:"100%",width:"100%",gridTemplateColumns:"1fr 2fr 1fr",gridTemplateRows:"1fr 2fr 1fr"},children:[Object(O.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gridTemplateRows:"auto 100px 50px 50px 50px 50px 50px auto",gridColumn:"2",gridRow:"2",padding:"10px 15px",borderRadius:"5px",boxShadow:"0 1.2px 6px ".concat(se)},children:[Object(O.jsx)("h1",{style:{textAlign:"center",gridArea:"2/2/2/4"},children:"Konto erstellen"}),Object(O.jsx)("span",{style:{gridArea:"3/2/3/3"},children:"Vorname:"}),Object(O.jsx)("div",{style:{gridArea:"3/3/3/4"},children:Object(O.jsx)("input",{type:"text",value:this.state.createFirstName?this.state.createFirstName:"",onChange:function(t){e.setState({createFirstName:t.target.value})}})}),Object(O.jsx)("span",{style:{gridArea:"4/2/4/3"},children:"Nachname:"}),Object(O.jsx)("div",{style:{gridArea:"4/3/4/4"},children:Object(O.jsx)("input",{type:"text",value:this.state.createLastName?this.state.createLastName:"",onChange:function(t){e.setState({createLastName:t.target.value})}})}),Object(O.jsx)("span",{style:{gridArea:"5/2/5/3"},children:"E-Mail:"}),Object(O.jsx)("div",{style:{gridArea:"5/3/5/4"},children:Object(O.jsx)("input",{type:"text",value:this.state.createEmail?this.state.createEmail:"",onChange:function(t){e.setState({createEmail:t.target.value})}})}),Object(O.jsx)("span",{style:{gridArea:"6/2/6/3"},children:"Passwort:"}),Object(O.jsx)("div",{style:{gridArea:"6/3/6/4"},children:Object(O.jsx)("input",{type:"password",value:this.state.createPassword?this.state.createPassword:"",onChange:function(t){e.setState({createPassword:t.target.value})}})}),Object(O.jsxs)("div",{style:{gridArea:"8/3/8/4"},children:[Object(O.jsx)("input",{type:"button",value:"registrieren",onClick:Object(n.a)(r.a.mark((function t(){var s,a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.state.createFirstName&&e.state.createFirstName&&e.state.createEmail&&e.state.createPassword)){t.next=19;break}return e.newStatus("saving"),s={first_name:e.state.createFirstName,last_name:e.state.createLastName,email:e.state.createEmail,password:e.state.createPassword},t.next=5,v.createAccount(s);case 5:a=t.sent,t.t0=a,t.next=201===t.t0?9:409===t.t0?12:406===t.t0?14:16;break;case 9:return e.newStatus("saved","Der Account wurde erfolgreich erstellt."),setTimeout((function(){e.setState({mode:"login"})}),2100),t.abrupt("break",17);case 12:return e.newStatus("error","Die Email-Adresse ist bereits vorhanden."),t.abrupt("break",17);case 14:return e.newStatus("error","Bitte f\xfcllen Sie alle Felder aus."),t.abrupt("break",17);case 16:e.newStatus("error","Die Registrierung is fehlgeschlagen. Versuchen Sie es erneut.");case 17:t.next=20;break;case 19:e.newStatus("error","Bitte f\xfcllen Sie alle Felder aus!");case 20:case"end":return t.stop()}}),t)})))})," ",Object(O.jsx)("span",{className:"minorTxt",style:{marginLeft:"20px"},children:Object(O.jsx)("a",{onClick:function(){e.setState({mode:"login"})},children:"zur\xfcck"})})]}),Object(O.jsx)("span",{style:{gridArea:"7/2/7/3"}})]}),Object(O.jsx)(S,{status:this.state.status})]}):Object(O.jsxs)("div",{style:{position:"absolute",display:"grid",height:"100%",width:"100%",gridTemplateColumns:"1fr 2fr 1fr",gridTemplateRows:"1fr 2fr 1fr"},children:[Object(O.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gridTemplateRows:"auto 100px 50px 50px 50px 25px 50px auto",gridColumn:"2",gridRow:"2",padding:"10px 15px",borderRadius:"5px",boxShadow:"0 1.2px 6px ".concat(se)},children:[Object(O.jsx)("h1",{style:{textAlign:"center",gridArea:"2/2/2/4"},children:"dMLW"}),Object(O.jsx)("span",{style:{gridArea:"3/2/3/3"},children:"Email:"}),Object(O.jsx)("div",{style:{gridArea:"3/3/3/4"},children:Object(O.jsx)("input",{type:"text",name:"email",style:{width:"300px"}})}),Object(O.jsx)("span",{style:{gridArea:"4/2/4/3"},children:"Passwort:"}),Object(O.jsx)("div",{style:{gridArea:"4/3/4/4"},children:Object(O.jsx)("input",{type:"password",name:"password",style:{width:"300px"}})}),Object(O.jsx)("div",{style:{gridArea:"5/3/5/4"},children:Object(O.jsx)("input",{type:"submit",value:"anmelden",onClick:function(){e.login()}})}),Object(O.jsxs)("span",{style:{gridArea:"7/2/7/4"},className:"minorTxt",children:["Noch kein Konto? Klicken Sie ",Object(O.jsx)("a",{onClick:function(){e.setState({mode:"create"})},children:"hier"}),"."]})]}),Object(O.jsx)("div",{className:"cat",children:Object(O.jsx)(j.a,{color:"black",icon:b.d})})]})}},{key:"componentDidMount",value:function(){var e=this;(function(){var t=Object(n.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.getUser();case 2:if(!t.sent){t.next=7;break}return t.next=6,v.open(e.tbls);case 6:e.setState({mode:"main"});case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}},{key:"login",value:function(){var e=Object(n.a)(r.a.mark((function e(){var t,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.querySelector("input[name=email]").value,s=document.querySelector("input[name=password]").value,e.t0=""!==t&&""!==s,!e.t0){e.next=7;break}return e.next=6,v.login(t,s,this.tbls);case 6:e.t0=e.sent;case 7:if(!e.t0){e.next=11;break}this.setState({mode:"main"}),e.next=12;break;case 11:alert("Geben Sie eine g\xfcltige Email-Adresse und Passwort ein!");case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"newStatus",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.setState({status:{id:Date.now(),visible:!0,type:e,value:t}})}}]),s}(d.a.Component);h.a.render(Object(O.jsx)(re,{}),document.getElementById("root"))}},[[607,1,2]]]);
//# sourceMappingURL=main.9cd61920.chunk.js.map