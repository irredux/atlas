{"version":3,"sources":["arachne.js","elements.js","lemma.js","opera.js","ressources.js","settings.js","zettel.js","index.js"],"names":["ArachneTable","tblName","url","key","this","a","options","search","c","o","v","query","qLst","push","JSON","stringify","count","limit","offset","select","order","encodeURI","fetch","headers","then","re","status","json","errorEvent","CustomEvent","detail","method","window","dispatchEvent","newValues","rId","Array","isArray","id","body","response","parseInt","text","arachne","me","user","password","tbls","open","getUser","reUser","selectKey","navigator","appVersion","indexOf","tables","tbl","data","newForm","mode","rights","parse","every","r","access","includes","SearchInput","props","item","searchOptions","value","className","style","boxShadow","marginRight","marginBottom","padding","width","border","color","type","placeholder","onKeyUp","e","keyCode","clickButton","icon","faMinusCircle","onClick","removeSearchFields","React","Component","SearchBox","queryTxt","state","nextID","searchFields","sOrder","cSF","sF","sendQuery","gridArea","faPlusCircle","position","top","fontSize","addSearchFields","float","marginTop","marginLeft","display","sortOptions","onChange","event","target","nSearchFields","filter","s","setState","exportSF","document","querySelectorAll","children","length","searchQuery","alert","Navigator","currentPage","scrollTo","faAngleUp","loadPage","margin","textAlign","onBlur","isNaN","maxPage","prevProps","move","Status","visible","statusBox","createRef","timeOutHandle","statusTxt","statusSymbol","backgroundColor","faSyncAlt","spin","clearTimeout","faDog","setTimeout","current","opacity","faCat","faCheckCircle","faTimesCircle","faCloudMoon","ref","bottom","left","transition","borderRadius","overflow","zIndex","SelectMenu","op","classList","pointerEvents","faAngleDown","AutoComplete","currentOptionId","userSelected","optionsElement","i","option","col","dataset","cursor","changeInputValue","onKeyDown","changeSelectedOption","newValue","get","newOptions","SelectorWrapper","isSelected","element","stopPropagation","onMouseUp","onSelect","shift","shiftKey","meta","metaKey","ctrl","ctrlKey","Selector","multiSelect","userSelect","msUserSelect","WebkitUserSelect","currentId","ids","Children","map","child","keys","selectCallback","targetId","inRange","newIds","forEach","itemId","preset","el","querySelector","scrollIntoView","behavior","block","parseHTML","__html","DOMPurify","sanitize","replace","ADD_TAGS","Lemma","gridTemplateColumns","gridTemplateRows","rowGap","q","newPage","currentElements","showDetail","onUpdate","reloadEntry","lemma","newItem","indexOfNewItem","findIndex","newQuery","console","log","queryOrder","Math","floor","selectionDetail","LemmaBox","selection","cEls","cEl","onDoubleClick","find","closest","title","dangerouslySetInnerHTML","lemma_display","dicts","comment","LemmaAside","homonym","MLW","Stern","Fragezeichen","right","newLemmaValue","lemma_nr","save","ressource","work_id","editor","year","volume","volumeContent","serie","location","library","signature","OperaAside","OperaBox","oLst","trLst","cHitId","hits","hitIndex","scrollRef","editionLst","editions_id","editionsId","editionsURL","editions_url","editionsLabel","editions_label","iE","cURL","arrow","faExternalLinkAlt","cLabel","href","rel","hitStyle","some","listName","abbr","full","author_id","date_display","bibliography","citation","oMax","nextPage","cSearch","maxHits","faBackward","gotoSearchResult","faForward","getAll","getLst","Opera","pageMax","itemDetail","reloadZettel","Ressource","workLst","work","in_use","works","newWorkLst","ac_web","getWorks","edition","RessourceBox","resTypes","label","opus","RessourceAside","vol_cont","Account","Statistics","tab","zettel_process","lemma_letters","ressource_work","zettelBox","zettelCharts","zettel_process_data","labels","Object","datasets","values","borderColor","borderWidth","height","plugins","legend","zettel_types_data","zettel_types","zettel_created_data","zettel_created","aspectRatio","zettel_changed_data","zettel_changed","fill","lemmaBox","lemmaCharts","lemma_letters_data","ressourceBox","ressourceCharts","ressource_fullTexts_data","ressource_fullTexts","styleBody","mainBody","styleTab","styleTabActive","borderBottom","justifyContent","zettel","zettels","process","abgeschlossen","z","lemma_id","unbearbeitet","reduce","previousValue","currentValue","types","verzettelt","Index","Exzerpt","Literatur","created","changed","years","range","start","stop","from","_","Date","now","getFullYear","months","getMonth","month","c_date","u_date","getZettel","lemmata","letters","letter","l","substring","toUpperCase","Rest","getLemmata","scan","scans","fullTexts","full_text","full_tet","getRessources","Server","users","gridGap","exec","userRows","first_name","last_name","join","agent","session_last_active","faSun","faMoon","newUsers","loadUsers","Import","scanWork","scanType","scanEditor","scanYear","scanVolume","scanVolumeContent","scanSerie","scanLibrary","scanLocation","scanSignature","scanFiles","ocrRessource","ocrFiles","zettelLetter","zettelFiles","zettelEditors","zettelEditorSelected","scanPath","name","accept","multiple","files","newEditionId","uploadForm","FormData","append","fLength","importScans","scan_lnk","edition_id","scanLnks","scanLst","scanLnk","scan_id","nScan","missLst","file","fName","cScan","filename","fileTxt","cItemCount","cUploadIndex","uploadGroup","uItem","importZettel","editions","newEditionLst","loadOptions","userLst","catch","Help","Zettel","presetSelection","openNextItem","lastIndex","ZettelBox","testProp","ZettelCard","img_path","alt","src","txt","ZettelAside","addLemma","ressources","batchType","date_type","lemma_ac","date_own","date_own_display","newLemma_Lemma","newLemma_LemmaDisplay","batch_lemma_id","batch_lemma_ac","batch_work_id","batch_ac_web","batch_type","newLemma_Homonym","newLemma_MLW","newLemma_Stern","newLemma_LemmaFrage","newId","cRes","keyCount","dateOwn","dateStyle","borderTop","paddingTop","saveDetail","inputType","skipSave","newKey","newValueLst","cId","newValueObj","user_id","res","next","Number","isInteger","nVals","focus","colors","MainMenu","menuEntries","items","currentSubmenu","onTop","mainEntry","subMenu","subMenuEntries","subEntry","loadMain","hidden","App","mainMenuPos","innerWidth","addEventListener","newStatus","close","main","gridColumn","gridRow","createFirstName","createLastName","createEmail","createPassword","email","createAccount","login","checkSession","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.5fe232b2.chunk.js","sourcesContent":["class ArachneTable {\n    constructor(tblName, url, key){\n        this.tblName = tblName;\n        this.url = url;\n        this.key = key;\n    }\n    async getAll(options={}){\n        return await this.search([{c:\"id\", o:\">\", v:0}], options);\n    }\n    async get(query, options={}){\n        let qLst = [];\n        for(const key in query){qLst.push({c: key, o:\"=\", v:query[key]})}\n        return await this.search(qLst, options);\n    }\n    async search(query, options={}){\n        // options = {count:true|false, limit:100, offset:100, select:[], order:[]}\n        let url = `${this.url}/data/${this.tblName}?query=${JSON.stringify(query)}`;\n        if(options.count===true){url += \"&count=1\"}\n        if(options.limit){url += \"&limit=\"+options.limit}\n        if(options.offset){url += \"&offset=\"+options.offset}\n        if(options.select){url += \"&select=\"+JSON.stringify(options.select)}\n        if(options.order){url += \"&order=\"+JSON.stringify(options.order)}\n        url = encodeURI(url);\n        return await fetch(url, {headers: {\"Authorization\": `Bearer ${this.key}`}})\n        .then(re => {\n            if(re.status === 200){return re.json()}\n            else{\n                let errorEvent = new CustomEvent(\"arachneError\", {detail: {method: \"search\", status: re.status}});\n                window.dispatchEvent(errorEvent);\n            }\n        });\n    }\n\n    async save(newValues){\n        // newValues is an object containing col/values as key/value pairs.\n        // when no id is given, a new entry will be created.\n        // for batch saving: newValues = [{col: val}, {col. val}, ...]\n        let method = \"POST\";\n        let url = \"\";\n        let rId = 1;\n        if(Array.isArray(newValues)){\n            url = `${this.url}/data_batch/${this.tblName}`;\n        } else {\n            url = `${this.url}/data/${this.tblName}`;\n            rId = newValues.id;\n            if(newValues.id!=null){\n                url += `/${newValues.id}`;\n                method = \"PATCH\";\n                delete newValues.id;\n            }\n        }\n        const response = await fetch(url, {\n            method: method,\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Authorization\": `Bearer ${this.key}`\n            },\n            body: JSON.stringify(newValues)\n        });\n        if(response.status===201 && method===\"POST\"){\n            if(Array.isArray(newValues)){return await rId}\n            else {return parseInt(await response.text())}\n        } else if(response.status===200 && method===\"PATCH\"){\n            return rId;\n        } else {\n            let errorEvent = new CustomEvent(\"arachneError\", {detail: {method: \"save\", status: response.status}});\n                window.dispatchEvent(errorEvent);\n            //throw new Error(`ARACHNE: entry not saved. Status: ${response.status}`);\n        }\n    }\n}\n\nclass Arachne {\n    constructor(url=\"\"){\n        this.url = url;\n        this.key = null;\n        this.me = null;\n    }\n    async login(user, password, tbls=null){\n        // opens a connection to the server and creates a session key\n        let re = await fetch(this.url+\"/session\", {\n            \"method\": \"post\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            \"body\": JSON.stringify({user: user, password: password})\n        });\n        if(re.status === 200){\n            this.key = await re.text();\n            return this.open(tbls);\n        }else{\n            return false;\n        }\n    }\n    async open(tbls=null){\n        const reUser = await this.getUser();\n        if(reUser){\n            this.me = reUser;\n            this.me.selectKey = 'ctrl';\n            if (navigator.appVersion.indexOf('Mac') > -1){this.me.selectKey = 'cmd';}\n        }\n        else {return false;}\n\n        if(tbls == null){tbls = await this.tables()}\n        for(const tbl of tbls){this[tbl] = new ArachneTable(tbl, this.url, this.key)}\n        return true;\n    }\n    async close(){\n        this.key = null;\n    }\n    async getUser(){\n        const reUser = await fetch(this.url+\"/session\",\n             {headers: {\n                 \"Authorization\": `Bearer ${this.key}`\n                }});\n        if(reUser.status === 200){return await reUser.json();}\n        else {return false;}\n    }\n    async createAccount(data){\n        const re = await fetch(this.url+\"/data/user\", {method: \"POST\", \n            headers: {\"Content-Type\": \"application/json\"},\n            body: JSON.stringify(data)});\n        return re.status;\n    }\n\n    async importScans(newForm){\n        const re = await fetch(this.url+\"/file/scan\", {method: \"POST\", \n        headers: {\"Authorization\": `Bearer ${this.key}`},\n            body: newForm\n        });\n        return {status: re.status, body: await re.json()};\n    }\n    async exec(mode){\n        const re = await fetch(this.url+\"/exec/\"+mode, {method: \"GET\", \n        headers: {\"Authorization\": `Bearer ${this.key}`}\n        });\n        return re.status;\n    }\n    access(rights){\n        if(this.me){\n            if(typeof rights === \"string\"){rights=JSON.parse(`[\"${rights}\"]`)}\n            return rights.every(r => this.me.access.includes(r));\n        }else{return false;}\n    }\n}\n\n//let arachne = new Arachne(\"http://localhost:8080\");\nlet arachne = new Arachne();\n\nexport { arachne };","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React from \"react\";\nimport { faPlusCircle, faMinusCircle, faAngleUp, faAngleDown, faCheckCircle, faCloudMoon, faTimesCircle, faSyncAlt, faCat, faDog } from \"@fortawesome/free-solid-svg-icons\";\nimport DOMPurify from \"dompurify\";\n\nimport { arachne } from \"./arachne.js\";\n\nclass SearchInput extends React.Component{\n    constructor(props){\n        super(props);\n        this.item = props.item;\n    }\n    render(){\n        let options = [];\n        for(const o of this.props.searchOptions){\n            options.push(<option key={o[0]}value={o[0]}>{o[1]}</option>);\n        }\n        return (\n        <div className=\"searchFields mainColors\" style={{boxShadow: \"rgb(217, 217, 217) 0px 0px 2px\", marginRight: \"10px\", marginBottom: \"10px\", padding: \"10px 15px 10px 15px\"}}>\n            <select style={{width: \"100px\", marginRight: \"0px\", border: \"none\", color: \"#284b63\"}}>\n                {options}\n            </select>\n            <select style={{width: \"40px\", marginRight: \"0px\", border: \"none\", color: \"#284b63\"}}>\n                <option value=\"=\">=</option>\n                <option value=\"!=\"></option>\n                <option value=\">\">&gt;</option>\n                <option value=\">=\"></option>\n                <option value=\"<\">&lt;</option>\n                <option value=\"<=\"></option>\n            </select>\n            <input type=\"text\" placeholder=\"...\"  style={{width: \"100px\", marginRight: \"22px\", border:\"none\"}} onKeyUp={e=>{if(e.keyCode===13){this.props.clickButton()}}}/>\n            <FontAwesomeIcon color=\"LightGray\"icon={faMinusCircle} onClick={\n                () => {this.props.removeSearchFields(this.props.item.id)}} />\n        </div>\n        );\n    }\n}\nclass SearchBox extends React.Component{\n    constructor(props){\n        super(props);\n        this.queryTxt = \"\";\n        this.state = {nextID: 1, searchFields: [{id: 0, c:\"lemma\", o:\"=\", v:\"\"}]};\n        this.sOrder = null;\n    }\n    render(){\n        let cSF = [];\n        for(const sF of this.state.searchFields){\n            cSF.push(<SearchInput searchOptions={this.props.searchOptions}removeSearchFields={id => {this.removeSearchFields(id)}} item={sF} key={sF.id} clickButton={()=>{this.sendQuery()}} />);\n        }\n        return <div style={{gridArea: this.props.gridArea}}>\n            <div className=\"searchBox\">\n                {cSF}\n                <FontAwesomeIcon color=\"LightGray\" icon={faPlusCircle} style={{color: \"var(--mainColor)\", position: \"relative\", top: \"-5px\", fontSize: \"25px\"}}  onClick={() => {this.addSearchFields()}}\n                 />\n            </div>\n            <div style={{float: \"right\", marginTop: \"10px\", marginRight: \"20px\"}}>\n            <input type=\"button\" value=\"suchen\" onClick={() => {this.sendQuery()}} />\n            <span style={{marginLeft: \"50px\", marginRight: \"10px\"}} className=\"minorTxt\">sortieren:</span><SelectMenu style={{display: \"inline-block\", width: \"100px\"}}options={this.props.sortOptions} onChange={event=>{this.sOrder = JSON.parse(event.target.value)}} />\n            </div>\n        </div>\n    }\n\n    removeSearchFields(id){\n        const nSearchFields = this.state.searchFields.filter(s => s.id!==id);\n        this.setState({searchFields: nSearchFields});\n    }\n    addSearchFields(){\n        let nSearchFields = this.state.searchFields;\n        nSearchFields.push({\n            id: this.state.nextID,\n            c: \"lemma\",\n            o: \"=\",\n            v: \"\"\n        });\n        this.setState({nextID: (this.state.nextID+1), searchFields: nSearchFields});\n    }\n    sendQuery(){\n        let exportSF = [];\n        const searchFields = document.querySelectorAll(\".searchFields\");\n        for(const sF of searchFields){\n            if(sF.children[2].value !== \"\"){\n                exportSF.push({\n                    c: sF.children[0].value,\n                    o: sF.children[1].value,\n                    v: sF.children[2].value\n                });\n            }\n        }\n        if(exportSF.length > 0){this.props.searchQuery(exportSF, this.sOrder)} \n        else{alert(\"Geben Sie einen Suchtext ein!\")}\n    }\n}\n\nclass Navigator extends React.Component{\n    constructor(props){\n        super(props);\n        this.state = {currentPage: this.props.currentPage};\n    }\n    render(){\n        /* <span contentEditable=\"true\" onChange={e=>{\n                        console.log(\"blupp\", e.target.textContent);\n                    }}>{this.props.currentPage}</span> */\n        return <div id=\"navBox\">\n                <div id=\"navScreen\" onClick={()=>{window.scrollTo(0,0)}}><FontAwesomeIcon icon={faAngleUp} /></div>\n                <div id=\"navPage\">\n                    <span onClick={()=>{window.scrollTo(0,0);this.loadPage(-1)}}>&lt;</span>\n                    <span id=\"navSelect\"> <input style={{\n                        width: \"30px\",\n                        border: \"none\",\n                        boxShadow: \"none\",\n                        padding: 0,\n                        margin: 0,\n                        textAlign: \"right\"\n                    }}\n                    type=\"text\" value={this.state.currentPage} onChange={e=>{this.setState({currentPage: e.target.value})}} onBlur={e=>{\n                        if(!isNaN(e.target.value)){\n                            window.scrollTo(0, 0);\n                            this.loadPage(parseInt(e.target.value)-this.props.currentPage);\n                        } else {\n                            this.setState({currentPage: this.props.currentPage});\n                        }\n                    }}/> von {this.props.maxPage}</span>\n                    <span onClick={()=>{window.scrollTo(0,0);this.loadPage(1)}}>&gt;</span>\n                </div>\n            </div>;\n        \n    }\n    componentDidUpdate(prevProps){\n        if(prevProps.currentPage!=this.props.currentPage){\n            this.setState({currentPage: this.props.currentPage})\n        }\n    }\n    loadPage(move){\n        if(this.props.currentPage+move>0&&this.props.currentPage+move<=this.props.maxPage){\n            this.props.loadPage(this.props.currentPage+move);\n        } else {\n            this.setState({currentPage: this.props.currentPage});\n        }\n    }\n}\nclass Status extends React.Component{\n    constructor(props){\n        super(props);\n        this.state = {id: this.props.status.id, visible: false}\n        this.statusBox = React.createRef();\n        this.timeOutHandle = null;\n    }\n    render(){\n        if(this.state.visible){\n            let style={\n                position: \"fixed\",\n                bottom: \"30px\",\n                left: \"30px\",\n                /*backgroundColor: \"white\",*/\n                boxShadow: \"0 2px 5px #d9d9d9\",\n                transition: \"opacity 0.5s\",\n                opacity: \"1\",\n                borderRadius: \"3px\",\n                overflow: \"hidden\",\n                zIndex: 9000000\n            };\n            let statusTxt = \"\";\n            let statusSymbol = null;\n            switch(this.state.type){\n                case \"searching\":\n                    statusSymbol = <div style={{display: \"inline-block\", backgroundColor:\"#246EB9\"}}><FontAwesomeIcon color=\"#FDFFFC\" style={{padding: \"3px\", fontSize:\"40px\"}}icon={faSyncAlt} spin /></div>;\n                    statusTxt = \"Suche luft...\";\n                    if(this.timeOutHandle!=null){clearTimeout(this.timeOutHandle)};\n                    break;\n                case \"found\":\n                    statusSymbol = <FontAwesomeIcon color=\"#FDFFFC\" style={{padding: \"3px\", backgroundColor:\"#4CB944\", fontSize:\"40px\"}}icon={faDog} />;\n                    statusTxt = \"Eintrge gefunden!\";\n                    if(this.timeOutHandle!=null){clearTimeout(this.timeOutHandle)};\n                    this.timeOutHandle = setTimeout(()=>{\n                        this.statusBox.current.style.opacity = \"0\";\n                        setTimeout(()=>{this.setState({visible: false})}, 500);\n                    }, 3000);\n                    break;\n                case \"notFound\":\n                    statusSymbol = <FontAwesomeIcon color=\"#FDFFFC\" style={{padding: \"3px\", backgroundColor:\"#353535\", fontSize:\"40px\"}}icon={faCat} />;\n                    statusTxt = \"Keine Eintrge gefunden!\";\n                    if(this.timeOutHandle!=null){clearTimeout(this.timeOutHandle)};\n                    this.timeOutHandle = setTimeout(()=>{\n                        this.statusBox.current.style.opacity = \"0\";\n                        setTimeout(()=>{this.setState({visible: false})}, 500);\n                    }, 3000);\n                    break;\n                case \"saved\":\n                    statusSymbol = <FontAwesomeIcon color=\"#FDFFFC\" style={{padding: \"3px\", backgroundColor:\"#4CB944\", fontSize:\"40px\"}}icon={faCheckCircle} />;\n                    statusTxt = \"Speichern erfolgreich.\";\n                    if(this.timeOutHandle!=null){clearTimeout(this.timeOutHandle)};\n                    this.timeOutHandle = setTimeout(()=>{\n                        this.statusBox.current.style.opacity = \"0\";\n                        setTimeout(()=>{this.setState({visible: false})}, 500);\n                    }, 2000);\n                    break;\n                case \"error\":\n                    statusSymbol = <FontAwesomeIcon color=\"#FDFFFC\" style={{padding: \"3px\", backgroundColor:\"#F06543\", fontSize:\"40px\"}}icon={faTimesCircle} />;\n                    statusTxt = \"Ein Fehler ist aufgetreten.\";\n                    if(this.timeOutHandle!=null){clearTimeout(this.timeOutHandle)};\n                    this.timeOutHandle = setTimeout(()=>{\n                        this.statusBox.current.style.opacity = \"0\";\n                        setTimeout(()=>{this.setState({visible: false})}, 500);\n                    }, 3000);\n                    break;\n                case \"saving\":\n                    statusTxt = \"Eintrge werden gespeichert.\";\n                    statusSymbol = <div style={{display: \"inline-block\", backgroundColor:\"#246EB9\"}}><FontAwesomeIcon color=\"#FDFFFC\" style={{padding: \"3px\", fontSize:\"40px\"}}icon={faSyncAlt} spin /></div>;\n                    if(this.timeOutHandle!=null){clearTimeout(this.timeOutHandle)};\n                    this.timeOutHandle = null;\n                    break;\n                default:\n                    statusTxt = \"Programm arbeitet.\";\n                    statusSymbol = <FontAwesomeIcon color=\"#FDFFFC\" style={{padding: \"3px\", backgroundColor:\"#F5EE9E\", fontSize:\"40px\"}}icon={faCloudMoon} />;\n                    if(this.timeOutHandle!=null){clearTimeout(this.timeOutHandle)};\n                    this.timeOutHandle = setTimeout(()=>{\n                        this.statusBox.current.style.opacity = \"0\";\n                        setTimeout(()=>{this.setState({visible: false})}, 500);\n                    }, 2000);\n            }\n            if(this.state.value!=null){statusTxt=this.state.value}\n            return <div ref={this.statusBox} style={style}  className=\"mainColors\">{statusSymbol}<span style={{position:\"relative\", top: \"-10px\", padding: \"10px 20px\"}}>{statusTxt}</span></div>;\n        } else {\n            return null;\n        }\n    }\n    componentDidUpdate(){\n        if(this.props.status.id!=this.state.id){\n            this.setState({id: this.props.status.id, visible: true, type: this.props.status.type, value: this.props.status.value});\n        }\n    }\n}\nclass SelectMenu extends React.Component{\n    render(){\n        let options = [];\n        for(const op of this.props.options){\n            options.push(<option key={op[0]} value={op[0]}>{op[1]}</option>)\n        }\n        return (\n        <div style={this.props.style}>\n            <select className={this.props.classList} value={this.props.value} style={{width:\"100%\"}} onChange={event=>{this.props.onChange(event)}}>\n                {options}\n            </select>\n            <div style={{pointerEvents:\"none\", textAlign:\"right\", margin: \"-26px 10px 0 0\"}}><FontAwesomeIcon color=\"LightGray\"icon={faAngleDown} /></div>\n        </div>);\n    }\n}\nclass AutoComplete extends React.Component{\n    constructor(props){\n        super(props);\n        this.state = {\n            options: [],\n            currentOptionId: null,\n            userSelected: false\n        };\n    }\n    render(){\n        let optionsBoxStyle = {\n            position: \"absolute\",\n            boxShadow: \"0 1px 5px #d9d9d9\",\n            padding: \"10px 15px\",\n            zIndex: 1000000\n        };\n        let optionsElement = [];\n        if(this.state.options.length>0&&this.state.userSelected===false){\n            let i = -1;\n            for(const option of this.state.options){\n                i++;\n                optionsElement.push(<div key={option.id} id={i}data-id={option.id}data-value={option[this.props.col]}onClick={e=>{this.props.onChange(e.target.dataset.value, e.target.dataset.id);this.setState({userSelected: true})}} style={{cursor: \"default\", color: this.state.currentOptionId===i?\"#2364AA\":\"inherit\"}}>{option[this.props.col]}</div>);\n            }\n        }\n        return <div>\n            <input type=\"text\" value={this.props.value} onBlur={()=>{setTimeout(()=>{this.setState({userSelected: true})},300)}} onChange={e=>{this.changeInputValue(e.target.value)}} onKeyDown={e=>{this.changeSelectedOption(e)}}/>\n            {optionsElement.length>0?<div style={optionsBoxStyle} className=\"mainColors\">{optionsElement}</div>:null}\n        </div>;\n    }\n    async changeInputValue(newValue){\n        this.props.onChange(newValue, null);\n        if(newValue!=\"\"){\n            let query = {};\n            query[this.props.col] = newValue+\"*\";\n            const newOptions = await arachne[this.props.tbl].get(query, {select: [\"id\", this.props.col], limit:10, order: [this.props.col]});\n            this.setState({currentOptionId: newOptions.length>0?0:null, options: newOptions, userSelected: false});\n        } else {\n            // empty string;\n            this.setState({currentOptionId: null, options: [], userSelected: false});\n        }\n    }\n    changeSelectedOption(e){\n        if(e.keyCode===38&&this.state.currentOptionId>0){\n            // up\n            this.setState({currentOptionId: this.state.currentOptionId-1});\n        } else if (e.keyCode===40&&this.state.currentOptionId<this.state.options.length-1){\n            // down\n            this.setState({currentOptionId: this.state.currentOptionId+1});\n        } else if (e.keyCode===13){\n            // enter\n            this.props.onChange(this.state.options[this.state.currentOptionId][this.props.col], this.state.options[this.state.currentOptionId].id);\n            this.setState({userSelected: true});\n        }\n    }\n}\n\nclass SelectorWrapper extends React.Component{\n    constructor(props){\n        super(props);\n    }\n    render(){\n        return <div className={\"selectWrapper\"+(this.props.isSelected===\"1\"?\" selMarked\":\"\")} style={{transition:\"box-shadow 0.3s\", margin: \"10px 5px\"}}id={this.props.children.props.id}ref={this.element} onClick={event=>{event.stopPropagation();/*console.log(this.props.children.props)*/}} onMouseUp={event=>{this.props.onSelect(this.props.children, {shift: event.shiftKey, meta: event.metaKey, ctrl: event.ctrlKey})}}>{this.props.children}</div>;\n    }\n}\nclass Selector  extends React.Component{\n    constructor(props){\n        super(props);\n        let style = {}\n        if(this.props.multiSelect){\n            style.userSelect = 'none';\n            style.msUserSelect = 'none';\n            style.WebkitUserSelect = 'none';\n        }\n        this.state = {currentId: 0, ids: [], style: style};\n        /*\n        if(onEdit!=null){this.ctn.querySelectorAll(selector).forEach(function(e){\n                e.classList.add(\"selEditable\");\n        })}*/\n    }\n    render(){\n        let children = React.Children.map(this.props.children, child => {\n            return <SelectorWrapper isSelected={this.state.ids.includes(child.props.id)?\"1\":\"0\"} onSelect={(e, keys)=>{this.select(e, keys)}}>{child}</SelectorWrapper>;\n        })\n        return <div\n            style={this.state.style}\n            className={this.props.className}\n            onClick={\n                ()=>{\n                    this.select(null, {});\n                }}\n        >\n        {children}\n        </div>;\n    }\n    select(element, keys){\n        if(element===null){\n            this.setState({currentId: 0, ids: []});\n            this.props.selectCallback(null, {currentId: 0, ids: []});\n        } else {\n            const targetId = element.props.id;\n            if(this.props.multiSelect&&keys.shift){\n                //multiselect\n                let inRange = false;\n                let newIds = [];\n                React.Children.forEach(this.props.children, child => {\n                    if(inRange==false&&(child.props.id===targetId||child.props.id===this.state.currentId)){\n                        // start of range\n                        inRange = true;\n                        newIds.push(child.props.id);\n                    } else if(inRange&&(child.props.id!==targetId&&child.props.id!==this.state.currentId)){\n                        // in range\n                        newIds.push(child.props.id);\n                    } else if(inRange){\n                        // end of range\n                        inRange = false;\n                        newIds.push(child.props.id);\n                    }\n                    this.setState({currentId: targetId, ids: newIds});\n                    this.props.selectCallback(element, {currentId: targetId, ids: newIds});\n                });\n            }else if(this.props.multiSelect&&(arachne.me.selectKey===\"cmd\"&&keys.meta||arachne.me.selectKey===\"ctrl\"&&keys.ctrl)){\n                // select/deselect while keeping selection\n                let newIds = this.state.ids;\n                if(newIds.includes(targetId)){\n                    newIds = newIds.filter(itemId => itemId!=targetId);\n                } else {newIds.push(targetId)}\n                this.setState({currentId: targetId, ids: newIds});\n                this.props.selectCallback(element, {currentId: targetId, ids: newIds});\n            } else {\n                // single select\n                this.setState({currentId: targetId, ids: [targetId]});\n                this.props.selectCallback(element, {currentId: targetId, ids: [targetId]});\n            }\n        }\n    }\n    componentDidUpdate(prevProps){\n        if(prevProps.preset!=this.props.preset){\n            //console.log(this.state.currentId);\n            setTimeout(()=>{\n                let el = document.querySelector(\"div.selMarked\");\n            if(el){el.scrollIntoView({behavior: \"smooth\", block: \"center\"})};\n            }, 300);\n            this.setState({ids: this.props.preset});\n        }\n    }\n}\n\nfunction parseHTML(i){\n    // parses masked HTML tags and purifies them.\n    if(i==null){\n        return {__html: null};\n    }else{\n        return {__html: DOMPurify.sanitize(i.replace(/&lt;/g, \"<\").replace(/&gt;/g, \">\"), { ADD_TAGS: [\"aut\", \"gruen\", \"gelb\", \"rot\", \"blau\"] })};\n    }\n}\nfunction parseHTMLPreview(i){\n    // creates preview of HTML tags.\n    if(i==null){\n        return \"\";\n    }else{\n        return i.replace(/&lt;/g, \"<\").replace(/&gt;/g, \">\");\n    }\n}\nexport { Navigator, parseHTML, parseHTMLPreview, SearchBox, Status, SelectMenu, Selector, AutoComplete };","import React from \"react\";\n\nimport { arachne } from \"./arachne.js\";\nimport { Navigator, parseHTML, parseHTMLPreview, SearchBox, SelectMenu } from \"./elements.js\";\n\nclass Lemma extends React.Component{\n    constructor(props){\n        super(props);\n        this.state = {item: null};\n    }\n\n    render(){\n        return (\n        <div style={{padding: \"0 10px\", display: \"grid\", gridTemplateColumns: \"auto 420px\", gridTemplateRows: \"min-content auto\", rowGap: \"15px\"}}>\n            <SearchBox\n                searchQuery={(q,order) => {this.searchQuery(q,order)}}\n                searchOptions={[\n                    [\"lemma\", \"Lemma\"], [\"id\", \"ID\"]\n                ]}\n                sortOptions={[['[\"id\"]', \"ID\"], ['[\"lemma\"]', \"Lemma\"]]}\n                gridArea={(this.state.item)?\"1/1/1/2\":\"1/1/1/3\"}\n            />\n            <LemmaBox\n                loadPage={newPage => {this.loadPage(newPage)}}\n                currentElements={this.state.currentElements}\n                count={this.state.count}\n                currentPage={this.state.currentPage}\n                maxPage={this.state.maxPage}\n                gridArea={(this.state.item)?\"2/1/2/2\":\"2/1/2/3\"}\n                showDetail={item => {\n                    this.setState({item: item});\n                }}\n            />\n            {(this.state.item)?<LemmaAsidestatus={this.props.status}item={this.state.item} onUpdate={id=>{this.reloadEntry(id)}} />:\"\"}\n        </div>\n        );\n    }\n    async reloadEntry(id){\n        let newItem = await arachne.lemma.get({id: id}); newItem = newItem[0];\n        let currentElements = this.state.currentElements;\n        const indexOfNewItem = currentElements.findIndex(i => i.id===newItem.id)\n        currentElements[indexOfNewItem] = newItem;\n        this.setState({currentElements: currentElements, item: newItem});\n    }\n    async searchQuery(newQuery, order){\n        this.props.status(\"searching\");\n        const count = await arachne.lemma.search(newQuery, {count:true, order:order});\n        const currentElements = await arachne.lemma.search(newQuery, {limit:50, order:order});\n        console.log(count);\n        if(count[0][\"count\"]>1){this.props.status(\"found\", `${count[0][\"count\"]} Eintrge gefunden.`)}\n        else if(count[0][\"count\"]===1){this.props.status(\"found\", \"1 Eintrag gefunden.\")}\n        else{this.props.status(\"notFound\")}\n        this.setState({\n            query: newQuery,\n            queryOrder: order,\n            count: count[0][\"count\"],\n            maxPage: Math.floor(count[0][\"count\"]/50)+1,\n            currentPage: 1,\n            currentElements: currentElements,\n            selectionDetail: {ids:[]}\n        });\n    }\n    async loadPage(newPage){\n        const currentElements = await arachne.lemma.search(this.state.query, {limit:50, offset:((newPage-1)*50), order:this.state.queryOrder});\n            this.setState({\n                currentPage: newPage,\n                currentElements: currentElements,\n                selectionDetail: {ids:[]}\n            });\n    }\n}\nclass LemmaBox extends React.Component{\n    constructor(props){\n        super(props);\n        this.state = {selection: {currentId: null, ids:[]}}\n    }\n    render(){\n        if(this.props.count>0){\n            let cEls = [];\n            for(const cEl of this.props.currentElements){\n                cEls.push(<tr key={cEl.id} id={cEl.id}onDoubleClick={e=>{this.props.showDetail(this.props.currentElements.find(i =>i.id === parseInt(e.target.closest(\"tr\").id)))}}><td title={\"ID: \"+cEl.id} dangerouslySetInnerHTML={parseHTML(cEl.lemma_display)}></td><td>{cEl.dicts}</td><td dangerouslySetInnerHTML={parseHTML(cEl.comment)}></td></tr>);\n            }\n\n            return (\n            <div style={{gridArea: this.props.gridArea, padding:\"0 10px\"}}>\n                <Navigator loadPage={newPage=>{this.props.loadPage(newPage)}}currentPage={this.props.currentPage} maxPage={this.props.maxPage} />\n                <table width=\"100%\">\n                    <thead style={{textAlign:\"left\"}}><tr><th>Lemmaansatz</th><th>Wrterbcher</th><th>Kommentar</th></tr></thead>\n                    <tbody>{cEls}</tbody>\n                </table>\n            </div>);\n        } else {\n            return null;\n        }\n    }\n}\nclass LemmaAside extends React.Component{\n    constructor(props){\n        super(props);\n        this.state = {\n            id: this.props.item.id,\n            lemma: this.props.item.lemma,\n            lemma_display: this.props.item.lemma_display,\n            homonym: this.props.item.homonym,\n            MLW: this.props.item.MLW,\n            Stern: this.props.item.Stern,\n            Fragezeichen: this.props.item.Fragezeichen\n        };\n    }\n    render(){\n        /*\n        <div style={{\n        display: \"grid\",\n        gridTemplateColumns: \"120px auto\",\n        gridTemplateRows: \"1fr 5px 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr\",\n        rowGap: \"10px\",\n        margin: \"35px 0 30px 0\"\n    }}>\n        */\n        return (\n<div style={{\n            position: \"fixed\",\n            top: 0,\n            bottom: 0,\n            right: 0,\n            width: \"400px\",\n            padding: \"10px 15px\",\n            boxShadow: \"rgb(60, 110, 113) 0px 0px 2px\"\n        }} className=\"mainColors\">\n        <div style={{\n            display: \"grid\",\n            gridTemplateColumns: \"150px auto\",\n            gridTemplateRows: \"1fr 5px 1fr 1fr\",\n            rowGap: \"10px\",\n            margin: \"50px 0\"\n        }}>\n            <div className=\"minorTxt\" style={{gridArea: \"1/1/1/3\", textAlign: \"right\"}}>\n                <i>ID {this.state.id}</i>\n            </div>\n            <div style={{gridArea: \"3/1/3/2\"}}>Lemma:</div>\n            <div style={{gridArea: \"3/2/3/3\"}}><input type=\"text\" value={this.state.lemma} onChange={event=>{this.setState({lemma: event.target.value})}}/></div>\n            <div style={{gridArea: \"4/1/4/2\"}}>Lemma-Anzeige:</div>\n            <div style={{gridArea: \"4/2/4/3\"}}><input type=\"text\" value={parseHTMLPreview(this.state.lemma_display)} onChange={event=>{this.setState({lemma_display: event.target.value})}}/></div>\n        </div>\n        <div style={{\n            display: \"grid\",\n            gridTemplateColumns: \"150px auto\",\n            gridTemplateRows: \"1fr 1fr 1fr 1fr\",\n            rowGap: \"10px\",\n            margin: \"50px 0\"\n        }}>\n            <div style={{gridArea: \"1/1/1/2\"}}>Zahlzeichen:</div>\n            <div style={{gridArea: \"1/2/1/3\"}}><SelectMenu options={[[0, \"\"], [1, 1], [2, 2], [3, 3], [4, 4], [5, 5], [6, 6]]} onChange={event=>{this.setState({homonym: event.target.value})}} value={this.state.homonym}/></div>\n            <div style={{gridArea: \"2/1/2/2\"}}>im Wrterbuch:</div>\n            <div style={{gridArea: \"2/2/2/3\"}}><SelectMenu options={[[0, \"Nein\"], [1, \"Ja\"]]} onChange={event=>{this.setState({MLW: event.target.value})}} value={this.state.MLW} /></div>\n            <div style={{gridArea: \"3/1/3/2\"}}>Stern:</div>\n            <div style={{gridArea: \"3/2/3/3\"}}><SelectMenu options={[[0, \"Nein\"], [1, \"Ja\"]]} onChange={event=>{this.setState({Stern: event.target.value})}} value={this.state.Stern} /></div>\n            <div style={{gridArea: \"4/1/4/2\"}}>Fragezeichen:</div>\n            <div style={{gridArea: \"4/2/4/3\"}}><SelectMenu options={[[0, \"Nein\"], [1, \"Ja\"]]} onChange={event=>{this.setState({Fragezeichen: event.target.value})}} value={this.state.Fragezeichen} /></div>\n            <div style={{gridArea: \"6/2/6/3\"}}><input type=\"button\" value=\"speichern\" onClick={async ()=>{\n                if(this.state.lemma===\"\" ||this.state.lemma.indexOf(\" \")>-1){\n                    this.props.status(\"error\", \"Bitte ein gltiges Lemma eintragen!\");\n                } else if(this.state.lemma_display===\"\"){\n                    this.props.status(\"error\", \"Bitte tragen Sie eine gltige Lemma-Anzeige ein!\");\n                }else {\n                    let newLemmaValue = {\n                        id: this.state.id,\n                        lemma: this.state.lemma,\n                        lemma_display: this.state.lemma_display,\n                        MLW: this.state.MLW,\n                        Fragezeichen: this.state.Fragezeichen,\n                        Stern: this.state.Stern,\n                    };\n                    if(this.state.homonym>0){newLemmaValue.lemma_nr=this.state.homonym}\n                    const newId = await arachne.lemma.save(newLemmaValue);\n                    this.props.status(\"saved\");\n                    this.props.onUpdate(this.state.id);\n                }\n            }} /></div>\n        </div>\n    </div>\n        );\n    }\n    componentDidUpdate(){\n        if(this.state.id!==this.props.item.id){\n            this.setState({\n                id: this.props.item.id,\n                ressource: this.props.item.ressource,\n                work_id: this.props.item.work_id,\n                editor: this.props.item.editor,\n                year: this.props.item.year,\n                volume: this.props.item.volume,\n                volumeContent: this.props.item.volumeContent,\n                serie: this.props.item.serie,\n                location: this.props.item.location,\n                library: this.props.item.library,\n                signature: this.props.item.signature\n            });\n        }\n    }\n}\n\nexport { Lemma };","import React from \"react\";\nimport { faExternalLinkAlt, faForward, faBackward } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport { arachne } from \"./arachne.js\";\nimport { Navigator, parseHTML } from \"./elements.js\";\n\nclass OperaAside extends React.Component{\n    render(){\n        return <div>Seite</div>;\n    }\n}\nclass OperaBox extends React.Component{\n    constructor(props){\n        super(props);\n        this.state = {oLst: []};\n    }\n    render(){\n        let trLst = [];\n        let i = 0;\n        const cHitId = (this.state.hits&&this.state.hits.length>0)?this.state.hits[this.state.hitIndex].id:0;\n        this.scrollRef = null;\n        for(const o of this.state.oLst){\n            let editionLst = [];\n            if(o.editions_id){\n                const editionsId = JSON.parse(o.editions_id);\n                const editionsURL = JSON.parse(o.editions_url);\n                const editionsLabel = JSON.parse(o.editions_label);\n                for(let iE = 0; iE < editionsId.length; iE++){\n                    let cURL = \"/site/viewer/\"+editionsId[iE];\n                    let arrow = \"\";\n                    if(editionsURL&&editionsURL[iE]!=\"\"){\n                        cURL=editionsURL[iE];\n                        arrow = <span> <FontAwesomeIcon style={{fontSize:\"14px\"}}icon={faExternalLinkAlt} /></span>\n                    }\n                    let cLabel = \"FEHLER!\";\n                    if(editionsLabel){cLabel=editionsLabel[iE]}\n                    editionLst.push(<li key={iE}><a href={cURL} target=\"_blank\" rel=\"noreferrer\">{cLabel}{arrow}</a></li>);\n                }\n            }\n            i++;\n            let hitStyle = {};\n            if(o.id===cHitId){hitStyle = \"searchHit\"; this.scrollRef = React.createRef()}\n            else if(cHitId>0&&this.state.hits.some(i=>i.id===o.id)){hitStyle = \"searchAllHits\"}\n            if(this.state.listName==\"opera_maiora\"){\n                let abbr = `<aut>${o.abbr}</aut>`;\n                let full = o.full;\n                if(o.work_id>0&&o.author_id===null){\n                    abbr= `<span>&nbsp;&nbsp;&nbsp;${o.abbr}</span>`;\n                    full = `<span>&nbsp;&nbsp;&nbsp;${o.full}</span>`;\n                }\n                trLst.push(<tr className={hitStyle} ref={o.id===cHitId?this.scrollRef:null}key={i}><td className=\"c1\" dangerouslySetInnerHTML={parseHTML(o.date_display)}></td><td className=\"c2\" dangerouslySetInnerHTML={parseHTML(abbr)}></td><td className=\"c3\" dangerouslySetInnerHTML={parseHTML(full)}></td><td className=\"c4\">{o.bibliography}<ul className=\"noneLst\">{editionLst}</ul></td><td className=\"c5\" dangerouslySetInnerHTML={parseHTML(o.comment)}></td></tr>);\n            } else if(this.state.listName===\"opera_minora\"){\n                trLst.push(<tr className={hitStyle} ref={o.id===cHitId?this.scrollRef:null} key={i}><td className=\"c1_min\" dangerouslySetInnerHTML={parseHTML(o.date_display)}></td><td className=\"c2_min\" dangerouslySetInnerHTML={parseHTML(o.citation)}></td><td className=\"c5_min\"><span dangerouslySetInnerHTML={parseHTML(o.bibliography)}></span><ul className=\"noneLst\">{editionLst}</ul></td></tr>);\n            }\n        }\n        return <div style={{gridArea: this.props.gridArea}}>\n                <Navigator currentPage={this.state.currentPage} maxPage={this.state.oMax} loadPage={nextPage=>{this.loadPage(nextPage)}}/>\n                <div className=\"operaBox\">\n                <table><tbody>{trLst}</tbody></table>\n                </div>\n                <div className=\"SearchBar mainColors\"><input type=\"text\" style={{boxShadow: \"none\", padding: \"0px\"}}placeholder=\"Suche...\" onKeyUp={async e=>{\n                    if(e.keyCode === 13){\n                        if(e.target.value!=\"\"&&this.state.cSearch!=e.target.value){\n                            const hits = await arachne[this.props.listName].search([{c: \"search\", o: \"=\", v: `*${e.target.value}*`}], {select: [\"id\"]});\n                            if(hits.length>0){\n                                this.setState({hitIndex: 0, cSearch: e.target.value, maxHits: hits.length, hits: hits});\n                                this.loadPage(Math.floor(hits[0].id/30)+1);\n                            } else {\n                                this.setState({cSearch: e.target.value, maxHits: 0, hits: []});\n                            }\n                        }\n                    }\n                }} />\n                {this.state.maxHits>0&&<div style={{display:\"inline\", marginLeft: \"20px\"}}>\n                    <FontAwesomeIcon icon={faBackward} style={{fontSize: \"14px\"}} onClick={()=>{this.gotoSearchResult(-1)}} /> <span>{this.state.hitIndex+1}</span>/<span>{this.state.maxHits}</span> <FontAwesomeIcon icon={faForward} style={{fontSize: \"14px\"}} onClick={()=>{this.gotoSearchResult(1)}} />\n                </div>}\n                </div>\n            </div>;\n    }\n    gotoSearchResult(move){\n        if(move===1&&this.state.hitIndex<this.state.maxHits-1){\n            this.loadPage(Math.floor(this.state.hits[this.state.hitIndex+1].id/30)+1);\n            this.setState({hitIndex: this.state.hitIndex+1});\n        } else if (move===1){\n            this.loadPage(1);\n            this.setState({hitIndex: 0});\n        } else if (move===-1&&this.state.hitIndex>0){\n            this.loadPage(Math.floor(this.state.hits[this.state.hitIndex-1].id/30)+1);\n            this.setState({hitIndex: this.state.hitIndex-1});\n        } else if (move===-1){\n            this.loadPage(Math.floor(this.state.hits[this.state.maxHits-1].id/30)+1);\n            this.setState({hitIndex: this.state.maxHits-1});\n        }\n    }\n    async loadPage(newPage){\n        const oLst = await arachne[this.props.listName].getAll({limit: 30, offset: (newPage-1)*30});\n        this.setState({oLst: oLst, currentPage: newPage});   \n    }\n    componentDidMount(){\n        const getLst = async () =>{\n            const oMax = await arachne[this.props.listName].getAll({count: true});\n            const oLst = await arachne[this.props.listName].getAll({limit: 30, offset: 0});\n            this.setState({listName: this.props.listName, oLst: oLst, oMax: Math.floor(oMax[0][\"count\"]/30)+1, currentPage: 1});\n        };\n        getLst();\n    }\n    componentDidUpdate(prevProps){\n        if(this.props.listName!=prevProps.listName){\n            const getLst = async () =>{\n                const oMax = await arachne[this.props.listName].getAll({count: true});\n                const oLst = await arachne[this.props.listName].getAll({limit: 30, offset: 0});\n                this.setState({oLst: oLst, listName: this.props.listName, oMax: Math.floor(oMax[0][\"count\"]/30)+1, currentPage: 1});\n            };\n            getLst();\n        }\n        if(this.scrollRef){this.scrollRef.current.scrollIntoView({behavior: \"smooth\", block: \"center\"})}\n    }\n}\nclass Opera extends React.Component{\n    constructor(props){\n        super(props);\n        this.state = {\n            selectionDetail: null\n        }\n    }\n    render(){\n        return (\n            <div style={{padding: \"0 10px\", display: \"grid\", gridTemplateColumns: \"auto 420px\", gridTemplateRows: \"auto\", rowGap: \"15px\"}}>\n                <OperaBox\n                    listName={this.props.listName}\n                    loadPage={move => {this.loadPage(move)}}\n                    currentElements={this.state.currentElements}\n                    count={this.state.count}\n                    currentPage={this.state.currentPage}\n                    pageMax={this.state.pageMax}\n                    gridArea={(this.state.selectionDetail)?\"2/1/2/2\":\"2/1/2/3\"}\n                    /*showDetail={item => {\n                        this.setState({selectionDetail: item.selection, itemDetail: item.item});\n                    }}*/\n                />\n                {this.state.selectionDetail?<OperaAside status={this.props.status} selection={this.state.selectionDetail}item={this.state.itemDetail} onUpdate={ids=>{this.reloadZettel(ids)}} />:\"\"}\n            </div>\n            );\n    }\n}\n\nexport { Opera };","import React from \"react\";\nimport { faExternalLinkAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport { arachne } from \"./arachne.js\";\nimport { Navigator, parseHTML, SearchBox, SelectMenu } from \"./elements.js\";\n\nclass Ressource extends React.Component{\n    constructor(props){\n        super(props);\n        this.state = {\n            item: null,\n            workLst: []\n        };\n    }\n\n    render(){\n        return (\n        <div style={{padding: \"0 10px\", display: \"grid\", gridTemplateColumns: \"auto 420px\", gridTemplateRows: \"min-content auto\", rowGap: \"15px\"}}>\n            <SearchBox\n                searchQuery={(q,order) => {this.searchQuery(q,order)}}\n                searchOptions={[\n                    [\"ac_web\", \"Werk\"],\n                    [\"work_id\", \"Werk-ID\"],\n                    [\"ressource\", \"Ressource\"],\n                    [\"id\", \"ID\"]\n                ]}\n                sortOptions={[['[\"id\"]', \"ID\"], ['[\"label\"]', \"Krzel\"], ['[\"opus\"]', \"vrkn. Werk\"]]}\n                gridArea={(this.state.item)?\"1/1/1/2\":\"1/1/1/3\"}\n            />\n            <RessourceBox\n                loadPage={newPage => {this.loadPage(newPage)}}\n                currentElements={this.state.currentElements}\n                count={this.state.count}\n                currentPage={this.state.currentPage}\n                maxPage={this.state.maxPage}\n                gridArea={(this.state.item)?\"2/1/2/2\":\"2/1/2/3\"}\n                showDetail={item => {\n                    this.setState({item: item});\n                }}\n            />\n            {(this.state.item)?<RessourceAside workLst={this.state.workLst}status={this.props.status}item={this.state.item} onUpdate={id=>{this.reloadEntry(id)}} />:\"\"}\n        </div>\n        );\n    }\n    componentDidMount(){\n        const getWorks = async () => {\n            const works = await arachne.work.get({in_use: 1}, {select: [\"id\", \"ac_web\"], order: [\"ac_web\"]});\n            let newWorkLst = [];\n            for(const work of works){\n                newWorkLst.push([work.id, work.ac_web]);\n            }\n            this.setState({workLst: newWorkLst});\n        }\n        getWorks();\n    }\n    async reloadEntry(id){\n        let newItem = await arachne.edition.get({id: id}); newItem = newItem[0];\n        let currentElements = this.state.currentElements;\n        const indexOfNewItem = currentElements.findIndex(i => i.id===newItem.id)\n        currentElements[indexOfNewItem] = newItem;\n        this.setState({currentElements: currentElements, item: newItem});\n    }\n    async searchQuery(newQuery, order){\n        this.props.status(\"searching\");\n        const count = await arachne.edition.search(newQuery, {count:true, order:order});\n        const currentElements = await arachne.edition.search(newQuery, {limit:50, order:order});\n        console.log(count);\n        if(count[0][\"count\"]>1){this.props.status(\"found\", `${count[0][\"count\"]} Eintrge gefunden.`)}\n        else if(count[0][\"count\"]===1){this.props.status(\"found\", \"1 Eintrag gefunden.\")}\n        else{this.props.status(\"notFound\")}\n        this.setState({\n            query: newQuery,\n            queryOrder: order,\n            count: count[0][\"count\"],\n            maxPage: Math.floor(count[0][\"count\"]/50)+1,\n            currentPage: 1,\n            currentElements: currentElements,\n            selectionDetail: {ids:[]}\n        });\n    }\n    async loadPage(newPage){\n        const currentElements = await arachne.edition.search(this.state.query, {limit:50, offset:((newPage-1)*50), order:this.state.queryOrder});\n            this.setState({\n                currentPage: newPage,\n                currentElements: currentElements,\n                selectionDetail: {ids:[]}\n            });\n    }\n}\nclass RessourceBox extends React.Component{\n    constructor(props){\n        super(props);\n        this.state = {selection: {currentId: null, ids:[]}}\n    }\n    render(){\n        if(this.props.count>0){\n            const resTypes = {\n                0: \"Edition (relevant)\",\n                1: \"Edition (veraltet)\",\n                2: \"Handschrift\",\n                3: \"Alter Druck (relevant)\",\n                4: \"Alter Druck (veraltet)\",\n                5: \"Sonstiges\"\n            };\n    \n            let cEls = [];\n            for(const cEl of this.props.currentElements){\n                cEls.push(<tr key={cEl.id} id={cEl.id}onDoubleClick={e=>{this.props.showDetail(this.props.currentElements.find(i =>i.id === parseInt(e.target.closest(\"tr\").id)))}}><td title={\"ID: \"+cEl.id}>{cEl.label}</td><td>{resTypes[cEl.ressource]}</td><td dangerouslySetInnerHTML={parseHTML(cEl.opus)}></td><td><a>ffnen</a>{\n                    cEl.url?<FontAwesomeIcon style={{fontSize:\"14px\", marginLeft: \"10px\"}}icon={faExternalLinkAlt} />:null\n                }</td></tr>);\n            }\n\n            return (\n            <div style={{gridArea: this.props.gridArea, padding:\"0 10px\"}}>\n                <Navigator loadPage={newPage=>{this.props.loadPage(newPage)}}currentPage={this.props.currentPage} maxPage={this.props.maxPage} />\n                <table width=\"100%\">\n                    <thead style={{textAlign:\"left\"}}><tr><th>Krzel</th><th>Typ</th><th>vrkn. Werk</th><th>Link</th></tr></thead>\n                    <tbody>{cEls}</tbody>\n                </table>\n            </div>);\n        } else {\n            return null;\n        }\n    }\n}\n\nclass RessourceAside extends React.Component{\n    constructor(props){\n        super(props);\n        this.state = {\n            id: this.props.item.id,\n            ressource: this.props.item.ressource,\n            work_id: this.props.item.work_id,\n            editor: this.props.item.editor,\n            year: this.props.item.year,\n            volume: this.props.item.volume,\n            volumeContent: this.props.item.volumeContent,\n            serie: this.props.item.serie,\n            location: this.props.item.location,\n            library: this.props.item.library,\n            signature: this.props.item.signature\n        };\n    }\n    render(){\n        return (\n<div style={{\n            position: \"fixed\",\n            top: 0,\n            bottom: 0,\n            right: 0,\n            width: \"400px\",\n            padding: \"10px 15px\",\n            boxShadow: \"rgb(60, 110, 113) 0px 0px 2px\"\n        }} className=\"mainColors\">\n    <div style={{\n        display: \"grid\",\n        gridTemplateColumns: \"120px auto\",\n        gridTemplateRows: \"1fr 5px 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr\",\n        rowGap: \"10px\",\n        margin: \"35px 0 30px 0\"\n    }}>\n        <div className=\"minorTxt\" style={{gridArea: \"1/1/1/3\", textAlign: \"right\"}}>\n            <i>ID {this.state.id}</i>\n        </div>\n\n        <div style={{gridArea: \"3/1/3/2\"}}>Werk:</div>\n        <div style={{gridArea: \"3/2/3/3\"}}><SelectMenu options={this.props.workLst} value={this.state.work_id}onChange={e=>{this.setState({work_id: e.target.value})}} /></div>\n        <div style={{gridArea: \"4/1/4/2\"}}>Ressource:</div>\n        <div style={{gridArea: \"4/2/4/3\"}}><SelectMenu options={[[0, \"Edition (relevant)\"], [1, \"Edition (veraltet)\"], [2, \"Handschrift\"], [3, \"Alter Druck (relevant)\"], [4, \"Alter Druck (veraltet)\"], [5, \"Sonstiges\"]]} value={this.state.ressource}onChange={e=>{this.setState({ressource: parseInt(e.target.value)})}} /></div>\n        {this.state.ressource===0||this.state.ressource===1||this.state.ressource===5?[\n            <div key=\"0\" style={{gridArea: \"5/1/5/2\"}}>Editor:</div>,\n            <div key=\"1\" style={{gridArea: \"5/2/5/3\"}}><input type=\"text\" style={{width: \"96%\"}} value={this.state.editor} onChange={e=>{this.setState({editor: e.target.value})}}/></div>,\n            <div key=\"2\" style={{gridArea: \"6/1/6/2\"}}>Jahr:</div>,\n            <div key=\"3\" style={{gridArea: \"6/2/6/3\"}}><input type=\"text\" style={{width: \"96%\"}} value={this.state.year} onChange={e=>{this.setState({year: e.target.value})}} /></div>,\n            <div key=\"4\" style={{gridArea: \"7/1/7/2\"}}>Band:</div>,\n            <div key=\"5\" style={{gridArea: \"7/2/7/3\"}}><input type=\"text\" style={{width: \"96%\"}} value={this.state.volume} onChange={e=>{this.setState({volume: e.target.value})}} /></div>,\n            <div key=\"6\" style={{gridArea: \"8/1/8/2\"}}>Bandinhalt:</div>,\n            <div key=\"7\" style={{gridArea: \"8/2/8/3\"}}><input type=\"text\" style={{width: \"96%\"}} value={this.state.volumeContent} onChange={e=>{this.setState({volumeContent: e.target.value})}} /></div>,\n            <div key=\"8\" style={{gridArea: \"9/1/9/2\"}}>Reihe:</div>,\n            <div key=\"9\" style={{gridArea: \"9/2/9/3\"}}><SelectMenu options={[[0, \"\"], [1, \"Migne PL\"], [2, \"ASBen.\"], [3, \"ASBoll.\"], [4, \"AnalBoll.\"], [5, \"Mon. Boica\"], [6, \"Ma. Schatzverzeichnisse\"], [7, \"Ma. Bibliothekskataloge\"]]} value={this.state.serie} onChange={e=>{this.setState({serie: parseInt(e.target.value)})}} /></div>\n        ]:null}\n        {this.state.ressource===2?[\n            <div key=\"0\" style={{gridArea: \"5/1/5/2\"}}>Stadt:</div>,\n            <div key=\"1\" style={{gridArea: \"5/2/5/3\"}}><input type=\"text\" style={{width: \"96%\"}} value={this.state.location} onChange={e=>{this.setState({location: e.target.value})}} /></div>,\n            <div key=\"2\" style={{gridArea: \"6/1/6/2\"}}>Bibliothek:</div>,\n            <div key=\"3\" style={{gridArea: \"6/2/6/3\"}}><input type=\"text\" style={{width: \"96%\"}} value={this.state.library} onChange={e=>{this.setState({library: e.target.value})}} /></div>,\n            <div key=\"4\" style={{gridArea: \"7/1/7/2\"}}>Signatur:</div>,\n            <div key=\"5\" style={{gridArea: \"7/2/7/3\"}}><input type=\"text\" style={{width: \"96%\"}} value={this.state.signature} onChange={e=>{this.setState({signature: e.target.value})}} /></div>\n        ]:null}\n        {this.state.ressource===3||this.state.ressource===4?[\n            <div key=\"0\" style={{gridArea: \"5/1/5/2\"}}>Drucker:</div>,\n            <div key=\"1\" style={{gridArea: \"5/2/5/3\"}}><input type=\"text\" style={{width: \"96%\"}} value={this.state.editor} onChange={e=>{this.setState({editor: e.target.value})}}/></div>,\n            <div key=\"2\" style={{gridArea: \"6/1/6/2\"}}>Ort:</div>,\n            <div key=\"3\" style={{gridArea: \"6/2/6/3\"}}><input type=\"text\" style={{width: \"96%\"}} value={this.state.location} onChange={e=>{this.setState({location: e.target.value})}} /></div>,\n            <div key=\"4\" style={{gridArea: \"7/1/7/2\"}}>Jahr:</div>,\n            <div key=\"5\" style={{gridArea: \"7/2/7/3\"}}><input type=\"text\" style={{width: \"96%\"}} value={this.state.year} onChange={e=>{this.setState({year: e.target.value})}} /></div>,\n        ]:null}\n        <div style={{gridArea: \"11/2/11/3\"}}><input type=\"button\" value=\"speichern\" onClick={async ()=>{\n            if((this.state.type===0||this.state.type===1||this.state.type===5)&&(!this.state.editor||!this.state.year)){\n                this.props.status(\"error\", \"Geben Sie den Editor und das Jahr ein.\");\n            } else {\n                this.props.status(\"saving\", \"Die Dateien werden hochgeladen.\");\n                // create new edition\n                await arachne.edition.save({\n                    id: this.state.id,\n                    work_id: this.state.work,\n                    ressource: this.state.type,\n                    editor: this.state.editor,\n                    year: this.state.year,\n                    volume: this.state.volume,\n                    vol_cont: this.state.volumeContent,\n                    serie: this.state.serie,\n                    /*comment,*/\n                    location: this.state.location,\n                    library: this.state.library,\n                    signature: this.state.signature\n                });\n                this.props.status(\"saved\", \"Das Speichern war erfolgreich.\");\n                this.props.onUpdate(this.state.id);\n            }\n        }} /></div>\n    </div>\n</div>\n        );\n    }\n    componentDidUpdate(){\n        if(this.state.id!==this.props.item.id){\n            this.setState({\n                id: this.props.item.id,\n                ressource: this.props.item.ressource,\n                work_id: this.props.item.work_id,\n                editor: this.props.item.editor,\n                year: this.props.item.year,\n                volume: this.props.item.volume,\n                volumeContent: this.props.item.volumeContent,\n                serie: this.props.item.serie,\n                location: this.props.item.location,\n                library: this.props.item.library,\n                signature: this.props.item.signature\n            });\n        }\n    }\n}\n\nexport { Ressource };","import React from \"react\";\nimport { Bar, Line, Pie } from \"react-chartjs-2\";\nimport { faSun, faMoon } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport { arachne } from \"./arachne.js\";\nimport { SelectMenu } from \"./elements.js\";\n\nclass Account extends React.Component{\n    render(){\n        return <div>...</div>;\n    }\n}\n\nclass Statistics extends React.Component{\n    constructor(props){\n        super(props);\n        this.state = {\n            tab: \"lemma\",\n            zettel_process: null,\n            lemma_letters: null,\n            ressource_work: null,\n        };\n    }\n    render(){\n        // zettel\n        let zettelBox = null;\n        if(this.state.zettel_process){\n            let zettelCharts = [];\n\n            // bearbeitungsstand\n            const zettel_process_data = {\n                labels: Object.keys(this.state.zettel_process),\n                datasets: [\n                  {\n                    label: '# of Votes',\n                    data: Object.values(this.state.zettel_process),\n                    backgroundColor: ['#114B79', '#347F9F', '#8FC9D9', '#EAF2F3'],\n                    borderColor: ['#1B3B6F', '#065A82', '#61A4BC', '#E8F1F2'],\n                    borderWidth: 1,\n                  },\n                ],\n            };\n            zettelCharts.push(<div key=\"1\" style={{width: \"500px\", height: \"500px\"}}><h4>nach Bearbeitungsstand</h4><Pieoptions={{plugins: {legend:{position: \"bottom\"}}}}data={zettel_process_data}/></div>);\n            \n            // zetteltyp\n            const zettel_types_data = {\n                labels: Object.keys(this.state.zettel_types),\n                datasets: [\n                  {\n                    label: '# of Votes',\n                    data: Object.values(this.state.zettel_types),\n                    backgroundColor: ['#114B79', '#347F9F', '#8FC9D9', '#D2EFF4', '#EAF2F3'],\n                    borderColor: ['#1B3B6F', '#065A82', '#61A4BC', '#BCEDF6', '#E8F1F2'],\n                    borderWidth: 1,\n                  },\n                ],\n            };\n            zettelCharts.push(<div key=\"2\" style={{width: \"500px\", height: \"500px\"}}><h4>nach Typen</h4><Pieoptions={{plugins: {legend:{position: \"bottom\"}}}}data={zettel_types_data}/></div>);\n\n            // erstelldatum\n            const zettel_created_data = {\n                labels: Object.keys(this.state.zettel_created),\n                datasets: [\n                  {\n                    label: '',\n                    data: Object.values(this.state.zettel_created),\n                    backgroundColor: ['#114B79', '#347F9F'],\n                    borderColor: ['#1B3B6F', '#065A82'],\n                    borderWidth: 1,\n                  },\n                ],\n            };\n            zettelCharts.push(<div key=\"3\" style={{gridArea: \"2/1/2/3\", width: \"100%\", height: \"400px\"}}><h4>nach Erstelldatum</h4><Baroptions={{aspectRatio: false, plugins: {legend:{display: false}}}}data={zettel_created_data}/></div>);\n\n            // nderungsdatum\n            const zettel_changed_data = {\n                labels: Object.keys(this.state.zettel_changed),\n                datasets: [\n                  {\n                    label: '',\n                    data: Object.values(this.state.zettel_changed),\n                    backgroundColor: ['#D2EFF4'],\n                    borderColor: ['#1B3B6F'],\n                    borderWidth: 1,\n                    fill: true,\n                  },\n                ],\n            };\n            zettelCharts.push(<div key=\"4\" style={{gridArea: \"3/1/3/3\", width: \"100%\", height: \"400px\"}}><h4>nach nderungsdatum</h4><Lineoptions={{aspectRatio: false, plugins: {legend:{display: false}}}}data={zettel_changed_data}/></div>);\n\n            zettelBox = <div style={{display: \"grid\", gridTemplateColumns: \"1fr 1fr\", gridTemplateRows: \"600px 500px 500px\"}}>{zettelCharts}</div>;\n        }\n\n        // lemma\n        let lemmaBox = null;\n        if(this.state.lemma_letters){\n            let lemmaCharts = [];\n            // nach Buchstaben\n            const lemma_letters_data = {\n                labels: Object.keys(this.state.lemma_letters),\n                datasets: [\n                  {\n                    label: '',\n                    data: Object.values(this.state.lemma_letters),\n                    backgroundColor: ['#114B79', '#347F9F', '#8FC9D9', '#D2EFF4', '#EAF2F3'],\n                    borderColor: ['#1B3B6F', '#065A82', '#61A4BC', '#BCEDF6', '#E8F1F2'],\n                    borderWidth: 1,\n                  },\n                ],\n            };\n            lemmaCharts.push(<div key=\"1\" style={{width: \"500px\", height: \"500px\"}}><h4>nach Buchstaben</h4><Pieoptions={{plugins: {legend:{display: false}}}}data={lemma_letters_data}/></div>);\n\n            // Filtern der Lemma nach Typ (Sternwort, in MLW, usw.)\n\n\n            lemmaBox = <div style={{display: \"grid\", gridTemplateColumns: \"1fr 1fr\", gridTemplateRows: \"600px\"}}>{lemmaCharts}</div>;\n        }\n        \n        // ressources\n        let ressourceBox = null;\n        if(this.state.ressource_work){\n            let ressourceCharts = [];\n            // Werke mit/ohne Ressourcen - Werk mit/ohne Edition: Nach Ressource-Typ sortieren.\n\n            // Volltexte pro Scans\n            const ressource_fullTexts_data = {\n                labels: Object.keys(this.state.ressource_fullTexts),\n                datasets: [\n                  {\n                    label: '',\n                    data: Object.values(this.state.ressource_fullTexts),\n                    backgroundColor: ['#114B79', '#EAF2F3'],\n                    borderColor: ['#1B3B6F', '#E8F1F2'],\n                    borderWidth: 1,\n                  },\n                ],\n            };\n            ressourceCharts.push(<div key=\"1\" style={{width: \"500px\", height: \"500px\"}}><h4>nach Volltext</h4><Pieoptions={{plugins: {legend:{position: \"bottom\"}}}}data={ressource_fullTexts_data}/></div>);\n\n            ressourceBox = <div style={{display: \"grid\", gridTemplateColumns: \"1fr 1fr\", gridTemplateRows: \"600px\"}}>{ressourceCharts}</div>;\n        }\n        \n        const styleBody = {\n            boxShadow: \"0px 2px 7px rgb(217, 217, 217)\",\n            padding: \"40px 10% 20px 10%\",\n            display: \"block\",\n        }\n        let mainBody = <div style={styleBody}></div>;\n                /*\n            {ressourceBox}\n        </div>;*/\n        switch(this.state.tab){\n            case \"lemma\":\n                mainBody = <div style={styleBody}>{lemmaBox}</div>;\n                break;\n            case \"zettel\":\n                mainBody = <div style={styleBody}>{zettelBox}</div>;\n                break;\n                case \"ressource\":\n                    mainBody = <div style={styleBody}>{ressourceBox}</div>;\n                    break;\n            default:\n                mainBody = <div>Tab nicht erkannt!</div>;\n        }\n        const styleBox = {\n            \"padding\": \"20px 10% 0 10%\"\n        }\n        const styleHeader = {\n            display: \"flex\",\n            justifyContent: \"space-evenly\",\n            padding: \"10px 20px\"\n\n        }\n        const styleTab = {padding: \"5px 10px\", cursor: \"default\"};\n        const styleTabActive = {padding: \"5px 10px\", borderBottom: \"1px solid red\", cursor: \"default\"};\n        return (<div style={styleBox}>\n            <div style={styleHeader}>\n                <div style={this.state.tab===\"lemma\"?styleTabActive:styleTab} onClick={()=>{this.setState({tab: \"lemma\"})}}>Lemma</div>\n                <div style={this.state.tab===\"zettel\"?styleTabActive:styleTab} onClick={()=>{this.setState({tab: \"zettel\"})}}>Zettel</div>\n                <div style={this.state.tab===\"ressource\"?styleTabActive:styleTab} onClick={()=>{this.setState({tab: \"ressource\"})}}>Ressourcen</div>\n            </div>\n            {mainBody}\n        </div>);\n    }\n    componentDidMount(){\n        const getZettel = async () => {\n            const zettels = await arachne.zettel.getAll({select: [\"work_id\", \"lemma_id\", \"type\", \"c_date\", \"u_date\"]});\n            // process\n            let process = {\n                abgeschlossen: zettels.filter(z => (z.work_id>0&&z.lemma_id>0)||(z.type===4)).length,\n                \"nur Werk\":  zettels.filter(z => z.work_id>0&&!(z.lemma_id>0)).length,\n                \"nur Lemma\": zettels.filter(z => !(z.work_id>0)&&z.lemma_id>0).length\n            }\n            process.unbearbeitet = zettels.length - Object.values(process).reduce((previousValue, currentValue) => previousValue+currentValue);\n\n            // types\n            let types = {\n                verzettelt: zettels.filter(z => z.type===1).length,\n                Index: zettels.filter(z => z.type===2).length,\n                Exzerpt: zettels.filter(z => z.type===3).length,\n                Literatur: zettels.filter(z => z.type===4).length,\n            }\n            types[\"ohne Typ\"] = zettels.length-Object.values(types).reduce((previousValue, currentValue)=>previousValue+currentValue);\n            \n            // created + changed\n            const range = (start, stop) => Array.from({ length: (stop-start)+1}, (_, i) => start + (i));\n            let created = {};\n            let changed = {};\n            let years = range(2020, new Date(Date.now()).getFullYear());\n            for(const year of years){\n                let months = range(1,12);\n                if(year===new Date(Date.now()).getFullYear()){\n                    months = range(1, new Date(Date.now()).getMonth()+1);\n                }\n                for(const month of months){\n                    created[`${year}-${month}`] = zettels.filter(z => new Date(z.c_date).getFullYear()===year&&new Date(z.c_date).getMonth()+1===month).length;\n                    changed[`${year}-${month}`] = zettels.filter(z => new Date(z.u_date).getFullYear()===year&&new Date(z.u_date).getMonth()+1===month).length;\n                }\n            }\n            this.setState({zettel_process: process, zettel_types: types, zettel_created: created, zettel_changed: changed});\n        };\n        getZettel();\n\n        const getLemmata = async () => {\n            const lemmata = await arachne.lemma.getAll({select: [\"lemma\"]});\n\n            let letters = {\"A\":0, \"B\":0, \"C\":0, \"D\":0, \"E\":0, \"F\":0, \"G\":0, \"H\":0, \"I\":0, \"K\":0, \"L\":0, \"M\":0, \"N\":0, \"O\":0, \"P\":0, \"Q\":0, \"R\":0, \"S\":0, \"T\":0, \"U\":0, \"V\":0, \"X\":0, \"Y\":0, \"Z\":0};\n            for(const letter of Object.keys(letters)){\n                letters[letter] = lemmata.filter(l => l.lemma.substring(0,1).toUpperCase()===letter).length;\n            }\n            letters.Rest = lemmata.length - Object.values(letters).reduce((previousValue, currentValue) => previousValue+currentValue);\n            this.setState({lemma_letters: letters});\n        };\n        getLemmata();\n\n        const getRessources = async () => {\n            const scans = await arachne.scan.getAll({select: [\"full_text\"]});\n            let fullTexts = {\n                \"mit Volltext\": scans.filter(s => s.full_text!=null&&s.full_tet!=\"\").length\n            }\n            fullTexts[\"ohne Volltext\"] = scans.length - Object.values(fullTexts).reduce((previousValue, currentValue) => previousValue+currentValue);\n            this.setState({ressource_work: 1, ressource_fullTexts: fullTexts});\n        }\n        getRessources();\n    }\n}\n\nclass Server extends React.Component{\n    constructor(props){\n        super(props);\n        this.state = {\n            tab: \"updateOpera\",\n            users: []\n        };\n    }\n    render(){\n        const styleBody = {\n            boxShadow: \"0px 2px 7px rgb(217, 217, 217)\",\n            padding: \"40px 10% 20px 10%\",\n            display: \"grid\",\n            gridTemplateColumns: \"200px auto\",\n            gridTemplateRows: \"1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr auto\",\n            gridGap: \"15px\"\n        }\n        let mainBody = <div style={styleBody}></div>;\n        switch(this.state.tab){\n            case \"updateOpera\":\n                styleBody.gridTemplateRows = \"1fr 1fr\";\n                mainBody = <div style={styleBody}>\n                    <div style={{gridArea:\"1/1/1/3\", textAlign: \"justify\"}}>Damit nderungen in den <i>opera</i>-Listen oder nderungen in den Ressourcen in den Listen sichtbar werden, mssen sie auf dem Server aktualisiert werden. Dieser Prozess kann 30 Sekunden bis 1 Minute dauern.<br /><b>Wechseln oder schlieen Sie nicht die Ansicht, whrend die Aktualisierung ausgefhrt wird.</b></div>\n                    <div style={{gridArea:\"2/2/2/3\", textAlign:\"right\"}}><input type=\"button\" value=\"opera-Listen aktualisieren\" onClick={async ()=>{\n                        this.props.status(\"saving\", \"Aktualisierung wird ausgefhrt.\");\n                        const reStatus = await arachne.exec(\"opera_update\");\n                        if(reStatus===200){this.props.status(\"saved\", \"Aktualisierung erfolgreich.\")}\n                        else{this.props.status(\"error\", \"Die Aktualisierung war nicht erfolgreich.\")}\n                    }} /></div>\n                </div>;\n                break;\n            case \"accounts\":\n                styleBody.display = \"block\";\n                let userRows = [];\n                // online: 30*60*1000 = 1800000\n                for(const user of this.state.users){\n                    userRows.push(<tr key={user.id}><td>{user.first_name} {user.last_name}</td><td>{JSON.parse(user.access).join(\", \")}</td><td>{user.agent}</td><td>{Date.now()-new Date(user.session_last_active)<1800000?<FontAwesomeIcon icon={faSun} color=\"gold\" style={{fontSize: \"25px\", marginLeft: \"20px\"}} />:<FontAwesomeIcon icon={faMoon} color=\"silver\" style={{fontSize: \"20px\", marginLeft: \"20px\"}} />}</td></tr>)\n                }\n                mainBody = <div style={styleBody}><table className=\"minorTxt\" width=\"100%\"><tbody>{userRows}</tbody></table></div>;\n                break;\n            default:\n                mainBody = <div>Tab nicht erkannt!</div>;\n        }\n        const styleBox = {\n            \"padding\": \"20px 20% 0 20%\"\n        }\n        const styleHeader = {\n            display: \"flex\",\n            justifyContent: \"space-evenly\",\n            /*border: \"1px solid white\",*/\n            padding: \"10px 20px\"\n\n        }\n        const styleTab = {\n            padding: \"5px 10px\",\n            cursor: \"default\"\n        }\n        const styleTabActive = {\n            padding: \"5px 10px\",\n            borderBottom: \"1px solid red\",\n            cursor: \"default\"\n        }\n        return (<div style={styleBox}>\n            <div style={styleHeader}>\n                <div style={this.state.tab===\"updateOpera\"?styleTabActive:styleTab} onClick={()=>{this.setState({tab: \"updateOpera\"})}}>Opera-Listen</div>\n                {arachne.access(\"admin\")?<div style={this.state.tab===\"accounts\"?styleTabActive:styleTab} onClick={()=>{this.setState({tab: \"accounts\"})}}>Kontenverwaltung</div>:null}\n            </div>\n            {mainBody}\n        </div>);\n    }\n    componentDidMount(){\n        if(arachne.access(\"admin\")){\n            const loadUsers = async () => {\n                const newUsers = await arachne.user.getAll({order: [\"last_name\"]});\n                this.setState({users: newUsers});\n            };\n            loadUsers();\n        }\n    }\n}\nclass Import extends React.Component{\n    constructor(props){\n        super(props);\n        this.state = {\n            tab: \"res\",\n            workLst: [],\n            editionLst: [],\n            scanWork: 1,\n            scanType: 0,\n            scanEditor: null,\n            scanYear: null,\n            scanVolume: null,\n            scanVolumeContent: null,\n            scanSerie: null,\n            scanLibrary: null,\n            scanLocation: null,\n            scanSignature: null,\n            scanFiles: null,\n            ocrRessource: 1,\n            ocrFiles: null,\n            zettelLetter: \"A\",\n            zettelFiles: null,\n            zettelEditors: [[arachne.me.id, arachne.me.last_name]],\n            zettelEditorSelected: arachne.me.id,\n        };\n    }\n    render(){\n        const styleBody = {\n            boxShadow: \"0px 2px 7px rgb(217, 217, 217)\",\n            padding: \"40px 10% 20px 10%\",\n            display: \"grid\",\n            gridTemplateColumns: \"200px auto\",\n            gridTemplateRows: \"1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr auto\",\n            gridGap: \"15px\"\n        }\n        let mainBody = <div style={styleBody}></div>;\n        switch(this.state.tab){\n            case \"res\":\n                mainBody = <div style={styleBody}>\n                    <div style={{gridArea: \"1/1/1/2\"}}>Werk:</div>\n                    <div style={{gridArea: \"1/2/1/3\"}}><SelectMenu options={this.state.workLst} onChange={e=>{this.setState({scanWork: e.target.value})}} /></div>\n                    <div style={{gridArea: \"2/1/2/2\"}}>Ressource:</div>\n                    <div style={{gridArea: \"2/2/2/3\"}}><SelectMenu options={[[0, \"Edition (relevant)\"], [1, \"Edition (veraltet)\"], [2, \"Handschrift\"], [3, \"Alter Druck (relevant)\"], [4, \"Alter Druck (veraltet)\"], [5, \"Sonstiges\"]]} onChange={e=>{this.setState({scanType: parseInt(e.target.value)})}} /></div>\n                    {this.state.scanType===0||this.state.scanType===1||this.state.scanType===5?[\n                        <div key=\"0\" style={{gridArea: \"3/1/3/2\"}}>Editor:</div>,\n                        <div key=\"1\" style={{gridArea: \"3/2/3/3\"}}><input type=\"text\" style={{width: \"96%\"}} onChange={e=>{this.setState({scanEditor: e.target.value})}}/></div>,\n                        <div key=\"2\" style={{gridArea: \"4/1/4/2\"}}>Jahr:</div>,\n                        <div key=\"3\" style={{gridArea: \"4/2/4/3\"}}><input type=\"text\" style={{width: \"96%\"}} onChange={e=>{this.setState({scanYear: e.target.value})}} /></div>,\n                        <div key=\"4\" style={{gridArea: \"5/1/5/2\"}}>Band:</div>,\n                        <div key=\"5\" style={{gridArea: \"5/2/5/3\"}}><input type=\"text\" style={{width: \"96%\"}} onChange={e=>{this.setState({scanVolume: e.target.value})}} /></div>,\n                        <div key=\"6\" style={{gridArea: \"6/1/6/2\"}}>Bandinhalt:</div>,\n                        <div key=\"7\" style={{gridArea: \"6/2/6/3\"}}><input type=\"text\" style={{width: \"96%\"}} onChange={e=>{this.setState({scanVolumeContent: e.target.value})}} /></div>,\n                        <div key=\"8\" style={{gridArea: \"7/1/7/2\"}}>Reihe:</div>,\n                        <div key=\"9\" style={{gridArea: \"7/2/7/3\"}}><SelectMenu options={[[0, \"\"], [1, \"Migne PL\"], [2, \"ASBen.\"], [3, \"ASBoll.\"], [4, \"AnalBoll.\"], [5, \"Mon. Boica\"], [6, \"Ma. Schatzverzeichnisse\"], [7, \"Ma. Bibliothekskataloge\"]]} onChange={e=>{this.setState({scanSerie: parseInt(e.target.value)})}} /></div>\n                    ]:null}\n                    {this.state.scanType===2?[\n                        <div key=\"0\" style={{gridArea: \"3/1/3/2\"}}>Stadt:</div>,\n                        <div key=\"1\" style={{gridArea: \"3/2/3/3\"}}><input type=\"text\" style={{width: \"96%\"}} onChange={e=>{this.setState({scanLocation: e.target.value})}} /></div>,\n                        <div key=\"2\" style={{gridArea: \"4/1/4/2\"}}>Bibliothek:</div>,\n                        <div key=\"3\" style={{gridArea: \"4/2/4/3\"}}><input type=\"text\" style={{width: \"96%\"}} onChange={e=>{this.setState({scanLibrary: e.target.value})}} /></div>,\n                        <div key=\"4\" style={{gridArea: \"5/1/5/2\"}}>Signatur:</div>,\n                        <div key=\"5\" style={{gridArea: \"5/2/5/3\"}}><input type=\"text\" style={{width: \"96%\"}} onChange={e=>{this.setState({scanSignature: e.target.value})}} /></div>\n                    ]:null}\n                    {this.state.scanType===3||this.state.scanType===4?[\n                        <div key=\"0\" style={{gridArea: \"3/1/3/2\"}}>Drucker:</div>,\n                        <div key=\"1\" style={{gridArea: \"3/2/3/3\"}}><input type=\"text\" style={{width: \"96%\"}} onChange={e=>{this.setState({scanEditor: e.target.value})}}/></div>,\n                        <div key=\"2\" style={{gridArea: \"4/1/4/2\"}}>Ort:</div>,\n                        <div key=\"3\" style={{gridArea: \"4/2/4/3\"}}><input type=\"text\" style={{width: \"96%\"}} onChange={e=>{this.setState({scanLocation: e.target.value})}} /></div>,\n                        <div key=\"4\" style={{gridArea: \"5/1/5/2\"}}>Jahr:</div>,\n                        <div key=\"5\" style={{gridArea: \"5/2/5/3\"}}><input type=\"text\" style={{width: \"96%\"}} onChange={e=>{this.setState({scanYear: e.target.value})}} /></div>,\n                    ]:null}\n                    <div style={{gridArea: \"9/1/9/2\"}}>Dateipfad:</div>\n                    <div style={{gridArea: \"9/2/9/3\"}}><input type=\"text\" style={{width: \"96%\"}} onChange={e=>{this.setState({scanPath: e.target.value})}} /></div>\n                    <div style={{gridArea: \"10/1/10/2\"}}>.png-Dateien:</div>\n                    <div style={{gridArea: \"10/2/10/3\"}}><input type=\"file\" name=\"files\" accept=\"image/png\" multiple onChange={e=>{this.setState({scanFiles: e.target.files})}} /></div>\n                    <div style={{gridArea: \"12/2/12/3\"}}><input type=\"button\" value=\"hochladen\" onClick={async ()=>{\n                        if(this.state.scanFiles==null){\n                            this.props.status(\"error\", \"Geben Sie Dateien zum Hochladen an.\");\n                        } else if((this.state.scanType===0||this.state.scanType===1||this.state.scanType===5)&&(!this.state.scanEditor||!this.state.scanYear)){\n                            this.props.status(\"error\", \"Geben Sie den Editor und das Jahr ein.\");\n                        } else if(this.state.scanPath&&this.state.scanWork){\n                            this.props.status(\"saving\", \"Die Dateien werden hochgeladen.\");\n                            // create new edition\n                            const newEditionId = await arachne.edition.save({\n                                work_id: this.state.scanWork,\n                                ressource: this.state.scanType,\n                                editor: this.state.scanEditor,\n                                year: this.state.scanYear,\n                                volume: this.state.scanVolume,\n                                vol_cont: this.state.scanVolumeContent,\n                                serie: this.state.scanSerie,\n                                /*comment,*/\n                                location: this.state.scanLocation,\n                                library: this.state.scanLibrary,\n                                signature: this.state.scanSignature\n                            });\n                            console.log(\"new edition id:\", newEditionId);\n                            // upload files\n                            if(newEditionId>0){\n                                let uploadForm = new FormData();\n                                uploadForm.append(\"edition_id\", newEditionId);\n                                uploadForm.append(\"path\", this.state.scanPath);\n                                const fLength = this.state.scanFiles.length;\n                                for(let i=0; i<fLength; i++){uploadForm.append(\"files\", this.state.scanFiles[i])}\n                                const re = await arachne.importScans(uploadForm);\n                                if(re.status===400){this.props.status(\"error\", \"Fehler beim Hochladen der Dateien.\")}\n                                else if(re.body.length==1){this.props.status(\"saved\", \"Das Hochladen war erfolgreich. Eine Datei wurde bersprungen (s. Konsole).\");console.log(`Bereits auf dem Server und deshalb bersprungen: ${re.body.join(\", \")}`)}\n                                else if(re.body.length>0){this.props.status(\"saved\", `Das Hochladen war erfolgreich. ${re.body.length} Dateien wurden bersprungen (s. Konsole).`);console.log(`Bereits auf dem Server und deshalb bersprungen: ${re.body.join(\", \")}`)}\n                                else{this.props.status(\"saved\", \"Das Hochladen war erfolgreich.\")}\n                            } else {\n                                this.props.status(\"error\", \"Edition konnte nicht erstellt werden.\");\n                            }\n                        } else{this.props.status(\"error\", \"Geben Sie einen gltigen Pfad ein!\")}                    \n                    }} /></div>\n                </div>;\n                break;\n            case \"ocr\":\n                styleBody.gridTemplateRows = \"1fr 1fr 1fr 1fr auto\";\n                mainBody = <div style={styleBody}>\n                    <div>Ressource:</div>\n                    <div><SelectMenu options={this.state.editionLst} onChange={async e=>{this.setState({ocrRessource: e.target.value})}} /></div>\n                    <div>.txt-Dateien:</div>\n                    <div><input type=\"file\" accept=\"text/plain\" multiple onChange={e=>{this.setState({ocrFiles: e.target.files})}} /></div>\n                    <div style={{gridArea:\"4/2/4/3\"}}><input type=\"button\" value=\"hochladen\" onClick={async ()=>{\n                        if(this.state.ocrFiles==null){\n                            this.props.status(\"error\", \"Geben Sie Dateien zum Hochladen an.\");\n                        }else{\n                            this.props.status(\"saving\", \"Die Dateien werden hochgeladen.\");\n                            const scanLnks = await arachne.scan_lnk.get({edition_id: this.state.ocrRessource});\n                            let scanLst = [];\n                            for(const scanLnk of scanLnks){\n                                const nScan = await arachne.scan.get({id: scanLnk.scan_id})\n                                scanLst.push(nScan[0]);\n                            }\n                            let missLst = [];\n                            for(const file of this.state.ocrFiles){\n                                const fName = file.name.substring(0,file.name.length-4);\n                                const cScan = scanLst.find(i => i.filename == fName);\n                                if(cScan){\n                                    console.log(cScan);\n                                    const fileTxt = await file.text();\n                                    await arachne.scan.save({id: cScan.id, full_text: fileTxt})\n                                } else {\n                                    missLst.push(file.name);\n                                }\n                            }\n                            if(missLst.length>1){this.props.status(\"saved\", `Dateien wurden hochgeladen. ${missLst.length} Dateien konnten nicht zugewiesen werden (s. Konsole).`);console.log(`bersprungene Dateien: ${missLst.join(\", \")}`)}\n                            else if(missLst.length==1){this.props.status(\"saved\", \"Dateien wurden hochgeladen. 1 Datei konnte nicht zugewiesen werden (s. Konsole).\");console.log(`bersprungene Dateien: ${missLst.join(\", \")}`)}\n                            else{this.props.status(\"saved\", \"Dateien wurden hochgeladen.\");}\n                        }\n                    }} /></div>\n                </div>;\n                break;\n            case \"zettel\":\n                styleBody.gridTemplateRows = \"1fr 1fr 1fr 1fr 1fr auto\";\n                mainBody = <div style={styleBody}>\n                    <div>Buchstabe:</div>\n                    <div><SelectMenu options={[[\"A\", \"A\"], [\"B\", \"B\"], [\"C\", \"C\"], [\"D\", \"D\"], [\"E\", \"E\"], [\"F\", \"F\"], [\"G\", \"G\"], [\"H\", \"H\"], [\"I\", \"I\"], [\"J\", \"J\"], [\"K\", \"K\"], [\"L\", \"L\"], [\"M\", \"M\"], [\"N\", \"N\"], [\"O\", \"O\"], [\"P\", \"P\"], [\"Q\", \"Q\"], [\"R\", \"R\"], [\"S\", \"S\"], [\"T\", \"T\"], [\"U\", \"U\"], [\"V\", \"V\"], [\"W\", \"W\"], [\"X\", \"X\"], [\"Y\", \"Y\"], [\"Z\", \"Z\"]]} onChange={e=>{this.setState({zettelLetter: e.target.value})}}/></div>\n                    <div>erstellt von:</div>\n                    <div><SelectMenu options={this.state.zettelEditors} onChange={e=>{this.setState({zettelEditorSelected: e.target.value})}}/></div>\n                    <div>Dateien:</div>\n                    <div><input type=\"file\" accept=\"image/jpeg\" multiple onChange={e=>{this.setState({zettelFiles: e.target.files})}} /></div>\n                    <div style={{gridArea:\"4/2/4/3\"}}><input type=\"button\" value=\"hochladen\" onClick={async ()=>{\n                        if(this.state.zettelFiles==null){\n                            this.props.status(\"error\", \"Geben Sie Dateien zum Hochladen an.\");\n                        }else{\n                            this.props.status(\"saving\", \"Die Dateien werden vorbereitet.\");\n                            const maxItem= 100;\n                            let cItemCount = maxItem;\n                            let cUploadIndex = -1;\n                            let uploadGroup = [];\n                            const fLength = this.state.zettelFiles.length;\n                            // prepare upload groups\n                            for(let i=0; i<fLength; i++){\n                                if(cItemCount >= maxItem){\n                                    cItemCount = 0;\n                                    cUploadIndex ++;\n                                    uploadGroup.push(new FormData());\n                                    uploadGroup[cUploadIndex].append(\"letter\", this.state.zettelLetter);\n                                    uploadGroup[cUploadIndex].append(\"type\", \"0\");\n                                    uploadGroup[cUploadIndex].append(\"user_id_id\", this.state.zettelEditorSelected);\n                                }\n                                cItemCount ++;\n                                uploadGroup[cUploadIndex].append(\"files\", this.state.zettelFiles[i]);\n                            }\n                            // loop through groups and upload!\n                            this.props.status(\"saving\", \"Die Dateien werden hochgeladen.\");\n                            for(const uItem of uploadGroup){\n                                await arachne.importZettel(uItem);\n                            }\n\n                            this.props.status(\"saved\", \"Dateien wurden hochgeladen.\");\n                        }\n                    }} /></div>\n                </div>;\n                break;\n            default:\n                mainBody = <div>Tab nicht gefunden.</div>;\n        }\n        const styleBox = {\n            \"padding\": \"20px 20% 0 20%\"\n        }\n        const styleHeader = {\n            display: \"flex\",\n            justifyContent: \"space-evenly\",\n            /*border: \"1px solid white\",*/\n            padding: \"10px 20px\"\n\n        }\n        const styleTab = {\n            padding: \"5px 10px\",\n            cursor: \"default\"\n        }\n        const styleTabActive = {\n            padding: \"5px 10px\",\n            borderBottom: \"1px solid red\",\n            cursor: \"default\"\n        }\n        return (<div style={styleBox}>\n            <div style={styleHeader}>\n                <div style={this.state.tab===\"res\"?styleTabActive:styleTab} onClick={()=>{this.setState({tab: \"res\"})}}>Ressource</div>\n                <div style={this.state.tab===\"ocr\"?styleTabActive:styleTab} onClick={()=>{this.setState({tab: \"ocr\"})}}>ocr-Dateien</div>\n                <div style={this.state.tab===\"zettel\"?styleTabActive:styleTab} onClick={()=>{this.setState({tab: \"zettel\"})}}>Zettel</div>\n            </div>\n            {mainBody}\n        </div>);\n    }\n    componentDidMount(){\n        const loadOptions = async () => {\n            const works = await arachne.work.get({in_use: 1}, {select: [\"id\", \"ac_web\"], order: [\"ac_web\"]});\n            let newWorkLst = [];\n            for(const work of works){\n                newWorkLst.push([work.id, work.ac_web]);\n            }\n            this.setState({workLst: newWorkLst});\n            const editions = await arachne.edition.getAll({select: [\"id\", \"label\"], order: [\"label\"]});\n            let newEditionLst = [];\n            for(const edition of editions){\n                newEditionLst.push([edition.id, edition.label]);\n            }\n            this.setState({editionLst: newEditionLst});\n\n        }\n        loadOptions();\n\n        if(arachne.access(\"admin\")){\n            arachne.user.getAll({order: [\"last_name\"]}).then(users=>{\n                let userLst =[];\n                for(const user of users){\n                    userLst.push([user.id, user.last_name]);\n                }\n                this.setState({zettelEditors: userLst});\n            }).catch(e=>{throw e});\n        }\n    }\n}\nclass Help extends React.Component{\n    render(){\n        return (\n    <div style={{padding: \"20px 40px\"}}>\n        <p>\n        <a href=\"https://gitlab.lrz.de/haeberlin/dmlw/-/wikis/00-Start\">Hilfe und Informationen</a> zu dMLW finden Sie auf unsererer <a href=\"https://gitlab.lrz.de/haeberlin/dmlw\">GitLab-Seite</a>.</p>\n        <p>Informationen zu der aktuellen Version von dMLW und den Vernderungen finden Sie <a href=\"https://gitlab.lrz.de/haeberlin/dmlw/-/blob/master/CHANGELOG.md\">in unserem Changelog</a>.</p>\n        <p>Informationen zum Wrterbuch-Projekt auf <a href=\"www.mlw.badw.de\">www.mlw.badw.de</a></p> \n    </div>\n        );\n    }\n}\n\nexport { Account, Help, Import, Server, Statistics };","import React from \"react\";\n\nimport { arachne } from \"./arachne.js\";\nimport { Navigator, parseHTML, SearchBox, SelectMenu, Selector, AutoComplete } from \"./elements.js\";\n\nclass Zettel extends React.Component{\n    constructor(props){\n        super(props);\n        this.state = {count:0, selectionDetail:{ids:[], currentId:null}};\n    }\n\n    render(){\n        return (\n        <div style={{padding: \"0 10px\", display: \"grid\", gridTemplateColumns: \"auto 420px\", gridTemplateRows: \"min-content auto\", rowGap: \"15px\"}}>\n            <SearchBox\n                searchQuery={(q,order) => {this.searchQuery(q,order)}}\n                searchOptions={[\n                    [\"lemma\", \"Lemma\"],\n                    [\"type\", \"Typ\"],\n                    [\"id\", \"ID\"],\n                    [\"opus\", \"Werk\"],\n                    [\"date_type\", \"Datum-Typ\"]\n                ]}\n                sortOptions={[['[\"id\"]', \"ID\"], ['[\"lemma\", \"lemma_nr\", \"date_sort\", \"date_type\"]', \"Datum\"]]}\n                gridArea={(this.state.selectionDetail.ids.length>0)?\"1/1/1/2\":\"1/1/1/3\"}\n            />\n            <ZettelBox\n                loadPage={newPage => {this.loadPage(newPage)}}\n                currentElements={this.state.currentElements}\n                count={this.state.count}\n                currentPage={this.state.currentPage}\n                maxPage={this.state.maxPage}\n                presetSelection={this.state.presetSelection}\n                gridArea={(this.state.selectionDetail.ids.length>0)?\"2/1/2/2\":\"2/1/2/3\"}\n                showDetail={item => {\n                    this.setState({selectionDetail: item.selection, itemDetail: item.item});\n                }}\n            />\n            {(this.state.selectionDetail.ids.length>0)?<ZettelAside status={this.props.status} selection={this.state.selectionDetail}item={this.state.itemDetail} onUpdate={ids=>{this.reloadZettel(ids)}} openNextItem={()=>{this.openNextItem()}}/>:\"\"}\n        </div>\n        );\n    }\n    async openNextItem(){// save current element\n        let newItem = await arachne.zettel.get({id: this.state.itemDetail.id}); newItem = newItem[0];\n        let currentElements = this.state.currentElements;\n        const indexOfNewItem = currentElements.findIndex(i => i.id===newItem.id)\n        currentElements[indexOfNewItem] = newItem;\n\n        // load next element\n        const lastIndex = this.state.currentElements.findIndex(i => i.id === this.state.itemDetail.id);\n        if(this.state.currentElements.length>lastIndex+1){\n            this.setState({currentElements: currentElements, itemDetail: this.state.currentElements[lastIndex+1], presetSelection: [this.state.currentElements[lastIndex+1].id]});\n        }\n    }\n    async reloadZettel(ids){\n        //await this.loadPage(0); // removes entry, if it doesnt match query!\n        for(const id of ids){\n            let newItem = await arachne.zettel.get({id: id}); newItem = newItem[0];\n            let currentElements = this.state.currentElements;\n            const indexOfNewItem = currentElements.findIndex(i => i.id===newItem.id)\n            currentElements[indexOfNewItem] = newItem;\n            this.setState({currentElements: currentElements, selectionDetail: {ids:ids}, itemDetail: newItem});\n        }\n    }\n    async searchQuery(newQuery, order){\n        this.props.status(\"searching\");\n        const count = await arachne.zettel.search(newQuery, {count:true, order:order});\n        const currentElements = await arachne.zettel.search(newQuery, {limit:50, order:order});\n        if(count[0][\"count\"]>1){this.props.status(\"found\", `${count[0][\"count\"]} Eintrge gefunden.`)}\n        else if(count[0][\"count\"]===1){this.props.status(\"found\", \"1 Eintrag gefunden.\")}\n        else{this.props.status(\"notFound\")}\n        this.setState({\n            query: newQuery,\n            queryOrder: order,\n            count: count[0][\"count\"],\n            maxPage: Math.floor(count[0][\"count\"]/50)+1,\n            currentPage: 1,\n            currentElements: currentElements,\n            selectionDetail: {ids:[]}\n        });\n    }\n    async loadPage(newPage){\n        const currentElements = await arachne.zettel.search(this.state.query, {limit:50, offset:((newPage-1)*50), order:this.state.queryOrder});\n            this.setState({\n                currentPage: newPage,\n                currentElements: currentElements,\n                selectionDetail: {ids:[]}\n            });\n    }\n}\nclass ZettelBox extends React.Component{\n    constructor(props){\n        super(props);\n        this.state = {selection: {currentId: null, ids:[]}}\n    }\n    render(){\n        if(this.props.count>0){\n            let cEls = [];\n            for(const cEl of this.props.currentElements){\n                cEls.push(<ZettelCard testProp={cEl.id+\"_test\"} id={cEl.id} item={cEl} key={cEl.id} />);\n            }\n\n            return (\n            <div style={{gridArea: this.props.gridArea, padding:\"0 10px\"}}>\n                <Navigator loadPage={newPage=>{this.props.loadPage(newPage)}}currentPage={this.props.currentPage} maxPage={this.props.maxPage} />\n                <Selector multiSelect={true} className=\"zettel_box\" selectCallback={\n                    (item, selection)=>{this.selectCallback(item, selection)}\n                } preset={this.props.presetSelection}>{cEls}</Selector>\n            </div>);\n        } else {\n            return null;\n        }\n    }\n    selectCallback(element, selection){\n        if(element){this.props.showDetail({selection: selection, item: element.props.item});}\n        else{this.props.showDetail({selection: selection, item: null});};\n    }\n}\nclass ZettelCard extends React.Component{\n    render(){\n        const zettel = this.props.item;\n        let style = {width: \"500px\"};\n        \n        if(zettel.img_path!=null){\n            let classList = \"\";\n            if(zettel.in_use===0){classList+=\"zettel_img no_use\"}\n            else{classList+=\"zettel_img in_use\"}\n            const box =\n            <div className=\"zettel\" id={zettel.id} style={style}>\n                <img alt=\"\" className={classList} src={zettel.img_path+\".jpg\"}></img>\n                <div className=\"zettel_msg\">{zettel.date_display}</div>\n                <div className=\"zettel_menu\">\n                    <span style={{float: \"left\"}} dangerouslySetInnerHTML={parseHTML(zettel.lemma_display)}></span>\n                    <span style={{float: \"right\"}} dangerouslySetInnerHTML={parseHTML(zettel.opus)}></span>\n                </div>\n            </div>;\n            return box;\n        } else {\n            //style.height = \"355px\";\n            const box =\n            <div className=\"zettel\" id={zettel.id} style={style}>\n                <div className=\"digitalZettel\">\n                    <div className='digitalZettelLemma' dangerouslySetInnerHTML={parseHTML(zettel.lemma_display)}></div>\n                    <div className='digitalZettelDate' dangerouslySetInnerHTML={parseHTML(zettel.date_display)}></div>\n                    <div className='digitalZettelWork' dangerouslySetInnerHTML={parseHTML(zettel.opus)}></div>\n                    <div className='digitalZettelText' dangerouslySetInnerHTML={parseHTML(zettel.txt)}></div>\n                </div>\n            </div>;\n            return box;\n        }\n    }\n}\nclass ZettelAside extends React.Component{\n    constructor(props){\n        super(props);\n        this.state = {\n            addLemma: false,\n            ressources: [],\n            batchType: 1,\n            /*item: this.props.item,*/\n            id: this.props.item.id,\n            type: this.props.item.type,\n            date_type: this.props.item.date_type,\n            lemma_id: this.props.item.lemma_id,\n            lemma_ac: this.props.item.lemma_ac,\n            work_id: this.props.item.work_id,\n            ac_web: this.props.item.ac_web,\n            date_own: this.props.item.date_own,\n            date_own_display: this.props.item.date_own_display,\n            /* */\n            newLemma_Lemma: \"\",\n            newLemma_LemmaDisplay: \"\",\n            batch_lemma_id: null,\n            batch_lemma_ac: \"\",\n            batch_work_id: null,\n            batch_ac_web: \"\", // = work_ac\n            batch_type: null\n        };\n    }\n    render(){\n        const style = {\n            position: \"fixed\",\n            top: 0,\n            bottom: 0,\n            right: 0,\n            width: \"400px\",\n            padding: \"10px 15px\",\n            boxShadow: \"rgb(60, 110, 113) 0px 0px 2px\"\n        }\n        if(this.state.addLemma){ // add lemma\n            return <div style={style} className=\"mainColors\">\n            <div style={{\n                margin: \"50px 0 10px 0\"}}>\n                <p><b>Soll ein neues Lemma erstellt werden?</b><br /><span className=\"minorTxt\"><a href=\"https://gitlab.lrz.de/haeberlin/dmlw/-/wikis/10-WikiHow:-Neues-Lemma-erstellen#3-maske-ausfllen\" target=\"_blank\" rel=\"noreferrer\">Hier</a> finden Sie Informationen zum Erstellen neuer Lemmata.</span></p>\n            </div>\n            <div style={{\n                display: \"grid\",\n                gridTemplateColumns: \"150px auto\",\n                gridTemplateRows: \"1fr 1fr\",\n                rowGap: \"10px\",\n                margin: \"50px 0\"\n            }}>\n                <div style={{gridArea: \"1/1/1/2\"}}>Lemma:</div>\n                <div style={{gridArea: \"1/2/1/3\"}}><input type=\"text\" value={this.state.newLemma_Lemma} onChange={event=>{this.setState({newLemma_Lemma: event.target.value})}}/></div>\n                <div style={{gridArea: \"2/1/2/2\"}}>Lemma-Anzeige:</div>\n                <div style={{gridArea: \"2/2/2/3\"}}><input type=\"text\" value={this.state.newLemma_LemmaDisplay} onChange={event=>{this.setState({newLemma_LemmaDisplay: event.target.value})}}/></div>\n            </div>\n            <div style={{\n                display: \"grid\",\n                gridTemplateColumns: \"150px auto\",\n                gridTemplateRows: \"1fr 1fr 1fr 1fr\",\n                rowGap: \"10px\",\n                margin: \"50px 0\"\n            }}>\n                <div style={{gridArea: \"1/1/1/2\"}}>Zahlzeichen:</div>\n                <div style={{gridArea: \"1/2/1/3\"}}><SelectMenu options={[[0, \"\"], [1, 1], [2, 2], [3, 3], [4, 4], [5, 5], [6, 6]]} onChange={event=>{this.setState({newLemma_Homonym: event.target.value})}} /></div>\n                <div style={{gridArea: \"2/1/2/2\"}}>im Wrterbuch:</div>\n                <div style={{gridArea: \"2/2/2/3\"}}><SelectMenu options={[[0, \"Nein\"], [1, \"Ja\"]]} onChange={event=>{this.setState({newLemma_MLW: event.target.value})}} /></div>\n                <div style={{gridArea: \"3/1/3/2\"}}>Stern:</div>\n                <div style={{gridArea: \"3/2/3/3\"}}><SelectMenu options={[[0, \"Nein\"], [1, \"Ja\"]]} onChange={event=>{this.setState({newLemma_Stern: event.target.value})}} /></div>\n                <div style={{gridArea: \"4/1/4/2\"}}>Fragezeichen:</div>\n                <div style={{gridArea: \"4/2/4/3\"}}><SelectMenu options={[[0, \"Nein\"], [1, \"Ja\"]]} onChange={event=>{this.setState({newLemma_LemmaFrage: event.target.value})}} /></div>\n            </div>\n            <div style={{\n                display: \"grid\",\n                gridTemplateColumns: \"150px auto\",\n                gridTemplateRows: \"1fr\",\n                rowGap: \"10px\",\n                margin: \"50px 0\"\n            }}>\n                <div style={{gridArea: \"1/1/1/2\"}}><input type=\"button\" value=\"erstellen\" onClick={async ()=>{\n                    if(this.state.newLemma_Lemma===\"\" ||this.state.newLemma_Lemma.indexOf(\" \")>-1){\n                        this.props.status(\"error\", \"Bitte ein gltiges Lemma eintragen!\");\n                    } else if(this.state.newLemma_LemmaDisplay===\"\"){\n                        this.props.status(\"error\", \"Bitte tragen Sie eine gltige Lemma-Anzeige ein!\");\n                    }else {\n                        let newLemmaValue = {\n                            lemma: this.state.newLemma_Lemma,\n                            lemma_display: this.state.newLemma_LemmaDisplay,\n                            MLW: this.state.newLemma_MLW,\n                            Fragezeichen: this.state.newLemma_LemmaFrage,\n                            Stern: this.state.newLemma_Stern,\n                        };\n                        if(this.state.newLemma_Homonym>0){newLemmaValue.lemma_nr=this.state.newLemma_Homonym}\n                        const newId = await arachne.lemma.save(newLemmaValue);\n                        this.props.status(\"saved\", `Neue ID: ${newId}`);\n                        this.setState({lemma_ac: this.state.newLemma_Lemma, lemma_id: newId, addLemma: false});\n                    }\n                }} /></div>\n                <div style={{gridArea: \"1/2/1/3\"}}><input type=\"button\" value=\"abbrechen\" onClick={()=>{this.setState({addLemma: false})}} /></div>\n            </div>\n            </div>;\n        } else if(this.props.selection.ids.length===1){ // single zettel\n            let cRes = [];\n            if(this.state.ressources.length>0){\n                let keyCount = -1;\n                for(const item of this.state.ressources){\n                    keyCount ++;\n                    let url = item.url;\n                    if(url===null||url===\"\"){url=`/site/viewer/${item.id}`}\n                    cRes.push(<div key={keyCount}><a href={url} target=\"_blank\" rel=\"noreferrer\">{item.label}</a></div>);\n                }\n            }\n            let dateOwn = \"\";\n            let dateStyle = {\n                borderTop: \"1px solid #f2f2f2\",\n                paddingTop: \"30px\",\n                display: \"grid\",\n                gridTemplateColumns: \"150px auto\",\n                gridTemplateRows: \"1fr\",\n                rowGap: \"10px\",\n                margin: \"10px 0 30px 0\"\n                };\n            if(this.state.date_type===9){\n                dateStyle.gridTemplateRows = \"1fr 1fr 1fr 1fr\";\n                dateOwn = [<div key=\"1\" style={{gridArea: \"2/1/2/3\"}}><span className=\"minorTxt\"><b>Achtung:</b> Dieser Zettel bentigt eine <a href=\"https://gitlab.lrz.de/haeberlin/dmlw/-/wikis/10-WikiHow:-Zettel-verknpfen#datierung-der-zettel\" target=\"_blank\" rel=\"noreferrer\">eigene Datierung</a>.</span></div>,\n                <div key=\"2\" style={{gridArea: \"3/1/3/2\"}}>Sortierdatum:</div>,\n                <div key=\"3\" style={{gridArea: \"3/2/3/3\"}}><input type=\"text\" value={this.state.date_own?this.state.date_own:\"\"} onChange={e=>{\n                    if(!isNaN(e.target.value)&&e.target.value!==\"\"&&e.target.value!==\" \"){\n                        this.setState({date_own: parseInt(e.target.value)});\n                    }else{\n                        this.props.status(\"error\", \"Sortierdatum muss eine Ganzzahl sein!\");\n                    }\n                }} /></div>,\n                <div key=\"4\" style={{gridArea: \"4/1/4/2\"}}>Anzeigedatum:</div>,\n                <div key=\"5\" style={{gridArea: \"4/2/4/3\"}}><input type=\"text\" value={this.state.date_own_display?this.state.date_own_display:\"\"} onChange={e=>{this.setState({date_own_display: e.target.value})}} /></div>\n            ];\n            }\n            return (\n    <div style={style} className=\"mainColors\">\n        <div style={{\n            display: \"grid\",\n            gridTemplateColumns: \"150px auto\",\n            gridTemplateRows: \"1fr 5px 1fr 1fr 1fr\",\n            rowGap: \"10px\",\n            margin: \"35px 0 30px 0\"\n        }}>\n            <div className=\"minorTxt\" style={{gridArea: \"1/1/1/3\", textAlign: \"right\"}}>\n                <i>ID {this.state.id}</i>\n            </div>\n            <div style={{gridArea: \"3/1/3/2\"}}>Zetteltyp:</div>\n            <div style={{gridArea: \"3/2/3/3\"}}>\n                <SelectMenu style={{width: \"86%\"}}value={this.state.type?this.state.type:0} options={[[0, \"...\"],[1, \"verzettelt\"],[2,\"Exzerpt\"],[3,\"Index\"],[4,\"Literatur\"], [6, \"Index (unkl. Werk)\"], [7, \"Notiz\"]]} onChange={event=>{this.setState({type: parseInt(event.target.value)})}} classList=\"zettel_type\"/>\n            </div>\n            <div style={{gridArea: \"4/1/4/2\"}}>Lemma:</div>\n            <div style={{gridArea: \"4/2/4/3\"}}>\n                <AutoComplete onChange={(value, id)=>{this.setState({lemma_ac: value, lemma_id: id, newLemma_Lemma: value, newLemma_LemmaDisplay: value})}} value={this.state.lemma_ac?this.state.lemma_ac:\"\"}tbl=\"lemma\" col=\"lemma_ac\" />\n            </div>\n            {this.state.type!==4&&this.state.type<6 ? <div style={{gridArea: \"5/1/5/2\"}}>Werk:</div> : null}\n            {this.state.type!==4&&this.state.type<6 ? <div style={{gridArea: \"5/2/5/3\"}}><AutoComplete  value={this.state.ac_web?this.state.ac_web:\"\"}tbl=\"work\" col=\"ac_web\" onChange={(value, id)=>{this.setState({ac_web: value, work_id: id})}} /></div> : null}\n        </div>\n        {this.state.type!==4&&this.state.type<6&&this.state.work_id>0 ?\n        <div style={dateStyle}>\n            <div style={{gridArea: \"1/1/1/2\"}}>Datierung:</div>\n            <div style={{gridArea: \"1/2/1/3\"}}><span dangerouslySetInnerHTML={parseHTML(this.state.date_display)}></span></div>\n            {dateOwn}\n        </div>\n        :null}\n        <div style={{\n            borderTop: \"1px solid #f2f2f2\",\n            paddingTop: \"30px\",\n            display: \"grid\",\n            gridTemplateColumns: \"150px auto\",\n            gridTemplateRows: \"1fr\",\n            rowGap: \"10px\",\n            margin: \"10px 0 30px 0\"\n            }}>\n            <div style={{gridArea: \"1/2/1/3\"}}>\n                <input type=\"button\" value=\"speichern&weiter\" style={{marginBottom: \"10px\"}}onClick={()=>{this.saveDetail(true)}} />\n                <input type=\"button\" value=\"speichern\" onClick={()=>{this.saveDetail()}} />\n            </div>\n        </div>\n        {this.state.ressources.length>0&&this.state.type!==4&&this.state.type<6?\n        <div style={{\n            borderTop: \"1px solid #f2f2f2\",\n            paddingTop: \"30px\",\n            display: \"grid\",\n            gridTemplateColumns: \"150px auto\",\n            gridTemplateRows: \"1fr\",\n            rowGap: \"10px\",\n            margin: \"10px 0 30px 0\"\n            }}>\n            <div style={{gridArea: \"1/1/1/2\"}}>Ressourcen:</div>\n            <div style={{gridArea: \"1/2/1/3\"}}>{cRes}</div>\n        </div>\n        :null}\n    </div>\n            );\n        } else { // batch\n            let inputType = \"\";\n            switch(this.state.batchType){\n                case 1:\n                    inputType = <AutoComplete onChange={(value, id)=>{this.setState({batch_lemma_ac: value, batch_lemma_id: id})}} value={this.state.batch_lemma_ac}tbl=\"lemma\" col=\"lemma_ac\" />;\n                    break;\n                case 2:\n                    inputType = <AutoComplete  value={this.state.batch_ac_web}tbl=\"work\" col=\"ac_web\" onChange={(value, id)=>{this.setState({batch_ac_web: value, batch_work_id: id})}} />;\n                    break;\n                case 3:\n                    inputType = \n                    <SelectMenu style={{width: \"86%\"}} options={[[0, \"...\"],[1, \"verzettelt\"],[2,\"Exzerpt\"],[3,\"Index\"],[4,\"Literatur\"], [6, \"Index (unkl. Stelle)\"], [7, \"Notiz\"]]} onChange={event=>{this.setState({batch_type: event.target.value})}} />;\n                    break;\n                /*case 4:\n                    inputType = <input type=\"text\" value=\"lemma\" />;\n                    break;*/\n                default:\n                    inputType = <div style={{color: \"red\"}}>Unbekannter Stapel-Typ!</div>         \n            }\n            return <div style={style} className=\"mainColors\">\n                <div style={{\n                    display: \"grid\",\n                    gridTemplateColumns: \"150px auto\",\n                    gridTemplateRows: \"1fr 25px 1fr 15px 1fr\",\n                    rowGap: \"10px\",\n                    margin: \"35px 0 30px 0\"\n                }}>\n                    <span style={{gridArea: \"1/1/1/3\", textAlign: \"right\"}} className=\"minorTxt\"><i>{this.props.selection.ids.length} Zettel</i></span>\n                    <div style={{gridArea: \"3/1/3/2\"}}>\n                        <SelectMenu style={{width: \"86%\"}} options={[[1, \"Lemma\"],[2, \"Werk\"],[3,\"Zettel-Typ\"]/*,[4,\"Projekt\"]*/]} onChange={event=>{\n                            this.setState({batchType: parseInt(event.target.value)})\n                            }} />\n                    </div>\n                    <div style={{gridArea: \"3/2/3/3\"}}>\n                        {inputType}\n                    </div>\n                    <div style={{gridArea: \"5/2/5/3\"}}><input type=\"button\" value=\"fr alle bernehmen\" onClick={async ()=>{\n                        let skipSave = false;\n                        let newValue = \"\";\n                        let newKey = \"\";\n                        if(this.state.batchType===1&&this.state.batch_lemma_id!=null){newKey=\"lemma_id\";newValue=this.state.batch_lemma_id}\n                        else if(this.state.batchType===2&&this.state.batch_work_id!=null){newKey=\"work_id\";newValue=this.state.batch_work_id}\n                        else if(this.state.batchType===3&&this.state.batch_type!=null){newKey=\"type\";newValue=this.state.batch_type}\n                        else{skipSave=true;this.props.status(\"error\", \"Bitte tragen Sie einen gltigen Wert ein.\")}\n                        if(skipSave===false){\n                            let newValueLst = [];\n                            for(const cId of this.props.selection.ids){\n                                let newValueObj = {id: cId, user_id: arachne.user.id}\n                                newValueObj[newKey] = newValue;\n                                newValueLst.push(newValueObj);\n                            }\n                            this.props.status(\"saving\");\n                            await arachne.zettel.save(newValueLst);\n                            this.props.status(\"saved\");\n                            this.props.onUpdate(this.props.selection.ids);\n                        }\n                    }} /></div>\n                </div>\n            </div>;\n        }\n    }\n    componentDidMount(){\n        // loading ressources\n        if(this.state.work_id>0){\n            arachne.edition.get({work_id: this.state.work_id})\n            .then(res => {\n                this.setState({ressources: res});\n            })\n            .catch(e => {throw e;});\n        }\n    }\n    componentDidUpdate(){\n        if(this.state.id!==this.props.item.id){\n            if(this.props.item.work_id>0){\n                arachne.edition.get({work_id: this.props.item.work_id})\n                .then(res => {\n                    this.setState({\n                        addLemma: false,\n                        id: this.props.item.id,\n                        type: this.props.item.type,\n                        date_type: this.props.item.date_type,\n                        lemma_id: this.props.item.lemma_id,\n                        lemma_ac: this.props.item.lemma_ac,\n                        work_id: this.props.item.work_id,\n                        ac_web: this.props.item.ac_web,\n                        date_own: this.props.item.date_own,\n                        date_own_display: this.props.item.date_own_display,\n                        ressources: res\n                    });\n                })\n                .catch(e => {throw e;});\n            } else {this.setState({addLemma: false,\n                id: this.props.item.id,\n                type: this.props.item.type,\n                date_type: this.props.item.date_type,\n                lemma_id: this.props.item.lemma_id,\n                lemma_ac: this.props.item.lemma_ac,\n                work_id: this.props.item.work_id,\n                ac_web: this.props.item.ac_web,\n                date_own: this.props.item.date_own,\n                date_own_display: this.props.item.date_own_display,\n                ressources: []})}\n        }\n    }\n    async saveDetail(next=false){\n        if(this.state.date_type===9&&!Number.isInteger(this.state.date_own)){\n            this.props.status(\"error\", \"Sortierdatum muss eine Ganzzahl sein!\");\n        } else {\n            let nVals = {\n                id: this.state.id,\n                type: this.state.type,\n                work_id: this.state.work_id,\n                user_id: arachne.user.id\n            };\n            this.props.status(\"saving\");\n            if(this.state.lemma_id===null&&this.state.newLemma_Lemma!==\"\"){this.setState({addLemma: true})}\n            else {nVals.lemma_id = this.state.lemma_id}\n            if(this.state.date_type===9&&Number.isInteger(this.state.date_own)){\n                nVals.date_own = this.state.date_own;\n                nVals.date_own_display = this.state.date_own_display;\n            }\n            await arachne.zettel.save(nVals)\n            this.props.status(\"saved\");\n            if(next){\n                document.querySelector(\"select.zettel_type\").focus();\n                this.props.openNextItem();\n            }else{this.props.onUpdate([this.state.id]);}\n        }\n    }\n}\n\nexport { Zettel };","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faCat } from \"@fortawesome/free-solid-svg-icons\";\n\nimport \"./index.css\";\n\nimport { arachne } from \"./arachne.js\";\nimport { Status } from \"./elements.js\";\nimport { Lemma } from \"./lemma.js\";\nimport { Opera } from \"./opera.js\";\nimport { Ressource } from \"./ressources.js\";\nimport { Account, Help, Import, Server, Statistics } from \"./settings.js\";\nimport { Zettel } from \"./zettel.js\";\n\nconst colors = {shadow: \"#3c6e71\"}\n\nclass MainMenu extends React.Component{\n    constructor(props){\n        super(props);\n        const menuLst = {\n            \"Zettel- und Wortmaterial\": {\n                visible: false, \n                items: {\n                    \"Zettel-Datenbank\": \"zettel\",\n                    \"Lemmaliste\": \"lemma\",\n                    /*\"Volltext-Suche\": \"fulltext\",*/\n            }},\n            \"Verzeichnisse\": {\n                visible: false, \n                items: {\n                    \"opera-maiora\":\"maiora\",\n                    \"opera-minora\":\"minora\",\n                    \"Ressourcen\":\"ressources\",\n                    /*\"Sekundrliteratur\":\"seklit\",*/\n            }},\n            /*\"Editor\": {\n                visible: false, \n                items:\n                {\"Projektbersicht\":\"overview\"}\n            },*/\n            \"Einstellungen\": {\n                visible: false, \n                items: {\n                    \"Hilfe\":\"help\",\n                    \"Konto\":\"account\",\n                    \"Server\": \"server\",\n                    \"Import\": \"import\",\n                    \"Statistiken\":\"stats\",\n                    \"abmelden\":\"logout\",\n            }}\n        };\n        this.state = {menuEntries: menuLst, currentSubmenu: null};\n    }\n    render(){\n        let style = {\n            position: \"fixed\",\n            top: 0,\n            left: 0,\n            boxShadow: `0 0 2px ${colors.shadow}`,\n            padding: \"10px 15px\",\n            zIndex: 1000000,\n        };\n        let menuEntries = [];\n        if(this.props.onTop===1){\n            // top menu\n            style.right = 0;\n            style.display = \"flex\";\n            style.position = \"absolute\";\n            style.justifyContent = \"space-evenly\";\n            let keyCount = -1;\n            for(const mainEntry in this.state.menuEntries){\n                keyCount ++;\n                let subMenu = \"\";\n                const subMenuStyle = {\n                    position: \"absolute\",\n                    boxShadow: \"rgb(60, 110, 113) 0px 0px 2px\",\n                    top: \"43px\",\n                    padding: \"10px 25px\",\n                    marginLeft: \"-10px\"\n                }\n                if(this.state.currentSubmenu===mainEntry){\n                    let subMenuEntries = [];\n                    for(const subEntry in this.state.menuEntries[mainEntry].items){\n                        subMenuEntries.push(<div key={subEntry} style={{margin: \"10px 0 10px 10px\"}} onClick={()=>{\n                            this.setState({currentSubmenu: \"\"});\n                            this.props.loadMain(this.state.menuEntries[mainEntry].items[subEntry]);\n                        }}><span style={{cursor:\"pointer\"}}>{subEntry}</span></div>);\n                    }\n                    subMenu = <div key={subMenuEntries} className=\"mainColors\" style={subMenuStyle}>{subMenuEntries}</div>;\n                }\n                menuEntries.push(\n                <div key={keyCount}>\n                    <span style={{cursor:\"pointer\"}} onClick={() => {this.setState({currentSubmenu: mainEntry})}}>{mainEntry}</span>\n                    {subMenu}\n                </div>);\n                //<div style={{display: \"none\"}}>{this.state.menuEntries[mainEntry]}</div>\n            }\n        } else {\n            // side menu\n            //style.display = \"block\";\n            style.transition = \"left 0.5s\";\n            if(this.state.hidden){style.left = \"-290px\"}\n            style.bottom = \"0\";\n            style.width = \"300px\";\n            let keyCount = -1;\n            for(const mainEntry in this.state.menuEntries){\n                menuEntries.push(<div key={mainEntry} style={{marginTop: \"15px\", cursor:\"default\"}}>{mainEntry}</div>);\n                for(const subEntry in this.state.menuEntries[mainEntry].items){\n                    keyCount ++;\n                    menuEntries.push(<div key={subEntry} style={{marginLeft: \"15px\", display: \"inline-block\", cursor:\"pointer\"}} onClick={()=>{\n                        this.props.loadMain(this.state.menuEntries[mainEntry].items[subEntry]);\n                    }}>{subEntry}</div>);\n                    menuEntries.push(<br key={keyCount} />);\n                }\n            }\n\n        }\n        return (\n        <nav className=\"mainColors\" style={style} onClick={() => {\n            if(this.props.onTop!==1){\n                if(this.state.hidden){this.setState({hidden: false})}\n                else{this.setState({hidden: true})}\n            }\n        }}>\n            {menuEntries}            \n        </nav>);\n    }\n}\nclass App extends React.Component{\n    constructor(props){\n        const maxWinWidth = 1000;\n        super(props);\n        // check here, if Login-Screen needs to be shown, or not!\n        let mainMenuPos = 1;\n        if(window.innerWidth<maxWinWidth){mainMenuPos = 0}\n        this.state = {mode: \"login\", res: null, mainMenuPos: mainMenuPos, status: {}};\n        window.addEventListener(\"resize\", () => {\n            if(window.innerWidth<maxWinWidth){this.setState({mainMenuPos: 0})}\n            else{this.setState({mainMenuPos: 1})}\n        });\n        window.addEventListener(\"arachneError\", e=>{\n            if(e.detail.status===401){\n                this.newStatus(\"error\", \"Der Server hat die Zugangsdaten abgelehnt. Melden Sie sich neu an!\");\n            } else {\n                this.newStatus(\"error\", \"Die Verbindung zum Server ist unterbrochen.\");\n            }\n        });\n        this.tbls = [\"edition\", \"lemma\", \"opera_maiora\", \"opera_minora\", \"scan\", \"scan_lnk\", \"work\", \"zettel\", \"user\"];\n    }\n    loadMain(res){\n        if(res===\"logout\"){\n            arachne.close();\n            this.setState({\n                mode: \"login\",\n                res: null\n            });\n        } else {\n            this.setState({res: res});\n        };\n    }\n    render(){\n        if(this.state.mode===\"main\"){\n            // login succeeded!\n            let main = null;\n            switch(this.state.res){\n                case null:\n                    break;\n                case \"ressources\":\n                    main = <Ressource status={(type,value)=>{this.newStatus(type, value)}} />;\n                    break;\n                case \"stats\":\n                    main = <Statistics status={(type,value)=>{this.newStatus(type, value)}} />;\n                    break;\n                case \"server\":\n                    main = <Server status={(type,value)=>{this.newStatus(type, value)}} />;\n                    break;\n                case \"lemma\":\n                    main = <Lemma status={(type,value)=>{this.newStatus(type, value)}} />;\n                    break;\n                case \"maiora\":\n                    main = <Opera listName=\"opera_maiora\" status={(type,value)=>{this.newStatus(type, value)}} />;\n                    break;\n                case \"minora\":\n                    main = <Opera listName=\"opera_minora\" status={(type,value)=>{this.newStatus(type, value)}} />;\n                    break;\n                case \"help\":\n                    main = <Help />;\n                    break;\n                case \"import\":\n                    main = <Import status={(type,value)=>{this.newStatus(type, value)}} />;\n                    break;\n                case \"zettel\":\n                    main = <Zettel status={(type,value)=>{this.newStatus(type, value)}} />;\n                    break;\n                case \"account\":\n                    main = <Account status={(type,value)=>{this.newStatus(type, value)}} />;\n                    break;\n                default:\n                    main = <div>Unbekannter Men-Punkt {this.state.res}</div>;\n            }\n            return (\n                <div style={(this.state.mainMenuPos===1)?{marginTop: \"60px\"}:{marginLeft: \"40px\"}}>\n                    <MainMenu onTop={this.state.mainMenuPos} loadMain={res => {this.loadMain(res)}} />\n                    {main}\n                    <Status status={this.state.status} />\n                </div>\n            );\n        } else if (this.state.mode===\"create\"){\n            return(<div style={{\n                position: \"absolute\",\n                display: \"grid\",\n                height: \"100%\",\n                width: \"100%\",\n                gridTemplateColumns: \"1fr 2fr 1fr\",\n                gridTemplateRows: \"1fr 2fr 1fr\"\n                }}>\n                    <div style={{\n                    display: \"grid\",\n                    gridTemplateColumns: \"1fr 1fr 1fr 1fr\",\n                    gridTemplateRows: \"auto 100px 50px 50px 50px 50px 50px auto\",\n                    gridColumn: \"2\",\n                    gridRow: \"2\",\n                    padding: \"10px 15px\",\n                    borderRadius: \"5px\",\n                    boxShadow: `0 1.2px 6px ${colors.shadow}`\n                }}>\n                    <h1 style={{textAlign: \"center\", gridArea: \"2/2/2/4\"}}>Konto erstellen</h1>\n                    <span style={{gridArea: \"3/2/3/3\"}}>Vorname:</span>\n                    <div style={{gridArea: \"3/3/3/4\"}}><input type=\"text\" value={this.state.createFirstName?this.state.createFirstName:\"\"} onChange={e=>{this.setState({createFirstName: e.target.value})}} /></div>\n                    <span style={{gridArea: \"4/2/4/3\"}}>Nachname:</span>\n                    <div style={{gridArea: \"4/3/4/4\"}}><input type=\"text\" value={this.state.createLastName?this.state.createLastName:\"\"} onChange={e=>{this.setState({createLastName: e.target.value})}} /></div>\n                    <span style={{gridArea: \"5/2/5/3\"}}>E-Mail:</span>\n                    <div style={{gridArea: \"5/3/5/4\"}}><input type=\"text\" value={this.state.createEmail?this.state.createEmail:\"\"} onChange={e=>{this.setState({createEmail: e.target.value})}} /></div>\n                    <span style={{gridArea: \"6/2/6/3\"}}>Passwort:</span>\n                    <div style={{gridArea: \"6/3/6/4\"}}><input type=\"password\" value={this.state.createPassword?this.state.createPassword:\"\"} onChange={e=>{this.setState({createPassword: e.target.value})}} /></div>\n                    <div style={{gridArea: \"8/3/8/4\"}}><input type=\"button\" value=\"registrieren\" onClick={async ()=>{\n                        if(this.state.createFirstName&&this.state.createFirstName&&this.state.createEmail&&this.state.createPassword){\n                            this.newStatus(\"saving\");\n                            const data = {\n                                first_name: this.state.createFirstName,\n                                last_name: this.state.createLastName,\n                                email: this.state.createEmail,\n                                password: this.state.createPassword\n                            }\n                            const status = await arachne.createAccount(data);\n                            switch(status){\n                                case 201:\n                                    this.newStatus(\"saved\", \"Der Account wurde erfolgreich erstellt.\")\n                                    setTimeout(()=>{this.setState({mode: \"login\"})}, 2100);\n                                    break;\n                                case 409:\n                                    this.newStatus(\"error\", \"Die Email-Adresse ist bereits vorhanden.\");\n                                    break;\n                                case 406:\n                                    this.newStatus(\"error\", \"Bitte fllen Sie alle Felder aus.\");\n                                    break;\n                                default:\n                                    this.newStatus(\"error\", \"Die Registrierung is fehlgeschlagen. Versuchen Sie es erneut.\");\n                            }\n                        } else {this.newStatus(\"error\", \"Bitte fllen Sie alle Felder aus!\")}\n                        \n                      \n                    }}/> <span className=\"minorTxt\" style={{marginLeft: \"20px\"}}><a onClick={()=>{this.setState({mode: \"login\"})}}>zurck</a></span></div>\n                    \n                    <span style={{gridArea: \"7/2/7/3\"}}></span>\n                </div>\n                <Status status={this.state.status} />\n            </div>);\n        } else {\n            return (\n            <div style={{\n                position: \"absolute\",\n                display: \"grid\",\n                height: \"100%\",\n                width: \"100%\",\n                gridTemplateColumns: \"1fr 2fr 1fr\",\n                gridTemplateRows: \"1fr 2fr 1fr\"\n                }}>\n                <div style={{\n                    display: \"grid\",\n                    gridTemplateColumns: \"1fr 1fr 1fr 1fr\",\n                    gridTemplateRows: \"auto 100px 50px 50px 50px 25px 50px auto\",\n                    gridColumn: \"2\",\n                    gridRow: \"2\",\n                    padding: \"10px 15px\",\n                    borderRadius: \"5px\",\n                    boxShadow: `0 1.2px 6px ${colors.shadow}`\n                }}>\n                    <h1 style={{textAlign: \"center\", gridArea: \"2/2/2/4\"}}>dMLW</h1>\n                    <span style={{gridArea: \"3/2/3/3\"}}>Email:</span>\n                    <div style={{gridArea: \"3/3/3/4\"}}>\n                    <input type=\"text\" name=\"email\" style={{width:\"300px\"}} />\n                    </div>\n                    \n                    <span style={{gridArea: \"4/2/4/3\"}}>Passwort:</span>\n                    <div style={{gridArea: \"4/3/4/4\"}}>\n                    <input type=\"password\" name=\"password\" style={{width:\"300px\"}} />\n                    </div>\n                    <div style={{gridArea: \"5/3/5/4\"}}>\n                    <input type=\"submit\" value=\"anmelden\" onClick={() => {this.login()}} />\n                    </div>\n                    <span style={{gridArea: \"7/2/7/4\"}} className=\"minorTxt\">Noch kein Konto? Klicken Sie <a onClick={()=>{this.setState({mode:\"create\"})}}>hier</a>.</span>\n                </div>\n                <div className=\"cat\">\n                <FontAwesomeIcon color=\"black\"icon={faCat} />\n                </div>\n            </div>);\n        }\n    }\n    componentDidMount(){\n        const checkSession = async () =>{\n            const test = await arachne.getUser();\n            if(test){\n                await arachne.open(this.tbls);\n                this.setState({mode: \"main\"});\n            }\n        }\n        checkSession();\n    }\n    async login(){\n        const email = document.querySelector(\"input[name=email]\").value;\n        const password = document.querySelector(\"input[name=password]\").value;\n        if(email!==\"\"&&password!==\"\"&&await arachne.login(email, password, this.tbls)){\n            this.setState({mode: \"main\"});\n        } else {\n            alert(\"Geben Sie eine gltige Email-Adresse und Passwort ein!\");\n        }\n    }\n    newStatus(type, value=null){\n        this.setState({status: {\n            id: Date.now(),\n            visible: true,\n            type: type,\n            value: value\n        }});\n    }\n}\n\n/* ************************************************** */\nReactDOM.render(\n    <App />,\n    document.getElementById(\"root\")\n);"],"sourceRoot":""}