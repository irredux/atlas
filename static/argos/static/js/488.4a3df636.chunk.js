"use strict";(self.webpackChunkatlas=self.webpackChunkatlas||[]).push([[488],{7488:function(e,n,t){t.r(n),t.d(n,{MainBody:function(){return ie},MainNavBar:function(){return le},arachneTbls:function(){return ae}});var s=t(885),r=t(5861),a=t(7757),i=t.n(a),l=t(2791),c=t(4483),u=t(3174),o=t(2354),d=t(4817),x=t(7022),h=t(9249),f=t(6407),p=t(9743),g=t(2677),j=t(2591),m=t(5987),Z=t(1413),v=t(1694),y=t.n(v),b=t(6543),_=t(162),S=t(6882),w=t(1991),k=t(184),C=["bsPrefix","size","hasValidation","className","as"],N=(0,b.Z)("input-group-text",{Component:"span"}),I=l.forwardRef((function(e,n){var t=e.bsPrefix,s=e.size,r=e.hasValidation,a=e.className,i=e.as,c=void 0===i?"div":i,u=(0,m.Z)(e,C);t=(0,_.vE)(t,"input-group");var o=(0,l.useMemo)((function(){return{}}),[]);return(0,k.jsx)(w.Z.Provider,{value:o,children:(0,k.jsx)(c,(0,Z.Z)((0,Z.Z)({ref:n},u),{},{className:y()(a,t,s&&"".concat(t,"-").concat(s),r&&"has-validation")}))})}));I.displayName="InputGroup";var M=Object.assign(I,{Text:N,Radio:function(e){return(0,k.jsx)(N,{children:(0,k.jsx)(S.Z,(0,Z.Z)({type:"radio"},e))})},Checkbox:function(e){return(0,k.jsx)(N,{children:(0,k.jsx)(S.Z,(0,Z.Z)({type:"checkbox"},e))})}}),T=t(4292),Q=t(3360),R=t(7762),z=t(4775),A=t(1398),E=t(3350),q=t(3222);function L(e,n){if(localStorage.getItem("argos_currentPages")){var t=JSON.parse(localStorage.getItem("argos_currentPages"));t.find((function(n){return n.edition_id===e}))?localStorage.setItem("argos_currentPages",JSON.stringify(t.map((function(t){return t.edition_id!==e?t:{edition_id:e,scan_id:n}})))):(t.push({edition_id:e,scan_id:n}),localStorage.setItem("argos_currentPages",JSON.stringify(t)))}else localStorage.setItem("argos_currentPages",JSON.stringify([{edition_id:e,scan_id:n}]))}function O(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"???",s=localStorage.getItem("editions");s?((s=(s=JSON.parse(s)).filter((function(n){return n.id!==e}))).length>15&&s.splice(14),s.unshift({id:e,label:n,opus:t})):s=[{id:e,label:n,opus:t}],localStorage.setItem("editions",JSON.stringify(s))}function P(){var e=localStorage.getItem("editions");return e?JSON.parse(e):[]}function B(e){var n=(0,l.useState)("0.5"),t=(0,s.Z)(n,2),a=t[0],c=t[1],u=(0,l.useState)(null),o=(0,s.Z)(u,2),d=o[0],h=o[1],j=(0,l.useState)(f.Q.options.argos_query),m=(0,s.Z)(j,2),Z=m[0],v=m[1];(0,l.useEffect)((function(){f.Q.setOptions("argos_query",Z)}),[Z]);var y=(0,l.useState)([]),b=(0,s.Z)(y,2),_=b[0],S=b[1],w=(0,l.useState)(0),C=(0,s.Z)(w,2),N=C[0],I=C[1],M=(0,l.useState)(null),T=(0,s.Z)(M,2),Q=T[0],z=T[1],A=(0,l.useState)(f.Q.options.argos_mode),E=(0,s.Z)(A,2),L=E[0],O=E[1];(0,l.useEffect)((function(){f.Q.setOptions("argos_mode",L)}),[L]);var P=(0,l.useState)(!1),B=(0,s.Z)(P,2),J=B[0],G=B[1],K=(0,l.useState)([]),V=(0,s.Z)(K,2),F=V[0],$=V[1],Y=(0,l.useState)(0),W=(0,s.Z)(Y,2),X=W[0],ee=W[1],ne=(0,l.useState)(!1),te=(0,s.Z)(ne,2),se=te[0],re=te[1],ae=(0,l.useState)(!1),ie=(0,s.Z)(ae,2),le=ie[0],ce=ie[1],ue=(0,l.useState)(!1),oe=(0,s.Z)(ue,2),de=oe[0],xe=oe[1],he=(0,l.useState)(f.Q.options.argos_zoom),fe=(0,s.Z)(he,2),pe=fe[0],ge=fe[1];(0,l.useEffect)((function(){f.Q.setOptions("argos_zoom",pe)}),[pe]);var je=[["ACTION+ESC",function(){e.loadMain(null,null)}],["ACTION+q",function(){h(null)}],["ACTION+e",function(){h("ressource"===d?null:"ressource")}],["ACTION+s",function(){h("scans"===d?null:"scans")}],["ACTION+o",function(){h("opera"===d?null:"opera")}],["ACTION+i",function(){h("content"===d?null:"content")}],["ACTION+b",function(){ce(!le)}],["ACTION+f",function(){var e=document.getElementById("searchInput");e&&e.focus()}],["Alt+ArrowRight",function(){_.length>N+1?I(N+1):I(0)}],["Alt+ArrowLeft",function(){I(0<=N-1?N-1:_.length-1)}],["CTRL+1",function(){O(0)}],["CTRL+2",function(){O(1)}],["CTRL+3",function(){O(2)}],["CTRL+,",function(){ge(pe-5)}],["CTRL+.",function(){ge(pe+5)}]];(0,q.XU)(je,!1),(0,l.useEffect)((function(){var n=function(){var n=(0,r.Z)(i().mark((function n(){var t,s,r;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.Q.edition.get({id:e.resId});case 2:return t=n.sent,z(t[0]),c(t[0].aspect_ratio?"".concat(t[0].aspect_ratio):"0.6"),n.next=7,f.Q.scan_lnk.get({edition_id:e.resId});case 7:return s=(s=n.sent).sort((function(e,n){return n.filename<e.filename})),$(s),localStorage.getItem("argos_currentPages")&&(r=JSON.parse(localStorage.getItem("argos_currentPages")).find((function(n){return n.edition_id===e.resId})))&&me(r.scan_id),n.next=13,(0,q._v)(400);case 13:xe(!0);case 14:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[e.resId]),(0,l.useEffect)((function(){var e,n=!1,t=(0,R.Z)(F);try{for(t.s();!(e=t.n()).done;){var s=e.value;if(null!==s.full_text&&""!==s.full_text){n=!0;break}}}catch(r){t.e(r)}finally{t.f()}n?G(!0):(G(!1),0!=L&&O(0))}),[F]),(0,l.useEffect)((function(){if(J&&Z.length>0){var e=F.filter((function(e){return e.full_text&&e.full_text.search(Z)>-1}));S(e),I(0),0===L&&O(1)}else S([]),I(0)}),[J,Z]),(0,l.useEffect)((function(){de&&_.length>0&&me(_[N].id)}),[N,_]);var me=function(){var e=(0,r.Z)(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n),e.next=3,(0,q._v)(100);case 3:(t=document.getElementById("p_".concat(n)))?t.scrollIntoView():console.log("page not found:",n);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(x.Z,{onScroll:function(e){!1===se&&(re(!0),ee(e.target.scrollTop),setTimeout((function(){re(!1)}),500))},style:{position:"fixed",top:"60px",left:"0",right:"0",bottom:"60px",overflow:"scroll"},fluid:!0,children:F.map((function(e){return(0,k.jsx)(p.Z,{children:(0,k.jsx)(g.Z,{align:"center",children:(0,k.jsx)(D,{aspectRatio:a,editMode:le,query:Z,mode:L,zoom:pe,scrollPos:X,page:e,ressource:Q})})},e.scan_id)}))}),(0,k.jsx)(U,{scrollPageIntoView:function(e){me(e)},setEditMode:function(){ce(!le)},fullTxt:J,setSideMenu:function(e){h(e)},query:Z,setQuery:function(e){v(e)},queryResults:_,queryResultIndex:N,setQueryResultIndex:function(e){I(e)},mode:L,setMode:function(e){O(e)},zoom:pe,setZoom:function(e){ge(e)},pages:F}),(0,k.jsx)(H,{ressource:Q,pages:F,item:d,setSideMenu:function(e){h(e)}})]})}function H(e){return(0,k.jsxs)(z.Z,{show:!!e.item,onHide:function(){e.setSideMenu(null)},placement:"end",children:[(0,k.jsx)(z.Z.Header,{closeButton:!0,children:(0,k.jsxs)(z.Z.Title,{children:["opera"===e.item&&"Angaben aus der opera-Liste","ressource"===e.item&&"Ressource (ID: ".concat(e.ressource.id,")"),"scans"===e.item&&"Scan-Seiten zuweisen"]})}),(0,k.jsxs)(z.Z.Body,{children:["opera"===e.item&&(0,k.jsx)(K,{ressource:e.ressource}),"ressource"===e.item&&(0,k.jsx)(V,{ressource:e.ressource}),"scans"===e.item&&(0,k.jsx)(G,{pages:e.pages,ressource:e.ressource}),"content"===e.item&&(0,k.jsx)(J,{setSideMenu:function(n){e.setSideMenu(n)},pages:e.pages,ressource:e.ressource})]})]})}function J(e){return(0,k.jsxs)(x.Z,{children:[(0,k.jsx)(p.Z,{className:"mb-4",children:(0,k.jsx)(g.Z,{children:(0,k.jsx)("h2",{children:"Inhaltsverzeichnis"})})}),(0,k.jsxs)(p.Z,{className:"mb-3",children:[(0,k.jsx)(g.Z,{xs:1}),(0,k.jsx)(g.Z,{children:(0,k.jsx)(A.Z,{variant:"flush",children:e.pages.map((function(n){return(0,k.jsx)(A.Z.Item,{style:{textAlign:"center",color:n.body_matter?"inherit":"var(--bs-gray-500)"},action:!0,onClick:function(){document.getElementById("p_".concat(n.scan_id)).scrollIntoView({behavior:"auto",block:"start"}),e.setSideMenu(null)},children:parseInt(n.filename)>0?parseInt(n.filename):n.filename},n.id)}))})}),(0,k.jsx)(g.Z,{xs:1})]})]})}function G(e){var n=(0,l.useState)([]),t=(0,s.Z)(n,2),a=t[0],c=t[1],u=(0,l.useState)(e.pages.map((function(e){return e.scan_id}))),o=(0,s.Z)(u,2),d=o[0],h=o[1];(0,l.useEffect)((function(){var n=function(){var n=(0,r.Z)(i().mark((function n(){var t;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.Q.scan.get({path:e.ressource.path});case 2:t=n.sent,c(t);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[]);var j=function(e){d.includes(e)?h(d.filter((function(n){return n!=e}))):h(d.concat([e]))};return(0,k.jsxs)(x.Z,{children:[(0,k.jsx)(p.Z,{className:"mb-2",children:(0,k.jsxs)(g.Z,{children:["Dateipfad: ",(0,k.jsx)("code",{children:e.ressource.path})]})}),(0,k.jsx)(p.Z,{className:"mb-4",children:(0,k.jsx)(g.Z,{children:(0,k.jsxs)("small",{children:["Einzelne Seiten k\xf6nnen mit einem Klick markiert werden. Mehrere Seiten k\xf6nnen mit einer Bewegung der Maus und dem gleichzeitigen Gedr\xfcckthalten der ",f.Q.me.selectKey,"-Taste aktiviert werden."]})})}),(0,k.jsx)(p.Z,{className:"mb-3",children:(0,k.jsx)(g.Z,{children:(0,k.jsx)(A.Z,{children:a.map((function(e){return(0,k.jsx)(A.Z.Item,{className:"mb-1",active:!!d.includes(e.id),onMouseEnter:function(n){("cmd"===f.Q.me.selectKey&&n.metaKey||"ctrl"===f.Q.me.selectKey&&n.ctrlKey)&&j(e.id)},onClick:function(){j(e.id)},action:!0,children:e.filename},e.id)}))})})}),(0,k.jsx)(p.Z,{className:"mb-3",children:(0,k.jsxs)(g.Z,{align:"right",children:["Auswahl: ",d.length]})}),(0,k.jsx)(p.Z,{children:(0,k.jsx)(g.Z,{children:(0,k.jsx)(q.YG,{onClick:(0,r.Z)(i().mark((function n(){var t;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e.pages.length>0)){n.next=3;break}return n.next=3,f.Q.scan_lnk.delete(e.pages.map((function(e){return e.id})));case 3:if(!(d.length>0)){n.next=8;break}return t=(t=d.sort()).map((function(n){return{edition_id:e.ressource.id,scan_id:n}})),n.next=8,f.Q.scan_lnk.save(t);case 8:return n.abrupt("return",{status:1});case 9:case"end":return n.stop()}}),n)}))),value:"speichern"})})})]})}function K(e){var n=(0,l.useState)({}),t=(0,s.Z)(n,2),a=t[0],c=t[1],u=(0,l.useState)({}),o=(0,s.Z)(u,2),d=o[0],h=o[1];return(0,l.useEffect)((function(){var n=function(){var n=(0,r.Z)(i().mark((function n(){var t,s;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.Q.work.get({id:e.ressource.work_id});case 2:return t=n.sent,c(t[0]),n.next=6,f.Q.author.get({id:t[0].author_id});case 6:s=n.sent,h(s[0]);case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[e.ressource]),(0,k.jsxs)(x.Z,{children:[(0,k.jsx)(p.Z,{className:"mb-2",children:(0,k.jsx)(g.Z,{dangerouslySetInnerHTML:(0,q.rg)(a.date_display?a.date_display:d.date_display)})}),(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsx)(g.Z,{xs:5,children:(0,k.jsx)("b",{children:(0,k.jsx)("aut",{children:a.author_display?a.author_display:d.abbr})})}),(0,k.jsx)(g.Z,{dangerouslySetInnerHTML:(0,q.rg)(a.author_display?null:d.full)})]}),(0,k.jsxs)(p.Z,{className:"mb-4",children:[(0,k.jsx)(g.Z,{xs:5,children:(0,k.jsx)("b",{style:{marginLeft:"10px"},dangerouslySetInnerHTML:(0,q.rg)(a.abbr)})}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("span",{style:{marginLeft:"10px"},dangerouslySetInnerHTML:(0,q.rg)(a.full)})})]}),(0,k.jsx)(p.Z,{className:"mb-2",children:(0,k.jsx)(g.Z,{children:(0,k.jsx)("i",{dangerouslySetInnerHTML:(0,q.rg)(a.bibliography?a.bibliography:d.bibliography)})})}),(0,k.jsx)(p.Z,{children:(0,k.jsxs)(g.Z,{children:[(0,k.jsx)("small",{dangerouslySetInnerHTML:(0,q.rg)(a.citation?a.citation:d.citation)})," ",(0,k.jsx)("small",{dangerouslySetInnerHTML:(0,q.rg)(a.txt_info?a.txt_info:d.txt_info)})]})})]})}function V(e){var n=(0,l.useState)(e.ressource.id),t=(0,s.Z)(n,2),a=t[0],c=(t[1],(0,l.useState)(e.ressource.ressource)),u=(0,s.Z)(c,2),o=u[0],d=u[1],h=(0,l.useState)(e.ressource.work_id),j=(0,s.Z)(h,2),m=j[0],Z=j[1],v=(0,l.useState)(e.ressource.ac_web),y=(0,s.Z)(v,2),b=y[0],_=y[1],S=(0,l.useState)(e.ressource.editor),w=(0,s.Z)(S,2),C=w[0],N=w[1],I=(0,l.useState)(e.ressource.year),M=(0,s.Z)(I,2),T=M[0],Q=M[1],R=(0,l.useState)(e.ressource.volume),z=(0,s.Z)(R,2),A=z[0],E=z[1],L=(0,l.useState)(e.ressource.vol_cont),O=(0,s.Z)(L,2),P=O[0],B=O[1],H=(0,l.useState)(e.ressource.serie),J=(0,s.Z)(H,2),G=J[0],K=J[1],V=(0,l.useState)(e.ressource.location),D=(0,s.Z)(V,2),F=D[0],U=D[1],$=(0,l.useState)(e.ressource.library),Y=(0,s.Z)($,2),W=Y[0],X=Y[1],ee=(0,l.useState)(e.ressource.signature),ne=(0,s.Z)(ee,2),te=ne[0],se=ne[1],re=(0,l.useState)(e.ressource.comment),ae=(0,s.Z)(re,2),ie=ae[0],le=ae[1],ce=(0,l.useState)(e.ressource.path),ue=(0,s.Z)(ce,2),oe=ue[0],de=ue[1],xe=(0,l.useState)(e.ressource.url),he=(0,s.Z)(xe,2),fe=he[0],pe=he[1],ge=(0,l.useState)(e.ressource.aspect_ratio),je=(0,s.Z)(ge,2),me=je[0],Ze=je[1],ve=(0,l.useState)(null),ye=(0,s.Z)(ve,2),be=ye[0],_e=ye[1];return(0,l.useEffect)((function(){var e=function(){var e=(0,r.Z)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(m>0)){e.next=5;break}return e.next=3,f.Q.work.get({id:m},{select:["bibliography"]});case 3:(n=e.sent).length>0?_e(n[0].bibliography):_e(null);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[m]),(0,k.jsxs)(x.Z,{children:[(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsx)(g.Z,{xs:3,children:"Werk:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)(q.Qc,{value:b||"",tbl:"work",searchCol:"ac_web",returnCol:"ac_web",onChange:function(e,n){_(e),Z(n)}})})]}),(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsx)(g.Z,{xs:3,children:(0,k.jsx)("small",{children:"Alter Dateiname:"})}),(0,k.jsx)(g.Z,{children:e.ressource.dir_name})]}),be&&(0,k.jsxs)(p.Z,{className:"mb-4",children:[(0,k.jsx)(g.Z,{xs:3,style:{backgroundColor:"var(--bs-gray-100"},children:(0,k.jsx)("small",{children:"Bibl. Angaben:"})}),(0,k.jsx)(g.Z,{style:{fontSize:"90%",backgroundColor:"var(--bs-gray-100"},children:be})]}),(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsx)(g.Z,{xs:3,children:"Ressource:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)(q.SA,{options:[[0,"Edition (relevant)"],[1,"Edition (veraltet)"],[2,"Handschrift"],[3,"Alter Druck (relevant)"],[4,"Alter Druck (veraltet)"],[5,"Sonstiges"]],value:o||"",onChange:function(e){d(parseInt(e.target.value))}})})]}),0===o||1===o||5===o?[(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsx)(g.Z,{xs:3,children:"Editor:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("input",{type:"text",style:{width:"100%"},value:C||"",onChange:function(e){N(e.target.value)}})})]},"0"),(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsx)(g.Z,{xs:3,children:"Jahr:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("input",{type:"text",style:{width:"100%"},value:T||"",onChange:function(e){Q(e.target.value)}})})]},"1"),(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsx)(g.Z,{xs:3,children:"Band:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("input",{type:"text",style:{width:"100%"},value:A||"",onChange:function(e){E(e.target.value)}})})]},"2"),(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsx)(g.Z,{xs:3,children:"Bandinhalt:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("input",{type:"text",style:{width:"100%"},value:P||"",onChange:function(e){B(e.target.value)}})})]},"3"),(0,k.jsxs)(p.Z,{className:"mb-4",children:[(0,k.jsx)(g.Z,{xs:3,children:"Reihe:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)(q.SA,{options:[[0,""],[1,"Migne PL"],[2,"ASBen."],[3,"ASBoll."],[4,"AnalBoll."],[5,"Mon. Boica"],[6,"Ma. Schatzverzeichnisse"],[7,"Ma. Bibliothekskataloge"]],value:G||"",onChange:function(e){K(parseInt(e.target.value))}})})]},"4")]:null,2===o?[(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsx)(g.Z,{xs:3,children:"Stadt:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("input",{type:"text",style:{width:"100%"},value:F||"",onChange:function(e){U(e.target.value)}})})]},"5"),(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsx)(g.Z,{xs:3,children:"Bibliothek:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("input",{type:"text",style:{width:"100%"},value:W||"",onChange:function(e){X(e.target.value)}})})]},"6"),(0,k.jsxs)(p.Z,{className:"mb-4",children:[(0,k.jsx)(g.Z,{xs:3,children:"Signatur:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("input",{type:"text",style:{width:"100%"},value:te||"",onChange:function(e){se(e.target.value)}})})]},"7")]:null,3===o||4===o?[(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsx)(g.Z,{xs:3,children:"Drucker:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("input",{type:"text",style:{width:"100%"},value:C||"",onChange:function(e){N(e.target.value)}})})]},"8"),(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsx)(g.Z,{xs:3,children:"Ort:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("input",{type:"text",style:{width:"100%"},value:F||"",onChange:function(e){U(e.target.value)}})})]},"9"),(0,k.jsxs)(p.Z,{className:"mb-4",children:[(0,k.jsx)(g.Z,{xs:3,children:"Jahr:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("input",{type:"text",style:{width:"100%"},value:T||"",onChange:function(e){Q(e.target.value)}})})]},"10")]:null,(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsx)(g.Z,{xs:3,children:"Kommentar:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("textarea",{style:{width:"250px",height:"100px"},value:ie||"",onChange:function(e){le(e.target.value)}})})]}),(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsx)(g.Z,{xs:3,children:"Dateipfad:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("input",{type:"text",style:{width:"100%"},value:oe||"",onChange:function(e){de(e.target.value)}})})]}),(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsxs)(g.Z,{xs:3,children:["Link:",(0,k.jsx)("br",{}),(0,k.jsx)("small",{children:"(externe Quellen)"})]}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("input",{type:"text",style:{width:"100%"},value:fe||"",onChange:function(e){pe(e.target.value)}})})]}),(0,k.jsxs)(p.Z,{className:"mb-4",children:[(0,k.jsx)(g.Z,{xs:3,children:"Seiten-verh\xe4ltnis:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("input",{type:"text",style:{width:"100%"},value:me||"",onChange:function(e){Ze(e.target.value.substring(0,5))}})})]}),(0,k.jsx)(p.Z,{className:"mb-2",children:(0,k.jsx)(g.Z,{children:(0,k.jsx)(q.YG,{value:"speichern",onClick:(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==o&&1!==o&&5!==o||C&&T){e.next=4;break}return e.abrupt("return",{status:!1,error:"Geben Sie den Editor und das Jahr ein."});case 4:return e.next=6,f.Q.edition.save({id:a,work_id:m,ressource:o,editor:C,year:T,volume:A,vol_cont:P,serie:G,comment:ie,location:F,library:W,signature:te,path:oe,url:fe,aspect_ratio:me});case 6:return e.abrupt("return",{status:!0});case 7:case"end":return e.stop()}}),e)})))})})})]})}function D(e){var n=e.zoom,t=(0,l.useState)(!1),a=(0,s.Z)(t,2),c=a[0],u=a[1],o=(0,l.useRef)(null),d=(0,l.useState)(null),x=(0,s.Z)(d,2),h=x[0],j=x[1];return(0,q.S1)({target:o,onIntersect:function(n,t){var r=(0,s.Z)(n,1)[0],a=r.intersectionRatio;r.isIntersecting&&!c&&u(!0),a>.1&&(document.getElementById("currentPageField").value=isNaN(e.page.filename)?e.page.filename:parseInt(e.page.filename),L(e.page.edition_id,e.page.scan_id),t.unobserve(o.current))}}),(0,l.useEffect)((function(){if(c){var n=function(){var n=(0,r.Z)(i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=j,n.next=3,f.Q.getScan(e.page.scan_id);case 3:n.t1=n.sent,(0,n.t0)(n.t1);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}else j(null)}),[c]),(0,k.jsxs)(p.Z,{id:"p_".concat(e.page.scan_id),className:"mb-4 px-5",children:[e.mode<2?(0,k.jsx)(g.Z,{children:(0,k.jsx)("div",{ref:o,style:{width:0===e.mode?"".concat(n,"%"):e.page.body_matter?"100%":"50%",aspectRatio:e.aspectRatio,boxShadow:"0 5px 10px var(--bs-gray-300)",borderRadius:"3px",overflow:"hidden"},children:(0,k.jsx)("img",{style:{width:"100%",height:"100%"},src:h,alt:e.page.filename})})}):null,e.mode>0&&(e.page.body_matter||e.editMode)?(0,k.jsx)(g.Z,{children:(0,k.jsx)(F,{editMode:e.editMode,ressource:e.ressource,page:e.page,query:e.query})}):null]})}function F(e){var n=(0,l.useState)(null),t=(0,s.Z)(n,2),a=t[0],o=t[1],d=(0,l.useState)(!1),h=(0,s.Z)(d,2),j=h[0],m=h[1],Z=(0,l.useState)(e.page.body_matter),v=(0,s.Z)(Z,2),y=v[0],b=v[1],_=(0,l.useState)(e.page.full_text),S=(0,s.Z)(_,2),w=S[0],C=S[1],N=(0,l.useState)(0),I=(0,s.Z)(N,2),M=I[0],T=I[1],R=(0,l.useRef)(null);return(0,l.useEffect)((function(){if(w){var n=e.query?w.replace(new RegExp("(".concat(e.query,")"),"gi"),"<mark>$1</mark>"):w;n=(n=(n=n.replace(/-\n([^ ]*) /g,"$1\n")).replace(/(\d+\.)/g,"</p><p><b>$1</b>")).replace(/</g,"&lt;").replace(/>/g,"&gt;");var t=(n=(n="<p>".concat(n,"</p>")).replace(/\n/g,"<br />")).indexOf("$$$$$");o(t>-1?[(0,k.jsx)(g.Z,{style:{textAlign:"justify",fontSize:"0.9rem"},dangerouslySetInnerHTML:(0,q.rg)(n.substring(0,t))},"0"),(0,k.jsx)(g.Z,{style:{textAlign:"justify",fontSize:"0.9rem"},dangerouslySetInnerHTML:(0,q.rg)(n.substring(t+9))},"1")]:[(0,k.jsx)(g.Z,{style:{textAlign:"justify",fontSize:"1rem",color:1===e.page.auto_text?"var(--bs-gray-500)":"inherit"},dangerouslySetInnerHTML:(0,q.rg)(n)},"0")])}else o([(0,k.jsx)(g.Z,{},"0")])}),[w,e.editMode,e.query]),(0,k.jsxs)(x.Z,{className:e.editMode?"bg-light":null,ref:R,style:{position:"relative",width:"100%",minHeight:"100%",boxShadow:"0 5px 10px var(--bs-gray-300)",borderRadius:"3px",overflow:"hidden",padding:"60px 40px"},children:[(0,k.jsxs)(p.Z,{className:"mb-4",children:[(0,k.jsx)(g.Z,{style:{textAlign:"left"},children:e.editMode?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Q.Z,{size:"sm",onClick:(0,r.Z)(i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.Q.scan.save({id:e.page.scan_id,body_matter:1===y?0:1,full_text:"",ocr_auto:"",ocr_auto_LENGTH:0});case 2:b(1===y?0:1),C("");case 4:case"end":return n.stop()}}),n)}))),children:(0,k.jsx)(c.G,{icon:u.Hkv})})," ",1===y?(0,k.jsx)(Q.Z,{className:"ml-3",size:"sm",onClick:function(){m(!j)},children:(0,k.jsx)(c.G,{icon:u.TzT})}):null]}):null}),(0,k.jsx)(g.Z,{dangerouslySetInnerHTML:(0,q.rg)(e.ressource.opus)}),(0,k.jsx)(g.Z,{align:"right",children:isNaN(e.page.filename)?e.page.filename:parseInt(e.page.filename)})]}),y?j?(0,k.jsx)(E.Z.Control,{className:"pageTextEdit",style:{position:"absolute",height:"90%",width:"90%",border:1===M?"3px solid var(--bs-warning)":2===M?"3px solid var(--bs-success)":"inherit"},as:"textarea",value:w,onChange:function(e){C(e.target.value),1!==M&&T(1)},onBlur:function(){var n=(0,r.Z)(i().mark((function n(t){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(1!==M){n.next=4;break}return n.next=3,f.Q.scan.save({id:e.page.scan_id,full_text:t.target.value,ocr_auto:"",ocr_auto_LENGTH:0});case 3:T(2);case 4:case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}):w?(0,k.jsx)(p.Z,{children:a}):(0,k.jsx)(p.Z,{children:(0,k.jsx)(g.Z,{children:(0,k.jsx)("i",{children:"Es ist noch kein Flie\xdftext verf\xfcgbar."})})}):(0,k.jsx)(p.Z,{children:(0,k.jsx)(g.Z,{children:(0,k.jsx)("i",{children:"Es gibt keinen lateinischen Text auf dieser Seite."})})})]})}function U(e){var n=(0,l.useState)(null),t=(0,s.Z)(n,2),r=t[0],a=t[1],i=[["opera-Angaben",function(){e.setSideMenu("opera")}],["Inhaltsverzeichnis",function(){e.setSideMenu("content")}]];f.Q.access("e_edit")&&i.push(["Ressource bearbeiten",function(){e.setSideMenu("ressource")}]),f.Q.access("l_edit")&&i.push(["Scan-Seiten zuweisen",function(){e.setSideMenu("scans")}]),f.Q.access("e_edit")&&i.push(["Bearbeitungsmodus",function(){e.setEditMode()}]),!0===e.fullTxt&&(i.push(["Nur Text",function(){e.setMode(2)}]),i.push(["Scans&Text",function(){e.setMode(1)}]),i.push(["Nur Scans",function(){e.setMode(0)}]));var c=function(){1===e.queryResults.length?e.scrollPageIntoView(e.queryResults[e.queryResultIndex].id):e.queryResultIndex+1===e.queryResults.length?e.setQueryResultIndex(0):e.setQueryResultIndex(e.queryResultIndex+1)};return(0,k.jsx)(d.Z,{fixed:"bottom",bg:"light",children:(0,k.jsxs)(x.Z,{fluid:!0,children:[(0,k.jsxs)(d.Z.Collapse,{className:"justify-content-start",children:[e.fullTxt&&(0,k.jsx)(d.Z.Text,{children:(0,k.jsx)(E.Z.Control,{size:"sm",type:"text",id:"searchInput",placeholder:"Suche im Band...",value:e.query,onChange:function(n){e.setQuery(n.target.value)},onKeyUp:function(e){13===e.keyCode&&c()}})}),e.fullTxt&&e.queryResults.length>0&&(0,k.jsx)(d.Z.Text,{style:{marginLeft:"10px"},children:(0,k.jsxs)("div",{id:"navBox",style:{display:"flex",marginRight:"20px"},children:[(0,k.jsx)(Q.Z,{style:{borderRadius:"0.2rem 0 0 0.2rem"},variant:"secondary",size:"sm",onClick:function(){1===e.queryResults.length?e.scrollPageIntoView(e.queryResults[e.queryResultIndex].id):e.queryResultIndex>0?e.setQueryResultIndex(e.queryResultIndex-1):e.setQueryResultIndex(e.queryResults.length-1)},children:"<"}),(0,k.jsxs)("div",{style:{borderBottom:"1px solid var(--bs-gray-600)",borderTop:"1px solid var(--bs-gray-600)",padding:"5px 10px",margin:"0"},children:[" ",(0,k.jsx)("input",{style:{width:"50px",border:"none",boxShadow:"none",padding:0,margin:0,textAlign:"right",background:"none",color:" var(--bs-gray-600)"},type:"text",value:e.queryResultIndex+1,onChange:function(n){""==n.target.value||isNaN(n.target.value)||e.setQueryResultIndex(parseInt(n.target.value)-1)}})," von ",e.queryResults.length]}),(0,k.jsx)(Q.Z,{style:{borderRadius:"0 0.2rem 0.2rem 0"},variant:"secondary",size:"sm",onClick:function(){c()},children:">"})]})}),e.fullTxt&&0===e.queryResults.length&&e.query.length>0&&(0,k.jsx)(d.Z.Text,{style:{marginLeft:"10px"},children:(0,k.jsx)("small",{className:"text-danger",children:"Keine Stellen gefunden!"})})]}),(0,k.jsxs)(d.Z.Collapse,{children:[(0,k.jsxs)(d.Z.Text,{children:["Seite ",(0,k.jsx)("input",{type:"text",id:"currentPageField",onChange:function(){a(null)},onKeyDown:function(n){if(13===n.keyCode){n.preventDefault();var t=isNaN(n.target.value)?n.target.value:n.target.value.padStart(4,"0"),s=e.pages.find((function(e){return e.filename===t}));s?(a(null),e.scrollPageIntoView(s.scan_id)):a((0,k.jsx)("span",{className:"text-danger",children:"Seite nicht gefunden!"}))}}})," ",r]}),(0,k.jsx)(d.Z.Text,{})]}),(0,k.jsx)(d.Z.Collapse,{className:"justify-content-end",children:(0,k.jsxs)(d.Z.Text,{children:[0===e.mode&&(0,k.jsx)(E.Z.Range,{style:{position:"relative",top:"7px",marginRight:"10px",width:"400px"},min:"45",max:"95",value:e.zoom,onChange:function(n){e.setZoom(parseInt(n.target.value))},className:"slider"}),i.length>0?(0,k.jsx)(q.vW,{menuItems:i}):null]})})]})})}function $(e){var n=(0,l.useState)([]),t=(0,s.Z)(n,2),a=t[0],c=t[1],u=(0,l.useState)([]),o=(0,s.Z)(u,2),d=o[0],h=o[1],m=(0,l.useState)([]),Z=(0,s.Z)(m,2),v=Z[0],y=Z[1],b=(0,l.useState)(0),_=(0,s.Z)(b,2),S=_[0],w=_[1],C=(0,l.useState)(1),N=(0,s.Z)(C,2),I=N[0],M=N[1],T=(0,l.useState)(""),Q=(0,s.Z)(T,2),R=Q[0],z=Q[1],A=[["ACTION+f",function(){var e=document.getElementById("searchInput");e&&e.focus()}],["ACTION+ArrowRight",function(){Math.ceil(S/30)>=I+1?M(I+1):M(1)}],["ACTION+ArrowLeft",function(){M(0<I-1?I-1:Math.ceil(S/30))}]];(0,q.XU)(A,!1),(0,l.useEffect)((function(){var e=function(){var e=(0,r.Z)(i().mark((function e(){var n,t,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,t=[],s=[],""==R){e.next=9;break}return e.next=6,f.Q.scan_opera.search([{c:"search",o:"=",v:"".concat(R,"*")}],{count:!0});case 6:n=e.sent,e.next=12;break;case 9:return e.next=11,f.Q.scan_opera.getAll({count:!0});case 11:n=e.sent;case 12:w(n[0].count),h(s),c(t),M(1);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[R]),(0,l.useEffect)((function(){var e=function(){var e=(0,r.Z)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],""==R){e.next=7;break}return e.next=4,f.Q.scan_opera.search([{c:"search",o:"=",v:"".concat(R,"*")}],{limit:30,offset:30*(I-1)});case 4:n=e.sent,e.next=10;break;case 7:return e.next=9,f.Q.scan_opera.getAll({limit:30,offset:30*(I-1)});case 9:n=e.sent;case 10:y(n);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[R,I,a]);var E=function(n,t,s,r){O(t,s,r),e.loadMain(n,"edition",t)};return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(x.Z,{children:(0,k.jsxs)(p.Z,{children:[(0,k.jsx)(g.Z,{xs:1}),(0,k.jsx)(g.Z,{children:(0,k.jsxs)(j.Z,{children:[(0,k.jsx)("thead",{children:(0,k.jsxs)("tr",{children:[(0,k.jsx)("th",{width:"40%",children:"Zitiertitel"}),(0,k.jsx)("th",{width:"30%",children:"relevant"}),(0,k.jsx)("th",{width:"15%",children:"veraltet"}),(0,k.jsx)("th",{width:"15%",children:"Sonstiges"})]})}),(0,k.jsx)("tbody",{children:v.map((function(e){var n=JSON.parse(e.editions_label),t=JSON.parse(e.editions_id),s=JSON.parse(e.editions_url),r=JSON.parse(e.editions_type),a=[];if(n&&n.length===t.length&&t.length===s.length){var i=-1;a=t.map((function(e){var t=d.filter((function(n){return n===parseInt(e)})).length;return i++,{id:e,label:n[i],url:s[i],type:r[i],hits:t}}))}return d.length>0&&(a=a.filter((function(e){return e.hits>0}))),(0,k.jsxs)("tr",{style:{color:e.in_use?null:"var(--bs-gray-500)",backgroundColor:e.in_use?null:"var(--bs-gray-100)"},children:[(0,k.jsx)("td",{dangerouslySetInnerHTML:(0,q.rg)(e.citation)}),(0,k.jsx)("td",{children:a.map((function(n){if(0===n.type||3===n.type)return(0,k.jsx)("div",{children:(0,k.jsxs)("a",{href:n.url?n.url:"#",target:n.url?"_blank":"",className:n.url?"link-warning":"link-primary",onClick:function(t){n.url||E(t,n.id,n.label,e.search)},children:[n.label,d.length>0?" ("+n.hits+")":null]})},n.id)}))}),(0,k.jsx)("td",{children:a.map((function(n){if(1===n.type||4===n.type)return(0,k.jsx)("div",{children:(0,k.jsx)("a",{href:n.url?n.url:"#",target:n.url?"_blank":"",onClick:function(t){n.url||E(t,n.id,n.label,e.search)},children:n.label})},n.id)}))}),(0,k.jsx)("td",{children:a.map((function(n){if(2===n.type||5===n.type)return(0,k.jsx)("div",{children:(0,k.jsx)("a",{href:n.url?n.url:"#",target:n.url?"_blank":"",onClick:function(t){n.url||E(t,n.id,n.label,e.search)},children:n.label})},n.id)}))})]},e.id)}))})]})}),(0,k.jsx)(g.Z,{xs:1})]})}),(0,k.jsx)(Y,{operaCount:S,currentPage:I,setCurrentPage:function(e){M(e)},setQuery:function(e){z(e)}})]})}function Y(e){var n=(0,l.useState)(""),t=(0,s.Z)(n,2),r=t[0],a=t[1];return(0,k.jsx)(d.Z,{fixed:"bottom",bg:"light",children:(0,k.jsxs)(x.Z,{fluid:!0,children:[(0,k.jsx)(d.Z.Collapse,{className:"justify-content-start",children:(0,k.jsx)(d.Z.Text,{children:(0,k.jsxs)(M,{children:[(0,k.jsx)(T.Z,{placeholder:"Nach Zitiertitel suchen...",id:"searchInput",onChange:function(e){a(e.target.value)},value:r,onKeyUp:function(n){13===n.keyCode&&e.setQuery(r)}}),(0,k.jsx)(Q.Z,{variant:"dark",onClick:function(){e.setQuery(r)},children:(0,k.jsx)(c.G,{icon:u.wn1})})]})})}),(0,k.jsxs)(d.Z.Collapse,{className:"justify-content-end",children:[(0,k.jsx)(d.Z.Text,{children:e.operaCount>0?(0,k.jsx)(q.C3,{loadPage:function(n){e.setCurrentPage(n)},currentPage:e.currentPage,maxPage:Math.ceil(e.operaCount/30)}):null}),(0,k.jsx)(d.Z.Text,{})]})]})})}var W=t(2469);function X(){return(0,k.jsxs)(x.Z,{children:[(0,k.jsxs)(W.Z,{variant:"info",children:[(0,k.jsx)(W.Z.Heading,{children:"Beta 1.3"}),(0,k.jsx)("i",{children:"18. Mai 2022"}),(0,k.jsx)("p",{children:"Volltextsuche angepasst und Shortcut-Taste \xfcber Einstellungen ver\xe4nderbar."})]}),(0,k.jsxs)(W.Z,{variant:"secondary",children:[(0,k.jsx)(W.Z.Heading,{children:"Beta 1.2"}),(0,k.jsx)("i",{children:"14. April 2022"}),(0,k.jsx)("p",{children:"Shortcuts hinzugef\xfcgt."})]}),(0,k.jsxs)(W.Z,{variant:"secondary",children:[(0,k.jsx)(W.Z.Heading,{children:"Beta 1.1"}),(0,k.jsx)("i",{children:"31. M\xe4rz 2022"}),(0,k.jsx)("p",{children:'Korrektur des Seitenverh\xe4ltnisses (auch \xfcber "Ressource bearbeiten" ver\xe4nderbar).'})]}),(0,k.jsxs)(W.Z,{variant:"secondary",children:[(0,k.jsx)(W.Z.Heading,{children:"Beta 1.0"}),(0,k.jsx)("i",{children:"26. Februar 2022"}),(0,k.jsx)("p",{children:"Erste Version des neuen Scan-Viewers ist online."})]})]})}var ee=t(2982),ne=t(4849);function te(e){var n=(0,l.useState)(""),t=(0,s.Z)(n,2),a=t[0],o=t[1],h=(0,l.useState)(""),j=(0,s.Z)(h,2),m=j[0],Z=j[1],v=(0,l.useState)(0),y=(0,s.Z)(v,2),b=y[0],_=y[1],S=(0,l.useState)(0),w=(0,s.Z)(S,2),C=w[0],N=w[1],I=(0,l.useState)([]),T=(0,s.Z)(I,2),R=T[0],z=T[1],A=(0,l.useState)(!1),L=(0,s.Z)(A,2),O=L[0],P=L[1],B=function(){if(""===a)z([]);else{var e=function(){var e=(0,r.Z)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Z((0,k.jsx)(ne.Z,{variant:"primary",animation:"border"})),e.next=3,f.Q.fulltext_search_view.search([{c:"full_text",o:"=",v:"*".concat(a,"*")},{c:"auto_text",o:O?">=":"=",v:0}],{select:["work_id"],group:"work_id"});case 3:n=e.sent,Z("".concat(n.length," Werke gefunden.")),N(Math.floor(n.length/5)+1),H(1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}},H=function(){var e=(0,r.Z)(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(n),z([]),e.next=4,f.Q.fulltext_search_view.search([{c:"full_text",o:"=",v:"*".concat(a,"*")},{c:"auto_text",o:O?">=":"=",v:0}],{select:["work_id","opus"],group:"work_id",offset:5*(n-1),limit:5});case 4:t=e.sent,z(t);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(d.Z,{fixed:"bottom",bg:"light",children:(0,k.jsx)(x.Z,{fluid:!0,children:(0,k.jsx)(d.Z.Collapse,{className:"justify-content-end",children:(0,k.jsx)(d.Z.Text,{children:C>0?(0,k.jsx)(q.C3,{loadPage:function(e){H(e)},currentPage:b,maxPage:C}):null})})})}),(0,k.jsxs)(x.Z,{children:[(0,k.jsx)(p.Z,{children:(0,k.jsx)(g.Z,{children:(0,k.jsxs)(M,{children:[(0,k.jsx)(E.Z.Control,{type:"text",id:"searchInput",placeholder:"Suche...",value:a,onChange:function(e){o(e.target.value)},onKeyUp:function(e){13===e.keyCode&&B()}}),(0,k.jsx)(Q.Z,{style:{padding:"6px 40px"},onClick:function(){B()},children:(0,k.jsx)(c.G,{icon:u.wn1})})]})})}),(0,k.jsxs)(p.Z,{className:"mt-2",children:[(0,k.jsx)(g.Z,{children:m}),(0,k.jsx)(g.Z,{}),(0,k.jsx)(g.Z,{children:(0,k.jsx)(E.Z.Check,{type:"switch",id:"custom-switch",label:"automatisch generierte Texte ber\xfccksichtigen",checked:O,value:O,onChange:function(e){P(e.target.checked)}})})]}),R.length>0?(0,k.jsx)(p.Z,{children:(0,k.jsx)(g.Z,{children:R.map((function(n){return(0,k.jsx)(se,{searchAutoText:O,loadMain:function(){e.loadMain.apply(e,arguments)},query:a,work:n},n.work_id)}))})}):null]})]})}function se(e){var n=(0,l.useState)([]),t=(0,s.Z)(n,2),a=t[0],c=t[1],u=(0,l.useState)(-1),o=(0,s.Z)(u,2),d=o[0],x=o[1];return(0,l.useEffect)((function(){var n=function(){var n=(0,r.Z)(i().mark((function n(){var t,s,r;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.Q.fulltext_search_view.search([{c:"full_text",o:"=",v:"*".concat(e.query,"*")},{c:"auto_text",o:e.searchAutoText?">=":"=",v:0},{c:"work_id",o:"=",v:e.work.work_id}],{select:["full_text","auto_text","page","edition_id","scan_id","opus","ac_web","label"]});case 2:t=n.sent,150,s=[],r=-1,t.forEach((function(n){for(var t=(0,ee.Z)(n.full_text.matchAll(e.query)).length,a=-1,i=0;i<t;i++)r+=1,a=n.full_text.indexOf(e.query,a+1),s.push({id:r,scan_id:n.scan_id,auto_text:n.auto_text,edition_id:n.edition_id,opus:n.opus,ac_web:n.ac_web,label:n.label,page:n.page,section:(0,k.jsxs)("span",{children:["... ",n.full_text.substring(a-150,a),(0,k.jsx)("strong",{className:"text-primary",children:e.query}),n.full_text.substring(a+e.query.length,a+e.query.length+150)," ..."]})})})),c(s),x(r);case 9:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[]),(0,k.jsxs)(k.Fragment,{children:[a.length>0?(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)("h4",{className:"mt-4",style:{borderTop:"1px solid var(--bs-secondary)",paddingTop:"20px"},children:[(0,k.jsx)("span",{dangerouslySetInnerHTML:(0,q.rg)(e.work.opus)}),d>-1?(0,k.jsxs)("i",{style:{fontSize:"70%"},children:["(",d+1,")"]}):null]})}):null,a.length>0?a.map((function(n){return(0,k.jsxs)("div",{className:"mb-3",children:[(0,k.jsxs)("div",{style:{cursor:"pointer"},onClick:function(t){L(n.edition_id,n.scan_id),O(n.edition_id,n.label,n.ac_web),f.Q.setOptions("argos_mode",1),f.Q.setOptions("argos_query",e.query),e.loadMain(t,"edition",n.edition_id)},children:[(0,k.jsxs)("b",{children:["Seite ",isNaN(n.page)?n.page:parseInt(n.page),":"]}),n.auto_text?(0,k.jsx)("small",{style:{fontStyle:"italic"},className:"text-danger",children:"\xa0(auto)"}):null]}),(0,k.jsx)("div",{style:{marginLeft:"20px"},children:n.section})]},n.id)})):(0,k.jsx)("div",{children:(0,k.jsx)(ne.Z,{variant:"primary",size:"sm",animation:"border"})})]})}var re=t(8491);function ae(){return["author","edition","scan_opera","scan_opera_view","scan","scan_lnk","work","fulltext_search_view"]}function ie(e){(0,l.useEffect)((function(){var n=function(){var n=(0,r.Z)(i().mark((function n(){var t,s;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=new URLSearchParams(window.location.search),null!==e.resId||!t.get("id")){n.next=6;break}return n.next=4,f.Q.edition.get({id:t.get("id")},{select:["id","label","ac_web"]});case 4:1===(s=n.sent).length&&(O(s[0].id,s[0].label,s[0].ac_web),e.loadMain(null,"edition",s[0].id));case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[]);var n=null;switch(e.res){case null:n=(0,k.jsx)($,{loadMain:function(){e.loadMain.apply(e,arguments)}});break;case"edition":n=(0,k.jsx)(B,{resId:e.resId,loadMain:function(){e.loadMain.apply(e,arguments)}});break;case"changelog":n=(0,k.jsx)(X,{});break;case"search":n=(0,k.jsx)(te,{loadMain:function(){e.loadMain.apply(e,arguments)}});break;case"account":n=(0,k.jsx)(re.m,{});break;default:n=(0,k.jsxs)("div",{children:['Unbekannter Men\xfc-Punkt: "',e.res,'"']})}return n}function le(e){var n=(0,l.useState)([]),t=(0,s.Z)(n,2),a=t[0],f=t[1],p=(0,l.useState)("zuletzt ge\xf6ffnet"),g=(0,s.Z)(p,2),j=g[0],m=g[1];return(0,l.useEffect)((function(){var n=function(){var n=(0,r.Z)(i().mark((function n(){var t;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=P(),f(t.map((function(n){return(0,k.jsxs)(o.Z.Item,{onClick:function(t){O(n.id,n.label,n.opus),e.loadMain(t,"edition",n.id)},children:[n.label,n.opus?" (".concat(n.opus.substring(0,20)+(n.opus.length>20?"...":""),")"):null]},n.id)}))),"edition"===e.res?m(t[0].label+(t[0].opus?" (".concat(t[0].opus.substring(0,20)+(t[0].opus.length>20?"...":""),")"):null)):m("zuletzt ge\xf6ffnet");case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[e.res,e.resId]),(0,k.jsx)(d.Z,{bg:"dark",variant:"dark",fixed:"top",children:(0,k.jsxs)(x.Z,{fluid:!0,children:[(0,k.jsx)(d.Z.Brand,{style:{cursor:"pointer"},onClick:function(n){e.loadMain(n,null)},children:"Argos"}),(0,k.jsx)(d.Z.Toggle,{}),(0,k.jsx)(d.Z.Collapse,{className:"justify-content-end",children:(0,k.jsxs)(h.Z,{children:[(0,k.jsx)(h.Z.Link,{children:(0,k.jsx)("span",{onClick:function(n){e.loadMain(n,"search")},children:"Volltextsuche"})}),(0,k.jsx)(o.Z,{title:j,children:a}),(0,k.jsxs)(o.Z,{title:"Einstellungen",children:[(0,k.jsx)(o.Z.Item,{onClick:function(n){e.loadMain(n,"account")},children:"Konto"}),(0,k.jsx)(o.Z.Item,{onClick:function(n){e.loadMain(n,"changelog")},children:"\xc4nderungen"})]}),(0,k.jsx)(h.Z.Link,{children:(0,k.jsx)(c.G,{icon:u.jLD,onClick:function(n){e.loadMain(n,"logout")},title:"abmelden"})})]})})]})})}},8491:function(e,n,t){t.d(n,{m:function(){return p}});var s=t(5861),r=t(885),a=t(7757),i=t.n(a),l=t(9743),c=t(2677),u=t(3350),o=t(7022),d=t(2791),x=t(6407),h=t(3222),f=t(184);function p(){var e=(0,d.useState)(x.Q.me.first_name),n=(0,r.Z)(e,2),t=n[0],a=n[1],p=(0,d.useState)(x.Q.me.last_name),g=(0,r.Z)(p,2),j=g[0],m=g[1],Z=(0,d.useState)(x.Q.me.email),v=(0,r.Z)(Z,2),y=v[0],b=v[1],_=(0,d.useState)(""),S=(0,r.Z)(_,2),w=S[0],k=S[1],C=(0,d.useState)(""),N=(0,r.Z)(C,2),I=N[0],M=N[1],T=(0,d.useState)(x.Q.options.z_width),Q=(0,r.Z)(T,2),R=Q[0],z=Q[1],A=(0,d.useState)(x.Q.options.action_key),E=(0,r.Z)(A,2),q=E[0],L=E[1],O=[(0,f.jsxs)(l.Z,{className:"mb-2",children:[(0,f.jsx)(c.Z,{xs:2,children:"Breite der Zettel:"}),(0,f.jsx)(c.Z,{children:(0,f.jsx)(u.Z.Range,{min:"400",max:"600",size:"sm",value:R,onChange:function(e){x.Q.setOptions("z_width",e.target.value),x.Q.setOptions("z_height",.7*parseInt(e.target.value)),z(e.target.value)}})})]},1)];return(0,f.jsxs)(o.Z,{style:{padding:"0 10% 0 10%"},children:[(0,f.jsx)(l.Z,{children:(0,f.jsx)(c.Z,{children:(0,f.jsx)("h3",{children:"Pers\xf6nliche Daten"})})}),(0,f.jsxs)(l.Z,{className:"mb-2",children:[(0,f.jsx)(c.Z,{xs:2,children:"Vorname:"}),(0,f.jsx)(c.Z,{children:(0,f.jsx)(u.Z.Control,{type:"text",size:"sm",value:t,onChange:function(e){a(e.target.value)}})})]}),(0,f.jsxs)(l.Z,{className:"mb-2",children:[(0,f.jsx)(c.Z,{xs:2,children:"Nachname:"}),(0,f.jsx)(c.Z,{children:(0,f.jsx)(u.Z.Control,{type:"text",size:"sm",value:j,onChange:function(e){m(e.target.value)}})})]}),(0,f.jsxs)(l.Z,{className:"mb-4",children:[(0,f.jsx)(c.Z,{xs:2,children:"Email-Adresse:"}),(0,f.jsx)(c.Z,{children:(0,f.jsx)(u.Z.Control,{type:"text",size:"sm",value:y,onChange:function(e){b(e.target.value)}})})]}),(0,f.jsxs)(l.Z,{className:"mb-4",children:[(0,f.jsx)(c.Z,{xs:2}),(0,f.jsx)(c.Z,{children:(0,f.jsx)(h.YG,{value:"speichern",onClick:(0,s.Z)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.Q.user.save({id:x.Q.me.id,first_name:t,last_name:j,email:y});case 2:return e.next=4,x.Q.getUser();case 4:return n=e.sent,x.Q.me=n,e.abrupt("return",{status:1});case 7:case"end":return e.stop()}}),e)})))})})]}),(0,f.jsx)(l.Z,{children:(0,f.jsx)(c.Z,{children:(0,f.jsx)("h3",{children:"Passwort"})})}),(0,f.jsxs)(l.Z,{className:"mb-2",children:[(0,f.jsx)(c.Z,{xs:2,children:"altes Passwort:"}),(0,f.jsx)(c.Z,{children:(0,f.jsx)(u.Z.Control,{type:"password",size:"sm",value:w,onChange:function(e){k(e.target.value)}})})]}),(0,f.jsxs)(l.Z,{className:"mb-4",children:[(0,f.jsx)(c.Z,{xs:2,children:"neues Passwort:"}),(0,f.jsx)(c.Z,{children:(0,f.jsx)(u.Z.Control,{type:"password",size:"sm",value:I,onChange:function(e){M(e.target.value)}})})]}),(0,f.jsxs)(l.Z,{className:"mb-4",children:[(0,f.jsx)(c.Z,{xs:2}),(0,f.jsx)(c.Z,{children:(0,f.jsx)(h.YG,{value:"speichern",onClick:(0,s.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.Q.user.save({id:x.Q.me.id,old_password:w,new_password:I});case 2:return e.abrupt("return",{status:1});case 3:case"end":return e.stop()}}),e)})))})})]}),(0,f.jsx)(l.Z,{children:(0,f.jsx)(c.Z,{children:(0,f.jsx)("h3",{children:"Darstellung und Benutzung"})})}),(0,f.jsxs)(l.Z,{className:"mb-4",children:[(0,f.jsx)(c.Z,{xs:4,children:"Funktionstaste f\xfcr Tastenk\xfcrzel"}),(0,f.jsxs)(c.Z,{children:[(0,f.jsxs)(u.Z.Select,{size:"sm",value:q,onChange:function(e){x.Q.setOptions("action_key",e.target.value),L(e.target.value)},children:[(0,f.jsx)("option",{value:"alt",children:"Alt"}),(0,f.jsx)("option",{value:"ctrl",children:"Strg"}),(0,f.jsx)("option",{value:"cmd",children:"Befehlstaste"})]}),(0,f.jsxs)("small",{children:["Eine Liste mit Tastenk\xfcrzeln finden Sie ",(0,f.jsx)("a",{className:"text-primary",href:"https://gitlab.lrz.de/haeberlin/dmlw/-/wikis/06-Argos#tastenk\xfcrzel",target:"_blank",children:"hier"}),"."]})]})]}),O]})}}}]);
//# sourceMappingURL=488.4a3df636.chunk.js.map