"use strict";(self.webpackChunkatlas=self.webpackChunkatlas||[]).push([[488],{7488:function(e,n,t){t.r(n),t.d(n,{MainBody:function(){return ue},MainNavBar:function(){return oe},arachneTbls:function(){return ce}});var s=t(885),r=t(5861),a=t(7757),i=t.n(a),l=t(2791),c=t(4483),u=t(3174),o=t(2354),d=t(4817),x=t(7022),h=t(9249),f=t(6407),p=t(9743),g=t(2677),j=t(2591),m=t(5987),Z=t(1413),v=t(1694),y=t.n(v),b=t(6543),S=t(162),_=t(6882),w=t(1991),k=t(184),C=["bsPrefix","size","hasValidation","className","as"],N=(0,b.Z)("input-group-text",{Component:"span"}),I=l.forwardRef((function(e,n){var t=e.bsPrefix,s=e.size,r=e.hasValidation,a=e.className,i=e.as,c=void 0===i?"div":i,u=(0,m.Z)(e,C);t=(0,S.vE)(t,"input-group");var o=(0,l.useMemo)((function(){return{}}),[]);return(0,k.jsx)(w.Z.Provider,{value:o,children:(0,k.jsx)(c,(0,Z.Z)((0,Z.Z)({ref:n},u),{},{className:y()(a,t,s&&"".concat(t,"-").concat(s),r&&"has-validation")}))})}));I.displayName="InputGroup";var M=Object.assign(I,{Text:N,Radio:function(e){return(0,k.jsx)(N,{children:(0,k.jsx)(_.Z,(0,Z.Z)({type:"radio"},e))})},Checkbox:function(e){return(0,k.jsx)(N,{children:(0,k.jsx)(_.Z,(0,Z.Z)({type:"checkbox"},e))})}}),T=t(4292),Q=t(3360),z=t(7762),R=t(5671),A=t(3144),E=t(4775),q=t(1398),L=t(3350),B=t(3222);function P(e,n){if(localStorage.getItem("argos_currentPages")){var t=JSON.parse(localStorage.getItem("argos_currentPages"));t.find((function(n){return n.edition_id===e}))?localStorage.setItem("argos_currentPages",JSON.stringify(t.map((function(t){return t.edition_id!==e?t:{edition_id:e,scan_id:n}})))):(t.push({edition_id:e,scan_id:n}),localStorage.setItem("argos_currentPages",JSON.stringify(t)))}else localStorage.setItem("argos_currentPages",JSON.stringify([{edition_id:e,scan_id:n}]))}var O=function(){function e(){(0,R.Z)(this,e);var n=localStorage.getItem("argos_settings");void 0===(n=n?JSON.parse(n):{}).zoom&&(n.zoom=70),void 0===n.query&&(n.query=""),void 0===n.mode&&(n.mode=0),this.attrs=n}return(0,A.Z)(e,[{key:"get",value:function(e){return this.attrs[e]}},{key:"set",value:function(e,n){this.attrs[e]!=n&&(this.attrs[e]=n,localStorage.setItem("argos_settings",JSON.stringify(this.attrs)))}}]),e}();function H(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"???",s=localStorage.getItem("editions");s?((s=(s=JSON.parse(s)).filter((function(n){return n.id!==e}))).length>15&&s.splice(14),s.unshift({id:e,label:n,opus:t})):s=[{id:e,label:n,opus:t}],localStorage.setItem("editions",JSON.stringify(s))}function J(){var e=localStorage.getItem("editions");return e?JSON.parse(e):[]}function K(e){var n=new O,t=(0,l.useState)("0.5"),a=(0,s.Z)(t,2),c=a[0],u=a[1],o=(0,l.useState)(null),d=(0,s.Z)(o,2),h=d[0],j=d[1],m=(0,l.useState)(n.get("query")),Z=(0,s.Z)(m,2),v=Z[0],y=Z[1];(0,l.useEffect)((function(){n.set("query",v)}),[v]);var b=(0,l.useState)([]),S=(0,s.Z)(b,2),_=S[0],w=S[1],C=(0,l.useState)(0),N=(0,s.Z)(C,2),I=N[0],M=N[1],T=(0,l.useState)(null),Q=(0,s.Z)(T,2),R=Q[0],A=Q[1],E=(0,l.useState)(n.get("mode")),q=(0,s.Z)(E,2),L=q[0],P=q[1];(0,l.useEffect)((function(){n.set("mode",L)}),[L]);var H=(0,l.useState)(!1),J=(0,s.Z)(H,2),K=J[0],V=J[1],F=(0,l.useState)([]),G=(0,s.Z)(F,2),U=G[0],Y=G[1],X=(0,l.useState)(0),ee=(0,s.Z)(X,2),ne=ee[0],te=ee[1],se=(0,l.useState)(!1),re=(0,s.Z)(se,2),ae=re[0],ie=re[1],le=(0,l.useState)(!1),ce=(0,s.Z)(le,2),ue=ce[0],oe=ce[1],de=(0,l.useState)(n.get("zoom")),xe=(0,s.Z)(de,2),he=xe[0],fe=xe[1],pe=[["ACTION+ESC",function(){e.loadMain(null,null)}],["ACTION+q",function(){j(null)}],["ACTION+e",function(){j("ressource")}],["ACTION+s",function(){j("scans")}],["ACTION+o",function(){j("opera")}],["ACTION+i",function(){j("content")}],["ACTION+f",function(){var e=document.getElementById("searchInput");e&&e.focus()}],["Alt+ArrowRight",function(){_.length>I+1?M(I+1):M(0)}],["Alt+ArrowLeft",function(){M(0<=I-1?I-1:_.length-1)}],["CTRL+1",function(){P(0)}],["CTRL+2",function(){P(1)}],["CTRL+3",function(){P(2)}],["CTRL+,",function(){fe(he-5)}],["CTRL+.",function(){fe(he+5)}]];(0,B.XU)(pe,!1),(0,l.useEffect)((function(){n.set("zoom",he)}),[he]),(0,l.useEffect)((function(){var n=function(){var n=(0,r.Z)(i().mark((function n(){var t,s,r;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.Q.edition.get({id:e.resId});case 2:return t=n.sent,A(t[0]),u(t[0].aspect_ratio?"".concat(t[0].aspect_ratio):"0.6"),n.next=7,f.Q.scan_lnk.get({edition_id:e.resId});case 7:s=(s=n.sent).sort((function(e,n){return n.filename<e.filename})),Y(s),localStorage.getItem("argos_currentPages")&&(r=JSON.parse(localStorage.getItem("argos_currentPages")).find((function(n){return n.edition_id===e.resId})))&&ge(r.scan_id);case 11:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[e.resId]),(0,l.useEffect)((function(){var e,n=!1,t=(0,z.Z)(U);try{for(t.s();!(e=t.n()).done;){var s=e.value;if(null!==s.full_text&&""!==s.full_text){n=!0;break}}}catch(r){t.e(r)}finally{t.f()}n?V(!0):(V(!1),0!=L&&P(0))}),[U]),(0,l.useEffect)((function(){if(K&&v.length>0){var e=U.filter((function(e){return e.full_text&&e.full_text.search(v)>-1}));w(e),M(0),0===L&&P(1)}else w([]),M(0)}),[K,v]),(0,l.useEffect)((function(){_.length>0&&ge(_[I].id)}),[I]);var ge=function(){var e=(0,r.Z)(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n),e.next=3,(0,B._v)(100);case 3:(t=document.getElementById("p_".concat(n)))?t.scrollIntoView():console.log("page not found:",n);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(x.Z,{onScroll:function(e){!1===ae&&(ie(!0),te(e.target.scrollTop),setTimeout((function(){ie(!1)}),500))},style:{position:"fixed",top:"60px",left:"0",right:"0",bottom:"60px",overflow:"scroll"},fluid:!0,children:U.map((function(e){return(0,k.jsx)(p.Z,{children:(0,k.jsx)(g.Z,{align:"center",children:(0,k.jsx)($,{aspectRatio:c,editMode:ue,query:v,mode:L,zoom:he,scrollPos:ne,page:e,ressource:R})})},e.scan_id)}))}),(0,k.jsx)(W,{scrollPageIntoView:function(e){ge(e)},setEditMode:function(){oe(!ue)},fullTxt:K,setSideMenu:function(e){j(e)},query:v,setQuery:function(e){y(e)},searchQuery:function(e){},queryResults:_,queryResultIndex:I,setQueryResultIndex:function(e){M(e)},mode:L,setMode:function(e){P(e)},zoom:he,setZoom:function(e){fe(e)},pages:U}),(0,k.jsx)(D,{ressource:R,pages:U,item:h,setSideMenu:function(e){j(e)}})]})}function D(e){return(0,k.jsxs)(E.Z,{show:!!e.item,onHide:function(){e.setSideMenu(null)},placement:"end",children:[(0,k.jsx)(E.Z.Header,{closeButton:!0,children:(0,k.jsxs)(E.Z.Title,{children:["opera"===e.item&&"Angaben aus der opera-Liste","ressource"===e.item&&"Ressource (ID: ".concat(e.ressource.id,")"),"scans"===e.item&&"Scan-Seiten zuweisen"]})}),(0,k.jsxs)(E.Z.Body,{children:["opera"===e.item&&(0,k.jsx)(G,{ressource:e.ressource}),"ressource"===e.item&&(0,k.jsx)(U,{ressource:e.ressource}),"scans"===e.item&&(0,k.jsx)(F,{pages:e.pages,ressource:e.ressource}),"content"===e.item&&(0,k.jsx)(V,{setSideMenu:function(n){e.setSideMenu(n)},pages:e.pages,ressource:e.ressource})]})]})}function V(e){return(0,k.jsxs)(x.Z,{children:[(0,k.jsx)(p.Z,{className:"mb-4",children:(0,k.jsx)(g.Z,{children:(0,k.jsx)("h2",{children:"Inhaltsverzeichnis"})})}),(0,k.jsxs)(p.Z,{className:"mb-3",children:[(0,k.jsx)(g.Z,{xs:1}),(0,k.jsx)(g.Z,{children:(0,k.jsx)(q.Z,{variant:"flush",children:e.pages.map((function(n){return(0,k.jsx)(q.Z.Item,{style:{textAlign:"center"},action:!0,onClick:function(){document.getElementById("p_".concat(n.scan_id)).scrollIntoView({behavior:"auto",block:"start"}),e.setSideMenu(null)},children:parseInt(n.filename)>0?parseInt(n.filename):n.filename},n.id)}))})}),(0,k.jsx)(g.Z,{xs:1})]})]})}function F(e){var n=(0,l.useState)([]),t=(0,s.Z)(n,2),a=t[0],c=t[1],u=(0,l.useState)(e.pages.map((function(e){return e.scan_id}))),o=(0,s.Z)(u,2),d=o[0],h=o[1];(0,l.useEffect)((function(){var n=function(){var n=(0,r.Z)(i().mark((function n(){var t;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.Q.scan.get({path:e.ressource.path});case 2:t=n.sent,c(t);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[]);var j=function(e){d.includes(e)?h(d.filter((function(n){return n!=e}))):h(d.concat([e]))};return(0,k.jsxs)(x.Z,{children:[(0,k.jsx)(p.Z,{className:"mb-2",children:(0,k.jsxs)(g.Z,{children:["Dateipfad: ",(0,k.jsx)("code",{children:e.ressource.path})]})}),(0,k.jsx)(p.Z,{className:"mb-4",children:(0,k.jsx)(g.Z,{children:(0,k.jsxs)("small",{children:["Einzelne Seiten k\xf6nnen mit einem Klick markiert werden. Mehrere Seiten k\xf6nnen mit einer Bewegung der Maus und dem gleichzeitigen Gedr\xfcckthalten der ",f.Q.me.selectKey,"-Taste aktiviert werden."]})})}),(0,k.jsx)(p.Z,{className:"mb-3",children:(0,k.jsx)(g.Z,{children:(0,k.jsx)(q.Z,{children:a.map((function(e){return(0,k.jsx)(q.Z.Item,{className:"mb-1",active:!!d.includes(e.id),onMouseEnter:function(n){("cmd"===f.Q.me.selectKey&&n.metaKey||"ctrl"===f.Q.me.selectKey&&n.ctrlKey)&&j(e.id)},onClick:function(){j(e.id)},action:!0,children:e.filename},e.id)}))})})}),(0,k.jsx)(p.Z,{className:"mb-3",children:(0,k.jsxs)(g.Z,{align:"right",children:["Auswahl: ",d.length]})}),(0,k.jsx)(p.Z,{children:(0,k.jsx)(g.Z,{children:(0,k.jsx)(B.YG,{onClick:(0,r.Z)(i().mark((function n(){var t;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e.pages.length>0)){n.next=3;break}return n.next=3,f.Q.scan_lnk.delete(e.pages.map((function(e){return e.id})));case 3:if(!(d.length>0)){n.next=8;break}return t=(t=d.sort()).map((function(n){return{edition_id:e.ressource.id,scan_id:n}})),n.next=8,f.Q.scan_lnk.save(t);case 8:return n.abrupt("return",{status:1});case 9:case"end":return n.stop()}}),n)}))),value:"speichern"})})})]})}function G(e){var n=(0,l.useState)({}),t=(0,s.Z)(n,2),a=t[0],c=t[1],u=(0,l.useState)({}),o=(0,s.Z)(u,2),d=o[0],h=o[1];return(0,l.useEffect)((function(){var n=function(){var n=(0,r.Z)(i().mark((function n(){var t,s;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.Q.work.get({id:e.ressource.work_id});case 2:return t=n.sent,c(t[0]),n.next=6,f.Q.author.get({id:t[0].author_id});case 6:s=n.sent,h(s[0]);case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[e.ressource]),(0,k.jsxs)(x.Z,{children:[(0,k.jsx)(p.Z,{className:"mb-2",children:(0,k.jsx)(g.Z,{dangerouslySetInnerHTML:(0,B.rg)(a.date_display?a.date_display:d.date_display)})}),(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsx)(g.Z,{xs:5,children:(0,k.jsx)("b",{children:(0,k.jsx)("aut",{children:a.author_display?a.author_display:d.abbr})})}),(0,k.jsx)(g.Z,{dangerouslySetInnerHTML:(0,B.rg)(a.author_display?null:d.full)})]}),(0,k.jsxs)(p.Z,{className:"mb-4",children:[(0,k.jsx)(g.Z,{xs:5,children:(0,k.jsx)("b",{style:{marginLeft:"10px"},dangerouslySetInnerHTML:(0,B.rg)(a.abbr)})}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("span",{style:{marginLeft:"10px"},dangerouslySetInnerHTML:(0,B.rg)(a.full)})})]}),(0,k.jsx)(p.Z,{className:"mb-2",children:(0,k.jsx)(g.Z,{children:(0,k.jsx)("i",{dangerouslySetInnerHTML:(0,B.rg)(a.bibliography?a.bibliography:d.bibliography)})})}),(0,k.jsx)(p.Z,{children:(0,k.jsxs)(g.Z,{children:[(0,k.jsx)("small",{dangerouslySetInnerHTML:(0,B.rg)(a.citation?a.citation:d.citation)})," ",(0,k.jsx)("small",{dangerouslySetInnerHTML:(0,B.rg)(a.txt_info?a.txt_info:d.txt_info)})]})})]})}function U(e){var n=(0,l.useState)(e.ressource.id),t=(0,s.Z)(n,2),a=t[0],c=(t[1],(0,l.useState)(e.ressource.ressource)),u=(0,s.Z)(c,2),o=u[0],d=u[1],h=(0,l.useState)(e.ressource.work_id),j=(0,s.Z)(h,2),m=j[0],Z=j[1],v=(0,l.useState)(e.ressource.ac_web),y=(0,s.Z)(v,2),b=y[0],S=y[1],_=(0,l.useState)(e.ressource.editor),w=(0,s.Z)(_,2),C=w[0],N=w[1],I=(0,l.useState)(e.ressource.year),M=(0,s.Z)(I,2),T=M[0],Q=M[1],z=(0,l.useState)(e.ressource.volume),R=(0,s.Z)(z,2),A=R[0],E=R[1],q=(0,l.useState)(e.ressource.vol_cont),L=(0,s.Z)(q,2),P=L[0],O=L[1],H=(0,l.useState)(e.ressource.serie),J=(0,s.Z)(H,2),K=J[0],D=J[1],V=(0,l.useState)(e.ressource.location),F=(0,s.Z)(V,2),G=F[0],U=F[1],$=(0,l.useState)(e.ressource.library),Y=(0,s.Z)($,2),W=Y[0],X=Y[1],ee=(0,l.useState)(e.ressource.signature),ne=(0,s.Z)(ee,2),te=ne[0],se=ne[1],re=(0,l.useState)(e.ressource.comment),ae=(0,s.Z)(re,2),ie=ae[0],le=ae[1],ce=(0,l.useState)(e.ressource.path),ue=(0,s.Z)(ce,2),oe=ue[0],de=ue[1],xe=(0,l.useState)(e.ressource.url),he=(0,s.Z)(xe,2),fe=he[0],pe=he[1],ge=(0,l.useState)(e.ressource.aspect_ratio),je=(0,s.Z)(ge,2),me=je[0],Ze=je[1],ve=(0,l.useState)(null),ye=(0,s.Z)(ve,2),be=ye[0],Se=ye[1];return(0,l.useEffect)((function(){var e=function(){var e=(0,r.Z)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(m>0)){e.next=5;break}return e.next=3,f.Q.work.get({id:m},{select:["bibliography"]});case 3:(n=e.sent).length>0?Se(n[0].bibliography):Se(null);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[m]),(0,k.jsxs)(x.Z,{children:[(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsx)(g.Z,{xs:3,children:"Werk:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)(B.Qc,{value:b||"",tbl:"work",searchCol:"ac_web",returnCol:"ac_web",onChange:function(e,n){S(e),Z(n)}})})]}),(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsx)(g.Z,{xs:3,children:(0,k.jsx)("small",{children:"Alter Dateiname:"})}),(0,k.jsx)(g.Z,{children:e.ressource.dir_name})]}),be&&(0,k.jsxs)(p.Z,{className:"mb-4",children:[(0,k.jsx)(g.Z,{xs:3,style:{backgroundColor:"var(--bs-gray-100"},children:(0,k.jsx)("small",{children:"Bibl. Angaben:"})}),(0,k.jsx)(g.Z,{style:{fontSize:"90%",backgroundColor:"var(--bs-gray-100"},children:be})]}),(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsx)(g.Z,{xs:3,children:"Ressource:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)(B.SA,{options:[[0,"Edition (relevant)"],[1,"Edition (veraltet)"],[2,"Handschrift"],[3,"Alter Druck (relevant)"],[4,"Alter Druck (veraltet)"],[5,"Sonstiges"]],value:o||"",onChange:function(e){d(parseInt(e.target.value))}})})]}),0===o||1===o||5===o?[(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsx)(g.Z,{xs:3,children:"Editor:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("input",{type:"text",style:{width:"100%"},value:C||"",onChange:function(e){N(e.target.value)}})})]},"0"),(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsx)(g.Z,{xs:3,children:"Jahr:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("input",{type:"text",style:{width:"100%"},value:T||"",onChange:function(e){Q(e.target.value)}})})]},"1"),(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsx)(g.Z,{xs:3,children:"Band:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("input",{type:"text",style:{width:"100%"},value:A||"",onChange:function(e){E(e.target.value)}})})]},"2"),(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsx)(g.Z,{xs:3,children:"Bandinhalt:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("input",{type:"text",style:{width:"100%"},value:P||"",onChange:function(e){O(e.target.value)}})})]},"3"),(0,k.jsxs)(p.Z,{className:"mb-4",children:[(0,k.jsx)(g.Z,{xs:3,children:"Reihe:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)(B.SA,{options:[[0,""],[1,"Migne PL"],[2,"ASBen."],[3,"ASBoll."],[4,"AnalBoll."],[5,"Mon. Boica"],[6,"Ma. Schatzverzeichnisse"],[7,"Ma. Bibliothekskataloge"]],value:K||"",onChange:function(e){D(parseInt(e.target.value))}})})]},"4")]:null,2===o?[(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsx)(g.Z,{xs:3,children:"Stadt:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("input",{type:"text",style:{width:"100%"},value:G||"",onChange:function(e){U(e.target.value)}})})]},"5"),(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsx)(g.Z,{xs:3,children:"Bibliothek:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("input",{type:"text",style:{width:"100%"},value:W||"",onChange:function(e){X(e.target.value)}})})]},"6"),(0,k.jsxs)(p.Z,{className:"mb-4",children:[(0,k.jsx)(g.Z,{xs:3,children:"Signatur:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("input",{type:"text",style:{width:"100%"},value:te||"",onChange:function(e){se(e.target.value)}})})]},"7")]:null,3===o||4===o?[(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsx)(g.Z,{xs:3,children:"Drucker:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("input",{type:"text",style:{width:"100%"},value:C||"",onChange:function(e){N(e.target.value)}})})]},"8"),(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsx)(g.Z,{xs:3,children:"Ort:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("input",{type:"text",style:{width:"100%"},value:G||"",onChange:function(e){U(e.target.value)}})})]},"9"),(0,k.jsxs)(p.Z,{className:"mb-4",children:[(0,k.jsx)(g.Z,{xs:3,children:"Jahr:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("input",{type:"text",style:{width:"100%"},value:T||"",onChange:function(e){Q(e.target.value)}})})]},"10")]:null,(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsx)(g.Z,{xs:3,children:"Kommentar:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("textarea",{style:{width:"250px",height:"100px"},value:ie||"",onChange:function(e){le(e.target.value)}})})]}),(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsx)(g.Z,{xs:3,children:"Dateipfad:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("input",{type:"text",style:{width:"100%"},value:oe||"",onChange:function(e){de(e.target.value)}})})]}),(0,k.jsxs)(p.Z,{className:"mb-2",children:[(0,k.jsxs)(g.Z,{xs:3,children:["Link:",(0,k.jsx)("br",{}),(0,k.jsx)("small",{children:"(externe Quellen)"})]}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("input",{type:"text",style:{width:"100%"},value:fe||"",onChange:function(e){pe(e.target.value)}})})]}),(0,k.jsxs)(p.Z,{className:"mb-4",children:[(0,k.jsx)(g.Z,{xs:3,children:"Seiten-verh\xe4ltnis:"}),(0,k.jsx)(g.Z,{children:(0,k.jsx)("input",{type:"text",style:{width:"100%"},value:me||"",onChange:function(e){Ze(e.target.value.substring(0,5))}})})]}),(0,k.jsx)(p.Z,{className:"mb-2",children:(0,k.jsx)(g.Z,{children:(0,k.jsx)(B.YG,{value:"speichern",onClick:(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==o&&1!==o&&5!==o||C&&T){e.next=4;break}return e.abrupt("return",{status:!1,error:"Geben Sie den Editor und das Jahr ein."});case 4:return e.next=6,f.Q.edition.save({id:a,work_id:m,ressource:o,editor:C,year:T,volume:A,vol_cont:P,serie:K,comment:ie,location:G,library:W,signature:te,path:oe,url:fe,aspect_ratio:me});case 6:return e.abrupt("return",{status:!0});case 7:case"end":return e.stop()}}),e)})))})})})]})}function $(e){var n=e.zoom,t=(0,l.useState)(!1),a=(0,s.Z)(t,2),c=a[0],u=a[1],o=(0,l.useRef)(null),d=(0,l.useState)(null),x=(0,s.Z)(d,2),h=x[0],j=x[1];return(0,B.S1)({target:o,onIntersect:function(n,t){var r=(0,s.Z)(n,1)[0],a=r.intersectionRatio;r.isIntersecting&&!c&&u(!0),a>.1&&(document.getElementById("currentPageField").value=isNaN(e.page.filename)?e.page.filename:parseInt(e.page.filename),P(e.page.edition_id,e.page.scan_id),t.unobserve(o.current))}}),(0,l.useEffect)((function(){if(c){var n=function(){var n=(0,r.Z)(i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=j,n.next=3,f.Q.getScan(e.page.scan_id);case 3:n.t1=n.sent,(0,n.t0)(n.t1);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}else j(null)}),[c]),(0,k.jsxs)(p.Z,{id:"p_".concat(e.page.scan_id),className:"mb-4 px-5",children:[e.mode<2?(0,k.jsx)(g.Z,{children:(0,k.jsx)("div",{ref:o,style:{width:0===e.mode?"".concat(n,"%"):"100%",aspectRatio:e.aspectRatio,boxShadow:"0 5px 10px var(--bs-gray-300)",borderRadius:"3px",overflow:"hidden"},children:(0,k.jsx)("img",{style:{width:"100%",height:"100%"},src:h,alt:e.page.filename})})}):null,e.mode>0?(0,k.jsx)(g.Z,{children:(0,k.jsx)(Y,{editMode:e.editMode,ressource:e.ressource,page:e.page,query:e.query})}):null]})}function Y(e){var n=(0,l.useState)(null),t=(0,s.Z)(n,2),r=t[0],a=t[1],i=(0,l.useRef)(null);return(0,l.useEffect)((function(){if(e.page.full_text){var n=e.query?e.page.full_text.replace(new RegExp("(".concat(e.query,")"),"gi"),"<mark>$1</mark>"):e.page.full_text;n=(n=(n=n.replace(/-\n([^ ]*) /g,"$1\n")).replace(/(\d+\.)/g,"</p><p><b>$1</b>")).replace(/</g,"&lt;").replace(/>/g,"&gt;");var t=(n=(n="<p>".concat(n,"</p>")).replace(/\n/g,"<br />")).indexOf("$$$$$");a(t>-1?[(0,k.jsx)(g.Z,{contentEditable:e.editMode,onBlur:function(e){},style:{textAlign:"justify",fontSize:"0.9rem"},dangerouslySetInnerHTML:(0,B.rg)(n.substring(0,t))},"0"),(0,k.jsx)(g.Z,{contentEditable:e.editMode,onBlur:function(e){},style:{textAlign:"justify",fontSize:"0.9rem"},dangerouslySetInnerHTML:(0,B.rg)(n.substring(t+9))},"1")]:[(0,k.jsx)(g.Z,{contentEditable:e.editMode,onBlur:function(e){},style:{textAlign:"justify",fontSize:"1rem",color:1===e.page.auto_text?"var(--bs-gray-500)":"inherit"},dangerouslySetInnerHTML:(0,B.rg)(n)},"0")])}}),[e.editMode,e.query]),(0,k.jsxs)(x.Z,{className:e.editMode?"bg-light":null,ref:i,style:{width:"100%",minHeight:"100%",boxShadow:"0 5px 10px var(--bs-gray-300)",borderRadius:"3px",overflow:"hidden",padding:"60px 40px"},children:[(0,k.jsxs)(p.Z,{className:"mb-4",children:[(0,k.jsx)(g.Z,{}),(0,k.jsx)(g.Z,{dangerouslySetInnerHTML:(0,B.rg)(e.ressource.opus)}),(0,k.jsx)(g.Z,{align:"right",children:isNaN(e.page.filename)?e.page.filename:parseInt(e.page.filename)})]}),e.page.full_text?(0,k.jsx)(p.Z,{children:r}):(0,k.jsx)(p.Z,{children:(0,k.jsx)(g.Z,{children:(0,k.jsx)("i",{children:"Kein Flie\xdftext verf\xfcgbar."})})})]})}function W(e){var n=(0,l.useState)(null),t=(0,s.Z)(n,2),r=t[0],a=t[1],i=[["opera-Angaben",function(){e.setSideMenu("opera")}],["Inhaltsverzeichnis",function(){e.setSideMenu("content")}]];f.Q.access("e_edit")&&i.push(["Ressource bearbeiten",function(){e.setSideMenu("ressource")}]),f.Q.access("l_edit")&&i.push(["Scan-Seiten zuweisen",function(){e.setSideMenu("scans")}]),!0===e.fullTxt&&(f.Q.access("e_edit")&&i.push(["Text bearbeiten",function(){e.setEditMode()}]),i.push(["Nur Text",function(){e.setMode(2)}]),i.push(["Scans&Text",function(){e.setMode(1)}]),i.push(["Nur Scans",function(){e.setMode(0)}]));var c=function(){e.queryResultIndex+1===e.queryResults.length?e.setQueryResultIndex(0):e.setQueryResultIndex(e.queryResultIndex+1)};return(0,k.jsx)(d.Z,{fixed:"bottom",bg:"light",children:(0,k.jsxs)(x.Z,{fluid:!0,children:[(0,k.jsxs)(d.Z.Collapse,{className:"justify-content-start",children:[e.fullTxt&&(0,k.jsx)(d.Z.Text,{children:(0,k.jsx)(L.Z.Control,{size:"sm",type:"text",id:"searchInput",placeholder:"Suche...",value:e.query,onChange:function(n){e.setQuery(n.target.value),e.searchQuery(n.target.value)},onKeyUp:function(e){13===e.keyCode&&c()}})}),e.fullTxt&&e.queryResults.length>0&&(0,k.jsx)(d.Z.Text,{style:{marginLeft:"10px"},children:(0,k.jsxs)("div",{id:"navBox",style:{display:"flex",marginRight:"20px"},children:[(0,k.jsx)(Q.Z,{style:{borderRadius:"0.2rem 0 0 0.2rem"},variant:"secondary",size:"sm",onClick:function(){window.scrollTo(0,0),e.queryResultIndex>0?e.setQueryResultIndex(e.queryResultIndex-1):e.setQueryResultIndex(e.queryResults.length-1)},children:"<"}),(0,k.jsxs)("div",{style:{borderBottom:"1px solid var(--bs-gray-600)",borderTop:"1px solid var(--bs-gray-600)",padding:"5px 10px",margin:"0"},children:[" ",(0,k.jsx)("input",{style:{width:"50px",border:"none",boxShadow:"none",padding:0,margin:0,textAlign:"right",background:"none",color:" var(--bs-gray-600)"},type:"text",value:e.queryResultIndex+1,onChange:function(n){""==n.target.value||isNaN(n.target.value)||e.setQueryResultIndex(parseInt(n.target.value)-1)}})," von ",e.queryResults.length]}),(0,k.jsx)(Q.Z,{style:{borderRadius:"0 0.2rem 0.2rem 0"},variant:"secondary",size:"sm",onClick:function(){c()},children:">"})]})}),e.fullTxt&&0===e.queryResults.length&&e.query.length>0&&(0,k.jsx)(d.Z.Text,{style:{marginLeft:"10px"},children:(0,k.jsx)("small",{className:"text-danger",children:"Keine Stellen gefunden!"})})]}),(0,k.jsxs)(d.Z.Collapse,{children:[(0,k.jsxs)(d.Z.Text,{children:["Seite ",(0,k.jsx)("input",{type:"text",id:"currentPageField",onChange:function(){a(null)},onKeyDown:function(n){if(13===n.keyCode){n.preventDefault();var t=isNaN(n.target.value)?n.target.value:n.target.value.padStart(4,"0"),s=e.pages.find((function(e){return e.filename===t}));s?(a(null),e.scrollPageIntoView(s.scan_id)):a((0,k.jsx)("span",{className:"text-danger",children:"Seite nicht gefunden!"}))}}})," ",r]}),(0,k.jsx)(d.Z.Text,{})]}),(0,k.jsx)(d.Z.Collapse,{className:"justify-content-end",children:(0,k.jsxs)(d.Z.Text,{children:[0===e.mode&&(0,k.jsx)(L.Z.Range,{style:{position:"relative",top:"7px",marginRight:"10px",width:"400px"},min:"45",max:"95",value:e.zoom,onChange:function(n){e.setZoom(parseInt(n.target.value))},className:"slider"}),i.length>0?(0,k.jsx)(B.vW,{menuItems:i}):null]})})]})})}function X(e){var n=(0,l.useState)([]),t=(0,s.Z)(n,2),a=t[0],c=t[1],u=(0,l.useState)([]),o=(0,s.Z)(u,2),d=o[0],h=o[1],m=(0,l.useState)([]),Z=(0,s.Z)(m,2),v=Z[0],y=Z[1],b=(0,l.useState)(0),S=(0,s.Z)(b,2),_=S[0],w=S[1],C=(0,l.useState)(1),N=(0,s.Z)(C,2),I=N[0],M=N[1],T=(0,l.useState)(""),Q=(0,s.Z)(T,2),z=Q[0],R=Q[1],A=[["ACTION+f",function(){var e=document.getElementById("searchInput");e&&e.focus()}],["ACTION+ArrowRight",function(){Math.ceil(_/30)>=I+1?M(I+1):M(1)}],["ACTION+ArrowLeft",function(){M(0<I-1?I-1:Math.ceil(_/30))}]];(0,B.XU)(A,!1),(0,l.useEffect)((function(){var e=function(){var e=(0,r.Z)(i().mark((function e(){var n,t,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,t=[],s=[],""==z){e.next=9;break}return e.next=6,f.Q.scan_opera.search([{c:"search",o:"=",v:"".concat(z,"*")}],{count:!0});case 6:n=e.sent,e.next=12;break;case 9:return e.next=11,f.Q.scan_opera.getAll({count:!0});case 11:n=e.sent;case 12:w(n[0].count),h(s),c(t),M(1);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[z]),(0,l.useEffect)((function(){var e=function(){var e=(0,r.Z)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],""==z){e.next=7;break}return e.next=4,f.Q.scan_opera.search([{c:"search",o:"=",v:"".concat(z,"*")}],{limit:30,offset:30*(I-1)});case 4:n=e.sent,e.next=10;break;case 7:return e.next=9,f.Q.scan_opera.getAll({limit:30,offset:30*(I-1)});case 9:n=e.sent;case 10:y(n);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[z,I,a]);var E=function(n,t,s,r){H(t,s,r),e.loadMain(n,"edition",t)};return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(x.Z,{children:(0,k.jsxs)(p.Z,{children:[(0,k.jsx)(g.Z,{xs:1}),(0,k.jsx)(g.Z,{children:(0,k.jsxs)(j.Z,{children:[(0,k.jsx)("thead",{children:(0,k.jsxs)("tr",{children:[(0,k.jsx)("th",{width:"40%",children:"Zitiertitel"}),(0,k.jsx)("th",{width:"30%",children:"relevant"}),(0,k.jsx)("th",{width:"15%",children:"veraltet"}),(0,k.jsx)("th",{width:"15%",children:"Sonstiges"})]})}),(0,k.jsx)("tbody",{children:v.map((function(e){var n=JSON.parse(e.editions_label),t=JSON.parse(e.editions_id),s=JSON.parse(e.editions_url),r=JSON.parse(e.editions_type),a=[];if(n&&n.length===t.length&&t.length===s.length){var i=-1;a=t.map((function(e){var t=d.filter((function(n){return n===parseInt(e)})).length;return i++,{id:e,label:n[i],url:s[i],type:r[i],hits:t}}))}return d.length>0&&(a=a.filter((function(e){return e.hits>0}))),(0,k.jsxs)("tr",{style:{color:e.in_use?null:"var(--bs-gray-500)",backgroundColor:e.in_use?null:"var(--bs-gray-100)"},children:[(0,k.jsx)("td",{dangerouslySetInnerHTML:(0,B.rg)(e.citation)}),(0,k.jsx)("td",{children:a.map((function(n){if(0===n.type||3===n.type)return(0,k.jsx)("div",{children:(0,k.jsxs)("a",{href:n.url?n.url:"#",target:n.url?"_blank":"",className:n.url?"link-warning":"link-primary",onClick:function(t){n.url||E(t,n.id,n.label,e.search)},children:[n.label,d.length>0?" ("+n.hits+")":null]})},n.id)}))}),(0,k.jsx)("td",{children:a.map((function(n){if(1===n.type||4===n.type)return(0,k.jsx)("div",{children:(0,k.jsx)("a",{href:n.url?n.url:"#",target:n.url?"_blank":"",onClick:function(t){n.url||E(t,n.id,n.label,e.search)},children:n.label})},n.id)}))}),(0,k.jsx)("td",{children:a.map((function(n){if(2===n.type||5===n.type)return(0,k.jsx)("div",{children:(0,k.jsx)("a",{href:n.url?n.url:"#",target:n.url?"_blank":"",onClick:function(t){n.url||E(t,n.id,n.label,e.search)},children:n.label})},n.id)}))})]},e.id)}))})]})}),(0,k.jsx)(g.Z,{xs:1})]})}),(0,k.jsx)(ee,{operaCount:_,currentPage:I,setCurrentPage:function(e){M(e)},setQuery:function(e){R(e)}})]})}function ee(e){var n=(0,l.useState)(""),t=(0,s.Z)(n,2),r=t[0],a=t[1];return(0,k.jsx)(d.Z,{fixed:"bottom",bg:"light",children:(0,k.jsxs)(x.Z,{fluid:!0,children:[(0,k.jsx)(d.Z.Collapse,{className:"justify-content-start",children:(0,k.jsx)(d.Z.Text,{children:(0,k.jsxs)(M,{children:[(0,k.jsx)(T.Z,{placeholder:"Suche...",id:"searchInput",onChange:function(e){a(e.target.value)},value:r,onKeyUp:function(n){13===n.keyCode&&e.setQuery(r)}}),(0,k.jsx)(Q.Z,{variant:"dark",onClick:function(){e.setQuery(r)},children:"Zitiertitel"})]})})}),(0,k.jsxs)(d.Z.Collapse,{className:"justify-content-end",children:[(0,k.jsx)(d.Z.Text,{children:e.operaCount>0?(0,k.jsx)(B.C3,{loadPage:function(n){e.setCurrentPage(n)},currentPage:e.currentPage,maxPage:Math.ceil(e.operaCount/30)}):null}),(0,k.jsx)(d.Z.Text,{})]})]})})}var ne=t(2469);function te(){return(0,k.jsxs)(x.Z,{children:[(0,k.jsxs)(ne.Z,{variant:"info",children:[(0,k.jsx)(ne.Z.Heading,{children:"Beta 1.3"}),(0,k.jsx)("i",{children:"18. Mai 2022"}),(0,k.jsx)("p",{children:"Volltextsuche angepasst und Shortcut-Taste \xfcber Einstellungen ver\xe4nderbar."})]}),(0,k.jsxs)(ne.Z,{variant:"secondary",children:[(0,k.jsx)(ne.Z.Heading,{children:"Beta 1.2"}),(0,k.jsx)("i",{children:"14. April 2022"}),(0,k.jsx)("p",{children:"Shortcuts hinzugef\xfcgt."})]}),(0,k.jsxs)(ne.Z,{variant:"secondary",children:[(0,k.jsx)(ne.Z.Heading,{children:"Beta 1.1"}),(0,k.jsx)("i",{children:"31. M\xe4rz 2022"}),(0,k.jsx)("p",{children:'Korrektur des Seitenverh\xe4ltnisses (auch \xfcber "Ressource bearbeiten" ver\xe4nderbar).'})]}),(0,k.jsxs)(ne.Z,{variant:"secondary",children:[(0,k.jsx)(ne.Z.Heading,{children:"Beta 1.0"}),(0,k.jsx)("i",{children:"26. Februar 2022"}),(0,k.jsx)("p",{children:"Erste Version des neuen Scan-Viewers ist online."})]})]})}var se=t(2982),re=t(4849);function ae(e){var n=(0,l.useState)(""),t=(0,s.Z)(n,2),a=t[0],c=t[1],u=(0,l.useState)(""),o=(0,s.Z)(u,2),h=o[0],j=o[1],m=(0,l.useState)(0),Z=(0,s.Z)(m,2),v=Z[0],y=Z[1],b=(0,l.useState)(0),S=(0,s.Z)(b,2),_=S[0],w=S[1],C=(0,l.useState)([]),N=(0,s.Z)(C,2),I=N[0],M=N[1],T=(0,l.useState)(!1),z=(0,s.Z)(T,2),R=z[0],A=z[1],E=function(){if(""===a)M([]);else{var e=function(){var e=(0,r.Z)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j((0,k.jsx)(re.Z,{variant:"primary",animation:"border"})),e.next=3,f.Q.fulltext_search_view.search([{c:"full_text",o:"=",v:"*".concat(a,"*")},{c:"auto_text",o:R?">=":"=",v:0}],{select:["work_id"],group:"work_id"});case 3:n=e.sent,j("".concat(n.length," Werke gefunden.")),w(Math.floor(n.length/5)+1),q(1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}},q=function(){var e=(0,r.Z)(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(n),M([]),e.next=4,f.Q.fulltext_search_view.search([{c:"full_text",o:"=",v:"*".concat(a,"*")},{c:"auto_text",o:R?">=":"=",v:0}],{select:["work_id","opus"],group:"work_id",offset:5*(n-1),limit:5});case 4:t=e.sent,M(t);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(d.Z,{fixed:"bottom",bg:"light",children:(0,k.jsx)(x.Z,{fluid:!0,children:(0,k.jsx)(d.Z.Collapse,{className:"justify-content-end",children:(0,k.jsx)(d.Z.Text,{children:_>0?(0,k.jsx)(B.C3,{loadPage:function(e){q(e)},currentPage:v,maxPage:_}):null})})})}),(0,k.jsxs)(x.Z,{children:[(0,k.jsxs)(p.Z,{children:[(0,k.jsx)(g.Z,{children:(0,k.jsx)(L.Z.Control,{type:"text",id:"searchInput",placeholder:"Suche...",value:a,onChange:function(e){c(e.target.value)},onKeyUp:function(e){13===e.keyCode&&E()}})}),(0,k.jsx)(g.Z,{xs:1,children:(0,k.jsx)(Q.Z,{style:{padding:"6px 30px"},onClick:function(){E()},children:"Suche"})})]}),(0,k.jsxs)(p.Z,{className:"mt-2",children:[(0,k.jsx)(g.Z,{children:h}),(0,k.jsx)(g.Z,{}),(0,k.jsx)(g.Z,{children:(0,k.jsx)(L.Z.Check,{type:"switch",id:"custom-switch",label:"automatisch generierte Texte ber\xfccksichtigen",checked:R,value:R,onChange:function(e){A(e.target.checked)}})})]}),I.length>0?(0,k.jsx)(p.Z,{children:(0,k.jsx)(g.Z,{children:I.map((function(n){return(0,k.jsx)(ie,{searchAutoText:R,loadMain:function(){e.loadMain.apply(e,arguments)},query:a,work:n},n.work_id)}))})}):null]})]})}function ie(e){var n=(0,l.useState)([]),t=(0,s.Z)(n,2),a=t[0],c=t[1],u=(0,l.useState)(-1),o=(0,s.Z)(u,2),d=o[0],x=o[1];return(0,l.useEffect)((function(){var n=function(){var n=(0,r.Z)(i().mark((function n(){var t,s,r;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.Q.fulltext_search_view.search([{c:"full_text",o:"=",v:"*".concat(e.query,"*")},{c:"auto_text",o:e.searchAutoText?">=":"=",v:0},{c:"work_id",o:"=",v:e.work.work_id}],{select:["full_text","auto_text","page","edition_id","scan_id"]});case 2:t=n.sent,150,s=[],r=-1,t.forEach((function(n){for(var t=(0,se.Z)(n.full_text.matchAll(e.query)).length,a=-1,i=0;i<t;i++)r+=1,a=n.full_text.indexOf(e.query,a+1),s.push({id:r,scan_id:n.scan_id,auto_text:n.auto_text,edition_id:n.edition_id,page:n.page,section:(0,k.jsxs)("span",{children:["... ",n.full_text.substring(a-150,a),(0,k.jsx)("strong",{className:"text-primary",children:e.query}),n.full_text.substring(a+e.query.length,a+e.query.length+150)," ..."]})})})),c(s),x(r);case 9:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[]),(0,k.jsxs)(k.Fragment,{children:[a.length>0?(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)("h4",{className:"mt-4",style:{borderTop:"1px solid var(--bs-secondary)",paddingTop:"20px"},children:[(0,k.jsx)("span",{dangerouslySetInnerHTML:(0,B.rg)(e.work.opus)}),d>-1?(0,k.jsxs)("i",{style:{fontSize:"70%"},children:["(",d+1,")"]}):null]})}):null,a.length>0?a.map((function(n){return(0,k.jsxs)("div",{className:"mb-3",children:[(0,k.jsxs)("div",{style:{cursor:"pointer"},onClick:function(t){P(n.edition_id,n.scan_id),e.loadMain(t,"edition",n.edition_id)},children:[(0,k.jsxs)("b",{children:["Seite ",isNaN(n.page)?n.page:parseInt(n.page),":"]}),n.auto_text?(0,k.jsx)("small",{style:{fontStyle:"italic"},className:"text-danger",children:"\xa0(auto)"}):null]}),(0,k.jsx)("div",{style:{marginLeft:"20px"},children:n.section})]},n.id)})):(0,k.jsx)("div",{children:(0,k.jsx)(re.Z,{variant:"primary",size:"sm",animation:"border"})})]})}var le=t(8491);function ce(){return["author","edition","scan_opera","scan_opera_view","scan","scan_lnk","work","fulltext_search_view"]}function ue(e){(0,l.useEffect)((function(){var n=function(){var n=(0,r.Z)(i().mark((function n(){var t,s;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=new URLSearchParams(window.location.search),null!==e.resId||!t.get("id")){n.next=6;break}return n.next=4,f.Q.edition.get({id:t.get("id")},{select:["id","label","ac_web"]});case 4:1===(s=n.sent).length&&(H(s[0].id,s[0].label,s[0].ac_web),e.loadMain(null,"edition",s[0].id));case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[]);var n=null;switch(e.res){case null:n=(0,k.jsx)(X,{loadMain:function(){e.loadMain.apply(e,arguments)}});break;case"edition":n=(0,k.jsx)(K,{resId:e.resId,loadMain:function(){e.loadMain.apply(e,arguments)}});break;case"changelog":n=(0,k.jsx)(te,{});break;case"search":n=(0,k.jsx)(ae,{loadMain:function(){e.loadMain.apply(e,arguments)}});break;case"account":n=(0,k.jsx)(le.m,{});break;default:n=(0,k.jsxs)("div",{children:['Unbekannter Men\xfc-Punkt: "',e.res,'"']})}return n}function oe(e){var n=(0,l.useState)([]),t=(0,s.Z)(n,2),a=t[0],f=t[1],p=(0,l.useState)("zuletzt ge\xf6ffnet"),g=(0,s.Z)(p,2),j=g[0],m=g[1];return(0,l.useEffect)((function(){var n=function(){var n=(0,r.Z)(i().mark((function n(){var t;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=J(),f(t.map((function(n){return(0,k.jsxs)(o.Z.Item,{onClick:function(t){H(n.id,n.label,n.opus),e.loadMain(t,"edition",n.id)},children:[n.label,n.opus?" (".concat(n.opus.substring(0,20)+(n.opus.length>20?"...":""),")"):null]},n.id)}))),"edition"===e.res?m(t[0].label+(t[0].opus?" (".concat(t[0].opus.substring(0,20)+(t[0].opus.length>20?"...":""),")"):null)):m("zuletzt ge\xf6ffnet");case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[e.res,e.resId]),(0,k.jsx)(d.Z,{bg:"dark",variant:"dark",fixed:"top",children:(0,k.jsxs)(x.Z,{fluid:!0,children:[(0,k.jsx)(d.Z.Brand,{style:{cursor:"pointer"},onClick:function(n){e.loadMain(n,null)},children:"Argos"}),(0,k.jsx)(d.Z.Toggle,{}),(0,k.jsx)(d.Z.Collapse,{className:"justify-content-end",children:(0,k.jsxs)(h.Z,{children:[(0,k.jsx)(h.Z.Link,{children:(0,k.jsx)("span",{onClick:function(n){e.loadMain(n,"search")},children:"Volltext-Suche"})}),(0,k.jsx)(o.Z,{title:j,children:a}),(0,k.jsxs)(o.Z,{title:"Einstellungen",children:[(0,k.jsx)(o.Z.Item,{onClick:function(n){e.loadMain(n,"account")},children:"Konto"}),(0,k.jsx)(o.Z.Item,{onClick:function(n){e.loadMain(n,"changelog")},children:"\xc4nderungen"})]}),(0,k.jsx)(h.Z.Link,{children:(0,k.jsx)(c.G,{icon:u.jLD,onClick:function(n){e.loadMain(n,"logout")},title:"abmelden"})})]})})]})})}},8491:function(e,n,t){t.d(n,{m:function(){return p}});var s=t(5861),r=t(885),a=t(7757),i=t.n(a),l=t(9743),c=t(2677),u=t(3350),o=t(7022),d=t(2791),x=t(6407),h=t(3222),f=t(184);function p(){var e=(0,d.useState)(x.Q.me.first_name),n=(0,r.Z)(e,2),t=n[0],a=n[1],p=(0,d.useState)(x.Q.me.last_name),g=(0,r.Z)(p,2),j=g[0],m=g[1],Z=(0,d.useState)(x.Q.me.email),v=(0,r.Z)(Z,2),y=v[0],b=v[1],S=(0,d.useState)(""),_=(0,r.Z)(S,2),w=_[0],k=_[1],C=(0,d.useState)(""),N=(0,r.Z)(C,2),I=N[0],M=N[1],T=(0,d.useState)(x.Q.options.z_width),Q=(0,r.Z)(T,2),z=Q[0],R=Q[1],A=(0,d.useState)(x.Q.options.action_key),E=(0,r.Z)(A,2),q=E[0],L=E[1],B=[(0,f.jsxs)(l.Z,{className:"mb-2",children:[(0,f.jsx)(c.Z,{xs:2,children:"Breite der Zettel:"}),(0,f.jsx)(c.Z,{children:(0,f.jsx)(u.Z.Range,{min:"400",max:"600",size:"sm",value:z,onChange:function(e){x.Q.setOptions("z_width",e.target.value),x.Q.setOptions("z_height",.7*parseInt(e.target.value)),R(e.target.value)}})})]},1)];return(0,f.jsxs)(o.Z,{style:{padding:"0 10% 0 10%"},children:[(0,f.jsx)(l.Z,{children:(0,f.jsx)(c.Z,{children:(0,f.jsx)("h3",{children:"Pers\xf6nliche Daten"})})}),(0,f.jsxs)(l.Z,{className:"mb-2",children:[(0,f.jsx)(c.Z,{xs:2,children:"Vorname:"}),(0,f.jsx)(c.Z,{children:(0,f.jsx)(u.Z.Control,{type:"text",size:"sm",value:t,onChange:function(e){a(e.target.value)}})})]}),(0,f.jsxs)(l.Z,{className:"mb-2",children:[(0,f.jsx)(c.Z,{xs:2,children:"Nachname:"}),(0,f.jsx)(c.Z,{children:(0,f.jsx)(u.Z.Control,{type:"text",size:"sm",value:j,onChange:function(e){m(e.target.value)}})})]}),(0,f.jsxs)(l.Z,{className:"mb-4",children:[(0,f.jsx)(c.Z,{xs:2,children:"Email-Adresse:"}),(0,f.jsx)(c.Z,{children:(0,f.jsx)(u.Z.Control,{type:"text",size:"sm",value:y,onChange:function(e){b(e.target.value)}})})]}),(0,f.jsxs)(l.Z,{className:"mb-4",children:[(0,f.jsx)(c.Z,{xs:2}),(0,f.jsx)(c.Z,{children:(0,f.jsx)(h.YG,{value:"speichern",onClick:(0,s.Z)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.Q.user.save({id:x.Q.me.id,first_name:t,last_name:j,email:y});case 2:return e.next=4,x.Q.getUser();case 4:return n=e.sent,x.Q.me=n,e.abrupt("return",{status:1});case 7:case"end":return e.stop()}}),e)})))})})]}),(0,f.jsx)(l.Z,{children:(0,f.jsx)(c.Z,{children:(0,f.jsx)("h3",{children:"Passwort"})})}),(0,f.jsxs)(l.Z,{className:"mb-2",children:[(0,f.jsx)(c.Z,{xs:2,children:"altes Passwort:"}),(0,f.jsx)(c.Z,{children:(0,f.jsx)(u.Z.Control,{type:"password",size:"sm",value:w,onChange:function(e){k(e.target.value)}})})]}),(0,f.jsxs)(l.Z,{className:"mb-4",children:[(0,f.jsx)(c.Z,{xs:2,children:"neues Passwort:"}),(0,f.jsx)(c.Z,{children:(0,f.jsx)(u.Z.Control,{type:"password",size:"sm",value:I,onChange:function(e){M(e.target.value)}})})]}),(0,f.jsxs)(l.Z,{className:"mb-4",children:[(0,f.jsx)(c.Z,{xs:2}),(0,f.jsx)(c.Z,{children:(0,f.jsx)(h.YG,{value:"speichern",onClick:(0,s.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.Q.user.save({id:x.Q.me.id,old_password:w,new_password:I});case 2:return e.abrupt("return",{status:1});case 3:case"end":return e.stop()}}),e)})))})})]}),(0,f.jsx)(l.Z,{children:(0,f.jsx)(c.Z,{children:(0,f.jsx)("h3",{children:"Darstellung und Benutzung"})})}),(0,f.jsxs)(l.Z,{className:"mb-4",children:[(0,f.jsx)(c.Z,{xs:4,children:"Funktionstaste f\xfcr Tastenk\xfcrzel"}),(0,f.jsxs)(c.Z,{children:[(0,f.jsxs)(u.Z.Select,{size:"sm",value:q,onChange:function(e){x.Q.setOptions("action_key",e.target.value),L(e.target.value)},children:[(0,f.jsx)("option",{value:"alt",children:"Alt"}),(0,f.jsx)("option",{value:"ctrl",children:"Strg"}),(0,f.jsx)("option",{value:"cmd",children:"Befehlstaste"})]}),(0,f.jsxs)("small",{children:["Eine Liste mit Tastenk\xfcrzeln finden Sie ",(0,f.jsx)("a",{className:"text-primary",href:"https://gitlab.lrz.de/haeberlin/dmlw/-/wikis/06-Argos#tastenk\xfcrzel",target:"_blank",children:"hier"}),"."]})]})]}),B]})}}}]);
//# sourceMappingURL=488.ea4cffbb.chunk.js.map