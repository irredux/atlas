{"version":3,"file":"static/js/229.e98d76c7.chunk.js","mappings":"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","sources":["editor/overview.js","../node_modules/react-bootstrap/esm/createUtilityClasses.js","../node_modules/react-bootstrap/esm/Stack.js","../node_modules/react-bootstrap/esm/Badge.js","editor/outline.js","editor/editor.js","editor/changelog.js","editor/settings.js","editor/mainContent.js"],"sourcesContent":["import { Container, Col, Row, Modal, Button, Table, Tabs, Tab, Dropdown, Navbar } from \"react-bootstrap\";\nimport { useEffect, useState } from \"react\";\nimport { getSettings, setSetting } from \"./mainContent.js\";\n\nimport { arachne } from \"./../arachne.js\";\nimport { Message, ToolKit } from \"./../elements.js\";\n\nfunction Overview(props){\n    const [sortName, setSortName] = useState(getSettings().projectSort);\n    const [renameId, setRenameId] = useState(0);\n    const [shareId, setShareId] = useState(0);\n    const [renameName, setRenameName] = useState(\"\");\n    const [activeProjects, setActiveProjects] = useState([]);\n    const [archiveProjects, setArchiveProjects] = useState([]);\n    const [sharedProjects, setSharedProjects] = useState([]);\n    const [userLst, setUserLst] = useState([]);\n    useEffect(()=>{\n        refreshPage();\n    }, [sortName]);\n    useEffect(()=>{\n        const fetchData = async () => {\n            await refreshPage();\n            const users = await arachne.user.getAll({order: [\"last_name\"]});\n            setUserLst(users.map(u=>[u.id, `${u.first_name} ${u.last_name}`]))\n        };\n        fetchData();\n    }, [])\n    const refreshPage = async ()=>{\n        setActiveProjects(await arachne.project.get({user_id: arachne.me.id, status: 1}, {order: [sortName]}));\n        setArchiveProjects(await arachne.project.get({status: 2}, {order: [sortName]}));\n        setSharedProjects(await arachne.project.get({shared_id: arachne.me.id}, {order: [sortName]}));\n    };\n    const deleteProject = async id => {\n        if(window.confirm(`Soll das Projekt mit der ID '${id}' wirklich gelöscht werden? Dieser Schritt kann nicht rückgängig gemacht werden.`)){\n            //article\n            const articleLst = await arachne.article.get({project_id: id});\n            if(articleLst.length>0){await arachne.article.delete(articleLst.map(a=>a.id))}\n            //zettelLnk\n            const zettelLst = await arachne.sections.get({project_id: id});\n            if(zettelLst.length>0){await arachne.sections.delete(zettelLst.map(z=>z.id))}\n            //project\n            await arachne.project.delete(id)\n            await refreshPage();\n        }\n    };\n    const copyProject = async oldProjectId => {\n        // copy project\n        let oldProject = await arachne.project.get({id: oldProjectId});\n        oldProject = oldProject[0];\n        delete oldProject.id;\n        oldProject.shared_id = null;\n        oldProject.name = `${oldProject.name}  (Kopie)`;\n        const newProjectId = await arachne.project.save(oldProject);\n        //copy zettelLnk\n        const zettelLnk = await arachne.sections.get({project_id: oldProjectId});\n        for(const z of zettelLnk){\n            delete z.id;\n            z.project_id = newProjectId;\n            z.shared_id = null;\n            await arachne.sections.save(z)\n        }\n        //copy article + zettelLnk\n        const articleLst = await arachne.article.get({project_id: oldProjectId});\n        for(const a of articleLst){\n            const oldArticleId = a.id;\n            delete a.id;\n            a.project_id = newProjectId;\n            a.shared_id = null;\n            const newArticleId = await arachne.article.save(a);\n            const zettelLnk = await arachne.sections.get({project_id: newProjectId, article_id: oldArticleId});\n            for(const z of zettelLnk){\n                z.article_id = newArticleId;\n                await arachne.sections.save(z)\n            }\n        }\n        await refreshPage();\n    };\n    const shareProject = async (newUserId, projectId) => {\n        // to un-share project: newUserId = null\n        let shared_id = null\n        let user_id = null\n\n        if(newUserId){\n            const oldUserId = await arachne.project.get({id:projectId},{select: [\"user_id\"]})\n            user_id = newUserId\n            shared_id = oldUserId[0].user_id\n        }else{\n            const oldUserId = await arachne.project.get({id:projectId},{select: [\"shared_id\"]})\n            shared_id = null\n            user_id = oldUserId[0].shared_id\n        }\n        await arachne.project.save({id: projectId, shared_id: shared_id, user_id: user_id});\n        const articleLst = await arachne.article.get({project_id: projectId});\n        //copy zettelLnk\n        for(const a of articleLst){\n            a.user_id = user_id;\n            a.shared_id = shared_id;\n            const newArticleId = await arachne.article.save(a);\n        }\n        const zettelLnk = await arachne.sections.get({project_id: projectId});\n        for(const z of zettelLnk){\n            z.user_id = user_id;\n            z.shared_id = shared_id;\n            await arachne.sections.save(z)\n        }\n        await refreshPage();\n    };\n    return <>\n        <Message show={renameId>0?true:false} title=\"Projekt umbenennen\" msg=\"Geben Sie einen neuen Namen für das Projekt ein:\" input={renameName} onReplay={async e=>{if(e!=-1 && e!=\"\"){\n            await arachne.project.save({id: renameId, name: e})\n            await refreshPage();\n        };\n        setRenameId(0);\n        }} />\n        <Message show={shareId>0?true:false} title=\"Projekt freigeben\" msg=\"Wem wollen Sie das Projekt freigeben?\" dropDown={userLst} onReplay={async e=>{\n            await shareProject(e, shareId);\n            setShareId(0);\n        }} />\n        <Container>\n        <Tabs defaultActiveKey=\"active\">\n            <Tab eventKey=\"active\" title=\"aktive Projekte\">\n                <Container className=\"m-4\" style={{width: \"auto\"}}>\n                    <Table width=\"100%\" hover>\n                        <thead>\n                            <tr><th width=\"30%\">Name</th><th width=\"20%\"></th><th width=\"20%\">Änderungsdatum</th><th width=\"20%\">Erstelldatum</th><th width=\"10%\"></th></tr>\n                        </thead>\n                        <tbody>\n                            {activeProjects.map(p => {\n                                let editMenu = [\n                                    [\"umbenennen\", ()=>{ \n                                        setRenameName(p.name);\n                                        setRenameId(p.id);\n                                    }],\n                                    [\"kopieren\", async ()=>{copyProject(p.id)}],\n                                    [\"ins Archiv\", async ()=>{await arachne.project.save({id: p.id, status:2});await refreshPage();}],\n                                    [\"freigeben\", ()=>{setShareId(p.id)}]\n                                ];\n                                if(p.shared_id>0){\n                                    editMenu = [\n                                        [\"umbenennen\", ()=>{ \n                                            setRenameName(p.name);\n                                            setRenameId(p.id);\n                                        }],\n                                        [\"kopieren\", async ()=>{copyProject(p.id)}],\n                                        [\"freigabe beenden\", async ()=>{await shareProject(null, p.id)}]\n                                    ];\n                                }\n                                return <ProjectRow\n                                key={p.id}\n                                p={p}\n                                openProject={()=>{props.loadMain(null, \"editor\", p.id)}}\n                                editMenu={editMenu}\n                                deleteProject={async i=>{await deleteProject(i)}}\n                            />;})}\n                        </tbody>\n                    </Table>\n                </Container>\n            </Tab>\n            <Tab eventKey=\"archive\" title=\"Archiv\" disabled={archiveProjects.length===0?true:false}>\n                <Container className=\"m-4\" style={{width: \"auto\"}}>\n                    <Table width=\"100%\" hover>\n                        <thead>\n                            <tr><th width=\"30%\">Name</th><th width=\"20%\"></th><th width=\"20%\">Änderungsdatum</th><th width=\"20%\">Erstelldatum</th><th width=\"10%\"></th></tr>\n                        </thead>\n                        <tbody>\n                            {archiveProjects.map(p => {\n                                return <ProjectRow\n                                key={p.id}\n                                openProject={null}\n                                p={p}\n                                editMenu={[\n                                    [\"zu den aktiven Projekten\", async ()=>{await arachne.project.save({id: p.id, status:1});await refreshPage();}],\n                                ]}\n                                deleteProject={async i=>{await deleteProject(i)}}\n                            />;\n                            })}\n                        </tbody>\n                    </Table>\n                </Container>\n            </Tab>\n            <Tab eventKey=\"shared\" title=\"freigegebene Projekte\" disabled={sharedProjects.length===0?true:false}>\n                <Container className=\"m-4\" style={{width: \"auto\"}}>\n                    <Table width=\"100%\" hover>\n                        <thead>\n                            <tr><th width=\"30%\">Name</th><th width=\"20%\">freigegeben</th><th width=\"20%\">Änderufrengsdatum</th><th width=\"20%\">Erstelldatum</th><th width=\"10%\"></th></tr>\n                        </thead>\n                        <tbody>\n                            {sharedProjects.map(p => {return <ProjectRow\n                                key={p.id}\n                                p={p}\n                                editMenu={[\n                                    [\"nicht mehr freigeben\", ()=>{shareProject(null, p.id)}]\n                                ]}\n                            />;})}\n                        </tbody>\n                    </Table>\n                </Container>\n            </Tab>\n        </Tabs>\n        </Container>\n        <NavBarBottom refreshPage={async ()=>{await refreshPage();}} setSortName={e=>setSortName(e)} />\n    </>\n};\n\nfunction ProjectRow(props){\n    const [showEdit, setShowEdit] = useState(false)\n    const [shared, setShared] = useState();\n    const [isShared, setIsShared] = useState(false);\n    useEffect(()=>{\n        const getUserName = async id=>{\n            const userName = await arachne.user.get({id: id});\n            setShared(`${userName[0].first_name} ${userName[0].last_name}`);\n        };\n        if(props.p.shared_id>0&&props.p.status===4){getUserName(props.p.user_id)}\n        else if(props.p.shared_id>0&&props.p.status===1){getUserName(props.p.shared_id);setIsShared(true)}\n    },[]);\n    return <tr style={{height: \"49px\"}} className={isShared?\"text-primary\":null} onMouseEnter={()=>{setShowEdit(true)}} onMouseLeave={()=>{setShowEdit(false)}}><td><b style={{cursor: props.openProject?\"pointer\":\"default\"}} onClick={()=>{if(props.openProject){props.openProject(props.p.id)}}}>{props.p.name}</b></td><td>{shared}</td><td>{props.p.u_date.substring(0, 16)}</td><td>{props.p.c_date.substring(0, 16)}</td><td>\n    <Dropdown style={{display: showEdit?\"block\":\"none\"}}>\n        <Dropdown.Toggle size=\"sm\" variant=\"outline-primary\">bearbeiten</Dropdown.Toggle>\n        <Dropdown.Menu variant=\"dark\">\n            {props.editMenu.map(e=>{return <Dropdown.Item key={e[0]} onClick={()=>{e[1]()}}>{e[0]}</Dropdown.Item>;})}\n            {props.deleteProject?<>\n                <Dropdown.Divider />\n                <Dropdown.Item onClick={()=>{props.deleteProject(props.p.id)}}>löschen</Dropdown.Item>\n            </>:null}\n        </Dropdown.Menu>\n    </Dropdown>\n    </td></tr>;\n}\nfunction NavBarBottom(props){\n    const [showSort, setShowSort] = useState(false);\n    const ToolKitItems = [\n        [\"Sortieren nach\", ()=>{setShowSort(true)}],\n        [\"neues Projekt erstellen\", async ()=>{\n            if(window.confirm(\"Soll ein neues Projekt erstellt werden?\")){\n                await arachne.project.save({name: \"Neues Projekt\", user_id: arachne.me.id, status: 1});\n                await props.refreshPage();\n            }\n        }],\n    ];\n    return <Navbar fixed=\"bottom\" bg=\"light\">\n        <Message show={showSort} title=\"Sortierung der Projekte\" msg=\"Wie sollen die Projekte sortiert werden? Nach ...\" dropDown={[\n            [\"name\", \"Name\"],\n            [\"u_date\", \"Änderungsdatum\"],\n            [\"c_date\", \"Erstelldatum\"],\n        ]} onReplay={async e=>{\n            setSetting(\"projectSort\", e);\n            props.setSortName(e);\n            setShowSort(false);\n        }} />\n        <Container fluid>\n            <Navbar.Collapse className=\"justify-content-start\"></Navbar.Collapse>\n            <Navbar.Collapse className=\"justify-content-end\">\n                <Navbar.Text>\n                    <ToolKit menuItems={ToolKitItems} />\n                </Navbar.Text>\n            </Navbar.Collapse>\n        </Container>\n    </Navbar>;\n}\n\nexport { Overview };","import PropTypes from 'prop-types';\nimport { DEFAULT_BREAKPOINTS } from './ThemeProvider';\nexport function responsivePropType(propType) {\n  return PropTypes.oneOfType([propType, PropTypes.shape({\n    xs: propType,\n    sm: propType,\n    md: propType,\n    lg: propType,\n    xl: propType,\n    xxl: propType\n  })]);\n}\nexport default function createUtilityClassName(utilityValues, breakpoints = DEFAULT_BREAKPOINTS) {\n  const classes = [];\n  Object.entries(utilityValues).forEach(([utilName, utilValue]) => {\n    if (utilValue != null) {\n      if (typeof utilValue === 'object') {\n        breakpoints.forEach(brkPoint => {\n          const bpValue = utilValue[brkPoint];\n\n          if (bpValue != null) {\n            const infix = brkPoint !== 'xs' ? `-${brkPoint}` : '';\n            classes.push(`${utilName}${infix}-${bpValue}`);\n          }\n        });\n      } else {\n        classes.push(`${utilName}-${utilValue}`);\n      }\n    }\n  });\n  return classes;\n}","import classNames from 'classnames';\nimport * as React from 'react';\nimport { useBootstrapPrefix, useBootstrapBreakpoints } from './ThemeProvider';\nimport createUtilityClassName, { responsivePropType } from './createUtilityClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst Stack = /*#__PURE__*/React.forwardRef(({\n  as: Component = 'div',\n  bsPrefix,\n  className,\n  direction,\n  gap,\n  ...props\n}, ref) => {\n  bsPrefix = useBootstrapPrefix(bsPrefix, direction === 'horizontal' ? 'hstack' : 'vstack');\n  const breakpoints = useBootstrapBreakpoints();\n  return /*#__PURE__*/_jsx(Component, { ...props,\n    ref: ref,\n    className: classNames(className, bsPrefix, ...createUtilityClassName({\n      gap,\n      breakpoints\n    }))\n  });\n});\nStack.displayName = 'Stack';\nexport default Stack;","import classNames from 'classnames';\nimport * as React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst defaultProps = {\n  bg: 'primary',\n  pill: false\n};\nconst Badge = /*#__PURE__*/React.forwardRef(({\n  bsPrefix,\n  bg,\n  pill,\n  text,\n  className,\n  as: Component = 'span',\n  ...props\n}, ref) => {\n  const prefix = useBootstrapPrefix(bsPrefix, 'badge');\n  return /*#__PURE__*/_jsx(Component, {\n    ref: ref,\n    ...props,\n    className: classNames(className, prefix, pill && `rounded-pill`, text && `text-${text}`, bg && `bg-${bg}`)\n  });\n});\nBadge.displayName = 'Badge';\nBadge.defaultProps = defaultProps;\nexport default Badge;","import { useState } from \"react\";\nimport { Col, Container, Row } from \"react-bootstrap\";\nimport { arachne } from \"./../arachne\";\n\nfunction OutlineBox(props){\n    const [dragObjectId, setDragObjectId] = useState(null);\n    const devider = {\n        borderTop: \"4px dotted transparent\",\n        margin: \"0 20px\",\n        height: \"10px\"\n    }\n    const displayArticles = (a, depth) => {\n        return <div key={a.id} style={{marginLeft: `${25*depth}px`}}>\n            <div\n                style={devider}\n                onDrop={e=>{props.dropArticle(dragObjectId, a.parent_id, a.sort_nr);e.target.style.borderColor=\"transparent\"}}\n                onDragOver={e=>{e.preventDefault();e.target.style.borderColor=\"var(--bs-primary)\"}}\n                onDragLeave={e=>{e.target.style.borderColor=\"transparent\"}}\n            ></div>\n            <ArticleBox articles={props.articles} a={a} dragObjectId={dragObjectId} setDragObjectId={id=>{setDragObjectId(id)}} dropArticle={(a,b,c)=>{props.dropArticle(a,b,c)}} collapsed={props.collapsedArticlesLst.includes(a.id)} toogleCollapse={a=>{props.toogleCollapse(a)}} />\n        </div>;\n    };\n    return <>\n        <Container fluid>\n            <Row>\n                <Col></Col>\n                <Col xs=\"8\" style={{textAlign: \"right\", cursor: \"pointer\"}}>Artikelkopf</Col>\n                <Col></Col>\n            </Row>\n            <Row>\n                <Col></Col>\n                <Col xs=\"8\" style={{paddingBottom: \"15px\", marginBottom: \"15px\", borderBottom: \"1px solid black\"}}></Col>\n                <Col></Col>\n            </Row>\n            <Row>\n                <Col></Col>\n                <Col xs=\"8\" style={{textAlign: \"right\", cursor: \"pointer\"}}>Bedeutungen</Col>\n                <Col></Col>\n            </Row>\n            <Row>\n                <Col></Col>\n                <Col xs=\"8\">\n                    {props.articlesLst.map(a=>displayArticles(props.articles.find(b=>b.id===parseInt(a.split(\"-\")[1])), a.split(\"-\")[0]))}\n                </Col>\n                <Col></Col>\n            </Row>\n        </Container>\n    </>;\n}\nfunction ArticleBox(props){\n    const [displaySections, setDisplaySections] = useState(false);\n\n    const dblClickCallback = e => {\n        const target = e.target.closest(\".articleBox\");\n        const el = target.getElementsByClassName(\"articleBoxName\")[0];\n        el.contentEditable = true;\n        el.focus();\n    };\n    return <><div\n        className=\"articleBox\"\n        id={`articleBox_${props.a.id}`}\n        draggable\n        onDragStart={()=>{props.setDragObjectId(props.a.id)}}\n        onDrop={e=>{if(props.dragObjectId!==props.a.id){props.dropArticle(props.dragObjectId, props.a.id, 1)}; e.target.style.borderColor=\"transparent\"}}\n        onDragOver={e=>{e.preventDefault();if(props.dragObjectId!==props.a.id){e.target.style.borderColor=\"var(--bs-primary)\"}}}\n        onDragLeave={e=>{e.target.style.borderColor=\"transparent\"}}\n        tabIndex=\"0\"\n        onClick={e=>{e.target.focus()}}\n        onDoubleClick={e=>{dblClickCallback(e)}}\n        onKeyDown={e=>{\n            if(e.target.className===\"articleBox\"){\n                if(e.keyCode!==9){e.preventDefault()}\n                if(e.keyCode===13){\n                    dblClickCallback(e);\n                }else if(e.keyCode===37&&e.shiftKey){ // left+shift\n                    if(props.a.parent_id>0){\n                        const parentArticle = props.articles.find(a=>a.id===props.a.parent_id);\n                        props.dropArticle(props.a.id, parentArticle.parent_id, parentArticle.sort_nr+1);\n                    }\n                    \n                }else if(e.keyCode===37){ // left\n                    props.toogleCollapse(props.a.id);\n                }else if(e.keyCode===38&&e.shiftKey){ // up+shift\n                    let previousArticles = props.articles.filter(a=>a.parent_id===props.a.parent_id&&a.sort_nr<props.a.sort_nr).sort((a,b)=>a.sort_nr>b.sort_nr);\n                    if(previousArticles.length>0){\n                        props.dropArticle(props.a.id, props.a.parent_id, previousArticles[previousArticles.length-1].sort_nr);\n                    }\n                }else if(e.keyCode===38){ // up\n                    const articleBoxes = document.getElementsByClassName(\"articleBox\");\n                    for(let i = 0; i<articleBoxes.length;i++){\n                        if(articleBoxes[i].id === e.target.id){\n                            if(i===0){articleBoxes[articleBoxes.length-1].focus()}\n                            else{articleBoxes[i-1].focus()}\n                            break;\n                        }\n                    }\n                }else if(e.keyCode===39&&e.shiftKey){ // right+shift\n                    let previousArticles = props.articles.filter(a=>a.parent_id===props.a.parent_id&&a.sort_nr<props.a.sort_nr).sort((a,b)=>a.sort_nr>b.sort_nr);\n                    if(previousArticles.length>0){\n                        const previousArticleChildren = props.articles.filter(a=>a.parent_id===previousArticles[previousArticles.length-1].id).sort((a,b)=>a.sort_nr>b.sort_nr);\n                        if(previousArticleChildren.length>0){props.dropArticle(props.a.id, previousArticles[previousArticles.length-1].id, previousArticleChildren[previousArticleChildren.length-1].sort_nr+1)}\n                        else{props.dropArticle(props.a.id, previousArticles[previousArticles.length-1].id, 1)}\n                    }\n                }else if(e.keyCode===39){ // right\n                    if(displaySections){setDisplaySections(false)}\n                    else{setDisplaySections(true)}\n                }else if(e.keyCode===40&&e.shiftKey){ // down+shift\n                    const nextArticle = props.articles.find(a=>a.parent_id===props.a.parent_id&&a.sort_nr>props.a.sort_nr);\n                    if(nextArticle){props.dropArticle(props.a.id, props.a.parent_id, props.a.sort_nr+1)};\n                }else if(e.keyCode===40){ // down\n                    const articleBoxes = document.getElementsByClassName(\"articleBox\");\n                    for(let i = 0; i<articleBoxes.length;i++){\n                        if(articleBoxes[i].id === e.target.id){\n                            if(i===articleBoxes.length-1){articleBoxes[0].focus()}\n                            else{articleBoxes[i+1].focus()}\n                            break;\n                        }\n                    }\n                }\n            }\n        }}\n    >{props.a.sort_nr}. <span\n        className=\"articleBoxName\"\n        onBlur={async e=>{\n            e.target.contentEditable=false;\n            e.target.parentElement.focus();\n            await arachne.article.save({id: props.a.id, name: e.target.innerText})\n        }}\n        onKeyDown={e=>{\n            if(e.keyCode===13){\n                e.preventDefault();\n                e.target.blur();\n            }\n        }}\n    >{props.a.name}</span> {/*<i>({props.a.id})</i>*/}{props.collapsed?<span className=\"text-primary\" style={{marginLeft: \"15px\"}}>...</span>:null}</div>\n    {displaySections?<div className=\"ArticleBoxSections\">\n        ABBO FLOR. calc. 1,2 \"bla bla....\"\n    </div>:null}\n    </>;\n}\nexport { OutlineBox }","import { useEffect, useState, useRef } from \"react\";\nimport { Button, ButtonGroup, Dropdown, Table, Badge, Card, Col, Form, Container, Navbar, Nav, Row, Modal, Accordion, Stack, Spinner, Offcanvas, Tabs, Tab } from \"react-bootstrap\";\nimport { arachne } from \"./../arachne.js\";\nimport { AutoComplete, SearchInput, ToolKit, useIntersectionObserver, Message, useShortcuts } from \"./../elements.js\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPlusCircle, faMinusCircle, faTimesCircle, faRotate, faPenToSquare, faTrashCan } from \"@fortawesome/free-solid-svg-icons\";\nimport { getSetting } from \"./mainContent.js\";\nimport { OutlineBox } from \"./outline.js\";\n\nfunction Editor(props){\n    const [mode, setMode] = useState(\"zettel\")\n    const [project, setProject] = useState(null);\n    const [articles, setArticles] = useState([]);\n    const [articlesLst, setArticlesLst] = useState([]); // because react only checks shallow copies!\n    const [collapsedArticlesLst, setCollapsedArticlesLst] = useState([])\n    const [filterLst, setFilterLst] = useState([]);\n    const [filterTags, setFilterTags] = useState([]);\n    const [limitFilterResults,setLimitFilterResults] = useState(false);\n    const [showMenuLeft, setShowMenuLeft] = useState(false);\n    const [showImport, setShowImport] = useState(false);\n    const scSetup = [\n        [\"CTRL+ESC\", ()=>{props.loadMain(null, null)}],\n        [\"CTRL+f\", ()=>{setShowMenuLeft(!showMenuLeft)}],\n        [\"CTRL+i\", ()=>{setShowImport(!showImport)}],\n        [\"CTRL+r\", ()=>{setFilterLst([]);updateSections()}],\n        [\"CTRL+1\", ()=>{setMode(\"zettel\")}],\n        [\"CTRL+2\", ()=>{setMode(\"outline\")}],\n        [\"CTRL+3\", ()=>{setMode(\"export\")}],\n        [\"CTRL+n\", ()=>{createNewArticle()}]\n    ];\n    useShortcuts(scSetup, false);\n    const ToolKitItems = [\n        [\"Zettel importieren\", ()=>{setShowImport(true)}],\n        [\"Seitenleiste ein-/ausblenden\", ()=>{setShowMenuLeft(true)}],\n        [\"Filter neu laden\", ()=>{setFilterLst([]);updateSections()}],\n        [\"Neuer Artikel erstellen\", ()=>{createNewArticle()}]\n    ];\n    const updateArticles = inArticles => {\n        setArticles(inArticles);\n        const returnChildIds = (parentId, depth) => {\n            const childArticles = inArticles.filter(a=>a.parent_id===parentId).sort((a,b)=>a.sort_nr>b.sort_nr);\n            let returnLst = [];\n            childArticles.forEach(a=>{\n                returnLst.push(`${depth}-${a.id}`)\n                if(!collapsedArticlesLst.includes(a.id)){\n                    const newChildLst = returnChildIds(a.id, depth+1);\n                    if(newChildLst.length>0){returnLst=returnLst.concat(newChildLst)}\n                }\n            });\n            return returnLst;\n        };\n        setArticlesLst(returnChildIds(0,0));\n    };\n    useEffect(()=>{\n        updateArticles(articles);\n    }, [collapsedArticlesLst])\n    useEffect(()=>{\n        const fetchData = async ()=>{\n            const newProject = await arachne.project.get({id: props.resId})\n            setProject(newProject[0])\n            const newArticles = await arachne.article.get({project_id: props.resId});\n            updateArticles(newArticles);\n        };\n        fetchData();\n        updateSections();\n    }, []);\n    const createNewArticle = async () =>{\n        const newArticle = {\n            parent_id: 0,\n            sort_nr: articles.length>0?Math.max(...articles.filter(a=>a.parent_id===0).map(a=>a.sort_nr))+1:1,\n            name: \"Neue Gruppe\",\n            project_id: project.id,\n        };\n        const newId=await arachne.article.save(newArticle);\n        newArticle.id = newId;\n        let newArticles = articles;\n        newArticles.push(newArticle);\n        updateArticles(newArticles);\n    };\n    const dropArticle = async (id, parent_id, sort_nr) => {\n        let newArticles = articles;\n\n        // close gap in old position\n        const currentArticle = articles.find(a=>a.id===id);\n        let save_old_lst = articles.filter(a=>a.parent_id===currentArticle.parent_id&&a.sort_nr>currentArticle.sort_nr).map(a=>{return {id: a.id, sort_nr: a.sort_nr-1}});\n        save_old_lst.forEach(a=>{ // is there a faster way?\n            const i = newArticles.findIndex(na=>na.id===a.id);\n            //newArticles[i].parent_id = parent_id;\n            newArticles[i].sort_nr = a.sort_nr;\n        });\n        // make gap in new position\n        const save_new_lst = newArticles.filter(a=>a.parent_id===parent_id&&a.sort_nr>=sort_nr).map(a=>{return {id: a.id, parent_id: parent_id, sort_nr: a.sort_nr+1}});\n        save_new_lst.push({id: id, parent_id: parent_id, sort_nr: sort_nr});\n        save_new_lst.forEach(a=>{ // is there a faster way?\n            const i = newArticles.findIndex(na=>na.id===a.id);\n            newArticles[i].parent_id = parent_id;\n            newArticles[i].sort_nr = a.sort_nr;\n        });\n        await arachne.article.save(save_new_lst.concat(save_old_lst.filter(a=>save_new_lst.findIndex(b=>a.id===b.id)===-1)));\n        updateArticles(newArticles);\n    };\n    const toogleCollapse = aId => {\n        if(collapsedArticlesLst.includes(aId)){setCollapsedArticlesLst(collapsedArticlesLst.filter(a=>a!==aId))}\n        else{setCollapsedArticlesLst(collapsedArticlesLst.concat([aId]))}\n    };\n\n    const updateSections = async () => {\n        let foundSections = await arachne.sections.get({project_id: props.resId}, {select: [\"id\"]});\n        if(filterTags.length === 0){\n            setFilterLst(foundSections.map(s=>s.id));\n        } else {\n            const allTags = await arachne.tags.get({project_id: props.resId}, {select: [\"id\"]});\n            const allTagLnks = await arachne.tag_lnks.get({tag_id: allTags.map(at=>at.id)});\n            foundSections = foundSections.map(fs=>{\n                fs.tags = allTagLnks.filter(atl=>atl.section_id===fs.id).map(atl=>atl.tag_id);\n                return fs;\n            });\n            for(const filter of filterTags){\n                if(filter.exclude){foundSections = foundSections.filter(fs=>!fs.tags.includes(filter.id))}\n                else{foundSections = foundSections.filter(fs=>fs.tags.includes(filter.id))}\n            }\n            setFilterLst(foundSections.map(s=>s.id));\n        }\n    };\n\n    let modeBox = null;\n    if(mode===\"zettel\"){\n        modeBox = <ZettelBox setLimitFilterResults={v=>{setLimitFilterResults(v)}} showImport={showImport} showMenuLeft={showMenuLeft} filterTags={filterTags} setFilterTags={newTags=>{setFilterTags(newTags)}} setShowMenuLeft={()=>{setShowMenuLeft(false)}} setShowImport={v=>{setShowImport(v)}} project={project} filterLst={filterLst} updateSections={()=>{updateSections()}} />;\n    }else if(mode===\"outline\"){\n        modeBox = <OutlineBox project={project} dropArticle={(a,b,c)=>{dropArticle(a,b,c)}} articlesLst={articlesLst} articles={articles} collapsedArticlesLst={collapsedArticlesLst} toogleCollapse={a=>{toogleCollapse(a)}} />;\n    }\n    return <>\n    <Navbar bg=\"dark\" variant=\"dark\" fixed=\"top\" style={{top: \"0px\"}}>\n        <Container fluid style={{height: \"40px\"}}>\n            <Navbar.Brand style={{cursor: \"pointer\"}} onClick={e=>{props.loadMain(e, null)}}>Editor</Navbar.Brand>\n            <Navbar.Toggle />\n            <Navbar.Collapse className=\"justify-content-end\">\n                <Nav style={{fontSize: \"110%\"}}>\n                    <Nav.Link className=\"text-white\" style={{textDecoration: mode===\"zettel\"?\"underline\":null}} onClick={()=>{setMode(\"zettel\")}}>Zettel</Nav.Link>\n                    <Navbar.Text style={{width: \"80px\", borderBottom: \"3px solid white\", height: \"25px\"}}></Navbar.Text>\n                    <Nav.Link className=\"text-white\" style={{textDecoration: mode===\"outline\"?\"underline\":null}} onClick={()=>{setMode(\"outline\")}}>Gliederung</Nav.Link>\n                    <Navbar.Text style={{width: \"80px\", borderBottom: \"3px solid white\", height: \"25px\"}}></Navbar.Text>\n                    <Nav.Link className=\"text-white\" style={{textDecoration: mode===\"export\"?\"underline\":null}} onClick={()=>{setMode(\"export\")}}>Export</Nav.Link>\n                </Nav>\n                <Nav>\n                    <Navbar.Text><ToolKit menuItems={ToolKitItems} direction={\"down\"} /></Navbar.Text>\n                </Nav>\n            </Navbar.Collapse>\n        </Container>\n    </Navbar>\n    {project!=null?<Container style={{marginTop: \"120px\"/*position: \"absolute\", overflow: \"scroll\", backgroundColor: \"red\", padding:\"10px 0 10px 0\", top: \"56px\", bottom: \"80px\"*/}} fluid>\n        {modeBox}\n    </Container>:<Container><Row>Project wird geladen...</Row></Container>}\n    </>;\n}\nfunction ZettelBox(props){\n    const [splitView, setSplitView] = useState(false);\n    const [splitViewURL, setSplitViewURL] = useState(\"\");\n    const setRessourceView = url => {\n        if(!splitView){setSplitView(true)}\n        setSplitViewURL(url)\n    }\n    return <>\n    <ImportZettel show={props.showImport} project={props.project} onReplay={e=>{\n            if(e){props.updateSections()};\n            props.setShowImport(false);\n        }} />\n    <Container fluid>\n        <Row>\n            <Col>\n                <Stack gap={5}>\n                    {props.filterLst.map(sId=><SectionCard setRessourceView={url=>{setRessourceView(url)}} project={props.project} sId={sId} key={sId} />)}\n                </Stack>\n            </Col>\n            {splitView?<Col>\n            <iframe src={splitViewURL} style={{position: \"fixed\", top:\"0px\", left: \"50%\", height: \"100%\", width: \"50%\"}}></iframe>\n            <FontAwesomeIcon icon={faTimesCircle} style={{color: \"var(--bs-danger)\", fontSize:\"24px\", zIndex:\"99999999\", position: \"fixed\", top: \"80px\", right: \"30px\"}} onClick={()=>{setSplitView(false)}} />\n            </Col>:null}\n        </Row>\n    </Container>\n    {<MenuLeft setLimitFilterResults={v=>{props.setLimitFilterResults(v)}} project={props.project} filterTags={props.filterTags} setFilterTags={newTags=>{props.setFilterTags(newTags)}} tagLst={props.tagLst} show={props.showMenuLeft} onHide={()=>{props.setShowMenuLeft(false)}} updateSections={()=>{props.updateSections()}} />}\n    </>;\n}\nfunction MenuLeft(props){\n    const [activeTabKey, setActiveTabKey] = useState(\"filter\");\n    const [tags, setTags] = useState([]);\n    const [renameId, setRenameId] = useState(0);\n    const [renameName, setRenameName] = useState(\"\");\n\n    useEffect(()=>{\n        if(props.show){loadTags()}\n    }, [props.show]);\n    const loadTags = async ()=>{\n        const allTags = await arachne.tags.get({project_id: props.project.id});\n        let enhancedTags = []\n        for(let tag of allTags){\n            const tagCount = await arachne.tag_lnks.get({tag_id: tag.id}, {count: true});\n            tag.sections = tagCount[0].count;\n            enhancedTags.push(tag);\n        }\n        setTags(enhancedTags);\n    };\n    const deleteTag = async tag=>{\n        if(window.confirm(`Soll das Schlagwort '${tag.name}' wirklich gelöscht werden? Es wird aus allen Stellen entfernt!`)){\n            const oldTagLnks = await arachne.tag_lnks.get({tag_id: tag.id}, {select: [\"id\"]});\n            await arachne.tag_lnks.delete(oldTagLnks.map(t=>t.id));\n            await arachne.tags.delete(tag.id);\n            await loadTags();\n        }\n    };\n    return <Offcanvas show={props.show} backdrop={false} scroll={true} onHide={()=>{props.onHide()}}>\n    <Offcanvas.Header closeButton>\n      <Offcanvas.Title></Offcanvas.Title>\n    </Offcanvas.Header>\n    <Offcanvas.Body>\n        <Message show={renameId>0?true:false} title=\"Projekt umbenennen\" msg=\"Geben Sie einen neuen Namen für das Schlagwort ein:\" input={renameName} onReplay={async e=>{\n            const tagNames = tags.map(t=>t.name.toLowerCase());\n            if(e!=-1&&e!=\"\"){\n                if(tagNames.includes(e.toLowerCase())){\n                    alert(`Der Name '${e}' wird bereits verwendet!`)\n                }else{\n                    await arachne.tags.save({id: renameId, name: e});\n                    await loadTags();\n                }\n            };\n            setRenameId(0);\n        }} />\n        <Tabs defaultActiveKey=\"filter\" className=\"mb-3\" activeKey={activeTabKey} onSelect={k=>{setActiveTabKey(k)}}>\n            <Tab eventKey=\"filter\" title=\"Filter\">\n                <Container>\n                    <Row className=\"mb-3\"><Col><FilterBox filterTags={props.filterTags} setFilterTags={newTags=>{props.setFilterTags(newTags)}} project={props.project} /></Col></Row>\n                    <Row className=\"mb-4\"><Col></Col><Col><Button style={{width: \"100%\"}} onClick={()=>{props.updateSections()}}>Zettel filtern</Button></Col></Row>\n                </Container>\n            </Tab>\n            <Tab eventKey=\"tags\" title=\"Schlagworte\">\n                <Table>\n                    <tbody>\n                        {tags.map(t=><tr key={t.id}>\n                            <td><Form.Control\n                                style={{display: \"inline\"}}\n                                size=\"sm\"\n                                type=\"color\"\n                                id=\"exampleColorInput\"\n                                defaultValue={t.color}\n                                title=\"Choose your color\"\n                                onChange={async e=>{await arachne.tags.save({id: t.id, color: e.target.value});await loadTags()}}\n                            /></td>\n                            <td><b style={{marginLeft: \"10px\", color: t.color, cursor: \"pointer\"}} onClick={()=>{props.setFilterTags([t]);setActiveTabKey(\"filter\")}}>{t.name}</b></td>\n                            <td>{t.sections}</td>\n                            <td><FontAwesomeIcon icon={faPenToSquare} style={{cursor: \"pointer\", color: \"var(--bs-primary)\"}} onClick={()=>{setRenameName(t.name);setRenameId(t.id)}} /></td>\n                            <td><FontAwesomeIcon icon={faTrashCan} style={{cursor: \"pointer\", color: \"var(--bs-primary)\"}} onClick={()=>{deleteTag(t)}} /></td>\n                        </tr>)}\n                    </tbody>\n                </Table>\n            </Tab>\n        </Tabs>\n    </Offcanvas.Body>\n  </Offcanvas>;\n}\nfunction SectionCard(props){\n    const [ressources, setRessources] = useState([]);\n    const [showComment, setShowComment] = useState(false);\n    const [comment, setComment] = useState(\"\");\n    const [img, setImg] = useState(null);\n    const [reference, setReference] = useState(\"\");\n    const [text, setText] = useState(\"\");\n    const [verso, setVerso] = useState(false);\n    const [tags, setTags] = useState([]);\n    const [unusedTags, setUnusedTags] = useState([]);\n    const [section, setSection] = useState({});\n    const [isVisible, setIsVisible] = useState(false);\n\n    const refImg = useRef();\n    const centerSection = () =>{document.getElementById(\"s_\"+props.sId).scrollIntoView({block: \"center\"})};\n    useIntersectionObserver({\n      target: refImg,\n      onIntersect: ([{ isIntersecting }], observerElement) => {\n        if (isIntersecting) {\n          setIsVisible(true);\n          observerElement.unobserve(refImg.current);\n        }\n      }\n    });\n    useEffect(()=>{\n        if(isVisible){\n            loadSection();\n            loadTags();\n        }else{\n            setImg(null);\n            setTags([]);\n        }\n    },[isVisible]);\n    useEffect(()=>{if(isVisible){setImg(\"http://localhost:8080\"+section.img+`${verso?\"v\":\"\"}.jpg`)}}, [verso]);\n    const loadSection = async () =>{\n        const newSection = await arachne.sections.get({id: props.sId});\n        setImg(\"http://localhost:8080\"+newSection[0].img+`${verso?\"v\":\"\"}.jpg`);\n        setReference(newSection[0].ref);\n        setText(newSection[0].text);\n        setComment(newSection[0].comment);\n        if(newSection[0].comment!=null&&newSection[0].comment!=\"\"){setShowComment(true)}\n        setSection(newSection[0]);\n        // load ressources\n        setRessources(await arachne.edition.get({work_id: newSection[0].work_id}, {select: [\"id\", \"label\", \"url\"]}));\n    };\n    const loadTags =  async () =>{\n        let cAllTags = await arachne.tags.get({project_id: props.project.id});\n        const cTagLnks = await arachne.tag_lnks.get({section_id: props.sId});\n        let newTags = [];\n        for(const cTagLnk of cTagLnks){\n            const newTagIndex = cAllTags.findIndex(t=>t.id===cTagLnk.tag_id);\n            if(newTagIndex===-1){throw \"ERROR! CANNOT FIND TAG INDEX!\"}\n            else{\n                newTags.push(cAllTags[newTagIndex]);\n                cAllTags.splice(newTagIndex,1);\n            }\n        }\n        setUnusedTags(cAllTags);\n        setTags(newTags);\n    };\n    const openZettelDB = () =>{\n        localStorage.setItem(\"searchBox_zettel\",`[[{\"id\":0,\"c\":\"id\",\"o\":\"=\",\"v\":\"${section.zettel_id}\"}],1,[\"id\"]]`);\n        window.open(\"http://localhost:8080/?site=zettel\");\n    }\n    return <Card id={\"s_\"+props.sId} style={{ width: '80%', maxWidth: \"600px\", margin: \"auto\" }}>\n        <Card.Img ref={refImg} style={{aspectRatio: \"10/7\"}} variant=\"top\" src={img} />\n        <Card.Body>\n            <div style={{position: \"absolute\", top:\"5px\", left: \"10px\", right: \"10px\", opacity: \"0.5\"}}><a onClick={()=>{setVerso(!verso)}} title=\"Zettel drehen\"><FontAwesomeIcon icon={faRotate} /></a>{section.zettel_id>0?<a onClick={()=>{openZettelDB()}} style={{float: \"right\"}} title=\"Zettel bearbeiten\"><FontAwesomeIcon icon={faPenToSquare} /></a>:null}</div>\n            <Row className=\"mb-2\"><Col><Form.Control placeholder=\"Zitiertitel...\" onFocus={()=>{centerSection()}} size=\"sm\" type=\"text\" value={reference?reference:\"\"} onChange={e=>{setReference(e.target.value)}} onBlur={async e=>{await arachne.sections.save({id: props.sId, ref: e.target.value})}} /></Col><Col style={{textAlign: \"right\"}} xs={4}><RessourcesButtons setRessourceView={url=>{props.setRessourceView(url)}} ressources={ressources} /></Col></Row>\n        \n            <Form.Control placeholder=\"Text der Stelle...\" onFocus={()=>{centerSection()}} as=\"textarea\" rows={3} style={{fontSize: \"95%\"}} value={text?text:\"\"} onChange={e=>{setText(e.target.value)}} onBlur={async e=>{await arachne.sections.save({id: props.sId, text: e.target.value})}} />\n            {showComment?<div><Form.Control className=\"mt-2\" placeholder=\"Schreiben Sie einen Kommentar...\" onFocus={()=>{centerSection()}} as=\"textarea\" rows={3} style={{fontSize: \"95%\"}} value={comment?comment:\"\"} onChange={e=>{setComment(e.target.value)}} onBlur={async e=>{await arachne.sections.save({id: props.sId, comment: e.target.value})}} /></div>:<div style={{textAlign: \"right\"}}><a style={{fontSize: \"90%\"}} className=\"link-secondary\" onClick={()=>{setShowComment(true)}}>Kommentar hinzufügen</a></div>}\n            <TagBox isVisible={isVisible} loadTags={async ()=>{await loadTags()}} tags={tags} project={props.project} s={section} unusedTags={unusedTags} centerSection={()=>{centerSection()}} />\n        </Card.Body>\n    </Card>;\n}\nfunction RessourcesButtons(props){\n    const [button, setButton] = useState(null);\n    const [selected, setSelected] = useState(null);\n    const openRessource = (url) => {\n        if(getSetting(\"openExternal\")){window.open(url)}\n        else{props.setRessourceView(url)}\n    }\n    useEffect(()=>{\n        if(props.ressources.length===0){setButton(null)}\n        else if(props.ressources.length===1){setButton(<Button tabIndex=\"-1\" size=\"sm\" variant=\"outline-secondary\" style={{width: \"100%\"}} onClick={()=>{openRessource(props.ressources[0].url===null||props.ressources[0].url===\"\"?\"http://localhost:8080/static/argos/index.html?site=edition&id=\"+props.ressources[0].id:props.ressources[0].url)}}>{props.ressources[0].label}</Button>)}\n        else{\n            setSelected(props.ressources[0]);\n        }\n    }, [props.ressources]);\n    useEffect(()=>{\n        if(selected!=null){\n            setButton(<Dropdown as={ButtonGroup}>\n                <Button size=\"sm\" variant=\"outline-secondary\" style={{width: \"100%\"}} onClick={()=>{openRessource(selected.url===null||selected.url===\"\"?\"http://localhost:8080/static/argos/index.html?site=edition&id=\"+selected.id:selected.url)}}>{selected.label}</Button>\n                <Dropdown.Toggle split size=\"sm\" variant=\"secondary\" id=\"dropdown-split-basic\" />\n                <Dropdown.Menu>\n                    {props.ressources.map(r=><Dropdown.Item key={r.id} onClick={()=>{setSelected(r)}}>{r.label}</Dropdown.Item>)}\n                </Dropdown.Menu>\n            </Dropdown>);\n        }\n    }, [selected])\n    return button;\n}\nfunction FilterBox(props){\n    const [inputMode, setInputMode] = useState(0); // 0 = normal; 1 = remove; 2 = exclude\n    useEffect(()=>{\n    },[props.filterTags]);\n    const removeTag = t => {props.setFilterTags(props.filterTags.filter(ft=>ft.id!==t.id))}\n    const addTag = async tName => {\n        let newTags = structuredClone(props.filterTags); // deep copy\n        const newTag = await arachne.tags.get({project_id: props.project.id, name: tName});\n        if(inputMode===2){newTag[0].exclude=true}\n        newTags.push(newTag[0])\n        props.setFilterTags(newTags);\n    }\n    let borderStyle = \"1px solid #ced4da\"\n    let backgroundColor = null\n    if(inputMode===1){\n        borderStyle = \"1px solid var(--bs-yellow)\"\n        backgroundColor = \"#ffecb1\"\n    }else if(inputMode===2){\n        borderStyle = \"1px solid var(--bs-teal)\"\n        backgroundColor = \"#e2f7ed\"\n    }\n    return <div className=\"mt-2\" id=\"filter_box\" style={{border: borderStyle, backgroundColor: backgroundColor,padding: \"2px 5px\", display: \"flex\", alignContent: \"flex-start\", alignItems: \"flex-start\", flexWrap: \"wrap\", minHeight: \"220px\", borderRadius: \"0.25rem\", fontSize: \"100%\"}} onClick={()=>{\n        let tb = document.getElementById(\"filter_box\");\n        tb.children[tb.children.length-1].children[0].focus()\n        }}>\n            {props.filterTags.map(t=><FilterTag key={t.id} t={t} removeTag={t=>{removeTag(t)}} />)}\n            <FilterBoxInput inputMode={inputMode} setInputMode={v=>{setInputMode(v)}} tags={props.filterTags} addTag={newTag=>{addTag(newTag)}} removeTag={t=>{removeTag(t)}} project={props.project} />\n    </div>;\n}\nfunction TagBox(props){\n    const [inputMode, setInputMode] = useState(true);\n    return <div className=\"mt-2\" id={\"tagBox_\"+props.s.id} style={{border: inputMode?\"1px solid #ced4da\":\"1px solid var(--bs-yellow)\", backgroundColor: inputMode?null:\"#ffecb1\",padding: \"2px 5px\", display: \"flex\", alignItems: \"flex-start\", flexWrap: \"wrap\", minHeight: \"110px\", borderRadius: \"0.25rem\", fontSize: \"100%\"}} onClick={()=>{\n        let tb = document.getElementById(\"tagBox_\"+props.s.id);\n        tb.children[tb.children.length-2].focus()\n        }}>\n        {props.isVisible&&props.tags.map(t=><Tag key={t.id} t={t} sectionId={props.s.id} loadTags={async ()=>{await props.loadTags()}} />)}\n        <TagBoxInput inputMode={inputMode} setInputMode={v=>{setInputMode(!inputMode)}} project={props.project} tags={props.tags} loadTags={async ()=>{await props.loadTags()}} sectionId={props.s.id} centerSection={()=>{props.centerSection()}} />\n    </div>;\n}\nfunction FilterBoxInput(props){\n    const [inputValue, setInputValue] = useState(\"\");\n    const [acTags, setACTags] = useState([]);\n    const [currentFocus, setCurrentFocus] = useState(-1);\n    const loadACTags = async ()=>{\n        if(props.inputMode===0||props.inputMode===2){\n            const currentTags = props.tags.map(t=>t.name);\n            const newACTags = await arachne.tags.get({project_id: props.project.id});\n            let currentACTags = newACTags.filter(t=>!currentTags.includes(t.name));\n            if(inputValue===\"\"){setACTags(currentACTags)}\n            else{setACTags(currentACTags.filter(t=>t.name.toLowerCase().indexOf(inputValue.toLowerCase())>-1))}\n        }else{\n            if(inputValue===\"\"){setACTags(props.tags)}\n            else{setACTags(props.tags.filter(t=>t.name.toLowerCase().indexOf(inputValue.toLowerCase())>-1))}\n        }\n        setCurrentFocus(-1);\n    };\n    useEffect(()=>{\n        if(acTags.length>0||inputValue!==\"\"){loadACTags()}\n    }, [props.tags,inputValue,props.inputMode]);\n    const onKeyDown = e=>{\n        if(e.keyCode===9&&acTags.length===1){\n            e.preventDefault();\n            createNewTag(acTags[0].name);\n        }else if(e.keyCode===27){ // esc\n            setACTags([]);\n        }else if(e.keyCode===190&&e.target.value===\"\"){ // .\n            e.preventDefault();\n            if(props.inputMode!==1){props.setInputMode(1)}\n            else{props.setInputMode(0)}\n        }else if(e.keyCode===173&&e.target.value===\"\"){ // -\n            e.preventDefault();\n            if(props.inputMode!==2){props.setInputMode(2)}\n            else{props.setInputMode(0)}\n        }else if (e.keyCode===40) { //down\n            if(currentFocus+1 >= acTags.length){setCurrentFocus(0)}\n            else{setCurrentFocus(currentFocus+1)}\n        } else if (e.keyCode===38) { //up\n            if (currentFocus-1 < 0){setCurrentFocus(acTags.length - 1)}\n            else{setCurrentFocus(currentFocus-1)}\n        } else if (e.keyCode===13) {\n            e.preventDefault();\n            if (currentFocus > -1) {\n                createNewTag(acTags[currentFocus].name);\n            } else if(e.target.value!==\"\") {\n                createNewTag(e.target.value);\n            }\n        }\n    };\n    const createNewTag = async (newTag, exitInput=false) =>{\n        if(props.inputMode===0||props.inputMode===2){ // save new tag\n            if(!props.tags.find(t=>t.name.toLowerCase()===newTag.toLowerCase())){\n                props.addTag(newTag)\n                if(props.inputMode===2){props.setInputMode(0)}\n            }\n            \n        }else{ // remove existing tag\n            const existingTag = props.tags.find(t=>t.name.toLowerCase()===newTag.toLowerCase());\n            if(existingTag){\n                props.removeTag(existingTag);\n                props.setInputMode(0);\n            }\n        }\n        setInputValue(\"\");\n        if(exitInput){setACTags([])}\n        else{loadACTags()}\n    };\n    let borderStyle = \"#ced4da\"\n    let backgroundColor = null\n    if(props.inputMode===1){\n        borderStyle = \"var(--bs-yellow)\"\n        backgroundColor = \"#ffecb1\"\n    }else if(props.inputMode===2){\n        borderStyle = \"var(--bs-teal)\"\n        backgroundColor = \"#e2f7ed\"\n    }\n    return <div style={{width:\"300px\", position: \"relative\", display: \"inline-block\"}}>\n        <input value={inputValue} onChange={e=>{setInputValue(e.target.value)}} onFocus={()=>{loadACTags()}} onBlur={()=>{setInputValue(\"\");setACTags([]);if(props.inputMode>0){props.setInputMode(0)}}} type=\"text\" style={{background: \"none\", outline: \"none\", border: \"none\", margin: \"1px 2px\", padding: \"4px 10px\"}} onKeyDown={e=>{onKeyDown(e)}} />\n    {acTags.length>0&&<div className=\"autocomplete-items\" style={{borderColor: borderStyle}}>\n        {acTags.map((t,i)=><div key={t.id} style={{backgroundColor: backgroundColor, borderColor: borderStyle}} onMouseDown={async ()=>{await createNewTag(t.name, true)}} className={i===currentFocus?\"autocomplete-active\":\"\"}>{t.name}</div>)}\n    </div>}\n    </div>;\n}\nfunction TagBoxInput(props){\n    const [inputValue, setInputValue] = useState(\"\");\n    const [acTags, setACTags] = useState([]);\n    const [currentFocus, setCurrentFocus] = useState(-1);\n    const loadACTags = async ()=>{\n        if(props.inputMode){\n            const currentTags = props.tags.map(t=>t.name);\n            const newACTags = await arachne.tags.get({project_id: props.project.id});\n            let currentACTags = newACTags.filter(t=>!currentTags.includes(t.name));\n            if(inputValue===\"\"){setACTags(currentACTags)}\n            else{setACTags(currentACTags.filter(t=>t.name.toLowerCase().indexOf(inputValue.toLowerCase())>-1))}\n        }else{\n            if(inputValue===\"\"){setACTags(props.tags)}\n            else{setACTags(props.tags.filter(t=>t.name.toLowerCase().indexOf(inputValue.toLowerCase())>-1))}\n        }\n        setCurrentFocus(-1);\n    };\n    useEffect(()=>{\n        if(acTags.length>0||inputValue!==\"\"){loadACTags()}\n    }, [props.tags,inputValue,props.inputMode]);\n    const onKeyDown = e=>{\n        if(e.keyCode===9&&acTags.length===1){\n            e.preventDefault();\n            createNewTag(acTags[0].name);\n        }else if(e.keyCode===27){ // esc\n            setACTags([]);\n        }else if(e.keyCode===190&&e.target.value===\"\"){ // .\n            e.preventDefault();\n            props.setInputMode();\n        }else if(e.keyCode===173&&e.target.value===\"\"){ // -\n            e.preventDefault();\n        }else if (e.keyCode===40) { //down\n            if(currentFocus+1 >= acTags.length){setCurrentFocus(0)}\n            else{setCurrentFocus(currentFocus+1)}\n        } else if (e.keyCode===38) { //up\n            if (currentFocus-1 < 0){setCurrentFocus(acTags.length - 1)}\n            else{setCurrentFocus(currentFocus-1)}\n        } else if (e.keyCode===13) {\n            e.preventDefault();\n            if (currentFocus > -1) {\n                createNewTag(acTags[currentFocus].name);\n            } else if(e.target.value!==\"\") {\n                createNewTag(e.target.value);\n            }\n        }\n    };\n    const createNewTag = async (newTag, exitInput=false) =>{\n        if(props.inputMode){ // save new tag\n            if(!props.tags.find(t=>t.name.toLowerCase()===newTag.toLowerCase())){\n                const inTags = acTags.find(t=>t.name.toLowerCase()===newTag.toLowerCase());\n                if(inTags){\n                    await arachne.tag_lnks.save({tag_id: inTags.id, section_id: props.sectionId});\n                    await props.loadTags();\n                }else{\n                    const newTagId = await arachne.tags.save({\n                        name: newTag,\n                        color: colorPicker(),\n                        project_id: props.project.id,\n                        user_id: props.project.user_id,\n                        shared_id: props.project.shared_id,\n                    });\n                    await arachne.tag_lnks.save({tag_id: newTagId, section_id: props.sectionId});\n                    await props.loadTags();\n                }\n            }\n            \n        }else{ // remove existing tag\n            const existingTag = props.tags.find(t=>t.name.toLowerCase()===newTag.toLowerCase());\n            if(existingTag){\n                const currentTagLnk = await arachne.tag_lnks.get({tag_id: existingTag.id, section_id: props.sectionId});\n                await arachne.tag_lnks.delete(currentTagLnk[0].id)\n                await props.loadTags();\n                props.setInputMode();\n            }\n        }\n        setInputValue(\"\");\n        if(exitInput){setACTags([])}\n        else{loadACTags()}\n    };\n    return <div style={{width:\"300px\", position: \"relative\", display: \"inline-block\"}}>\n        <input value={inputValue} onChange={e=>{setInputValue(e.target.value)}} onFocus={()=>{loadACTags();props.centerSection()}} onBlur={()=>{setInputValue(\"\");setACTags([]);if(!props.inputMode){props.setInputMode()}}} type=\"text\" style={{background: \"none\", outline: \"none\", border: \"none\", margin: \"1px 2px\", padding: \"4px 10px\"}} onKeyDown={e=>{onKeyDown(e)}} />\n    {acTags.length>0&&<div className=\"autocomplete-items\" style={{borderColor: props.inputMode?null:\"var(--bs-yellow)\"}}>\n        {acTags.map((t,i)=><div key={t.id} style={{backgroundColor: props.inputMode?null:\"#ffecb1\", borderColor: props.inputMode?null:\"var(--bs-yellow)\"}} onMouseDown={async ()=>{await createNewTag(t.name, true)}} className={i===currentFocus?\"autocomplete-active\":\"\"}>{t.name}</div>)}\n    </div>}\n    </div>;\n}\nfunction FilterTag(props){\n    return <div style={{cursor: \"default\", backgroundColor: props.t.exclude?\"rgb(248,248,248)\":props.t.color, fontWeight: \"bold\", color: props.t.exclude?props.t.color:\"rgba(255,255,255, 0.8)\", border: `1px solid ${props.t.color}`, margin: \"1px 2px\", padding: \"3px 15px 3px 18px\", borderRadius: \"18px\"}}>\n        {props.t.name}\n        <FontAwesomeIcon onClick={async e=>{\n            e.stopPropagation();\n            props.removeTag(props.t);\n            }} style={{cursor: \"pointer\", margin: \"4px 0 0 9px\"}} icon={faMinusCircle} />\n    </div>;\n}\nfunction Tag(props){\n    return <div style={{cursor: \"default\", backgroundColor: props.t.color, fontWeight: \"bold\", color: \"rgba(255,255,255, 0.8)\", margin: \"1px 2px\", padding: \"3px 15px 3px 18px\", borderRadius: \"18px\"}}>\n        {props.t.name}\n        <FontAwesomeIcon onClick={async e=>{\n            e.stopPropagation();\n            const cTagLnk = await arachne.tag_lnks.get({tag_id: props.t.id, section_id: props.sectionId}, {select: [\"id\"]});\n            await arachne.tag_lnks.delete(cTagLnk[0].id);\n            await props.loadTags();\n            }} style={{cursor: \"pointer\", margin: \"4px 0 0 9px\"}} icon={faMinusCircle} />\n    </div>;\n}\nfunction ImportZettel(props){\n    const [mode, setMode] = useState(\"lemma\")\n    const [status, setStatus] = useState(null);\n    const [lemma, setLemma] =useState(\"\");\n    const [SF, setSF] = useState(null);\n    const [lemmaId, setLemmaId] = useState(null);\n    const [lemmaZettelCount, setLemmaZettelCount] = useState(0);\n    const [zettelZettelCount, setZettelZettelCount] = useState(0);\n    const [searchFields, setSearchFields] = useState([]);\n    const [nextID, setNextID] = useState(1);\n    useEffect(()=>{\n        const fetchData = async () => {\n            if(lemmaId){\n                const count = await arachne.zettel.get({lemma_id: lemmaId}, {count: true});\n                setLemmaZettelCount(count[0].count);\n            }else{setLemmaZettelCount(0)}\n        };\n        fetchData();\n    }, [lemmaId]);\n\n    const searchOptions = [\n        [\"lemma\", \"Wort\"],\n        [\"type\", \"Typ\"],\n        [\"id\", \"ID\"],\n        [\"ac_web\", \"Werk\"],\n        [\"date_type\", \"Datum-Typ\"],\n        [\"date_own\", \"eigenes Sortierdatum\"],\n        [\"date_own_display\", \"eigenes Anzeigedatum\"],\n    ];\n    const removeSearchFields = id => { setSearchFields(searchFields.filter(s => s.id!==id)) };\n    const addSearchFields = () => {\n        let nSearchFields = searchFields;\n        nSearchFields.push({\n            id: nextID,\n            c: searchOptions[0][0],\n            o: \"=\",\n            v: \"\"\n        });\n        setNextID(nextID+1);\n        setSearchFields(nSearchFields);\n    };\n    const sendQuery = async () => {\n        let exportSF = [];\n        for(const sF of searchFields){\n            if(sF.v !== \"\"){\n                exportSF.push({\n                    c: sF.c,\n                    o: sF.o,\n                    v: sF.v\n                });\n            }\n        }\n\n        if(exportSF.length > 0){\n            setSF(exportSF);\n            const count = await arachne.zettel.search(exportSF, {count:true});\n            setZettelZettelCount(count[0].count);\n        } else {setZettelZettelCount(0)}\n    };\n    let cSF = [];\n    for(const sF of searchFields){\n        cSF.push(<SearchInput searchOptions={searchOptions} removeSearchFields={id => {removeSearchFields(id)}} itemId={sF.id} key={sF.id} c={sF.c} o={sF.o} v={sF.v} clickButton={sendQuery} changeItem={item=>{\n            setSearchFields(searchFields.map(s=>{if(s.id===item.id){return item}else{return s}}));\n        }} />);\n    }\n\n    return <Modal show={props.show} size=\"lg\" onHide={()=>{props.onReplay(false)}} backdrop=\"static\">\n        <Modal.Header closeButton>\n            <Modal.Title>Zettel importieren</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n            <Container>\n                <Accordion defaultActiveKey=\"0\">\n                    <Accordion.Item eventKey=\"0\" onClick={()=>{setMode(\"lemma\")}}>\n                        <Accordion.Header>Wort-Liste</Accordion.Header>\n                        <Accordion.Body>\n                        <AutoComplete style={{width: \"100%\"}} onChange={(value, id)=>{setLemmaId(id);setLemma(value)}} value={lemma} tbl=\"lemma\" searchCol=\"lemma\" returnCol=\"lemma_ac\" />\n                        {lemmaZettelCount>0?<Badge pill bg=\"success\" className=\"mt-2\">{lemmaZettelCount} Zettel gefunden.</Badge>:null}\n                        </Accordion.Body>\n                    </Accordion.Item>\n                    <Accordion.Item eventKey=\"1\" onClick={()=>{setMode(\"zettel\")}}>\n                        <Accordion.Header>Zettel-Datenbank</Accordion.Header>\n                        <Accordion.Body>\n                        <div className=\"searchBox d-flex flex-wrap\">\n                            {cSF}\n                            <FontAwesomeIcon color=\"LightGray\" icon={faPlusCircle} style={{color: \"var(--mainColor)\", position: \"relative\", top: \"6px\", fontSize: \"25px\", cursor: \"pointer\"}}  onClick={() => {addSearchFields()}}\n                            />\n                        </div>\n                        <div style={{textAlign: \"right\"}}>{zettelZettelCount>0?<Badge pill bg=\"success\" className=\"mt-2\" style={{marginRight: \"15px\"}}>{zettelZettelCount} Zettel gefunden.</Badge>:null}<Button variant=\"light\" onClick={()=>{sendQuery()}}>Suchen</Button></div>\n                        </Accordion.Body>\n                    </Accordion.Item>\n                    </Accordion>\n            </Container>\n        </Modal.Body>\n        <Modal.Footer>\n            <Button variant=\"secondary\" onClick={()=>{props.onReplay(false)}}>Abbrechen</Button>\n            <Button variant=\"primary\" onClick={async ()=>{\n                setStatus(<Spinner style={{marginLeft: \"10px\"}} animation=\"border\" size=\"sm\" />);\n                const select = [\"id\", \"ac_web\", \"img_path\", \"date_sort\", \"txt\", \"type\", \"work_id\"];\n                let zettelLst = [];\n                if(mode===\"lemma\"){zettelLst=await arachne.zettel.get({lemma_id: lemmaId}, {select: select})}\n                else{zettelLst=await arachne.zettel.search(SF, {select:select})}\n                let tagObj = {};\n                const currentTags = await arachne.tags.get({project_id: props.project.id});\n                currentTags.forEach(t=>{tagObj[t.name]=t.id});\n                for(const z of zettelLst){\n                    const cmnts = await arachne.comment.get({zettel_id: z.id}, {select: [\"comment\", \"user\"]});\n                    const newSecId = await arachne.sections.save({\n                        zettel_id: z.id,\n                        project_id: props.project.id,\n                        ref: z.ac_web,\n                        text: z.txt,\n                        comment: cmnts.length>0?cmnts.map(c=>`${c.user}:\\n${c.comment}\\n`).join(\"\\n\\n\"):null,\n                        date_sort: z.date_sort,\n                        img: z.img_path,\n                        user_id: props.project.user_id,\n                        shared_id: props.project.shared_id,\n                        work_id: z.work_id,\n                    });\n                    let typeTag = null;\n                    if(z.type===1){typeTag=\"verzettelt\"}\n                    else if(z.type===2){typeTag=\"Exzerpt\"}\n                    else if(z.type===3){typeTag=\"Index\"}\n                    else if(z.type===6){typeTag=\"Index (unkl. Werk)\"}\n                    else if(z.type===7){typeTag=\"Notiz\"}\n                    if(typeTag){\n                        if(!Object.keys(tagObj).includes(typeTag)){\n                            const newTagId = await arachne.tags.save({\n                                name: typeTag,\n                                color: colorPicker(),\n                                project_id: props.project.id,\n                                user_id: props.project.user_id,\n                                shared_id: props.project.shared_id,\n                            });\n                            tagObj[typeTag] = newTagId;\n                        }\n                        await arachne.tag_lnks.save({\n                            tag_id: tagObj[typeTag],\n                            section_id: newSecId,\n                            user_id: props.project.user_id,\n                            shared_id: props.project.shared_id,\n                        });\n                    }\n                }\n                setStatus(null);\n                props.onReplay(true);\n            }} disabled={(mode===\"lemma\"&&lemmaZettelCount>0)||(mode===\"zettel\"&&zettelZettelCount>0)?false:true}>Zettel laden{status}</Button>\n        </Modal.Footer>\n    </Modal>;\n}\nfunction colorPicker(){\n    const colors = [\n        \"#023FA5\",\"#7D87A5\",\"#BEC1D4\",\"#D6BCC0\",\"#BB7784\",\"#8E063B\",\n        \"#4A6FE3\",\"#8595E1\",\"#B5BBE3\",\"#E6AFB9\",\"#E07B91\",\"#D33F6A\",\n        \"#11C638\",\"#8DD593\",\"#C6DEC7\",\"#EAD3C6\",\"#F0B98D\",\"#EF9708\",\n        \"#0FCFC0\",\"#9CDED6\",\"#D5EAE7\",\"#F3E1EB\",\"#F6C4E1\",\"#F79CD4\",\n    ];\n    return colors[Math.floor(Math.random() * colors.length)];\n}\nexport { Editor }","import { Alert, Container } from \"react-bootstrap\";\n\nfunction  ChangeLog(){\n    return <Container>\n        {/*<Alert variant=\"info\">\n            <Alert.Heading>Beta X.Y</Alert.Heading>\n            <i>X. Y 2022</i>\n            <p>TEXT</p>\n        </Alert>*/}\n        <Alert variant=\"info\">\n            <Alert.Heading>Beta 1.1</Alert.Heading>\n            <i>31. März 2022</i>\n            <p>Korrektur des Seitenverhältnisses (auch über \"Ressource bearbeiten\" veränderbar).</p>\n        </Alert>\n        <Alert variant=\"secondary\">\n            <Alert.Heading>Beta 1.0</Alert.Heading>\n            <i>26. Februar 2022</i>\n            <p>Erste Version des neuen Scan-Viewers ist online.</p>\n        </Alert>\n    </Container>;\n}\n\nexport { ChangeLog };","import { useEffect, useState } from \"react\";\nimport { Col, Container, Form, Row } from \"react-bootstrap\";\nimport { getSettings, setSetting } from \"./mainContent.js\";\n\nfunction Settings(props){\n    const settings = getSettings();\n    const [openExternal, setOpenExternal] = useState(settings.openExternal) // open ressource in external window\n    useEffect(()=>{setSetting(\"openExternal\", openExternal)}, [openExternal]);\n    return <Container>\n        <h1>Einstellungen</h1>\n        <Row><Col>Öffnen der Ressourcen:</Col><Col>\n        <Form>\n            <Form.Check type=\"radio\" name=\"ressource\" label=\"extern\" checked={openExternal} onChange={()=>{setOpenExternal(true)}} />\n            <Form.Check type=\"radio\" name=\"ressource\" label=\"Seite-an-Seite\" checked={!openExternal} onChange={()=>{setOpenExternal(false)}} />\n        </Form>\n        </Col></Row>\n    </Container>\n}\nexport { Settings }","import { useState } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faSignOutAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport { Container, Navbar, Nav, NavDropdown } from \"react-bootstrap\";\n\nimport { Overview } from \"./overview.js\";\nimport { Editor } from \"./editor.js\";\nimport { ChangeLog } from \"./changelog.js\";\nimport { Settings } from \"./settings.js\";\n\nfunction arachneTbls(){\n    return [\"project\", \"article\", \"comment\", \"user\", \"lemma\", \"zettel\", \"tags\", \"tag_lnks\", \"sections\", \"edition\"];\n}\nfunction getSettings(){\n    let settings = JSON.parse(localStorage.getItem(\"editor_settings\"));\n    if(settings===null){settings = {}}\n    if(!settings.hasOwnProperty(\"projectSort\")){settings.projectSort = \"name\"}\n    if(!settings.hasOwnProperty(\"openExternal\")){settings.openExternal=false}\n    return settings;\n}\nfunction getSetting(name){\n    const settings = getSettings();\n    return settings[name];\n}\nfunction setSetting(key, value){\n    let settings = getSettings()\n    settings[key] = value;\n    localStorage.setItem(\"editor_settings\", JSON.stringify(settings))\n}\n\nfunction MainBody(props){\n    let main = null;\n    switch(props.res){\n        case null:\n            main = <Overview loadMain={(...params)=>{props.loadMain(...params)}} />;\n            break;\n        case \"editor\":\n            main = <Editor loadMain={(...params)=>{props.loadMain(...params)}} resId={props.resId} />;\n            break;\n        case \"changelog\":\n            main = <ChangeLog />;\n            break;\n        case \"settings\":\n            main = <Settings />;\n            break;\n        default:\n            main = <div>Unbekannter Menü-Punkt: \"{props.res}\"</div>;\n    }\n    return <>\n        {main}\n        \n    </>;\n}\nfunction MainNavBar(props){\n    const [editions, setEditions] = useState([]);\n    const [editionTxt, setEditionTxt] = useState(\"zuletzte geöffnet\");\n    /*useEffect(async ()=>{\n        const newEditions = getEditions();\n        setEditions(newEditions.map(e=>{return <NavDropdown.Item key={e.id} onClick={ev=>{storeEdition(e.id, e.label, e.opus);props.loadMain(ev,\"edition\", e.id)}}>{e.label}{e.opus?` (${e.opus.substring(0,20)+(e.opus.length>20?\"...\":\"\")})`:null}</NavDropdown.Item>;}));\n        if(props.res===\"edition\"){setEditionTxt(newEditions[0].label+(newEditions[0].opus?` (${newEditions[0].opus.substring(0,20)+(newEditions[0].opus.length>20?\"...\":\"\")})`:null))}\n        else{setEditionTxt(\"zuletzte geöffnet\")}\n    }, [props.res, props.resId]);*/\n    return <Navbar bg=\"dark\" variant=\"dark\" fixed=\"top\">\n        <Container fluid>\n            <Navbar.Brand style={{cursor: \"pointer\"}} onClick={e=>{props.loadMain(e, null)}}>Editor</Navbar.Brand>\n            <Navbar.Toggle />\n            <Navbar.Collapse className=\"justify-content-end\">\n                <Nav>\n                    <NavDropdown title={editionTxt}>{editions}\n                    </NavDropdown>\n                    <NavDropdown title=\"Einstellungen\">\n                    <NavDropdown.Item onClick={e=>{props.loadMain(e,\"settings\")}}>Konto</NavDropdown.Item>\n                        <NavDropdown.Item onClick={e=>{props.loadMain(e,\"changelog\")}}>Änderungen</NavDropdown.Item>\n                    </NavDropdown>\n                    <Nav.Link>\n                        <FontAwesomeIcon icon={faSignOutAlt} onClick={e => {props.loadMain(e, \"logout\")}} title=\"abmelden\" />\n                    </Nav.Link>\n                </Nav>\n            </Navbar.Collapse>\n        </Container>\n</Navbar>;\n}\nexport { arachneTbls, MainBody, MainNavBar, getSettings, getSetting, setSetting };"],"names":["Overview","props","useState","getSettings","projectSort","sortName","setSortName","renameId","setRenameId","shareId","setShareId","renameName","setRenameName","activeProjects","setActiveProjects","archiveProjects","setArchiveProjects","sharedProjects","setSharedProjects","userLst","setUserLst","useEffect","refreshPage","fetchData","arachne","order","users","map","u","id","first_name","last_name","user_id","status","shared_id","deleteProject","window","confirm","project_id","articleLst","length","a","zettelLst","z","copyProject","oldProjectId","oldProject","name","newProjectId","zettelLnk","oldArticleId","newArticleId","article_id","shareProject","newUserId","projectId","select","oldUserId","show","title","msg","input","onReplay","e","dropDown","Container","Tabs","defaultActiveKey","Tab","eventKey","className","style","width","Table","hover","p","editMenu","ProjectRow","openProject","loadMain","i","disabled","NavBarBottom","showEdit","setShowEdit","shared","setShared","isShared","setIsShared","getUserName","userName","height","onMouseEnter","onMouseLeave","cursor","onClick","u_date","substring","c_date","Dropdown","display","size","variant","showSort","setShowSort","ToolKitItems","Navbar","fixed","bg","setSetting","fluid","menuItems","createUtilityClassName","utilityValues","breakpoints","DEFAULT_BREAKPOINTS","classes","Object","entries","forEach","utilName","utilValue","brkPoint","bpValue","infix","push","Stack","React","ref","as","Component","bsPrefix","direction","gap","useBootstrapPrefix","useBootstrapBreakpoints","_jsx","classNames","displayName","Badge","pill","text","prefix","defaultProps","OutlineBox","dragObjectId","setDragObjectId","devider","borderTop","margin","Row","Col","xs","textAlign","paddingBottom","marginBottom","borderBottom","articlesLst","depth","marginLeft","onDrop","dropArticle","parent_id","sort_nr","target","borderColor","onDragOver","preventDefault","onDragLeave","ArticleBox","articles","b","c","collapsed","collapsedArticlesLst","includes","toogleCollapse","displayArticles","find","parseInt","split","displaySections","setDisplaySections","dblClickCallback","el","closest","getElementsByClassName","contentEditable","focus","draggable","onDragStart","tabIndex","onDoubleClick","onKeyDown","keyCode","shiftKey","parentArticle","previousArticles","filter","sort","articleBoxes","document","previousArticleChildren","onBlur","parentElement","innerText","blur","Editor","mode","setMode","project","setProject","setArticles","setArticlesLst","setCollapsedArticlesLst","filterLst","setFilterLst","filterTags","setFilterTags","setLimitFilterResults","showMenuLeft","setShowMenuLeft","showImport","setShowImport","scSetup","updateSections","createNewArticle","useShortcuts","updateArticles","inArticles","returnChildIds","parentId","childArticles","returnLst","newChildLst","concat","resId","newProject","newArticles","newArticle","Math","max","newId","currentArticle","save_old_lst","findIndex","na","save_new_lst","foundSections","s","allTags","tag_id","at","allTagLnks","fs","tags","atl","section_id","exclude","modeBox","ZettelBox","v","newTags","aId","top","Nav","fontSize","textDecoration","marginTop","splitView","setSplitView","splitViewURL","setSplitViewURL","ImportZettel","sId","SectionCard","setRessourceView","url","src","position","left","icon","faTimesCircle","color","zIndex","right","MenuLeft","tagLst","onHide","activeTabKey","setActiveTabKey","setTags","loadTags","enhancedTags","tag","count","tagCount","sections","deleteTag","oldTagLnks","t","Offcanvas","backdrop","scroll","closeButton","tagNames","toLowerCase","alert","activeKey","onSelect","k","FilterBox","Button","Form","type","defaultValue","onChange","value","faPenToSquare","faTrashCan","ressources","setRessources","showComment","setShowComment","comment","setComment","img","setImg","reference","setReference","setText","verso","setVerso","unusedTags","setUnusedTags","section","setSection","isVisible","setIsVisible","refImg","useRef","centerSection","getElementById","scrollIntoView","block","useIntersectionObserver","onIntersect","observerElement","isIntersecting","unobserve","current","loadSection","newSection","work_id","cAllTags","cTagLnks","cTagLnk","newTagIndex","splice","Card","maxWidth","aspectRatio","opacity","faRotate","zettel_id","localStorage","setItem","open","float","placeholder","onFocus","RessourcesButtons","rows","TagBox","button","setButton","selected","setSelected","openRessource","getSetting","label","ButtonGroup","r","inputMode","setInputMode","removeTag","ft","addTag","tName","structuredClone","newTag","borderStyle","backgroundColor","border","padding","alignContent","alignItems","flexWrap","minHeight","borderRadius","tb","children","FilterTag","FilterBoxInput","Tag","sectionId","TagBoxInput","inputValue","setInputValue","acTags","setACTags","currentFocus","setCurrentFocus","loadACTags","currentTags","newACTags","currentACTags","indexOf","createNewTag","exitInput","existingTag","background","outline","onMouseDown","inTags","colorPicker","newTagId","currentTagLnk","fontWeight","stopPropagation","faMinusCircle","setStatus","lemma","setLemma","SF","setSF","lemmaId","setLemmaId","lemmaZettelCount","setLemmaZettelCount","zettelZettelCount","setZettelZettelCount","searchFields","setSearchFields","nextID","setNextID","lemma_id","searchOptions","removeSearchFields","sendQuery","exportSF","sF","o","cSF","itemId","clickButton","changeItem","item","Modal","Accordion","tbl","searchCol","returnCol","faPlusCircle","nSearchFields","addSearchFields","marginRight","Spinner","animation","tagObj","cmnts","ac_web","txt","user","join","date_sort","img_path","newSecId","typeTag","keys","colors","floor","random","ChangeLog","Alert","Settings","settings","openExternal","setOpenExternal","checked","arachneTbls","JSON","parse","getItem","hasOwnProperty","key","stringify","MainBody","main","res","MainNavBar","editions","editionTxt","NavDropdown","faSignOutAlt"],"sourceRoot":""}