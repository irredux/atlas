"use strict";(self.webpackChunkatlas=self.webpackChunkatlas||[]).push([[828],{7828:function(e,t,s){s.r(t),s.d(t,{MainBody:function(){return de},MainNavBar:function(){return ue},arachneTbls:function(){return oe}});var n=s(4483),r=s(3174),a=s(4817),i=s(7022),l=s(9249),c=s(2354),o=s(2469),d=s(184);function u(){return(0,d.jsxs)(i.Z,{children:[(0,d.jsxs)(o.Z,{variant:"info",children:[(0,d.jsx)(o.Z.Heading,{children:"Beta 12.10"}),(0,d.jsx)("i",{children:"4. Mai 2022"}),(0,d.jsxs)("p",{children:["Zettel k\xf6nnen nun aus der Zettel-Datenbank als pdf exportiert werden. Benutzen Sie das Kontextmen\xfc ",(0,d.jsx)(n.G,{icon:r.iV1}),' in der Zettel-Datenbank (rechts unten) und w\xe4hlen Sie "Suchergebnisse exportieren" aus.']})]}),(0,d.jsxs)(o.Z,{variant:"secondary",children:[(0,d.jsx)(o.Z.Heading,{children:"Beta 12.9"}),(0,d.jsx)("i",{children:"29. April 2022"}),(0,d.jsxs)("p",{children:["Kleine Verbesserung in der Darstellung der ",(0,d.jsx)("i",{children:"opera"}),"-Listen."]})]}),(0,d.jsxs)(o.Z,{variant:"secondary",children:[(0,d.jsx)(o.Z.Heading,{children:"Beta 12.8"}),(0,d.jsx)("i",{children:"14. April 2022"}),(0,d.jsx)("p",{children:"Kleine Verbesserungen in Darstellung und Benutzung:"}),(0,d.jsxs)("ul",{children:[(0,d.jsx)("li",{children:'Ressourcen: "Autor/Jahr-Angabe"-Fehler bei Angabe der Serie behoben.'}),(0,d.jsx)("li",{children:"Ressourcen: Bandinhalt-Fehler behoben."}),(0,d.jsx)("li",{children:"Ressourcen: Seitenverh\xe4ltnis der Bilder kann ver\xe4ndert werden."})]}),(0,d.jsxs)("p",{children:["Einige Fehler in den Ressourcen wurden behoben. Ins System aufgenommen ",(0,d.jsx)("i",{children:"(falls Ressourcen zu diesen B\xe4nden in den opera-Listen fehlen, schreiben Sie unbedingt ein Ticket!)"}),":"]}),(0,d.jsxs)("ul",{children:[(0,d.jsx)("li",{children:"MGH Poet. I"}),(0,d.jsx)("li",{children:"MGH Poet. IV (Winterfeld)"})]})]}),(0,d.jsxs)(o.Z,{variant:"secondary",children:[(0,d.jsx)(o.Z.Heading,{children:"Beta 12.7"}),(0,d.jsx)("i",{children:"26. Februar 2022"}),(0,d.jsx)("p",{children:"Kleine Verbesserungen in Darstellung und Benutzung:"}),(0,d.jsxs)("ul",{children:[(0,d.jsx)("li",{children:"\xc4nderungen beim Zettel-Upload: Buchstaben U/V und I/J wurden zusammengefasst."}),(0,d.jsx)("li",{children:"Korrekturen bei der Zitiertitel-Suche der opera-Listen."}),(0,d.jsx)("li",{children:"Korrekturen beim Upload von Scan-Bildern."})]})]}),(0,d.jsxs)(o.Z,{variant:"secondary",children:[(0,d.jsx)(o.Z.Heading,{children:"Beta 12.6"}),(0,d.jsx)("i",{children:"23. Februar 2022"}),(0,d.jsx)("p",{children:"Kleine Verbesserungen in Darstellung und Benutzung:"}),(0,d.jsxs)("ul",{children:[(0,d.jsx)("li",{children:"Suche in opera-Listen funktioniert wieder."}),(0,d.jsx)("li",{children:"Korrektur bei der voreingestellten Suche."}),(0,d.jsx)("li",{children:"Links auf Wiki angepasst."})]})]}),(0,d.jsxs)(o.Z,{variant:"secondary",children:[(0,d.jsx)(o.Z.Heading,{children:"Beta 12.5"}),(0,d.jsx)("i",{children:"18. Februar 2022"}),(0,d.jsx)("p",{children:"Kleine Verbesserungen in Darstellung und Benutzung:"}),(0,d.jsxs)("ul",{children:[(0,d.jsx)("li",{children:'ocr-Funktionen des Servers in Modul "archimedes.py" verschoben.'}),(0,d.jsx)("li",{children:"Darstellung der Detailansicht f\xfcr Ressourcen und Sekund\xe4rliteratur \xfcberarbeitet."}),(0,d.jsx)("li",{children:"Neuladen der Ansicht beim L\xf6schen von Elementen."}),(0,d.jsx)("li",{children:"Opera-Listen werden automatisch neu geladen, wenn die Listen auf dem Server aktualisiert wurden oder wenn Autoren oder Werke erstellt oder gel\xf6scht wurden."}),(0,d.jsx)("li",{children:"Altes Benachrichtigungssystem (StatusBox) entfernt."})]})]}),(0,d.jsxs)(o.Z,{variant:"secondary",children:[(0,d.jsx)(o.Z.Heading,{children:"Beta 12.4"}),(0,d.jsx)("i",{children:"15. Februar 2022"}),(0,d.jsx)("p",{children:"Kleine Verbesserungen in Darstellung und Benutzung:"}),(0,d.jsxs)("ul",{children:[(0,d.jsx)("li",{children:"Gr\xf6sse der abgebildeten W\xf6rter begrenzt auf digitalen und gescannten Zetteln."}),(0,d.jsx)("li",{children:"Wiki-Anleitung f\xfcr das Hochladen der Zettel verlinkt."}),(0,d.jsx)("li",{children:"Zettel-Reihenfolge beim Hochladen stimmt jetzt auch mit Chrome."}),(0,d.jsx)("li",{children:"Veraltete Daten und Links von fr\xfcherer Version entfernt."})]})]}),(0,d.jsxs)(o.Z,{variant:"secondary",children:[(0,d.jsx)(o.Z.Heading,{children:"Beta 12.3"}),(0,d.jsx)("i",{children:"14. Februar 2022"}),(0,d.jsx)("p",{children:"Kleine Verbesserungen in Darstellung und Benutzung:"}),(0,d.jsxs)("ul",{children:[(0,d.jsx)("li",{children:"ocr-Verfahren f\xfcr neue Zettel \xfcberarbeitet (s. Einstellungen > Server) und automatische Typ-Erkennung aktiviert."}),(0,d.jsx)("li",{children:"Konto-Verwaltung \xfcberarbeitet (l\xf6schen von Accounts jetzt m\xf6glich)."})]})]}),(0,d.jsxs)(o.Z,{variant:"secondary",children:[(0,d.jsx)(o.Z.Heading,{children:"Beta 12.2"}),(0,d.jsx)("i",{children:"13. Februar 2022"}),(0,d.jsx)("p",{children:"Kleine Verbesserungen in Darstellung und Benutzung:"}),(0,d.jsxs)("ul",{children:[(0,d.jsx)("li",{children:(0,d.jsx)(o.Z.Link,{href:"https://gitlab.lrz.de/haeberlin/dmlw/-/issues/194",children:"Issue #194"})}),(0,d.jsx)("li",{children:'"Details ein-/ausblenden" unter "speichern" und "speichern&weiter" verschoben.'}),(0,d.jsx)("li",{children:"Kleiner Fehler bei Stapelverabeitung behoben (\xc4nderugnen wurde nicht angezeigt)."}),(0,d.jsx)("li",{children:'Mit "X" kann die Detailansicht in der Zettel-DB geschlossen werden.'}),(0,d.jsx)("li",{children:"Wenn ein neues Wort in der Zettel-DB erstellt wurde, wird es automatisch mit dem aktuellen Zettel verkn\xfcpft."}),(0,d.jsx)("li",{children:"Man kann nun aus der Stapel-Ansicht neue W\xf6rter erstellen."}),(0,d.jsx)("li",{children:"Die Hilfe zum Erstellen von W\xf6rtern wird nun auch in der Wortliste angezeigt."}),(0,d.jsx)("li",{children:"Import-Formulare \xfcberarbeitet und verbessert."})]})]}),(0,d.jsxs)(o.Z,{variant:"secondary",children:[(0,d.jsx)(o.Z.Heading,{children:"Beta 12.1"}),(0,d.jsx)("i",{children:"11. Februar 2022"}),(0,d.jsx)("p",{children:"Kleine Verbesserungen in Darstellung und Benutzung:"}),(0,d.jsxs)("ul",{children:[(0,d.jsx)("li",{children:"Mit einem Klick auf den Wortansatz in der Wortliste wird die Zettel-Datenbank ge\xf6ffnet und die mit diesem Wort verkn\xfcpften Zettel angezeigt."}),(0,d.jsx)("li",{children:'Suchfelder in Wortliste hinzugef\xfcgt: "W\xf6rterb\xfccher", "Kommentar", "Zahlzeichen", "im W\xf6rterbuch (MLW)", "Stern", "Fragezeichen".'}),(0,d.jsx)("li",{children:'Verbesserung des Fehlers mit "speichern&weiter".'}),(0,d.jsx)("li",{children:'"Lemmaliste" in "Wortliste" umbenannt. Ebenso "Lemma" in "Wort" (usw.).'}),(0,d.jsxs)("li",{children:["Kontextmen\xfc ",(0,d.jsx)(n.G,{icon:r.iV1})," der opera-Listen: Alle sollen nun die Listen aktualisieren k\xf6nnen."]}),(0,d.jsx)("li",{children:'opera-Listen k\xf6nnen nicht mehr von "Einstellungen"->"Server" aktualisiert werden.'}),(0,d.jsxs)("li",{children:["Die Statistiken k\xf6nnen nur noch \xfcber das Kontextmen\xfc ",(0,d.jsx)(n.G,{icon:r.iV1}),' unter "Einstellungen"->"Statistik" aktualisiert werden.']}),(0,d.jsx)("li",{children:"Alle Links sollten mit CTRL/CMD+Klick in einem neuen Fenster/Tab ge\xf6ffnet werden k\xf6nnen."}),(0,d.jsx)("li",{children:"Dark-Mode deaktiviert (wird sp\xe4ter wieder eingef\xfchrt)."})]})]}),(0,d.jsxs)(o.Z,{variant:"secondary",children:[(0,d.jsx)(o.Z.Heading,{children:"Beta 12.0"}),(0,d.jsx)("i",{children:"9. Februar 2022"}),(0,d.jsxs)("p",{children:["Neues Design und Steuerelemente mit ",(0,d.jsx)(o.Z.Link,{target:"_blank",href:"https://react-bootstrap.github.io",children:"Bootstrap"}),". Die Suchfunktion befindet sich links unten auf der Seite (",(0,d.jsx)(n.G,{icon:r.wn1}),")."]})]})]})}var h=s(7762),m=s(5861),x=s(5671),p=s(3144),j=s(136),f=s(8505),g=s(7757),Z=s.n(g),v=s(4849),b=s(2591),y=s(4775),w=s(9743),k=s(2677),_=s(2791),S=s(6407),N=s(3222),z=function(e){(0,j.Z)(s,e);var t=(0,f.Z)(s);function s(e){var n;return(0,x.Z)(this,s),(n=t.call(this,e)).state={item:null,newItemCreated:null},n}return(0,p.Z)(s,[{key:"render",value:function(){var e=this;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(a.Z,{fixed:"bottom",bg:"light",children:(0,d.jsxs)(i.Z,{fluid:!0,children:[(0,d.jsx)(a.Z.Collapse,{className:"justify-content-start",children:(0,d.jsx)(a.Z.Text,{children:(0,d.jsx)(N.Rj,{boxName:"lemma",searchQuery:function(t,s){e.searchQuery(t,s)},setupItems:this.state.newItemCreated,searchOptions:[["lemma","Wort"],["lemma_ac","Wort-Anzeige"],["id","ID"],["dicts","W\xf6rterb\xfccher"],["comment","Kommentar"],["lemma_nr","Zahlzeichen"],["MLW","MLW"],["Stern","Stern"],["Fragezeichen","Fragezeichen"]],sortOptions:[['["id"]',"ID"],['["lemma"]',"Lemma"]],status:this.state.searchStatus})})}),(0,d.jsxs)(a.Z.Collapse,{className:"justify-content-end",children:[(0,d.jsx)(a.Z.Text,{children:this.state.count>0?(0,d.jsx)(N.C3,{loadPage:function(t){e.loadPage(t)},currentPage:this.state.currentPage,maxPage:this.state.maxPage}):null}),(0,d.jsx)(a.Z.Text,{children:S.Q.access("l_edit")&&(0,d.jsx)(N.vW,{menuItems:[["neues Wort",(0,m.Z)(Z().mark((function t(){var s;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Soll ein neues Wort erstellt werden?")){t.next=5;break}return t.next=3,S.Q.lemma.save({lemma_display:"Neues Wort",lemma:"Neues Wort"});case 3:s=t.sent,e.setState({newItemCreated:[{id:0,c:"id",o:"=",v:s}]});case 5:case"end":return t.stop()}}),t)})))]]})})]})]})}),(0,d.jsx)(i.Z,{className:"mainBody",children:(0,d.jsx)(C,{loadMain:function(t,s){e.props.loadMain(t,s)},loadPage:function(t){e.loadPage(t)},currentElements:this.state.currentElements,count:this.state.count,currentPage:this.state.currentPage,maxPage:this.state.maxPage,gridArea:this.state.item?"2/1/2/2":"2/1/2/3",showDetail:function(t){e.setState({item:t})}})}),this.state.item?(0,d.jsx)(D,{item:this.state.item,onUpdate:function(t){e.reloadEntry(t)},onReload:function(){e.loadPage(e.state.currentPage)},onClose:function(){e.setState({item:null})}}):""]})}},{key:"reloadEntry",value:function(){var e=(0,m.Z)(Z().mark((function e(t){var s,n,r;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.Q.lemma.get({id:t});case 2:s=(s=e.sent)[0],n=this.state.currentElements,r=n.findIndex((function(e){return e.id===s.id})),n[r]=s,this.setState({currentElements:n,item:s});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"searchQuery",value:function(){var e=(0,m.Z)(Z().mark((function e(t,s){var n,r;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({searchStatus:(0,d.jsx)(v.Z,{animation:"border",size:"sm"})}),e.next=3,S.Q.lemma.search(t,{count:!0,order:s});case 3:return n=e.sent,e.next=6,S.Q.lemma.search(t,{limit:50,order:s});case 6:r=e.sent,n[0].count>1?this.setState({searchStatus:"".concat(n[0].count," Eintr\xe4ge gefunden.")}):1===n[0].count?this.setState({searchStatus:"1 Eintrag gefunden."}):this.setState({searchStatus:"Keine Eintr\xe4ge gefunden."}),this.setState({query:t,queryOrder:s,count:n[0].count,maxPage:Math.floor(n[0].count/50)+1,currentPage:1,currentElements:r,selectionDetail:{ids:[]}});case 9:case"end":return e.stop()}}),e,this)})));return function(t,s){return e.apply(this,arguments)}}()},{key:"loadPage",value:function(){var e=(0,m.Z)(Z().mark((function e(t){var s;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.Q.lemma.search(this.state.query,{limit:50,offset:50*(t-1),order:this.state.queryOrder});case 2:s=e.sent,this.setState({currentPage:t,currentElements:s,selectionDetail:{ids:[]}});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),s}(_.Component),C=function(e){(0,j.Z)(s,e);var t=(0,f.Z)(s);function s(e){var n;return(0,x.Z)(this,s),(n=t.call(this,e)).state={selection:{currentId:null,ids:[]}},n}return(0,p.Z)(s,[{key:"render",value:function(){var e=this;if(this.props.count>0){var t,s=[],n=(0,h.Z)(this.props.currentElements);try{var r=function(){var n=t.value;s.push((0,d.jsxs)("tr",{id:n.id,onDoubleClick:function(t){e.props.showDetail(e.props.currentElements.find((function(e){return e.id===parseInt(t.target.closest("tr").id)})))},children:[(0,d.jsx)("td",{title:"ID: "+n.id,children:(0,d.jsx)("a",{dangerouslySetInnerHTML:(0,N.rg)(n.lemma_display),onClick:function(t){localStorage.setItem("searchBox_zettel",'[[{"id":0,"c":"lemma_id","o":"=","v":'.concat(n.id,'}],1,["id"]]')),e.props.loadMain(t,"zettel")}})}),(0,d.jsx)("td",{dangerouslySetInnerHTML:(0,N.rg)(n.dicts)}),(0,d.jsx)("td",{dangerouslySetInnerHTML:(0,N.rg)(n.comment)})]},n.id))};for(n.s();!(t=n.n()).done;)r()}catch(a){n.e(a)}finally{n.f()}return(0,d.jsx)("div",{style:{gridArea:this.props.gridArea,padding:"0 10px"},children:(0,d.jsxs)(b.Z,{striped:!0,width:"100%",children:[(0,d.jsx)("thead",{style:{textAlign:"left"},children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{width:"30%",children:"Wortansatz"}),(0,d.jsx)("th",{width:"20%",children:"W\xf6rterb\xfccher"}),(0,d.jsx)("th",{children:"Kommentar"})]})}),(0,d.jsx)("tbody",{children:s})]})})}return(0,d.jsx)(N.Km,{})}}]),s}(_.Component),D=function(e){(0,j.Z)(s,e);var t=(0,f.Z)(s);function s(e){var n;return(0,x.Z)(this,s),(n=t.call(this,e)).state={id:n.props.item.id,lemma:n.props.item.lemma,lemma_display:n.props.item.lemma_display,lemma_nr:n.props.item.lemma_nr,MLW:n.props.item.MLW,Stern:n.props.item.Stern,Fragezeichen:n.props.item.Fragezeichen,comment:n.props.item.comment,dicts:n.props.item.dicts},n}return(0,p.Z)(s,[{key:"render",value:function(){var e=this;return(0,d.jsxs)(y.Z,{show:!0,placement:"end",scroll:!0,backdrop:!1,onHide:function(){e.props.onClose()},children:[(0,d.jsx)(y.Z.Header,{closeButton:!0,children:(0,d.jsxs)(y.Z.Title,{children:["ID ",this.state.id]})}),(0,d.jsx)(y.Z.Body,{children:(0,d.jsxs)(i.Z,{children:[(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{children:"Wort:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("input",{type:"text",value:this.state.lemma,onChange:function(t){e.setState({lemma:t.target.value})}})})]}),(0,d.jsxs)(w.Z,{className:"mb-5",children:[(0,d.jsx)(k.Z,{children:"Wort-Anzeige:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("input",{type:"text",value:(0,N.Nx)(this.state.lemma_display),onChange:function(t){e.setState({lemma_display:t.target.value})}})})]}),(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{children:"Zahlzeichen:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)(N.SA,{options:[[0,""],[1,1],[2,2],[3,3],[4,4],[5,5],[6,6]],onChange:function(t){e.setState({lemma_nr:t.target.value})},value:this.state.lemma_nr})})]}),(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{children:"im W\xf6rterbuch:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)(N.SA,{options:[[0,"Nein"],[1,"Ja"]],onChange:function(t){e.setState({MLW:t.target.value})},value:this.state.MLW})})]}),(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{children:"Stern:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)(N.SA,{options:[[0,"Nein"],[1,"Ja"]],onChange:function(t){e.setState({Stern:t.target.value})},value:this.state.Stern})})]}),(0,d.jsxs)(w.Z,{className:"mb-5",children:[(0,d.jsx)(k.Z,{children:"Fragezeichen:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)(N.SA,{options:[[0,"Nein"],[1,"Ja"]],onChange:function(t){e.setState({Fragezeichen:t.target.value})},value:this.state.Fragezeichen})})]}),(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{children:"W\xf6rterb\xfccher:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("textarea",{style:{width:"210px",height:"50px"},value:this.state.dicts?this.state.dicts.replace(/&lt;/g,"<").replace(/&gt;/g,">"):"",onChange:function(t){e.setState({dicts:t.target.value})}})})]}),(0,d.jsxs)(w.Z,{className:"mb-4",children:[(0,d.jsx)(k.Z,{children:"Kommentar:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("textarea",{style:{width:"210px",height:"150px"},value:this.state.comment?this.state.comment.replace(/&lt;/g,"<").replace(/&gt;/g,">"):"",onChange:function(t){e.setState({comment:t.target.value})}})})]}),(0,d.jsx)(w.Z,{className:"mb-4",children:(0,d.jsx)(k.Z,{children:(0,d.jsxs)("small",{children:[(0,d.jsx)("a",{href:"https://gitlab.lrz.de/haeberlin/dmlw/-/wikis/10-WikiHow:-Umlemmatisierung",target:"_blank",rel:"noreferrer",children:"Hier"})," finden Sie Informationen zum Bearbeiten der W\xf6rter."]})})}),(0,d.jsx)(w.Z,{children:(0,d.jsxs)(k.Z,{children:[(0,d.jsx)(N.YG,{value:"speichern",onClick:(0,m.Z)(Z().mark((function t(){var s;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(""===e.state.lemma||e.state.lemma.indexOf(" ")>-1)){t.next=4;break}return t.abrupt("return",{status:!1,error:"Bitte ein g\xfcltiges Wort eintragen!"});case 4:if(""!==e.state.lemma_display){t.next=8;break}return t.abrupt("return",{status:!1,error:"Bitte tragen Sie eine g\xfcltige Wort-Anzeige ein!"});case 8:return s={id:e.state.id,lemma:e.state.lemma,lemma_display:e.state.lemma_display,MLW:e.state.MLW,Fragezeichen:e.state.Fragezeichen,Stern:e.state.Stern,comment:e.state.comment,dicts:e.state.dicts,lemma_nr:e.state.lemma_nr},t.next=11,S.Q.lemma.save(s);case 11:return t.sent,e.props.onUpdate(e.state.id),t.abrupt("return",{status:!0});case 14:case"end":return t.stop()}}),t)})))}),S.Q.access("l_edit")?(0,d.jsx)(N.YG,{style:{marginLeft:"10px"},variant:"danger",value:"l\xf6schen",onClick:(0,m.Z)(Z().mark((function t(){var s,n,r,a,i;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Soll das Wort gel\xf6scht werden? Das Wort wird von allen verkn\xfcpften Zettel entfernt. Dieser Schritt kann nicht r\xfcckg\xe4ngig gemacht werden!")){t.next=15;break}return t.next=3,S.Q.zettel.get({lemma_id:e.state.id});case 3:s=t.sent,n=[],r=(0,h.Z)(s);try{for(r.s();!(a=r.n()).done;)i=a.value,n.push({id:i.id,lemma_id:null})}catch(l){r.e(l)}finally{r.f()}if(!(n.length>0)){t.next=10;break}return t.next=10,S.Q.zettel.save(n);case 10:return t.next=12,S.Q.lemma.delete(e.state.id);case 12:return e.props.onClose(),e.props.onReload(),t.abrupt("return",{status:!0});case 15:case"end":return t.stop()}}),t)})))}):null]})})]})})]})}},{key:"componentDidUpdate",value:function(){this.state.id!==this.props.item.id&&this.setState({id:this.props.item.id,lemma:this.props.item.lemma,lemma_display:this.props.item.lemma_display,lemma_nr:this.props.item.lemma_nr,MLW:this.props.item.MLW,Stern:this.props.item.Stern,Fragezeichen:this.props.item.Fragezeichen,comment:this.props.item.comment,dicts:this.props.item.dicts})}}]),s}(_.Component),L=s(885),I=s(5267),B=s(3350),E=s(3360),Q=function(e){(0,j.Z)(s,e);var t=(0,f.Z)(s);function s(e){var n;return(0,x.Z)(this,s),(n=t.call(this,e)).state={author:null,work:null,authorLst:[]},n}return(0,p.Z)(s,[{key:"render",value:function(){var e=this;return(0,d.jsxs)(y.Z,{show:!0,placement:"end",scroll:!0,backdrop:!1,onHide:function(){e.props.onClose()},children:[(0,d.jsx)(y.Z.Header,{closeButton:!0,children:(0,d.jsx)(y.Z.Title,{})}),(0,d.jsxs)(y.Z.Body,{children:[this.state.author&&(0,d.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"150px auto",rowGap:"10px",margin:"0"},children:[(0,d.jsxs)("h3",{children:["Autor ",(0,d.jsxs)("i",{style:{fontSize:"60%"},children:["ID: ",this.state.author.id,")"]})]}),(0,d.jsx)("div",{}),(0,d.jsx)("div",{children:"Name:"}),(0,d.jsx)("div",{children:(0,d.jsx)("input",{type:"text",value:this.state.author.full?this.state.author.full.replace(/&lt;/g,"<").replace(/&gt;/g,">"):"",onChange:function(t){var s=e.state.author;s.full=t.target.value,e.setState({author:s})}})}),(0,d.jsx)("div",{children:"Abk\xfcrzung:"}),(0,d.jsx)("div",{children:(0,d.jsx)("input",{type:"text",value:this.state.author.abbr,onChange:function(t){var s=e.state.author;s.abbr=t.target.value,e.setState({author:s})}})}),(0,d.jsx)("div",{children:"Abk\xfcrzung (Sortierung):"}),(0,d.jsx)("div",{children:(0,d.jsx)("input",{type:"text",value:this.state.author.abbr_sort,onChange:function(t){var s=e.state.author;s.abbr_sort=t.target.value,e.setState({author:s})}})}),(0,d.jsx)("div",{children:"Anzeigedatum:"}),(0,d.jsx)("div",{children:(0,d.jsx)("input",{type:"text",value:this.state.author.date_display,onChange:function(t){var s=e.state.author;s.date_display=t.target.value,e.setState({author:s})}})}),(0,d.jsx)("div",{children:"Sortierdatum:"}),(0,d.jsx)("div",{children:(0,d.jsx)("input",{type:"text",value:this.state.author.date_sort,onChange:function(t){var s=e.state.author;s.date_sort=t.target.value,e.setState({author:s})}})}),(0,d.jsx)("div",{children:"Sortierdatum-Typ:"}),(0,d.jsx)("div",{children:(0,d.jsx)("input",{type:"text",value:this.state.author.date_type,onChange:function(t){var s=e.state.author;s.date_type=t.target.value,e.setState({author:s})}})}),(0,d.jsx)("div",{children:"in Benutzung:"}),(0,d.jsx)("div",{children:(0,d.jsx)(N.SA,{style:{width:"86%"},options:[[0,"Nein"],[1,"Ja"]],value:this.state.author.in_use,onChange:function(t){var s=e.state.author;s.in_use=t.target.value,e.setState({author:s})}})}),(0,d.jsx)("div",{}),(0,d.jsxs)("div",{children:[(0,d.jsx)(N.YG,{value:"speichern",onClick:(0,m.Z)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.Q.author.save(e.state.author);case 2:return e.props.onUpdate(),t.abrupt("return",{status:!0});case 4:case"end":return t.stop()}}),t)})))}),(0,d.jsx)(N.YG,{value:"l\xf6schen",variant:"danger",style:{marginLeft:"10px"},onClick:(0,m.Z)(Z().mark((function t(){var s,n,r,a,i;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.Q.work.search([{c:"author_id",o:"=",v:e.state.author.id}],{select:["id"]});case 2:s=t.sent,n=[],r=(0,h.Z)(s);try{for(r.s();!(a=r.n()).done;)i=a.value,n.push(i.id)}catch(l){r.e(l)}finally{r.f()}if(!window.confirm("Soll der Autor wirklich gel\xf6scht werden? ".concat(n.length>1?n.length+" verkn\xfcpfte Werke werden":"Ein verkn\xfcpftes Werk wird"," ebenfalls gel\xf6scht. Dieser Schritt kann nicht mehr r\xfcckg\xe4ngig gemacht werden!"))){t.next=19;break}if(!(n.length>0)){t.next=10;break}return t.next=10,S.Q.work.delete(n);case 10:return t.next=13,S.Q.author.delete(e.state.author.id);case 13:return t.next=15,S.Q.exec("opera_update");case 15:return e.props.onReload(),t.abrupt("return",{status:!0});case 19:return t.abrupt("return",{status:0});case 20:case"end":return t.stop()}}),t)})))})]})]}),this.state.work&&(0,d.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"150px auto",rowGap:"10px",margin:"50px 0"},children:[(0,d.jsxs)("h3",{children:["Werk ",(0,d.jsxs)("i",{style:{fontSize:"60%"},children:["(ID: ",this.state.work.id,")"]})]}),(0,d.jsx)("div",{}),(0,d.jsx)("div",{children:"Werktitel:"}),(0,d.jsx)("div",{children:(0,d.jsx)("input",{type:"text",value:this.state.work.full?this.state.work.full.replace(/&lt;/g,"<").replace(/&gt;/g,">"):"",onChange:function(t){var s=e.state.work;s.full=t.target.value,e.setState({work:s})}})}),(0,d.jsx)("div",{children:"Abk\xfcrzung:"}),(0,d.jsx)("div",{children:(0,d.jsx)("input",{type:"text",value:this.state.work.abbr,onChange:function(t){var s=e.state.work;s.abbr=t.target.value,e.setState({work:s})}})}),(0,d.jsx)("div",{children:"Abk\xfcrzung (Sortierung):"}),(0,d.jsx)("div",{children:(0,d.jsx)("input",{type:"text",value:this.state.work.abbr_sort,onChange:function(t){var s=e.state.work;s.abbr_sort=t.target.value,e.setState({work:s})}})}),(0,d.jsx)("div",{children:"Anzeigedatum:"}),(0,d.jsx)("div",{children:(0,d.jsx)("input",{type:"text",value:this.state.work.date_display,onChange:function(t){var s=e.state.work;s.date_display=t.target.value,e.setState({work:s})}})}),(0,d.jsx)("div",{children:"Sortierdatum:"}),(0,d.jsx)("div",{children:(0,d.jsx)("input",{type:"text",value:this.state.work.date_sort,onChange:function(t){var s=e.state.work;s.date_sort=t.target.value,e.setState({work:s})}})}),(0,d.jsx)("div",{children:"Sortierdatum-Typ:"}),(0,d.jsx)("div",{children:(0,d.jsx)("input",{type:"text",value:this.state.work.date_type,onChange:function(t){var s=e.state.work;s.date_type=t.target.value,e.setState({work:s})}})}),(0,d.jsxs)("div",{children:["Abweichender Autorenname (z.B. bei ",(0,d.jsx)("aut",{children:"Vita"}),"):"]}),(0,d.jsx)("div",{children:(0,d.jsx)("input",{type:"text",value:this.state.work.author_display,onChange:function(t){var s=e.state.work;s.author_display=t.target.value,e.setState({work:s})}})}),(0,d.jsx)("div",{children:"verknpft. Autor:"}),(0,d.jsx)("div",{children:(0,d.jsx)(N.SA,{style:{width:"86%"},options:this.state.authorLst,value:this.state.work.author_id,onChange:function(t){var s=e.state.work;s.author_id=t.target.value,e.setState({work:s})}})}),(0,d.jsxs)("div",{children:["Stellenangabe: ",(0,d.jsx)("span",{className:"minorTxt",children:"(Bsp.)"})]}),(0,d.jsx)("div",{children:(0,d.jsx)("input",{type:"text",value:this.state.work.citation,onChange:function(t){var s=e.state.work;s.citation=t.target.value,e.setState({work:s})}})}),(0,d.jsxs)("div",{children:["Stellenangabe Bibliographie: ",(0,d.jsx)("i",{className:"minorTxt",children:"(nur minora)"})]}),(0,d.jsx)("div",{children:(0,d.jsx)("input",{type:"text",value:this.state.work.bibliography_cit,onChange:function(t){var s=e.state.work;s.bibliography_cit=t.target.value,e.setState({work:s})}})}),(0,d.jsx)("div",{children:"Referenz:"}),(0,d.jsx)("div",{children:(0,d.jsx)("input",{type:"text",value:this.state.work.reference,onChange:function(t){var s=e.state.work;s.reference=t.target.value,e.setState({work:s})}})}),(0,d.jsx)("div",{children:"in Benutzung:"}),(0,d.jsx)("div",{children:(0,d.jsx)(N.SA,{style:{width:"86%"},options:[[0,"Nein"],[1,"Ja"]],value:this.state.work.in_use,onChange:function(t){var s=e.state.work;s.in_use=t.target.value,e.setState({work:s})}})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("i",{children:"opus maius"}),":"]}),(0,d.jsx)("div",{children:(0,d.jsx)(N.SA,{style:{width:"86%"},options:[[0,"Nein"],[1,"Ja"]],value:this.state.work.is_maior,onChange:function(t){var s=e.state.work;s.is_maior=t.target.value,e.setState({work:s})}})}),(0,d.jsx)("div",{children:"Kommentar:"}),(0,d.jsx)("div",{children:(0,d.jsx)("textarea",{value:this.state.work.txt_info,onChange:function(t){var s=e.state.work;s.txt_info=t.target.value,e.setState({work:s})},style:{width:"205px",height:"130px"}})}),(0,d.jsx)("div",{children:"Bibliographie:"}),(0,d.jsx)("div",{children:(0,d.jsx)("textarea",{value:this.state.work.bibliography,onChange:function(t){var s=e.state.work;s.bibliography=t.target.value,e.setState({work:s})},style:{width:"205px",height:"130px"}})}),(0,d.jsx)("div",{}),(0,d.jsxs)("div",{children:[(0,d.jsx)(N.YG,{value:"speichern",onClick:(0,m.Z)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.Q.work.save(e.state.work);case 2:return e.props.onUpdate(),t.abrupt("return",{status:!0});case 4:case"end":return t.stop()}}),t)})))}),(0,d.jsx)(N.YG,{value:"l\xf6schen",variant:"danger",style:{marginLeft:"10px"},onClick:(0,m.Z)(Z().mark((function t(){var s;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.Q.work.search([{c:"author_id",o:"=",v:e.state.work.author_id}],{count:!0});case 2:if(s=t.sent,!(s[0].count<2)){t.next=8;break}return t.abrupt("return",{status:-1,error:"Das Werk kann nicht gel\xf6scht werden, da es das lezte Werk des Autors ist."});case 8:if(!window.confirm("Soll das Werk wirklich gel\xf6scht werden? Dieser Schritt kann nicht mehr r\xfcckg\xe4ngig gemacht werden!")){t.next=17;break}return t.next=11,S.Q.work.delete(e.state.work.id);case 11:return t.next=13,S.Q.exec("opera_update");case 13:return e.props.onReload(),t.abrupt("return",{status:!0});case 17:return t.abrupt("return",{status:0});case 18:case"end":return t.stop()}}),t)})))})]})]})]})]})}},{key:"componentDidMount",value:function(){var e=this,t=function(){var t=(0,m.Z)(Z().mark((function t(){var s,n,r,a,i;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.Q.author.getAll({select:["id","abbr"],order:["abbr_sort"]});case 2:s=t.sent,n=[],r=(0,h.Z)(s);try{for(r.s();!(a=r.n()).done;)i=a.value,n.push([i.id,i.abbr])}catch(l){r.e(l)}finally{r.f()}e.setState({authorLst:n});case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();if(t(),this.props.item.author_id>0){var s=function(){var t=(0,m.Z)(Z().mark((function t(){var s;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.Q.author.get({id:e.props.item.author_id});case 2:s=t.sent,e.setState({author:s[0]});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();s()}if(this.props.item.work_id>0){var n=function(){var t=(0,m.Z)(Z().mark((function t(){var s;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.Q.work.get({id:e.props.item.work_id});case 2:s=t.sent,e.setState({work:s[0]});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();n()}}},{key:"componentDidUpdate",value:function(e){var t=this;if(e.item.author_id!=this.props.item.author_id)if(this.props.item.author_id>0){var s=function(){var e=(0,m.Z)(Z().mark((function e(){var s;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.Q.author.get({id:t.props.item.author_id});case 2:s=e.sent,t.setState({author:s[0]});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();s()}else this.setState({author:null});if(e.item.work_id!=this.props.item.work_id)if(this.props.item.work_id>0){var n=function(){var e=(0,m.Z)(Z().mark((function e(){var s;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.Q.work.get({id:t.props.item.work_id});case 2:s=e.sent,t.setState({work:s[0]});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n()}else this.setState({work:null})}}]),s}(_.Component),A=function(e){(0,j.Z)(s,e);var t=(0,f.Z)(s);function s(e){var n;return(0,x.Z)(this,s),(n=t.call(this,e)).state={oLst:[],cHitId:0},n.resultsOnPage=18,n}return(0,p.Z)(s,[{key:"render",value:function(){var e=this,t=[],s=[],n=0,r=0;this.scrollRef=null;var l,c=(0,h.Z)(this.props.cTrLst);try{var o=function(){var a=l.value;n++;var i={};a.o.id===e.state.cHitId?(i="searchHit",e.scrollRef=_.createRef()):e.state.cHitId>0&&e.state.hits.some((function(e){return e.id===a.o.id}))&&(i="searchAllHits"),t.push((0,d.jsx)("tr",{className:i,ref:a.o.id===e.state.cHitId?e.scrollRef:null,onDoubleClick:function(t){t.stopPropagation(),e.props.showDetail(a.o)},children:a.data},n)),t.length>=e.resultsOnPage&&(r++,s.push((0,d.jsxs)("div",{id:"operaBox_"+r,style:{borderBottom:"1px dotted black",paddingBottom:"15px",margin:"10px"},children:[(0,d.jsx)("table",{className:"operaBox",children:(0,d.jsx)("tbody",{children:t})}),(0,d.jsx)("div",{style:{textAlign:"center"},children:r})]},r)),t=[])};for(c.s();!(l=c.n()).done;)o()}catch(p){c.e(p)}finally{c.f()}r>0&&s.push((0,d.jsxs)("div",{id:"operaBox_"+(r+1),style:{margin:"10px"},children:[(0,d.jsx)("table",{className:"operaBox",children:(0,d.jsx)("tbody",{children:t})}),(0,d.jsx)("div",{style:{textAlign:"center"},children:r+1})]},r+1));var u=(0,d.jsx)("table",{className:"operaBox",style:{width:"100%"},children:(0,d.jsxs)("tbody",{children:[(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"c1"}),(0,d.jsx)("td",{className:"c2",children:(0,d.jsx)(I.Z,{sm:10})}),(0,d.jsx)("td",{className:"c3",children:(0,d.jsx)(I.Z,{sm:10})}),(0,d.jsx)("td",{className:"c4"}),(0,d.jsx)("td",{className:"c5"})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"c1",children:(0,d.jsx)(I.Z,{sm:10})}),(0,d.jsxs)("td",{className:"c2",children:["\xa0\xa0\xa0",(0,d.jsx)(I.Z,{sm:10})]}),(0,d.jsxs)("td",{className:"c3",children:["\xa0\xa0\xa0",(0,d.jsx)(I.Z,{sm:10})]}),(0,d.jsxs)("td",{className:"c4",children:[(0,d.jsx)(I.Z,{sm:10}),(0,d.jsx)(I.Z,{sm:8})," ",(0,d.jsx)(I.Z,{bg:"primary",sm:4})]}),(0,d.jsx)("td",{className:"c5",children:(0,d.jsx)(I.Z,{sm:5})})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"c1"}),(0,d.jsx)("td",{className:"c2",children:(0,d.jsx)(I.Z,{sm:10})}),(0,d.jsx)("td",{className:"c3",children:(0,d.jsx)(I.Z,{sm:10})}),(0,d.jsx)("td",{className:"c4"}),(0,d.jsx)("td",{className:"c5"})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"c1",children:(0,d.jsx)(I.Z,{sm:10})}),(0,d.jsxs)("td",{className:"c2",children:["\xa0\xa0\xa0",(0,d.jsx)(I.Z,{sm:10})]}),(0,d.jsxs)("td",{className:"c3",children:["\xa0\xa0\xa0",(0,d.jsx)(I.Z,{sm:10})]}),(0,d.jsxs)("td",{className:"c4",children:[(0,d.jsx)(I.Z,{sm:10})," ",(0,d.jsx)(I.Z,{sm:10}),(0,d.jsx)(I.Z,{sm:8})," ",(0,d.jsx)(I.Z,{bg:"primary",sm:6})]}),(0,d.jsx)("td",{className:"c5",children:(0,d.jsx)(I.Z,{sm:6})})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"c1"}),(0,d.jsx)("td",{className:"c2",children:(0,d.jsx)(I.Z,{sm:10})}),(0,d.jsxs)("td",{className:"c3",children:[(0,d.jsx)(I.Z,{sm:10}),(0,d.jsx)(I.Z,{sm:8})]}),(0,d.jsx)("td",{className:"c4"}),(0,d.jsx)("td",{className:"c5"})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"c1",children:(0,d.jsx)(I.Z,{sm:10})}),(0,d.jsxs)("td",{className:"c2",children:["\xa0\xa0\xa0",(0,d.jsx)(I.Z,{sm:10})]}),(0,d.jsxs)("td",{className:"c3",children:["\xa0\xa0\xa0",(0,d.jsx)(I.Z,{sm:10})]}),(0,d.jsxs)("td",{className:"c4",children:[(0,d.jsx)(I.Z,{sm:11})," ",(0,d.jsx)(I.Z,{sm:10})," ",(0,d.jsx)(I.Z,{sm:8}),(0,d.jsx)(I.Z,{sm:8}),(0,d.jsx)(I.Z,{sm:10})," ",(0,d.jsx)(I.Z,{sm:9})," ",(0,d.jsx)(I.Z,{sm:10}),(0,d.jsx)(I.Z,{sm:8})," ",(0,d.jsx)(I.Z,{bg:"primary",sm:6})]}),(0,d.jsx)("td",{className:"c5",children:(0,d.jsx)(I.Z,{sm:8})})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"c1"}),(0,d.jsx)("td",{className:"c2",children:(0,d.jsx)(I.Z,{sm:10})}),(0,d.jsx)("td",{className:"c3",children:(0,d.jsx)(I.Z,{sm:10})}),(0,d.jsx)("td",{className:"c4"}),(0,d.jsx)("td",{className:"c5"})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"c1",children:(0,d.jsx)(I.Z,{sm:10})}),(0,d.jsxs)("td",{className:"c2",children:["\xa0\xa0\xa0",(0,d.jsx)(I.Z,{sm:10})]}),(0,d.jsxs)("td",{className:"c3",children:["\xa0\xa0\xa0",(0,d.jsx)(I.Z,{sm:10})]}),(0,d.jsxs)("td",{className:"c4",children:[(0,d.jsx)(I.Z,{sm:11}),(0,d.jsx)(I.Z,{sm:9})," ",(0,d.jsx)(I.Z,{bg:"primary",sm:8})]}),(0,d.jsx)("td",{className:"c5",children:(0,d.jsx)(I.Z,{sm:5})})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"c1"}),(0,d.jsx)("td",{className:"c2",children:(0,d.jsx)(I.Z,{sm:10})}),(0,d.jsx)("td",{className:"c3",children:(0,d.jsx)(I.Z,{sm:10})}),(0,d.jsx)("td",{className:"c4"}),(0,d.jsx)("td",{className:"c5"})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"c1",children:(0,d.jsx)(I.Z,{sm:10})}),(0,d.jsxs)("td",{className:"c2",children:["\xa0\xa0\xa0",(0,d.jsx)(I.Z,{sm:10})]}),(0,d.jsxs)("td",{className:"c3",children:["\xa0\xa0\xa0",(0,d.jsx)(I.Z,{sm:10})]}),(0,d.jsxs)("td",{className:"c4",children:[(0,d.jsx)(I.Z,{sm:9})," ",(0,d.jsx)(I.Z,{sm:11})," ",(0,d.jsx)(I.Z,{sm:8})," ",(0,d.jsx)(I.Z,{bg:"primary",sm:4})]}),(0,d.jsx)("td",{className:"c5",children:(0,d.jsx)(I.Z,{sm:5})})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"c1",children:(0,d.jsx)(I.Z,{sm:10})}),(0,d.jsxs)("td",{className:"c2",children:["\xa0\xa0\xa0",(0,d.jsx)(I.Z,{sm:10})]}),(0,d.jsxs)("td",{className:"c3",children:["\xa0\xa0\xa0",(0,d.jsx)(I.Z,{sm:10})]}),(0,d.jsxs)("td",{className:"c4",children:[(0,d.jsx)(I.Z,{sm:10})," ",(0,d.jsx)(I.Z,{sm:10})," ",(0,d.jsx)(I.Z,{sm:10}),(0,d.jsx)(I.Z,{sm:8})," ",(0,d.jsx)(I.Z,{bg:"primary",sm:4})]}),(0,d.jsx)("td",{className:"c5",children:(0,d.jsx)(I.Z,{sm:4})})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"c1",children:(0,d.jsx)(I.Z,{sm:10})}),(0,d.jsxs)("td",{className:"c2",children:["\xa0\xa0\xa0",(0,d.jsx)(I.Z,{sm:10})]}),(0,d.jsxs)("td",{className:"c3",children:["\xa0\xa0\xa0",(0,d.jsx)(I.Z,{sm:10})]}),(0,d.jsxs)("td",{className:"c4",children:[(0,d.jsx)(I.Z,{sm:8})," ",(0,d.jsx)(I.Z,{sm:11})," ",(0,d.jsx)(I.Z,{sm:10}),(0,d.jsx)(I.Z,{sm:9})," ",(0,d.jsx)(I.Z,{bg:"primary",sm:8})]}),(0,d.jsx)("td",{className:"c5",children:(0,d.jsx)(I.Z,{sm:7})})]})]})});"opera_maiora"!=this.props.listName&&(u=(0,d.jsx)("table",{className:"operaBox",style:{width:"100%"},children:(0,d.jsxs)("tbody",{children:[(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"c1_min",children:(0,d.jsx)(I.Z,{sm:8})}),(0,d.jsx)("td",{className:"c2_min",children:(0,d.jsx)(I.Z,{sm:10})}),(0,d.jsx)("td",{className:"c5_min",children:(0,d.jsx)(I.Z,{bg:"primary",sm:4})})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"c1_min",children:(0,d.jsx)(I.Z,{sm:8})}),(0,d.jsx)("td",{className:"c2_min",children:(0,d.jsx)(I.Z,{sm:11})}),(0,d.jsxs)("td",{className:"c5_min",children:[(0,d.jsx)(I.Z,{sm:4}),(0,d.jsx)("br",{}),(0,d.jsx)(I.Z,{sm:2})]})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"c1_min",children:(0,d.jsx)(I.Z,{sm:7})}),(0,d.jsx)("td",{className:"c2_min",children:(0,d.jsx)(I.Z,{sm:8})}),(0,d.jsx)("td",{className:"c5_min"})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"c1_min"}),(0,d.jsx)("td",{className:"c2_min",children:(0,d.jsx)(I.Z,{sm:11})}),(0,d.jsx)("td",{className:"c5_min",children:(0,d.jsx)(I.Z,{sm:5})})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"c1_min",children:(0,d.jsx)(I.Z,{sm:5})}),(0,d.jsx)("td",{className:"c2_min",children:(0,d.jsx)(I.Z,{sm:7})}),(0,d.jsx)("td",{className:"c5_min",children:(0,d.jsx)(I.Z,{sm:4})})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"c1_min"}),(0,d.jsx)("td",{className:"c2_min",children:(0,d.jsx)(I.Z,{sm:8})}),(0,d.jsx)("td",{className:"c5_min",children:(0,d.jsx)(I.Z,{sm:4})})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"c1_min"}),(0,d.jsx)("td",{className:"c2_min",children:(0,d.jsx)(I.Z,{sm:8})}),(0,d.jsx)("td",{className:"c5_min",children:(0,d.jsx)(I.Z,{sm:6})})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"c1_min",children:(0,d.jsx)(I.Z,{sm:8})}),(0,d.jsx)("td",{className:"c2_min",children:(0,d.jsx)(I.Z,{sm:10})}),(0,d.jsx)("td",{className:"c5_min"})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"c1_min",children:(0,d.jsx)(I.Z,{sm:8})}),(0,d.jsx)("td",{className:"c2_min",children:(0,d.jsx)(I.Z,{sm:7})}),(0,d.jsx)("td",{className:"c5_min",children:(0,d.jsx)(I.Z,{sm:5})})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"c1_min",children:(0,d.jsx)(I.Z,{sm:8})}),(0,d.jsx)("td",{className:"c2_min",children:(0,d.jsx)(I.Z,{sm:11})}),(0,d.jsx)("td",{className:"c5_min",children:(0,d.jsx)(I.Z,{sm:6})})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"c1_min",children:(0,d.jsx)(I.Z,{sm:8})}),(0,d.jsx)("td",{className:"c2_min",children:(0,d.jsx)(I.Z,{sm:10})}),(0,d.jsx)("td",{className:"c5_min",children:(0,d.jsx)(I.Z,{sm:3})})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"c1_min",children:(0,d.jsx)(I.Z,{sm:8})}),(0,d.jsx)("td",{className:"c2_min",children:(0,d.jsx)(I.Z,{sm:10})}),(0,d.jsx)("td",{className:"c5_min",children:(0,d.jsx)(I.Z,{sm:3,bg:"primary"})})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"c1_min"}),(0,d.jsx)("td",{className:"c2_min",children:(0,d.jsx)(I.Z,{sm:11})}),(0,d.jsx)("td",{className:"c5_min",children:(0,d.jsx)(I.Z,{sm:8})})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"c1_min",children:(0,d.jsx)(I.Z,{sm:2})}),(0,d.jsx)("td",{className:"c2_min",children:(0,d.jsx)(I.Z,{sm:6})}),(0,d.jsx)("td",{className:"c5_min"})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"c1_min",children:(0,d.jsx)(I.Z,{sm:7})}),(0,d.jsx)("td",{className:"c2_min",children:(0,d.jsx)(I.Z,{sm:7})}),(0,d.jsx)("td",{className:"c5_min",children:(0,d.jsx)(I.Z,{sm:5,bg:"primary"})})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"c1_min",children:(0,d.jsx)(I.Z,{sm:8})}),(0,d.jsx)("td",{className:"c2_min",children:(0,d.jsx)(I.Z,{sm:10})}),(0,d.jsx)("td",{className:"c5_min",children:(0,d.jsx)(I.Z,{sm:4,bg:"primary"})})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"c1_min",children:(0,d.jsx)(I.Z,{sm:8})}),(0,d.jsx)("td",{className:"c2_min",children:(0,d.jsx)(I.Z,{sm:8})}),(0,d.jsx)("td",{className:"c5_min",children:(0,d.jsx)(I.Z,{sm:5})})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"c1_min",children:(0,d.jsx)(I.Z,{sm:2})}),(0,d.jsx)("td",{className:"c2_min",children:(0,d.jsx)(I.Z,{sm:7})}),(0,d.jsx)("td",{className:"c5_min",children:(0,d.jsx)(I.Z,{sm:6})})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"c1_min",children:(0,d.jsx)(I.Z,{sm:4})}),(0,d.jsx)("td",{className:"c2_min",children:(0,d.jsx)(I.Z,{sm:9})}),(0,d.jsx)("td",{className:"c5_min",children:(0,d.jsx)(I.Z,{sm:5})})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"c1_min",children:(0,d.jsx)(I.Z,{sm:8})}),(0,d.jsx)("td",{className:"c2_min",children:(0,d.jsx)(I.Z,{sm:10})}),(0,d.jsx)("td",{className:"c5_min",children:(0,d.jsx)(I.Z,{sm:3})})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"c1_min"}),(0,d.jsx)("td",{className:"c2_min",children:(0,d.jsx)(I.Z,{sm:11})}),(0,d.jsx)("td",{className:"c5_min",children:(0,d.jsx)(I.Z,{sm:11})})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"c1_min"}),(0,d.jsx)("td",{className:"c2_min",children:(0,d.jsx)(I.Z,{sm:8})}),(0,d.jsx)("td",{className:"c5_min",children:(0,d.jsx)(I.Z,{sm:5})})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"c1_min"}),(0,d.jsx)("td",{className:"c2_min",children:(0,d.jsx)(I.Z,{sm:10})}),(0,d.jsx)("td",{className:"c5_min",children:(0,d.jsx)(I.Z,{sm:4})})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"c1_min",children:(0,d.jsx)(I.Z,{sm:4})}),(0,d.jsx)("td",{className:"c2_min",children:(0,d.jsx)(I.Z,{sm:7})}),(0,d.jsx)("td",{className:"c5_min",children:(0,d.jsx)(I.Z,{sm:3})})]})]})}));var x=[["opera-Listen aktualisieren",(0,m.Z)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Soll die opera-Liste aktualisiert werden? Der Prozess dauert ca. 30 Sekunden.")){t.next=5;break}return t.next=3,S.Q.exec("opera_update");case 3:return t.next=5,e.props.getLst();case 5:case"end":return t.stop()}}),t)})))]];return S.Q.access("o_edit")&&(x.push(["Neuer Autor erstellen",(0,m.Z)(Z().mark((function t(){var s;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Soll ein neuer Autor erstellt werden? Er heisst '+NEUER AUTOR'")){t.next=11;break}return t.next=3,S.Q.author.save({full:"+Neuer Autor",abbr:"+Neuer Autor",abbr_sort:"+Neuer Autor",in_use:1});case 3:return s=t.sent,t.next=6,S.Q.work.save({full:"Neues Werk",abbr:"Neues Werk",abbr_sort:"Neues Werk",author_id:s,is_maior:1,in_use:1});case 6:if(!window.confirm("Ein neuer Autor wurde erstellt. Soll die opera-Liste aktualisiert werden?")){t.next=11;break}return t.next=9,S.Q.exec("opera_update");case 9:return t.next=11,e.props.getLst();case 11:case"end":return t.stop()}}),t)})))]),x.push(["Neues Werk erstellen",(0,m.Z)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Soll ein neues Werk erstellt werden? Das Werk wird ABBO FLOR. zugewiesen.")){t.next=9;break}return t.next=3,S.Q.work.save({full:"Neues Werk",abbr:"Neues Werk",abbr_sort:"Neues Werk",author_id:1,is_maior:1,in_use:1});case 3:if(t.sent,!window.confirm("Ein neues Werk wurde erstellt. Soll die opera-Liste aktualisiert werden?")){t.next=9;break}return t.next=7,S.Q.exec("opera_update");case 7:return t.next=9,e.props.getLst();case 9:case"end":return t.stop()}}),t)})))])),(0,d.jsxs)(d.Fragment,{children:[0===s.length?null:(0,d.jsx)(a.Z,{fixed:"bottom",bg:"light",children:(0,d.jsxs)(i.Z,{fluid:!0,children:[(0,d.jsx)(a.Z.Collapse,{className:"justify-content-start",children:(0,d.jsx)(F,{listName:this.props.listName,setHitIndex:function(t){e.setState({cHitId:t})},setHits:function(t){e.setState({hits:t})}})}),(0,d.jsxs)(a.Z.Collapse,{className:"justify-content-end",children:[(0,d.jsx)(a.Z.Text,{children:(0,d.jsx)(B.Z.Control,{type:"text",style:{textAlign:"right",width:"80px",padding:"2px 5px",marginRight:"20px"},accessKey:"p",placeholder:"Seite...",onKeyUp:function(e){if(13===e.keyCode){var t=document.querySelector("div#operaBox_"+e.target.value);t&&t.scrollIntoView({behavior:"smooth"})}}})}),(0,d.jsx)(a.Z.Text,{children:(0,d.jsx)(N.vW,{menuItems:x})})]})]})}),(0,d.jsx)("div",{style:{gridArea:this.props.gridArea},children:0===s.length?(0,d.jsx)("div",{children:(0,d.jsx)(I.Z,{animation:"glow",children:u})}):(0,d.jsx)("div",{children:s})})]})}},{key:"gotoSearchResult",value:function(e){1===e&&this.state.hitIndex<this.state.maxHits-1?this.setState({hitIndex:this.state.hitIndex+1}):1===e?this.setState({hitIndex:0}):-1===e&&this.state.hitIndex>0?this.setState({hitIndex:this.state.hitIndex-1}):-1===e&&this.setState({hitIndex:this.state.maxHits-1})}},{key:"componentDidUpdate",value:function(e,t){this.state.hits&&this.state.hits.length>0?t.hitIndex!=this.state.hitIndex&&this.setState({cHitId:this.state.hits[this.state.hitIndex].id}):0!=this.state.cHitId&&this.setState({cHitId:0}),this.scrollRef&&this.scrollRef.current.scrollIntoView({behavior:"smooth",block:"center"})}}]),s}(_.Component);function F(e){var t=(0,_.useState)([]),s=(0,L.Z)(t,2),i=s[0],l=s[1],c=(0,_.useState)(0),o=(0,L.Z)(c,2),u=o[0],h=o[1],x=(0,_.useState)(""),p=(0,L.Z)(x,2),j=p[0],f=p[1];(0,_.useEffect)((function(){i.length>0&&e.setHitIndex(i[u].id)}),[i,u]),(0,_.useEffect)((function(){e.setHits(i)}),[i]);var g=function(e){if(1===e)u+1===i.length?h(0):h(u+1);else if(-1===e)h(0===u?i.length-1:u-1);else if(0===e){document.querySelector(".searchHit").scrollIntoView({behavior:"smooth",block:"center"})}};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(a.Z.Text,{children:(0,d.jsx)(B.Z.Control,{type:"text",style:{padding:"2px 5px"},accessKey:"s",placeholder:"Suche nach Zitiertitel...",onKeyUp:function(){var t=(0,m.Z)(Z().mark((function t(s){var n;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(13!==s.keyCode){t.next=13;break}if(""!==s.target.value){t.next=5;break}l([]),t.next=13;break;case 5:if(s.target.value==j){t.next=12;break}return t.next=8,S.Q[e.listName].search([{c:"search",o:"=",v:"*".concat(s.target.value,"*")}],{select:["id"]});case 8:(n=t.sent).length>0?(f(s.target.value),h(0),l(n)):l([]),t.next=13;break;case 12:g(1);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})}),i.length>0&&(0,d.jsx)(a.Z.Text,{children:(0,d.jsxs)("div",{style:{display:"flex",marginLeft:"20px",border:"1px solid var(--bs-gray-200)"},children:[(0,d.jsx)(E.Z,{size:"sm",variant:"outline-dark",style:{borderRadius:"0.2rem 0 0 0.2rem"},onClick:function(){g(-1)},disabled:1===i.length,children:(0,d.jsx)(n.G,{icon:r.DYF,style:{fontSize:"14px"}})}),(0,d.jsxs)("div",{style:{borderBottom:"1px solid var(--bs-gray-600)",borderTop:"1px solid var(--bs-gray-600)",padding:"5px 15px",margin:"0",cursor:"pointer"},onClick:function(){g(0)},children:[u+1," / ",i.length]}),(0,d.jsx)(E.Z,{size:"sm",variant:"outline-dark",style:{borderRadius:"0 0.2rem 0.2rem 0"},onClick:function(){g(1)},disabled:1===i.length,children:(0,d.jsx)(n.G,{icon:r.irl,style:{fontSize:"12px"}})})]})})]})}var W=function(e){(0,j.Z)(s,e);var t=(0,f.Z)(s);function s(e){var n;return(0,x.Z)(this,s),(n=t.call(this,e)).state={selectionDetail:null,cTrLst:[]},n}return(0,p.Z)(s,[{key:"render",value:function(){var e=this;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(i.Z,{className:"mainBody",children:(0,d.jsx)(A,{getLst:(0,m.Z)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.getLst();case 1:case"end":return t.stop()}}),t)}))),cTrLst:this.state.cTrLst,listName:this.props.listName,currentElements:this.state.currentElements,count:this.state.count,currentPage:this.state.currentPage,pageMax:this.state.pageMax,gridArea:this.state.selectionDetail?"2/1/2/2":"2/1/2/3",showDetail:function(t){e.setState({item:t})}})}),this.state.item?(0,d.jsx)(Q,{item:this.state.item,onUpdate:function(){e.setState({item:null})},onClose:function(){e.setState({item:null})},onReload:(0,m.Z)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({item:null}),t.next=3,e.getLst();case 3:case"end":return t.stop()}}),t)})))}):null]})}},{key:"componentDidMount",value:function(){this.getLst()}},{key:"componentDidUpdate",value:function(e){this.props.listName!=e.listName&&this.getLst(),this.scrollRef&&this.scrollRef.current.scrollIntoView({behavior:"smooth",block:"center"})}},{key:"getLst",value:function(){var e=(0,m.Z)(Z().mark((function e(){var t,s,n;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({cTrLst:[]}),e.next=3,S.Q[this.props.listName].getAll({count:!0});case 3:return t=e.sent,e.next=6,S.Q[this.props.listName].getAll();case 6:s=e.sent,n=this.createOperaLists(s,this.props.listName),this.setState({cTrLst:n,oMax:Math.floor(t[0].count/this.resultsOnPage)+1,currentPage:1});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOperaLists",value:function(e,t){var s,a=[],i=(0,h.Z)(e);try{for(i.s();!(s=i.n()).done;){var l=s.value,c=[];if(l.editions_id)for(var o=JSON.parse(l.editions_id),u=JSON.parse(l.editions_url),m=JSON.parse(l.editions_label),x=0;x<o.length;x++){var p="/site/argos/"+o[x],j="";u&&""!=u[x]&&(p=u[x],j=(0,d.jsxs)("span",{children:[" ",(0,d.jsx)(n.G,{style:{fontSize:"14px"},icon:r.Xjp})]}));var f="FEHLER!";m&&(f=m[x]),c.push((0,d.jsx)("li",{children:(0,d.jsxs)("a",{href:p,target:"_blank",rel:"noreferrer",children:[f,j]})},x))}if("opera_maiora"==t){var g="<aut>".concat(l.abbr,"</aut>"),Z=l.full;l.work_id>0&&null===l.author_id&&(g="<span>&nbsp;&nbsp;&nbsp;".concat(l.abbr,"</span>"),Z="<span>&nbsp;&nbsp;&nbsp;".concat(l.full,"</span>")),a.push({o:l,data:[(0,d.jsx)("td",{className:"c1",dangerouslySetInnerHTML:(0,N.rg)(l.date_display)},"0"),(0,d.jsx)("td",{className:"c2",dangerouslySetInnerHTML:(0,N.rg)(g)},"1"),(0,d.jsx)("td",{className:"c3",dangerouslySetInnerHTML:(0,N.rg)(Z)},"2"),(0,d.jsxs)("td",{className:"c4",children:[(0,d.jsx)("span",{dangerouslySetInnerHTML:(0,N.rg)(l.bibliography)}),(0,d.jsx)("ul",{className:"noneLst",children:c})]},"3"),(0,d.jsx)("td",{className:"c5",dangerouslySetInnerHTML:(0,N.rg)(l.comment)},"4")]})}else"opera_minora"===t&&a.push({o:l,data:[(0,d.jsx)("td",{className:"c1_min",dangerouslySetInnerHTML:(0,N.rg)(l.date_display)},"0"),(0,d.jsx)("td",{className:"c2_min",dangerouslySetInnerHTML:(0,N.rg)(l.citation)},"1"),(0,d.jsxs)("td",{className:"c5_min",children:[(0,d.jsx)("span",{dangerouslySetInnerHTML:(0,N.rg)(l.bibliography)}),(0,d.jsx)("ul",{className:"noneLst",children:c})]},"2")]})}}catch(v){i.e(v)}finally{i.f()}return a}}]),s}(_.Component),T=function(e){(0,j.Z)(s,e);var t=(0,f.Z)(s);function s(e){var n;return(0,x.Z)(this,s),(n=t.call(this,e)).state={item:null,newItemCreated:null},n}return(0,p.Z)(s,[{key:"render",value:function(){var e=this;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(a.Z,{fixed:"bottom",bg:"light",children:(0,d.jsxs)(i.Z,{fluid:!0,children:[(0,d.jsx)(a.Z.Collapse,{className:"justify-content-start",children:(0,d.jsx)(a.Z.Text,{children:(0,d.jsx)(N.Rj,{setupItems:this.state.newItemCreated,boxName:"seklit",searchQuery:function(t,s){e.searchQuery(t,s)},searchOptions:[["id","ID"]],sortOptions:[['["id"]',"ID"]],status:this.state.searchStatus})})}),(0,d.jsxs)(a.Z.Collapse,{className:"justify-content-end",children:[(0,d.jsx)(a.Z.Text,{children:this.state.count>0?(0,d.jsx)(N.C3,{loadPage:function(t){e.loadPage(t)},currentPage:this.state.currentPage,maxPage:this.state.maxPage}):null}),(0,d.jsx)(a.Z.Text,{children:S.Q.access("e_edit")&&(0,d.jsx)(N.vW,{menuItems:[["neuer Eintrag",(0,m.Z)(Z().mark((function t(){var s;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Soll ein neuer Eintrag erstellt werden?")){t.next=5;break}return t.next=3,S.Q.seklit.save({titel:"neues Werk"});case 3:s=t.sent,e.setState({newItemCreated:[{id:0,c:"id",o:"=",v:s}]});case 5:case"end":return t.stop()}}),t)})))]]})})]})]})}),(0,d.jsx)(i.Z,{className:"mainBody",children:(0,d.jsx)(H,{loadPage:function(t){e.loadPage(t)},currentElements:this.state.currentElements,count:this.state.count,currentPage:this.state.currentPage,maxPage:this.state.maxPage,gridArea:this.state.item?"2/1/2/2":"2/1/2/3",showDetail:function(t){e.setState({item:t})}})}),this.state.item?(0,d.jsx)(M,{item:this.state.item,onUpdate:function(t){e.reloadEntry(t)},onReload:function(){e.loadPage(e.state.currentPage)},onClose:function(){e.setState({item:null})}}):""]})}},{key:"reloadEntry",value:function(){var e=(0,m.Z)(Z().mark((function e(t){var s,n,r;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t>0)){e.next=11;break}return e.next=3,S.Q.seklit.get({id:t});case 3:s=(s=e.sent)[0],n=this.state.currentElements,r=n.findIndex((function(e){return e.id===s.id})),n[r]=s,this.setState({currentElements:n,item:s}),e.next=12;break;case 11:this.setState({currentElements:[],item:null});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"searchQuery",value:function(){var e=(0,m.Z)(Z().mark((function e(t,s){var n,r;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.Q.seklit.search(t,{count:!0,order:s});case 2:return n=e.sent,e.next=5,S.Q.seklit.search(t,{limit:50,order:s});case 5:r=e.sent,n[0].count>1?this.setState({searchStatus:"".concat(n[0].count," Eintr\xe4ge gefunden.")}):1===n[0].count?this.setState({searchStatus:"1 Eintrag gefunden."}):this.setState({searchStatus:"Keine Eintr\xe4ge gefunden."}),this.setState({query:t,queryOrder:s,count:n[0].count,maxPage:Math.floor(n[0].count/50)+1,currentPage:1,currentElements:r,selectionDetail:{ids:[]}});case 8:case"end":return e.stop()}}),e,this)})));return function(t,s){return e.apply(this,arguments)}}()},{key:"loadPage",value:function(){var e=(0,m.Z)(Z().mark((function e(t){var s;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.Q.seklit.search(this.state.query,{limit:50,offset:50*(t-1),order:this.state.queryOrder});case 2:s=e.sent,this.setState({currentPage:t,currentElements:s,selectionDetail:{ids:[]}});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),s}(_.Component),H=function(e){(0,j.Z)(s,e);var t=(0,f.Z)(s);function s(e){var n;return(0,x.Z)(this,s),(n=t.call(this,e)).state={selection:{currentId:null,ids:[]}},n}return(0,p.Z)(s,[{key:"render",value:function(){var e=this;if(this.props.count>0){var t,s=[],n=(0,h.Z)(this.props.currentElements);try{for(n.s();!(t=n.n()).done;){var r=t.value;s.push((0,d.jsxs)("tr",{id:r.id,onDoubleClick:function(t){e.props.showDetail(e.props.currentElements.find((function(e){return e.id===parseInt(t.target.closest("tr").id)})))},children:[(0,d.jsx)("td",{title:"ID: "+r.id,children:r.kennziffer}),(0,d.jsxs)("td",{children:[r.signatur," ",r.alte_signatur?"(".concat(r.alte_signatur,")"):null]}),(0,d.jsxs)("td",{children:[r.name,", ",r.vorname,", ",(0,d.jsx)("b",{children:r.titel}),", ",r.reihe,", ",r.ort," ",r.jahr]}),(0,d.jsxs)("td",{children:[r.weitere_angaben,r.zusatz?" - "+r.zusatz:null]})]},r.id))}}catch(a){n.e(a)}finally{n.f()}return(0,d.jsx)("div",{style:{gridArea:this.props.gridArea,padding:"0 10px"},children:(0,d.jsxs)(b.Z,{width:"100%",striped:!0,children:[(0,d.jsx)("thead",{style:{textAlign:"left"},children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{width:"10%",children:"Kennziffer"}),(0,d.jsx)("th",{width:"10%",children:"Signatur"}),(0,d.jsx)("th",{width:"60%",children:"Werkbezeichnung"}),(0,d.jsx)("th",{children:"weitere Angaben"})]})}),(0,d.jsx)("tbody",{children:s})]})})}return(0,d.jsx)(N.Km,{})}}]),s}(_.Component),M=function(e){(0,j.Z)(s,e);var t=(0,f.Z)(s);function s(e){var n;return(0,x.Z)(this,s),(n=t.call(this,e)).state={id:n.props.item.id,kennziffer:n.props.item.kennziffer,signatur:n.props.item.signatur,alte_signatur:n.props.item.alte_signatur,name:n.props.item.name,vorname:n.props.item.vorname,titel:n.props.item.titel,reihe:n.props.item.reihe,weitere_angaben:n.props.item.weitere_angaben,ort:n.props.item.ort,jahr:n.props.item.jahr,zusatz:n.props.item.zusatz},n}return(0,p.Z)(s,[{key:"render",value:function(){var e=this;return(0,d.jsxs)(y.Z,{show:!0,placement:"end",scroll:!0,backdrop:!1,onHide:function(){e.props.onClose()},children:[(0,d.jsx)(y.Z.Header,{closeButton:!0,children:(0,d.jsxs)(y.Z.Title,{children:["ID ",this.state.id]})}),(0,d.jsxs)(y.Z.Body,{children:[(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:4,children:"Kennziffer:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("input",{type:"text",value:this.state.kennziffer?this.state.kennziffer:"",onChange:function(t){e.setState({kennziffer:t.target.value})}})})]}),(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:4,children:"Signatur:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("input",{type:"text",value:this.state.signatur?this.state.signatur:"",onChange:function(t){e.setState({signatur:t.target.value})}})})]}),(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:4,children:"alte Signatur:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("input",{type:"text",value:this.state.alte_signatur?this.state.alte_signatur:"",onChange:function(t){e.setState({alte_signatur:t.target.value})}})})]}),(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:4,children:"Name:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("input",{type:"text",value:this.state.name?this.state.name:"",onChange:function(t){e.setState({name:t.target.value})}})})]}),(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:4,children:"Vorname:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("input",{type:"text",value:this.state.vorname?this.state.vorname:"",onChange:function(t){e.setState({vorname:t.target.value})}})})]}),(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:4,children:"Titel:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("input",{type:"text",value:this.state.titel?this.state.titel:"",onChange:function(t){e.setState({titel:t.target.value})}})})]}),(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:4,children:"Reihe:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("input",{type:"text",value:this.state.reihe?this.state.reihe:"",onChange:function(t){e.setState({reihe:t.target.value})}})})]}),(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:4,children:"Ort:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("input",{type:"text",value:this.state.ort?this.state.ort:"",onChange:function(t){e.setState({ort:t.target.value})}})})]}),(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:4,children:"Jahr:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("input",{type:"text",value:this.state.jahr?this.state.jahr:"",onChange:function(t){e.setState({jahr:t.target.value})}})})]}),(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:4,children:"weitere Angaben:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("input",{type:"text",value:this.state.weitere_angaben?this.state.weitere_angaben:"",onChange:function(t){e.setState({weitere_angaben:t.target.value})}})})]}),(0,d.jsxs)(w.Z,{className:"mb-4",children:[(0,d.jsx)(k.Z,{xs:4,children:"Zusatz:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("input",{type:"text",value:this.state.zusatz?this.state.zusatz:"",onChange:function(t){e.setState({zusatz:t.target.value})}})})]}),(0,d.jsx)(w.Z,{children:(0,d.jsxs)(k.Z,{children:[(0,d.jsx)(N.YG,{value:"speichern",onClick:(0,m.Z)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.Q.seklit.save({id:e.state.id,kennziffer:e.state.kennziffer,signatur:e.state.signature,alte_signatur:e.state.alte_signatur,name:e.state.name,vorname:e.state.vorname,titel:e.state.titel,reihe:e.state.reihe,weitere_angaben:e.state.weitere_angaben,ort:e.state.ort,jahr:e.state.jahr,zusatz:e.state.zusatz});case 2:return e.props.onUpdate(e.state.id),t.abrupt("return",{status:!0});case 4:case"end":return t.stop()}}),t)})))}),(0,d.jsx)(E.Z,{variant:"danger",style:{marginLeft:"10px"},onClick:(0,m.Z)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Soll der Eintrag gel\xf6scht werden? Dieser Schritt kann nicht r\xfcckg\xe4ngig gemacht werden!")){t.next=5;break}return t.next=3,S.Q.seklit.delete(e.state.id);case 3:e.props.onClose(),e.props.onReload();case 5:case"end":return t.stop()}}),t)}))),children:"l\xf6schen"})]})})]})]})}},{key:"componentDidUpdate",value:function(){this.state.id!==this.props.item.id&&this.setState({id:this.props.item.id,kennziffer:this.props.item.kennziffer,signatur:this.props.item.signatur,alte_signatur:this.props.item.alte_signatur,name:this.props.item.name,vorname:this.props.item.vorname,titel:this.props.item.titel,reihe:this.props.item.reihe,weitere_angaben:this.props.item.weitere_angaben,ort:this.props.item.ort,jahr:this.props.item.jahr,zusatz:this.props.item.zusatz})}}]),s}(_.Component),P=function(e){(0,j.Z)(s,e);var t=(0,f.Z)(s);function s(e){var n;return(0,x.Z)(this,s),(n=t.call(this,e)).state={item:null,newItemCreated:null,offset:0},n}return(0,p.Z)(s,[{key:"render",value:function(){var e=this;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(a.Z,{fixed:"bottom",bg:"light",children:(0,d.jsxs)(i.Z,{fluid:!0,children:[(0,d.jsx)(a.Z.Collapse,{className:"justify-content-start",children:(0,d.jsx)(a.Z.Text,{children:(0,d.jsx)(N.Rj,{setupItems:this.state.newItemCreated,boxName:"ressources",searchQuery:function(t,s){e.searchQuery(t,s)},searchOptions:[["ac_web","Werk"],["work_id","Werk-ID"],["ressource","Ressource-Typ"],["id","ID"],["path","Dateipfad"]],sortOptions:[['["id"]',"ID"],['["label"]',"K\xfcrzel"],['["opus"]',"vrkn. Werk"]],status:this.state.searchStatus})})}),(0,d.jsxs)(a.Z.Collapse,{className:"justify-content-end",children:[(0,d.jsx)(a.Z.Text,{children:this.state.count>0?(0,d.jsx)(N.C3,{loadPage:function(t){e.loadPage(t)},currentPage:this.state.currentPage,maxPage:this.state.maxPage}):null}),(0,d.jsx)(a.Z.Text,{children:S.Q.access("l_edit")&&(0,d.jsx)(N.vW,{menuItems:[["neue Ressource",(0,m.Z)(Z().mark((function t(){var s;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Soll eine neue Ressource erstellt werden?")){t.next=5;break}return t.next=3,S.Q.edition.save({ressource:0,editor:"Neue Ressource",year:(new Date).getFullYear()});case 3:s=t.sent,e.setState({newItemCreated:[{id:0,c:"id",o:"=",v:s}]});case 5:case"end":return t.stop()}}),t)})))]]})})]})]})}),(0,d.jsx)(i.Z,{className:"mainBody",children:(0,d.jsx)(R,{loadPage:function(t){e.loadPage(t)},currentElements:this.state.currentElements,count:this.state.count,currentPage:this.state.currentPage,maxPage:this.state.maxPage,gridArea:this.state.item?"2/1/2/2":"2/1/2/3",showDetail:function(t){e.setState({item:t})}})}),this.state.item?(0,d.jsx)(K,{item:this.state.item,onUpdate:function(t){e.reloadEntry(t)},onReload:function(){e.loadPage(e.state.currentPage)},onClose:function(){e.setState({item:null})}}):""]})}},{key:"reloadEntry",value:function(){var e=(0,m.Z)(Z().mark((function e(t){var s,n,r,a;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t>0)){e.next=11;break}return e.next=3,S.Q.edition.get({id:t});case 3:s=(s=e.sent)[0],n=this.state.currentElements,r=n.findIndex((function(e){return e.id===s.id})),n[r]=s,this.setState({currentElements:n,item:s}),e.next=15;break;case 11:return e.next=13,S.Q.edition.search(this.state.query,{limit:50,offset:this.state.offset,order:this.state.queryOrder});case 13:a=e.sent,this.setState({currentElements:a,item:null});case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"searchQuery",value:function(){var e=(0,m.Z)(Z().mark((function e(t,s){var n,r;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.Q.edition.search(t,{count:!0,order:s});case 2:return n=e.sent,e.next=5,S.Q.edition.search(t,{limit:50,order:s});case 5:r=e.sent,n[0].count>1?this.setState({searchStatus:"".concat(n[0].count," Eintr\xe4ge gefunden.")}):1===n[0].count?this.setState({searchStatus:"1 Eintrag gefunden."}):this.setState({searchStatus:"Keine Eintr\xe4ge gefunden."}),this.setState({query:t,queryOrder:s,count:n[0].count,maxPage:Math.floor(n[0].count/50)+1,currentPage:1,currentElements:r,selectionDetail:{ids:[]}});case 8:case"end":return e.stop()}}),e,this)})));return function(t,s){return e.apply(this,arguments)}}()},{key:"loadPage",value:function(){var e=(0,m.Z)(Z().mark((function e(t){var s;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.Q.edition.search(this.state.query,{limit:50,offset:50*(t-1),order:this.state.queryOrder});case 2:s=e.sent,this.setState({offset:50*(t-1),currentPage:t,currentElements:s,selectionDetail:{ids:[]}});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),s}(_.Component),R=function(e){(0,j.Z)(s,e);var t=(0,f.Z)(s);function s(e){var n;return(0,x.Z)(this,s),(n=t.call(this,e)).state={selection:{currentId:null,ids:[]}},n}return(0,p.Z)(s,[{key:"render",value:function(){var e=this;if(this.props.count>0){var t,s={0:"Edition (relevant)",1:"Edition (veraltet)",2:"Handschrift",3:"Alter Druck (relevant)",4:"Alter Druck (veraltet)",5:"Sonstiges"},a=[],i=(0,h.Z)(this.props.currentElements);try{for(i.s();!(t=i.n()).done;){var l=t.value,c=l.url;""!==c&&null!==c||(c="/site/viewer/"+l.id),a.push((0,d.jsxs)("tr",{id:l.id,onDoubleClick:function(t){e.props.showDetail(e.props.currentElements.find((function(e){return e.id===parseInt(t.target.closest("tr").id)})))},children:[(0,d.jsx)("td",{title:"ID: "+l.id,children:l.label}),(0,d.jsx)("td",{children:s[l.ressource]}),(0,d.jsx)("td",{dangerouslySetInnerHTML:(0,N.rg)(l.opus)}),(0,d.jsxs)("td",{children:[(0,d.jsx)("a",{href:c,target:"_blank",children:"\xf6ffnen"}),l.url?(0,d.jsx)(n.G,{style:{fontSize:"14px",marginLeft:"10px"},icon:r.Xjp}):null]})]},l.id))}}catch(o){i.e(o)}finally{i.f()}return(0,d.jsx)("div",{style:{gridArea:this.props.gridArea,padding:"0 10px"},children:(0,d.jsxs)(b.Z,{width:"100%",striped:!0,children:[(0,d.jsx)("thead",{style:{textAlign:"left"},children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{width:"20%",children:"K\xfcrzel"}),(0,d.jsx)("th",{width:"20%",children:"Typ"}),(0,d.jsx)("th",{children:"vrkn. Werk"}),(0,d.jsx)("th",{width:"10%",children:"Link"})]})}),(0,d.jsx)("tbody",{children:a})]})})}return(0,d.jsx)(N.Km,{})}}]),s}(_.Component),K=function(e){(0,j.Z)(s,e);var t=(0,f.Z)(s);function s(e){var n;return(0,x.Z)(this,s),(n=t.call(this,e)).state={id:n.props.item.id,ressource:n.props.item.ressource,work_id:n.props.item.work_id,ac_web:n.props.item.ac_web,editor:n.props.item.editor,year:n.props.item.year,volume:n.props.item.volume,vol_cont:n.props.item.vol_cont,serie:n.props.item.serie,location:n.props.item.location,library:n.props.item.library,signature:n.props.item.signature,comment:n.props.item.comment,path:n.props.item.path,url:n.props.item.url,aspect_ratio:n.props.item.aspect_ratio,bibliography_preview:null},n}return(0,p.Z)(s,[{key:"render",value:function(){var e=this;return(0,d.jsxs)(y.Z,{show:!0,placement:"end",scroll:!0,backdrop:!1,onHide:function(){e.props.onClose()},children:[(0,d.jsx)(y.Z.Header,{closeButton:!0,children:(0,d.jsxs)(y.Z.Title,{children:["ID ",this.state.id]})}),(0,d.jsxs)(y.Z.Body,{children:[(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:3,children:"Werk:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)(N.Qc,{value:this.state.ac_web?this.state.ac_web:"",tbl:"work",searchCol:"ac_web",returnCol:"ac_web",onChange:function(t,s){e.setState({ac_web:t,work_id:s}),e.updateBibliography(s)}})})]}),(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:3,children:"Alter Dateiname:"}),(0,d.jsx)(k.Z,{children:this.props.item.dir_name})]}),this.state.bibliography_preview&&(0,d.jsxs)(w.Z,{className:"mb-4",children:[(0,d.jsx)(k.Z,{xs:3,children:"Biblio-graphische Angaben:"}),(0,d.jsx)(k.Z,{style:{fontSize:"90%",backgroundColor:"var(--bs-gray-100"},children:this.state.bibliography_preview})]}),(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:3,children:"Ressource:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)(N.SA,{options:[[0,"Edition (relevant)"],[1,"Edition (veraltet)"],[2,"Handschrift"],[3,"Alter Druck (relevant)"],[4,"Alter Druck (veraltet)"],[5,"Sonstiges"]],value:this.state.ressource?this.state.ressource:"",onChange:function(t){e.setState({ressource:parseInt(t.target.value)})}})})]}),0===this.state.ressource||1===this.state.ressource||5===this.state.ressource?[(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:3,children:"Editor:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("input",{type:"text",style:{width:"100%"},value:this.state.editor?this.state.editor:"",onChange:function(t){e.setState({editor:t.target.value})}})})]},"0"),(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:3,children:"Jahr:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("input",{type:"text",style:{width:"100%"},value:this.state.year?this.state.year:"",onChange:function(t){e.setState({year:t.target.value})}})})]},"1"),(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:3,children:"Band:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("input",{type:"text",style:{width:"100%"},value:this.state.volume?this.state.volume:"",onChange:function(t){e.setState({volume:t.target.value})}})})]},"2"),(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:3,children:"Bandinhalt:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("input",{type:"text",style:{width:"100%"},value:this.state.vol_cont?this.state.vol_cont:"",onChange:function(t){e.setState({vol_cont:t.target.value})}})})]},"3"),(0,d.jsxs)(w.Z,{className:"mb-4",children:[(0,d.jsx)(k.Z,{xs:3,children:"Reihe:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)(N.SA,{options:[[0,""],[1,"Migne PL"],[2,"ASBen."],[3,"ASBoll."],[4,"AnalBoll."],[5,"Mon. Boica"],[6,"Ma. Schatzverzeichnisse"],[7,"Ma. Bibliothekskataloge"]],value:this.state.serie?this.state.serie:"",onChange:function(t){e.setState({serie:parseInt(t.target.value)})}})})]},"4")]:null,2===this.state.ressource?[(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:3,children:"Stadt:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("input",{type:"text",style:{width:"100%"},value:this.state.location?this.state.location:"",onChange:function(t){e.setState({location:t.target.value})}})})]},"5"),(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:3,children:"Bibliothek:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("input",{type:"text",style:{width:"100%"},value:this.state.library?this.state.library:"",onChange:function(t){e.setState({library:t.target.value})}})})]},"6"),(0,d.jsxs)(w.Z,{className:"mb-4",children:[(0,d.jsx)(k.Z,{xs:3,children:"Signatur:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("input",{type:"text",style:{width:"100%"},value:this.state.signature?this.state.signature:"",onChange:function(t){e.setState({signature:t.target.value})}})})]},"7")]:null,3===this.state.ressource||4===this.state.ressource?[(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:3,children:"Drucker:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("input",{type:"text",style:{width:"100%"},value:this.state.editor?this.state.editor:"",onChange:function(t){e.setState({editor:t.target.value})}})})]},"8"),(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:3,children:"Ort:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("input",{type:"text",style:{width:"100%"},value:this.state.location?this.state.location:"",onChange:function(t){e.setState({location:t.target.value})}})})]},"9"),(0,d.jsxs)(w.Z,{className:"mb-4",children:[(0,d.jsx)(k.Z,{xs:3,children:"Jahr:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("input",{type:"text",style:{width:"100%"},value:this.state.year?this.state.year:"",onChange:function(t){e.setState({year:t.target.value})}})})]},"10")]:null,(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:3,children:"Kommentar:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("textarea",{style:{width:"267px",height:"100px"},value:this.state.comment?this.state.comment:"",onChange:function(t){e.setState({comment:t.target.value})}})})]}),(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:3,children:"Dateipfad:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("input",{type:"text",style:{width:"100%"},value:this.state.path?this.state.path:"",onChange:function(t){e.setState({path:t.target.value})}})})]}),(0,d.jsxs)(w.Z,{className:"mb-4",children:[(0,d.jsxs)(k.Z,{xs:3,children:["Link:",(0,d.jsx)("br",{}),(0,d.jsx)("small",{children:"(externe Quellen)"})]}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("input",{type:"text",style:{width:"100%"},value:this.state.url?this.state.url:"",onChange:function(t){e.setState({url:t.target.value})}})})]}),(0,d.jsxs)(w.Z,{className:"mb-4",children:[(0,d.jsx)(k.Z,{xs:3,children:"Seiten-verh\xe4ltnis:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("input",{type:"text",style:{width:"100%"},value:this.state.aspect_ratio?this.state.aspect_ratio:"",onChange:function(t){e.setState({aspect_ratio:t.target.value.substring(0,5)})}})})]}),(0,d.jsx)(w.Z,{className:"mb-2",children:(0,d.jsxs)(k.Z,{children:[(0,d.jsx)(N.YG,{value:"speichern",onClick:(0,m.Z)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e.state.ressource&&1!==e.state.ressource&&5!==e.state.ressource||e.state.serie||e.state.editor&&e.state.year){t.next=4;break}return t.abrupt("return",{status:!1,error:"Geben Sie den Editor und das Jahr ein."});case 4:return t.next=6,S.Q.edition.save({id:e.state.id,work_id:e.state.work_id,ressource:e.state.ressource,editor:e.state.editor,year:e.state.year,volume:e.state.volume,vol_cont:e.state.vol_cont,serie:e.state.serie,comment:e.state.comment,location:e.state.location,library:e.state.library,signature:e.state.signature,path:e.state.path,url:e.state.url,aspect_ratio:e.state.aspect_ratio});case 6:return e.props.onUpdate(e.state.id),t.abrupt("return",{status:!0});case 8:case"end":return t.stop()}}),t)})))}),(0,d.jsx)(E.Z,{variant:"danger",style:{marginLeft:"20px"},onClick:(0,m.Z)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Soll die Ressource wirklich gel\xf6scht werden? Dieser Schritt kann nicht r\xfcckg\xe4ngig gemacht werden!")){t.next=5;break}return t.next=3,S.Q.edition.delete(e.state.id);case 3:e.props.onUpdate(null),e.props.onReload();case 5:case"end":return t.stop()}}),t)}))),children:"l\xf6schen"})]})})]})]})}},{key:"componentDidMount",value:function(){this.updateBibliography(this.props.item.work_id)}},{key:"componentDidUpdate",value:function(){this.state.id!==this.props.item.id&&(this.updateBibliography(this.props.item.work_id),this.setState({id:this.props.item.id,ressource:this.props.item.ressource,work_id:this.props.item.work_id,ac_web:this.props.item.ac_web,editor:this.props.item.editor,year:this.props.item.year,volume:this.props.item.volume,vol_cont:this.props.item.vol_cont,serie:this.props.item.serie,location:this.props.item.location,library:this.props.item.library,signature:this.props.item.signature,comment:this.props.item.comment,path:this.props.item.path,url:this.props.item.url,aspect_ratio:this.props.item.aspect_ratio}))}},{key:"updateBibliography",value:function(){var e=(0,m.Z)(Z().mark((function e(t){var s;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t>0)){e.next=5;break}return e.next=3,S.Q.work.get({id:t},{select:["bibliography"]});case 3:(s=e.sent).length>0?this.setState({bibliography_preview:s[0].bibliography}):this.setState({bibliography_preview:null});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),s}(_.Component),O=s(8491),J=s(9485),G=s(1734),U=s(5405),V=function(e){(0,j.Z)(s,e);var t=(0,f.Z)(s);function s(e){var n;return(0,x.Z)(this,s),(n=t.call(this,e)).state={zettel_process:null,lemma_letters:null,ressource_work:null},n}return(0,p.Z)(s,[{key:"render",value:function(){var e=this,t=null;if(this.state.zettel_process){var s=[],n={labels:["abgeschlossen","nur Lemma","unbearbeitet"],datasets:[{label:"# of Votes",data:this.state.zettel_process,backgroundColor:["#114B79","#347F9F","#EAF2F3"],borderColor:["#1B3B6F","#065A82","#E8F1F2"],borderWidth:1}]};s.push((0,d.jsxs)("div",{style:{margin:"auto",marginBottom:"80px",width:"450px",height:"450px"},children:[(0,d.jsx)("h4",{children:"nach Bearbeitungsstand"}),(0,d.jsx)(U.by,{options:{plugins:{legend:{position:"bottom"}}},data:n})]},"1"));var r={labels:["verzetteltes Material","Exzerpt","Index","Literatur","Index (unkl. Werk)","Notiz","kein Typ"],datasets:[{label:"# of Votes",data:this.state.zettel_types,backgroundColor:["#114B79","#347F9F","#8FC9D9","#D2EFF4","#EAF2F3","#EFEFEF","#FFFFFF"],borderColor:["#1B3B6F","#065A82","#61A4BC","#BCEDF6","#E8F1F2","#EEEEEE","#EFEFEF"],borderWidth:1}]};s.push((0,d.jsxs)("div",{style:{margin:"auto",marginBottom:"80px",width:"450px",height:"450px"},children:[(0,d.jsx)("h4",{children:"nach Typen"}),(0,d.jsx)(U.by,{options:{plugins:{legend:{position:"bottom"}}},data:r})]},"2"));var l={labels:["2020","2021","2022"],datasets:[{label:"ver\xe4ndert",data:this.state.zettel_changed,backgroundColor:["#114B79"],borderColor:["#114B79"],borderWidth:1,type:"line"},{label:"erstellt",data:this.state.zettel_created,backgroundColor:["#347F9F"],borderColor:["#347F9F"],borderWidth:1}]};s.push((0,d.jsxs)("div",{style:{marginBottom:"80px",width:"100%",height:"400px"},children:[(0,d.jsx)("h4",{children:"nach Jahren"}),(0,d.jsx)(U.$Q,{options:{aspectRatio:!1,plugins:{legend:{display:!0,position:"bottom"}}},data:l})]},"3"));var c=["Jan.","Feb.","M\xe4r.","Apr.","Mai","Jun.","Jul.","Aug.","Sep.","Okt.","Nov.","Dez."];c.splice((new Date).getMonth()+1);var o={labels:c,datasets:[{label:"ver\xe4ndert",data:this.state.zettel_changed_current,backgroundColor:["#114B79"],borderColor:["#114B79"],borderWidth:1,type:"line"},{label:"erstellt",data:this.state.zettel_created_current,backgroundColor:["#347F9F"],borderColor:["#347F9F"],borderWidth:1}]};s.push((0,d.jsxs)("div",{style:{marginBottom:"80px",width:"100%",height:"400px"},children:[(0,d.jsx)("h4",{children:"in diesem Jahr"}),(0,d.jsx)(U.$Q,{options:{aspectRatio:!1,plugins:{legend:{display:!0,position:"bottom"}}},data:o})]},"4")),t=(0,d.jsx)("div",{children:s})}var u=null;if(this.state.lemma_letters){var h=[],x={labels:["A","B","C","D","E","F","G","H","I","K","L","M","N","O","P","Q","R","S","T","U","V","X","Y","Z"],datasets:[{label:"",data:this.state.lemma_letters,backgroundColor:["#114B79","#347F9F","#8FC9D9","#D2EFF4","#EAF2F3"],borderColor:["#1B3B6F","#065A82","#61A4BC","#BCEDF6","#E8F1F2"],borderWidth:1}]};h.push((0,d.jsxs)("div",{style:{margin:"auto",marginBottom:"80px",width:"450px",height:"450px"},children:[(0,d.jsx)("h4",{children:"nach Buchstaben"}),(0,d.jsx)(U.by,{options:{plugins:{legend:{display:!1,position:"bottom"}}},data:x})]},"1"));var p={labels:["relevant","nicht relevant"],datasets:[{label:"",data:this.state.lemma_mlw,backgroundColor:["#114B79","#EAF2F3"],borderColor:["#1B3B6F","#E8F1F2"],borderWidth:1}]};h.push((0,d.jsxs)("div",{style:{margin:"auto",marginBottom:"80px",width:"450px",height:"450px"},children:[(0,d.jsx)("h4",{children:"nach Relevanz f\xfcrs W\xf6rterbuch"}),(0,d.jsx)(U.by,{options:{plugins:{legend:{display:!0,position:"bottom"}}},data:p})]},"2")),u=(0,d.jsx)("div",{style:{display:"flex",flexWrap:"wrap"},children:h})}var j=null;if(this.state.ressource_work){var f=[],g={labels:["mit Volltext und pdf","nur mit pdf","ohne pdf und Volltext","nicht in Benutzung"],datasets:[{label:"",data:this.state.ressource_work,backgroundColor:["#114B79","#347F9F","#EAF2F3","#FFFFFF"],borderColor:["#1B3B6F","#065A82","#E8F1F2","#EFEFEF"],borderWidth:1}]};f.push((0,d.jsxs)("div",{style:{margin:"auto",marginBottom:"80px",width:"450px",height:"450px"},children:[(0,d.jsx)("h4",{children:"Werke nach Volltext und pdfs"}),(0,d.jsx)(U.by,{options:{plugins:{legend:{position:"bottom"}}},data:g})]},"1")),j=(0,d.jsx)("div",{style:{display:"flex",flexWrap:"wrap"},children:f})}return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(a.Z,{fixed:"bottom",bg:"light",children:(0,d.jsx)(i.Z,{fluid:!0,children:(0,d.jsx)(a.Z.Collapse,{className:"justify-content-end",children:(0,d.jsx)(a.Z.Text,{children:S.Q.access("l_edit")&&(0,d.jsx)(N.vW,{menuItems:[["Statistik aktualisieren",(0,m.Z)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Sollen die Statistik aktualisiert werden? Dieser Prozess dauert ca. 30 Sekunden.")){t.next=10;break}return t.next=3,S.Q.exec("statistics_update");case 3:if(200!==t.sent){t.next=9;break}return e.getNumbers(),t.abrupt("return",{status:!0});case 9:return t.abrupt("return",{status:!1,error:"Die Aktualisierung war nicht erfolgreich."});case 10:case"end":return t.stop()}}),t)})))]]})})})})}),(0,d.jsxs)(i.Z,{className:"mainBody",children:[(0,d.jsxs)(J.Z,{defaultActiveKey:"lemma",className:"mb-3",children:[(0,d.jsx)(G.Z,{eventKey:"lemma",title:"Lemma",children:u}),(0,d.jsx)(G.Z,{eventKey:"zettel",title:"Zettel",children:t}),(0,d.jsx)(G.Z,{eventKey:"ressource",title:"Werke und Ressourcen",children:j})]}),(0,d.jsx)("div",{style:{float:"right",color:"var(--bs-gray-400"},children:this.state.last_updated})]})]})}},{key:"componentDidMount",value:function(){this.getNumbers()}},{key:"getNumbers",value:function(){var e=(0,m.Z)(Z().mark((function e(){var t;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.Q.statistics.getAll();case 2:t=e.sent,this.setState({last_updated:JSON.parse(t.find((function(e){return"last_updated"===e.name})).data),zettel_process:JSON.parse(t.find((function(e){return"zettel_process"===e.name})).data),zettel_types:JSON.parse(t.find((function(e){return"zettel_type"===e.name})).data),zettel_created:JSON.parse(t.find((function(e){return"zettel_created"===e.name})).data),zettel_changed:JSON.parse(t.find((function(e){return"zettel_changed"===e.name})).data),zettel_created_current:JSON.parse(t.find((function(e){return"zettel_created_current"===e.name})).data),zettel_changed_current:JSON.parse(t.find((function(e){return"zettel_changed_current"===e.name})).data),lemma_letters:JSON.parse(t.find((function(e){return"lemma_letter"===e.name})).data),lemma_mlw:JSON.parse(t.find((function(e){return"lemma_mlw"===e.name})).data),ressource_work:JSON.parse(t.find((function(e){return"ressource_work"===e.name})).data)});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),s}(_.Component),Y=function(e){(0,j.Z)(s,e);var t=(0,f.Z)(s);function s(e){var n;return(0,x.Z)(this,s),(n=t.call(this,e)).state={ocrJobs:[],faszikelJobs:[],users:[]},n}return(0,p.Z)(s,[{key:"render",value:function(){var e=this,t="";return S.Q.access("ocr_jobs")?t="o":S.Q.access("faszikel")?t="d":S.Q.access("admin")&&(t="a"),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(i.Z,{className:"mainBody",children:(0,d.jsxs)(J.Z,{defaultActiveKey:t,className:"mb-5",children:[S.Q.access("ocr_jobs")&&(0,d.jsxs)(G.Z,{eventKey:"o",title:"ocr-Auftr\xe4ge",style:{padding:"0 25%"},children:[(0,d.jsx)(w.Z,{className:"mb-2",children:(0,d.jsx)(k.Z,{children:"Hier finden Sie die auf dem Server laufenden und abgeschlossenen Auftr\xe4ge zur ocr-Erkennung."})}),(0,d.jsx)(w.Z,{children:(0,d.jsxs)(k.Z,{children:[(0,d.jsx)(N.YG,{value:"neuer Zettel-Auftrag aufgeben",onClick:(0,m.Z)(Z().mark((function t(){var s;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.Q.exec("ocr_job");case 2:if(200!==(s=t.sent)){t.next=10;break}return t.next=6,(0,N._v)(500);case 6:return e.loadOcrJobs(),t.abrupt("return",{status:!0});case 10:if(409!==s){t.next=14;break}return t.abrupt("return",{status:!1,error:"Es ist bereits ein Auftrag aktiv! Warten Sie, bis dieser abgeschlossen ist."});case 14:return t.abrupt("return",{status:!1,error:"Es ist ein Fehler aufgetreten."});case 15:case"end":return t.stop()}}),t)})))}),(0,d.jsx)(N.YG,{value:"neuer Scan-Auftrag aufgeben",onClick:(0,m.Z)(Z().mark((function t(){var s;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.Q.exec("ocr_job_scans");case 2:if(200!==(s=t.sent)){t.next=10;break}return t.next=6,(0,N._v)(500);case 6:return e.loadOcrJobs(),t.abrupt("return",{status:!0});case 10:if(409!==s){t.next=14;break}return t.abrupt("return",{status:!1,error:"Es ist bereits ein Auftrag aktiv! Warten Sie, bis dieser abgeschlossen ist."});case 14:return t.abrupt("return",{status:!1,error:"Es ist ein Fehler aufgetreten."});case 15:case"end":return t.stop()}}),t)})))})]})}),(0,d.jsx)(w.Z,{children:(0,d.jsx)(k.Z,{children:(0,d.jsxs)(b.Z,{striped:!0,width:"100%",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{children:"Datum"}),(0,d.jsx)("th",{children:"Objekte"}),(0,d.jsx)("th",{children:"Status"}),(0,d.jsx)("th",{children:"Gesamtauftrag"}),(0,d.jsx)("th",{children:"bearbeitet"})]})}),(0,d.jsx)("tbody",{children:this.state.ocrJobs.map((function(e){var t=(0,d.jsx)("td",{className:"text-primary",children:"aktiv"});return 1===e.finished?t=(0,d.jsx)("td",{className:"text-secondary",children:"beendet"}):new Date-(0,N.SE)(e.u_date)>18e5&&(t=(0,d.jsx)("td",{className:"text-warning",children:"inaktiv"})),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:e.c_date.substring(0,10)}),(0,d.jsx)("td",{children:e.source}),t,(0,d.jsx)("td",{children:e.total}),(0,d.jsxs)("td",{children:[Math.round(1e3/e.total*e.count)/10,"%"]})]},e.id)}))})]})})})]}),S.Q.access("faszikel")&&(0,d.jsxs)(G.Z,{eventKey:"d",title:"Druckausgabe",style:{padding:"0 25%"},children:[(0,d.jsx)(w.Z,{className:"mb-2",children:(0,d.jsx)(k.Z,{children:"Hier finden Sie die auf dem Server laufenden und abgeschlossenen Auftr\xe4ge zum Erstellen der Druckausgabe."})}),(0,d.jsx)(w.Z,{children:(0,d.jsx)(k.Z,{children:(0,d.jsx)(b.Z,{striped:!0,width:"100%",children:(0,d.jsx)("tbody",{children:this.state.faszikelJobs.map((function(e){if(e.log){var t=e.date.split("");t[10]=" ",t[13]=":",t[16]=":";var s=t.join("").substring(0,19);return(0,d.jsxs)("tr",{style:{verticalAlign:"top"},children:[(0,d.jsxs)("td",{style:{padding:"10px 0px"},children:[(0,d.jsx)("b",{children:e.name?e.name.substring(0,e.name.length-4):(0,d.jsx)("i",{children:"Eintrag"})}),(0,d.jsx)("br",{}),(0,d.jsx)("i",{className:"minorTxt",children:s})]}),(0,d.jsx)("td",{children:e.name?(0,d.jsx)("a",{target:"_blank",href:"/file/faszikel/".concat(e.date,"/").concat(e.name),children:"pdf"}):null}),(0,d.jsx)("td",{children:(0,d.jsx)("a",{target:"_blank",href:"/file/faszikel/".concat(e.date,"/zip"),children:"Artikel"})}),(0,d.jsx)("td",{children:(0,d.jsx)("a",{target:"_blank",href:"/file/faszikel/".concat(e.date,"/log"),children:"log-Datei"})})]})}return(0,d.jsxs)("tr",{style:{verticalAlign:"top"},children:[(0,d.jsx)("td",{style:{padding:"10px 0px"},children:(0,d.jsx)("b",{children:"Neuer Auftrag in Bearbeitung"})}),(0,d.jsx)("td",{}),(0,d.jsx)("td",{})]})}))})})})})]}),S.Q.access("admin")&&(0,d.jsx)(G.Z,{eventKey:"a",title:"Kontenverwaltung",style:{padding:"0 20%"},children:(0,d.jsxs)(b.Z,{striped:!0,width:"100%",children:[(0,d.jsx)("thead",{style:{textAlign:"left"},children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{width:"25%",children:"Name"}),(0,d.jsx)("th",{width:"30%",children:"Rechte"}),(0,d.jsx)("th",{width:"35%",children:"Browser"}),(0,d.jsx)("th",{width:"10%",children:"Aktiv"})]})}),(0,d.jsx)("tbody",{children:this.state.users.map((function(t){return(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:(0,d.jsxs)("a",{className:"text-dark",onClick:function(){e.setState({item:t})},children:[t.first_name," ",t.last_name]})}),(0,d.jsx)("td",{children:JSON.parse(t.access).join(", ")}),(0,d.jsx)("td",{children:t.agent}),(0,d.jsx)("td",{children:t.session_last_active&&new Date-(0,N.SE)(t.session_last_active)<18e5?(0,d.jsx)(n.G,{icon:r.enB,color:"gold",style:{fontSize:"25px",marginLeft:"20px"}}):(0,d.jsx)(n.G,{icon:r.DBF,color:"silver",style:{fontSize:"20px",marginLeft:"20px"}})})]},t.id)}))})]})})]})}),this.state.item&&(0,d.jsx)(q,{onReload:function(){e.loadUsers()},onClose:function(){e.setState({item:null})},item:this.state.item,onUpdate:function(e){}})]})}},{key:"componentDidMount",value:function(){S.Q.access("admin")&&this.loadUsers(),S.Q.access("ocr_jobs")&&this.loadOcrJobs(),S.Q.access("faszikel")&&this.loadFaszikelJobs()}},{key:"loadFaszikelJobs",value:function(){var e=(0,m.Z)(Z().mark((function e(){var t;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({faszikelJobs:[]}),e.next=3,S.Q.exec("get_faszikel_jobs",!0);case 3:t=e.sent,this.setState({faszikelJobs:t});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadOcrJobs",value:function(){var e=(0,m.Z)(Z().mark((function e(){var t;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({ocrJobs:[]}),e.next=3,S.Q.ocr_jobs.getAll();case 3:t=e.sent,this.setState({ocrJobs:t});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadUsers",value:function(){var e=(0,m.Z)(Z().mark((function e(){var t;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({users:[]}),e.next=3,S.Q.user.getAll({order:["last_name"]});case 3:t=e.sent,this.setState({users:t});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),s}(_.Component),q=function(e){(0,j.Z)(s,e);var t=(0,f.Z)(s);function s(e){var n;return(0,x.Z)(this,s),(n=t.call(this,e)).state={access:JSON.parse(n.props.item.access)},n}return(0,p.Z)(s,[{key:"render",value:function(){for(var e=this,t=[],s=function(){var s=(0,L.Z)(r[n],2),a=s[0],i=s[1],l="";e.state.access.includes(a)&&(l="accessMarked"),t.push((0,d.jsx)("div",{style:{cursor:"pointer"},className:l,onClick:function(){var t=e.state.access;t.includes(a)?t=t.map((function(e){if(e!=a)return e})):t.push(a),e.setState({access:t})},children:i},a))},n=0,r=Object.entries({auth:"Profil aktiviert",admin:"Adminrechte",o_view:"Kommentarspalte (opera-Listen)",o_edit:"opera-Listen bearbeiten",z_add:"Zettel importieren",z_edit:"Zettel bearbeiten",l_edit:"Lemma-Liste bearbeiten",library:"Zugriff auf Bibliothek",e_edit:"Bibliothek bearbeiten",setup:"Zugriff auf Datenbanksetup",module:"Zugriff \xfcber Python-Modul",editor:"Zugriff auf Lemmastrecken-Editor",comment:"Zugriff auf Kommentarfunktion",comment_moderator:"Kommentare moderieren",faszikel:"Faszikel konvertieren",ocr_jobs:"OCR-Auftr\xe4ge aufgeben"});n<r.length;n++)s();return(0,d.jsxs)(y.Z,{show:!0,placement:"end",scroll:!0,backdrop:!1,onHide:function(){e.props.onClose()},children:[(0,d.jsx)(y.Z.Header,{closeButton:!0,children:(0,d.jsxs)(y.Z.Title,{children:[this.props.item.first_name," ",this.props.item.last_name," (ID ",this.props.item.id,")"]})}),(0,d.jsx)(y.Z.Body,{children:(0,d.jsxs)(i.Z,{children:[(0,d.jsx)(w.Z,{className:"mb-1",children:(0,d.jsxs)(k.Z,{children:["Am ",this.props.item.session_last_active," zuletzt online."]})}),(0,d.jsx)(w.Z,{className:"mb-3",children:(0,d.jsx)(k.Z,{style:{border:"1px solid var(--bs-secondary)",borderRadius:"2px",color:"var(--bs-secondary)",margin:"10px 0",padding:"10px"},children:this.props.item.agent})}),(0,d.jsx)(w.Z,{children:(0,d.jsx)(k.Z,{children:(0,d.jsx)("h4",{children:"Rechte"})})}),(0,d.jsx)(w.Z,{className:"mb-3",children:(0,d.jsx)(k.Z,{style:{border:"1px solid var(--bs-secondary)",borderRadius:"2px",color:"var(--bs-secondary)",margin:"10px 0",padding:"10px"},children:t})}),(0,d.jsxs)(w.Z,{children:[(0,d.jsx)(k.Z,{children:(0,d.jsx)(N.YG,{value:"speichern",onClick:function(){return S.Q.user.save({id:e.props.item.id,access:JSON.stringify(e.state.access)}),e.props.onReload(),{status:!0}}})}),(0,d.jsx)(k.Z,{children:(0,d.jsx)(E.Z,{variant:"danger",onClick:(0,m.Z)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Soll der Account wirklich gel\xf6scht werden? Dieser Schritt kann nicht mehr r\xfcckg\xe4ngig gemacht werden!")){t.next=5;break}return t.next=3,S.Q.user.delete(e.props.item.id);case 3:e.props.onClose(),e.props.onReload();case 5:case"end":return t.stop()}}),t)}))),children:"Account l\xf6schen"})})]})]})})]})}},{key:"componentDidUpdate",value:function(e){e.item.id!=this.props.item.id&&this.setState({access:JSON.parse(this.props.item.access)})}}]),s}(_.Component),X=function(e){(0,j.Z)(s,e);var t=(0,f.Z)(s);function s(e){var n;return(0,x.Z)(this,s),(n=t.call(this,e)).state={tab:"res",workLst:[],pathLst:[],scanWork:"",scanWorkId:null,scanType:0,scanEditor:null,scanYear:null,scanVolume:null,scanVolumeContent:null,scanSerie:null,scanLibrary:null,scanLocation:null,scanSignature:null,scanFiles:null,ocrRessource:"",ocrRessourceId:null,ocrFiles:null,zettelLetter:"A",zettelType:0,zettelFiles:null,zettelEditors:[[S.Q.me.id,S.Q.me.last_name]],zettelEditorSelected:S.Q.me.id,zettelSuccess:null},n}return(0,p.Z)(s,[{key:"render",value:function(){var e=this;return(0,d.jsx)(i.Z,{className:"mainBody",children:(0,d.jsxs)(J.Z,{defaultActiveKey:"r",className:"mb-5",children:[(0,d.jsxs)(G.Z,{eventKey:"r",title:"Ressource",style:{padding:"0 25%"},children:[(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:3,children:"Werk:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)(N.Qc,{style:{width:"100%"},value:this.state.scanWork,tbl:"work",searchCol:"ac_web",returnCol:"ac_web",onChange:function(){var t=(0,m.Z)(Z().mark((function t(s,n){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({scanWork:s,scanWorkId:n});case 1:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()})})]}),(0,d.jsxs)(w.Z,{className:"mb-4",children:[(0,d.jsx)(k.Z,{xs:3,children:"Ressource:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)(N.SA,{options:[[0,"Edition (relevant)"],[1,"Edition (veraltet)"],[2,"Handschrift"],[3,"Alter Druck (relevant)"],[4,"Alter Druck (veraltet)"],[5,"Sonstiges"]],onChange:function(t){e.setState({scanType:parseInt(t.target.value)})}})})]}),0===this.state.scanType||1===this.state.scanType||5===this.state.scanType?[(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:3,children:"Editor:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("input",{type:"text",style:{width:"100%"},onChange:function(t){e.setState({scanEditor:t.target.value})}})})]},"0"),(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:3,children:"Jahr:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("input",{type:"text",style:{width:"100%"},onChange:function(t){e.setState({scanYear:t.target.value})}})})]},"1"),(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:3,children:"Band:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("input",{type:"text",style:{width:"100%"},onChange:function(t){e.setState({scanVolume:t.target.value})}})})]},"2"),(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:3,children:"Bandinhalt:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("input",{type:"text",style:{width:"100%"},onChange:function(t){e.setState({scanVolumeContent:t.target.value})}})})]},"3"),(0,d.jsxs)(w.Z,{className:"mb-4",children:[(0,d.jsx)(k.Z,{xs:3,children:"Reihe:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)(N.SA,{options:[[0,""],[1,"Migne PL"],[2,"ASBen."],[3,"ASBoll."],[4,"AnalBoll."],[5,"Mon. Boica"],[6,"Ma. Schatzverzeichnisse"],[7,"Ma. Bibliothekskataloge"]],onChange:function(t){e.setState({scanSerie:parseInt(t.target.value)})}})})]},"4")]:null,2===this.state.scanType?[(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:3,children:"Stadt:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("input",{type:"text",style:{width:"100%"},onChange:function(t){e.setState({scanLocation:t.target.value})}})})]},"5"),(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:3,children:"Bibliothek:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("input",{type:"text",style:{width:"100%"},onChange:function(t){e.setState({scanLibrary:t.target.value})}})})]},"6"),(0,d.jsxs)(w.Z,{className:"mb-4",children:[(0,d.jsx)(k.Z,{xs:3,children:"Signatur:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("input",{type:"text",style:{width:"100%"},onChange:function(t){e.setState({scanSignature:t.target.value})}})})]},"7")]:null,3===this.state.scanType||4===this.state.scanType?[(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:3,children:"Drucker:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("input",{type:"text",style:{width:"100%"},onChange:function(t){e.setState({scanEditor:t.target.value})}})})]},"8"),(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:3,children:"Ort:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("input",{type:"text",style:{width:"100%"},onChange:function(t){e.setState({scanLocation:t.target.value})}})})]},"9"),(0,d.jsxs)(w.Z,{className:"mb-4",children:[(0,d.jsx)(k.Z,{xs:3,children:"Jahr:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("input",{type:"text",style:{width:"100%"},onChange:function(t){e.setState({scanYear:t.target.value})}})})]},"10")]:null,(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:3,children:"Dateipfad:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("input",{type:"text",style:{width:"100%"},onChange:function(t){e.setState({scanPath:t.target.value})}})})]}),(0,d.jsxs)(w.Z,{className:"mb-4",children:[(0,d.jsx)(k.Z,{xs:3,children:".png-Dateien:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)(B.Z.Group,{children:(0,d.jsx)(B.Z.Control,{type:"file",multiple:!0,accept:"image/png",onChange:function(t){e.setState({scanFiles:t.target.files})}})})})]}),(0,d.jsxs)(w.Z,{children:[(0,d.jsx)(k.Z,{xs:3}),(0,d.jsx)(k.Z,{children:(0,d.jsx)(N.YG,{value:"hochladen",onClick:(0,m.Z)(Z().mark((function t(){var s,n,r,a,i,l;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=e.state.scanFiles){t.next=4;break}return t.abrupt("return",{status:!1,error:"Geben Sie Dateien zum Hochladen an."});case 4:if(0!==e.state.scanType&&1!==e.state.scanType&&5!==e.state.scanType||e.state.scanEditor&&e.state.scanYear){t.next=8;break}return t.abrupt("return",{status:!1,error:"Geben Sie den Editor und das Jahr ein."});case 8:if(null!==e.state.scanWorkId){t.next=12;break}return t.abrupt("return",{status:!1,error:"Kein g\xfcltiges Werk ausgew\xe4hlt!"});case 12:if(!e.state.scanPath||!e.state.scanWorkId){t.next=48;break}return"/"!=(s=e.state.scanPath).substring(0,1)&&(s="/"+s),"/"!=s.substring(s.length-1)&&(s+="/"),t.next=18,S.Q.edition.save({work_id:e.state.scanWorkId,ressource:e.state.scanType,editor:e.state.scanEditor,year:e.state.scanYear,volume:e.state.scanVolume,vol_cont:e.state.scanVolumeContent,serie:e.state.scanSerie,location:e.state.scanLocation,library:e.state.scanLibrary,signature:e.state.scanSignature,path:s,url:""});case 18:if(!((n=t.sent)>0)){t.next=45;break}for((r=new FormData).append("edition_id",n),r.append("path",e.state.scanPath),a=e.state.scanFiles.length,i=0;i<a;i++)r.append("files",e.state.scanFiles[i]);return t.next=27,S.Q.importScans(r);case 27:if(400!==(l=t.sent).status){t.next=32;break}return t.abrupt("return",{status:!1,error:"Fehler beim Hochladen der Dateien. Eine neue Ressource mit ID ".concat(n," wurde aber bereits erstellt.")});case 32:if(1!=l.body.length){t.next=37;break}return console.log("Bereits auf dem Server und deshalb \xfcbersprungen: ".concat(l.body.join(", "))),t.abrupt("return",{status:!0,success:"Das Hochladen war erfolgreich. Eine Datei wurde \xfcbersprungen (s. Konsole). Eine neue Ressource mit ID ".concat(n," wurde erstellt.")});case 37:if(!(l.body.length>0)){t.next=42;break}return console.log("Bereits auf dem Server und deshalb \xfcbersprungen: ".concat(l.body.join(", "))),t.abrupt("return",{status:!0,success:"Das Hochladen war erfolgreich. ".concat(l.body.length," Dateien wurden \xfcbersprungen (s. Konsole). Eine neue Ressource mit ID ").concat(n," wurde erstellt.")});case 42:return t.abrupt("return",{status:!0,success:"Eine neue Ressource mit ID ".concat(n," wurde erstellt.")});case 43:t.next=46;break;case 45:return t.abrupt("return",{status:!1,error:"Edition konnte nicht erstellt werden. Keine Bilder wurden hochgeladen."});case 46:t.next=49;break;case 48:return t.abrupt("return",{status:!1,error:"Geben Sie einen g\xfcltigen Pfad ein!"});case 49:case"end":return t.stop()}}),t)})))})})]})]}),(0,d.jsxs)(G.Z,{eventKey:"o",title:"ocr-Dateien",style:{padding:"0 25%"},children:[(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:3,children:"Ressource:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)(N.Qc,{style:{width:"100%"},value:this.state.ocrRessource,tbl:"scan_paths",searchCol:"path",returnCol:"path",onChange:function(){var t=(0,m.Z)(Z().mark((function t(s,n){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({ocrRessource:s,ocrRessourceId:n});case 1:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()})})]}),(0,d.jsxs)(w.Z,{className:"mb-4",children:[(0,d.jsx)(k.Z,{xs:3,children:".txt-Dateien:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)(B.Z.Group,{children:(0,d.jsx)(B.Z.Control,{type:"file",multiple:!0,accept:"text/plain",onChange:function(t){e.setState({ocrFiles:t.target.files})}})})})]}),(0,d.jsxs)(w.Z,{children:[(0,d.jsx)(k.Z,{xs:3}),(0,d.jsx)(k.Z,{children:(0,d.jsx)(N.YG,{type:"button",value:"hochladen",onClick:(0,m.Z)(Z().mark((function t(){var s,n,r,a,i,l;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=e.state.ocrFiles){t.next=4;break}return t.abrupt("return",{status:!1,error:"Geben Sie Dateien zum Hochladen an."});case 4:if(null!=e.state.ocrRessourceId){t.next=8;break}return t.abrupt("return",{status:!1,error:"W\xe4hlen Sie einen Ordner aus."});case 8:return t.next=10,S.Q.scan.get({path:e.state.ocrRessource},{select:["id","filename"]});case 10:s=t.sent,n=[],r=[],a=(0,h.Z)(e.state.ocrFiles),t.prev=14,l=Z().mark((function e(){var t,a,l,c;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.value,a=t.name.substring(0,t.name.length-4),!(l=s.find((function(e){return e.filename==a})))){e.next=10;break}return e.next=6,t.text();case 6:c=e.sent,r.push({id:l.id,full_text:c}),e.next=11;break;case 10:n.push(t.name);case 11:case"end":return e.stop()}}),e)})),a.s();case 17:if((i=a.n()).done){t.next=21;break}return t.delegateYield(l(),"t0",19);case 19:t.next=17;break;case 21:t.next=26;break;case 23:t.prev=23,t.t1=t.catch(14),a.e(t.t1);case 26:return t.prev=26,a.f(),t.finish(26);case 29:if(!(r.length>0)){t.next=32;break}return t.next=32,S.Q.scan.save(r);case 32:if(!(n.length>1)){t.next=37;break}return console.log("\xfcbersprungene Dateien: ".concat(n.join(", "))),t.abrupt("return",{status:!0,success:"Dateien wurden hochgeladen. ".concat(n.length," Dateien konnten nicht zugewiesen werden (s. Konsole).")});case 37:if(1!=n.length){t.next=42;break}return console.log("\xfcbersprungene Dateien: ".concat(n.join(", "))),t.abrupt("return",{status:!0,success:"Dateien wurden hochgeladen. 1 Datei konnte nicht zugewiesen werden (s. Konsole)."});case 42:return t.abrupt("return",{status:!0});case 43:case"end":return t.stop()}}),t,null,[[14,23,26,29]])})))})})]})]}),(0,d.jsxs)(G.Z,{eventKey:"z",title:"Zettel",style:{padding:"0 25%"},children:[(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:3,children:"Buchstabe:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)(N.SA,{options:[["A","A"],["B","B"],["C","C"],["D","D"],["E","E"],["F","F"],["G","G"],["H","H"],["I","I/J"],["K","K"],["L","L"],["M","M"],["N","N"],["O","O"],["P","P"],["Q","Q"],["R","R"],["S","S"],["T","T"],["U","U/V"],["W","W"],["X","X"],["Y","Y"],["Z","Z"]],onChange:function(t){e.setState({zettelLetter:t.target.value})}})})]}),(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:3,children:"erstellt von:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)(N.SA,{options:this.state.zettelEditors,onChange:function(t){e.setState({zettelEditorSelected:t.target.value})}})})]}),(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:3,children:"Zettel-Typ:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)(N.SA,{options:[[0,"Index-/Exzerpt-Zettel"],[1,"verzetteltes Material"],[4,"Literatur"]],onChange:function(t){e.setState({zettelType:t.target.value})}})})]}),(0,d.jsxs)(w.Z,{className:"mb-4",children:[(0,d.jsx)(k.Z,{xs:3,children:"Bilder:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)(B.Z.Group,{children:(0,d.jsx)(B.Z.Control,{type:"file",multiple:!0,accept:"image/jpeg",onChange:function(t){e.setState({zettelFiles:t.target.files})}})})})]}),(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:3}),(0,d.jsx)(k.Z,{children:(0,d.jsx)(N.YG,{value:"Zettel hochladen",onClick:(0,m.Z)(Z().mark((function t(){var s,n,r,a,i,l,c,o,d,u,h;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=e.state.zettelFiles){t.next=4;break}return t.abrupt("return",{status:!1,error:"W\xe4hlen Sie Bilder zum Hochladen aus."});case 4:if(e.state.zettelFiles.length%2==0){t.next=8;break}return t.abrupt("return",{status:!1,error:"W\xe4hlen Sie eine gerade Anzahl Bilder aus (jeweils Vorder- und R\xfcckseiten!)."});case 8:for(100,s=100,n=-1,r=[],a=e.state.zettelFiles,(a=Array.from(a)).sort((function(e,t){return t.name<e.name?1:-1})),i=0;i<a.length;i++)s>=100&&(s=0,n++,r.push(new FormData),r[n].append("letter",e.state.zettelLetter),r[n].append("type",e.state.zettelType),r[n].append("user_id_id",e.state.zettelEditorSelected)),s++,r[n].append("files",a[i]);l=0,c=0,o=0,d=r;case 19:if(!(o<d.length)){t.next=29;break}return u=d[o],t.next=23,S.Q.importZettel(u);case 23:h=t.sent,0===l&&(l=h[0]),c=h[1];case 26:o++,t.next=19;break;case 29:return e.setState({zettelSuccess:[l,c]}),t.abrupt("return",{status:!0});case 31:case"end":return t.stop()}}),t)})))})})]}),this.state.zettelSuccess&&(0,d.jsx)(w.Z,{children:(0,d.jsx)(k.Z,{children:(0,d.jsxs)(o.Z,{variant:"success",onClose:function(){e.setState({zettelSuccess:null})},dismissible:!0,children:[(0,d.jsx)(o.Z.Heading,{children:"Hochladen erfolgreich!"}),(0,d.jsxs)("p",{children:["Die neuen Zettel haben IDs zwischen ",(0,d.jsx)("b",{children:this.state.zettelSuccess[0]})," und ",(0,d.jsx)("b",{children:this.state.zettelSuccess[1]}),". M\xf6chten Sie die neuen Zettel in Zettel-Datenbank ",(0,d.jsx)(o.Z.Link,{href:"#",onClick:function(t){localStorage.setItem("searchBox_zettel",'[[{"id":0,"c":"id","o":">=","v":'.concat(e.state.zettelSuccess[0],'},{"id":1,"c":"id","o":"<=","v":').concat(e.state.zettelSuccess[1],'}],1,["id"]]')),e.props.loadMain(t,"zettel")},children:"\xf6ffnen"}),"?"]})]})})}),(0,d.jsx)(w.Z,{className:"mt-4",children:(0,d.jsxs)(k.Z,{children:["Eine Anleitung zum Hochladen der Zettel finden Sie ",(0,d.jsx)("a",{href:"https://gitlab.lrz.de/haeberlin/dmlw/-/wikis/09-HiwiHow:-Zettel-scannen-und-hochladen",children:"hier"}),"."]})})]})]})})}},{key:"componentDidMount",value:function(){var e=this;S.Q.access("admin")&&S.Q.user.getAll({order:["last_name"]}).then((function(t){var s,n=[],r=(0,h.Z)(t);try{for(r.s();!(s=r.n()).done;){var a=s.value;n.push([a.id,a.last_name])}}catch(i){r.e(i)}finally{r.f()}e.setState({zettelEditors:n})})).catch((function(e){throw e}))}}]),s}(_.Component),$=s(8949),ee=function(e){(0,j.Z)(s,e);var t=(0,f.Z)(s);function s(e){var n;return(0,x.Z)(this,s),(n=t.call(this,e)).state={searchStatus:"",setupItems:null,showPreset:!1,showDate:!0,count:0,selectionDetail:{ids:[],currentId:null}},n}return(0,p.Z)(s,[{key:"render",value:function(){var e=this,t=[["Suchergebnisse exportieren",(0,m.Z)(Z().mark((function t(){var s;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.Q.zettel.search(e.state.query,{select:["img_path","date_display","ac_web","lemma_display","txt"],export:!0,order:e.state.queryOrder});case 2:s=t.sent,console.log(s),window.open(s,"_blank");case 5:case"end":return t.stop()}}),t)})))]];return S.Q.access("z_edit")&&t.push(["neuer Zettel erstellen",(0,m.Z)(Z().mark((function t(){var s;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Soll ein neuer Zettel erstellt werden?")){t.next=5;break}return t.next=3,S.Q.zettel.save({type:2,txt:"Neuer Zettel"});case 3:s=t.sent,e.setState({setupItems:[{id:0,c:"id",o:"=",v:s}]});case 5:case"end":return t.stop()}}),t)})))]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(a.Z,{fixed:"bottom",bg:"light",children:(0,d.jsxs)(i.Z,{fluid:!0,children:[(0,d.jsx)(a.Z.Collapse,{className:"justify-content-start",children:(0,d.jsx)(a.Z.Text,{children:(0,d.jsx)(N.Rj,{boxName:"zettel",searchQuery:function(t,s){e.searchQuery(t,s)},setupItems:this.state.setupItems,searchOptions:[["lemma","Wort"],["type","Typ"],["id","ID"],["ac_web","Werk"],["date_type","Datum-Typ"],["date_own","eigenes Sortierdatum"],["date_own_display","eigenes Anzeigedatum"],["auto","Automatisierung"],["ocr_length","Textl\xe4nge"],["img_path","Bildpfad"]],sortOptions:[['["id"]',"ID"],['["lemma","lemma_nr","date_sort","date_type"]',"Datum"],['["ocr_length"]',"Textl\xe4nge"]],status:this.state.searchStatus,presetOptions:[['[{"id":2,"c":"lemma","o":"=","v":"NULL"}]',"Wortzuweisung"],['[{"id": 2,"c":"type","o":"=","v":"NULL"}]',"Typzuweisung"],['[{"id": 2, "c": "ac_web", "o": "=", "v": "NULL"},{"id": 3, "c": "type", "o": "!=", "v": 4},{"id": 4, "c": "type", "o": "!=", "v": 6},{"id": 5, "c": "type", "o": "!=", "v": 7}]',"Werkzuweisung"],['[{"id": 2, "c": "date_type", "o": "=", "v": 9},{"id": 3, "c": "date_own", "o": "!=", "v": "NULL"},{"id": 4, "c": "type", "o": "!=", "v": 3},{"id": 5, "c": "type", "o": "!=", "v": 6},{"id": 6, "c": "type", "o": "!=", "v": 7}]',"Datumszuweisung"]]})})}),(0,d.jsxs)(a.Z.Collapse,{className:"justify-content-end",children:[(0,d.jsx)(a.Z.Text,{children:this.state.count>0?(0,d.jsx)(N.C3,{loadPage:function(t){e.loadPage(t)},currentPage:this.state.currentPage,maxPage:this.state.maxPage}):null}),(0,d.jsx)(a.Z.Text,{children:(0,d.jsx)(N.vW,{menuItems:t})})]})]})}),(0,d.jsxs)(i.Z,{className:"mainBody",children:[(0,d.jsx)(te,{loadPage:function(t){e.loadPage(t)},currentElements:this.state.currentElements,count:this.state.count,currentPage:this.state.currentPage,maxPage:this.state.maxPage,presetSelection:this.state.presetSelection,gridArea:this.state.selectionDetail.ids.length>0?"2/1/2/2":"2/1/2/3",showDetail:function(t){e.setState({selectionDetail:t.selection,itemDetail:t.item})},showDate:this.state.showDate}),0==this.state.count?(0,d.jsx)(N.Km,{}):null]}),this.state.selectionDetail.ids.length>0?(0,d.jsx)(ne,{onReload:function(){e.loadPage(e.state.currentPage)},onClose:function(){e.setState({selectionDetail:{ids:[]}})},selection:this.state.selectionDetail,item:this.state.itemDetail,onUpdate:function(t){e.reloadZettel(t)},showDate:this.state.showDate,openNextItem:function(){e.openNextItem()},toggleShowDate:function(){e.state.showDate?e.setState({showDate:!1}):e.setState({showDate:!0})}}):""]})}},{key:"openNextItem",value:function(){var e=(0,m.Z)(Z().mark((function e(){var t,s,n,r,a=this;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.Q.zettel.get({id:this.state.itemDetail.id});case 2:t=(t=e.sent)[0],s=this.state.currentElements,n=s.findIndex((function(e){return e.id===t.id})),s[n]=t,r=this.state.currentElements.findIndex((function(e){return e.id===a.state.itemDetail.id})),this.state.currentElements.length>r+1&&this.setState({currentElements:s,itemDetail:this.state.currentElements[r+1],presetSelection:[this.state.currentElements[r+1].id]});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"reloadZettel",value:function(){var e=(0,m.Z)(Z().mark((function e(t){var s,n,r,a=this;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=(0,h.Z)(t),e.prev=1,r=Z().mark((function e(){var s,r,i,l;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.value,e.next=3,S.Q.zettel.get({id:s});case 3:r=(r=e.sent)[0],i=a.state.currentElements,l=i.findIndex((function(e){return e.id===r.id})),i[l]=r,a.setState({currentElements:i,selectionDetail:{ids:t},itemDetail:r});case 9:case"end":return e.stop()}}),e)})),s.s();case 4:if((n=s.n()).done){e.next=8;break}return e.delegateYield(r(),"t0",6);case 6:e.next=4;break;case 8:e.next=13;break;case 10:e.prev=10,e.t1=e.catch(1),s.e(e.t1);case 13:return e.prev=13,s.f(),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(t){return e.apply(this,arguments)}}()},{key:"searchQuery",value:function(){var e=(0,m.Z)(Z().mark((function e(t,s){var n,r;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({searchStatus:(0,d.jsx)(v.Z,{animation:"border",size:"sm"})}),e.next=3,S.Q.zettel.search(t,{count:!0,order:s});case 3:return n=e.sent,e.next=6,S.Q.zettel.search(t,{limit:50,order:s});case 6:r=e.sent,n[0].count>1?this.setState({searchStatus:"".concat(n[0].count," Eintr\xe4ge gefunden.")}):1===n[0].count?this.setState({searchStatus:"1 Eintrag gefunden."}):this.setState({searchStatus:"Keine Eintr\xe4ge gefunden."}),this.setState({query:t,queryOrder:s,count:n[0].count,maxPage:Math.floor(n[0].count/50)+1,currentPage:1,currentElements:r,selectionDetail:{ids:[]}});case 9:case"end":return e.stop()}}),e,this)})));return function(t,s){return e.apply(this,arguments)}}()},{key:"loadPage",value:function(){var e=(0,m.Z)(Z().mark((function e(t){var s;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.Q.zettel.search(this.state.query,{limit:50,offset:50*(t-1),order:this.state.queryOrder});case 2:s=e.sent,this.setState({currentPage:t,currentElements:s,selectionDetail:{ids:[]}});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),s}(_.Component),te=function(e){(0,j.Z)(s,e);var t=(0,f.Z)(s);function s(e){var n;return(0,x.Z)(this,s),(n=t.call(this,e)).state={selection:{currentId:null,ids:[]}},n}return(0,p.Z)(s,[{key:"render",value:function(){var e=this;if(this.props.count>0){var t,s=[],n=(0,h.Z)(this.props.currentElements);try{for(n.s();!(t=n.n()).done;){var r=t.value;s.push((0,d.jsx)(se,{showDate:this.props.showDate,testProp:r.id+"_test",id:r.id,item:r},r.id))}}catch(a){n.e(a)}finally{n.f()}return(0,d.jsx)("div",{style:{gridArea:this.props.gridArea,padding:"0 10px"},children:(0,d.jsx)(N.Qf,{multiSelect:!0,className:"zettel_box",selectCallback:function(t,s){e.selectCallback(t,s)},preset:this.props.presetSelection,children:s})})}return null}},{key:"selectCallback",value:function(e,t){e?this.props.showDetail({selection:t,item:e.props.item}):this.props.showDetail({selection:t,item:null})}}]),s}(_.Component),se=function(e){(0,j.Z)(s,e);var t=(0,f.Z)(s);function s(){return(0,x.Z)(this,s),t.apply(this,arguments)}return(0,p.Z)(s,[{key:"render",value:function(){var e=this.props.item,t={height:S.Q.options.z_height+"px",width:S.Q.options.z_width+"px"};if(null!=e.img_path){var s="";return 0===e.in_use?s+="zettel_img no_use":s+="zettel_img in_use",(0,d.jsxs)("div",{className:"zettel",id:e.id,style:t,children:[(0,d.jsx)("img",{alt:"",style:{objectFit:"fill",borderRadius:"7px"},className:s,src:e.img_path+".jpg"}),this.props.showDate?(0,d.jsx)("div",{className:"zettel_msg",dangerouslySetInnerHTML:(0,N.rg)(e.date_own_display?e.date_own_display:e.date_display)}):null,this.props.showDate?(0,d.jsxs)("div",{className:"zettel_menu",children:[(0,d.jsx)("span",{style:{float:"left",overflow:"hidden",maxHeight:"50px",maxWidth:"250px"},dangerouslySetInnerHTML:(0,N.rg)(e.lemma_display)}),(0,d.jsx)("span",{style:{float:"right"},dangerouslySetInnerHTML:(0,N.rg)(e.opus)})]}):null]})}return(0,d.jsx)("div",{className:"zettel",id:e.id,style:t,children:(0,d.jsxs)("div",{className:"digitalZettel",children:[(0,d.jsx)("div",{className:"digitalZettelLemma",dangerouslySetInnerHTML:(0,N.rg)(e.lemma_display)}),(0,d.jsx)("div",{className:"digitalZettelDate",dangerouslySetInnerHTML:(0,N.rg)(e.date_display)}),(0,d.jsx)("div",{className:"digitalZettelWork",dangerouslySetInnerHTML:(0,N.rg)(e.opus)}),(0,d.jsx)("div",{className:"digitalZettelText",dangerouslySetInnerHTML:(0,N.rg)(e.txt)})]})})}}]),s}(_.Component),ne=function(e){(0,j.Z)(s,e);var t=(0,f.Z)(s);function s(e){var n;return(0,x.Z)(this,s),(n=t.call(this,e)).state={comments:[],addLemma:!1,addLemmaNext:!1,ressources:[],batchType:1,id:n.props.item.id,type:n.props.item.type,date_display:n.props.item.date_display,date_type:n.props.item.date_type,lemma_id:n.props.item.lemma_id,lemma_ac:n.props.item.lemma_ac,work_id:n.props.item.work_id,ac_web:n.props.item.ac_web,date_own:n.props.item.date_own,date_own_display:n.props.item.date_own_display,txt:n.props.item.txt,newLemma_Lemma:"",newLemma_LemmaDisplay:"",batch_lemma_id:null,batch_lemma_ac:"",batch_work_id:null,batch_ac_web:"",batch_type:null,batch_project:null,new_comment_txt:""},n}return(0,p.Z)(s,[{key:"render",value:function(){var e=this;if(this.state.addLemma)return(0,d.jsxs)(y.Z,{show:!0,placement:"end",scroll:!0,backdrop:!1,onHide:function(){e.setState({addLemma:!1})},children:[(0,d.jsx)(y.Z.Header,{closeButton:!0,children:(0,d.jsx)(y.Z.Title,{children:"Soll ein neues Wort erstellt werden?"})}),(0,d.jsxs)(y.Z.Body,{children:[(0,d.jsx)(w.Z,{className:"mb-4",children:(0,d.jsxs)(k.Z,{children:[(0,d.jsx)("a",{href:"https://gitlab.lrz.de/haeberlin/dmlw/-/wikis/10-WikiHow:-Umlemmatisierung",target:"_blank",rel:"noreferrer",children:"Hier"})," finden Sie Informationen zum Erstellen neuer W\xf6rter."]})}),(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{children:"Wort:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("input",{type:"text",value:this.state.newLemma_Lemma,onChange:function(t){e.setState({newLemma_Lemma:t.target.value})}})})]}),(0,d.jsxs)(w.Z,{className:"mb-4",children:[(0,d.jsx)(k.Z,{children:"Wort-Anzeige:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("input",{type:"text",value:this.state.newLemma_LemmaDisplay,onChange:function(t){e.setState({newLemma_LemmaDisplay:t.target.value})}})})]}),(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{children:"Zahlzeichen:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)(N.SA,{options:[[0,""],[1,1],[2,2],[3,3],[4,4],[5,5],[6,6]],onChange:function(t){e.setState({newLemma_Homonym:t.target.value})}})})]}),(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{children:"im W\xf6rterbuch:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)(N.SA,{options:[[0,"Nein"],[1,"Ja"]],onChange:function(t){e.setState({newLemma_MLW:t.target.value})}})})]}),(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{children:"Stern:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)(N.SA,{options:[[0,"Nein"],[1,"Ja"]],onChange:function(t){e.setState({newLemma_Stern:t.target.value})}})})]}),(0,d.jsxs)(w.Z,{className:"mb-4",children:[(0,d.jsx)(k.Z,{children:"Fragezeichen:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)(N.SA,{options:[[0,"Nein"],[1,"Ja"]],onChange:function(t){e.setState({newLemma_LemmaFrage:t.target.value})}})})]}),(0,d.jsx)(w.Z,{children:(0,d.jsxs)(k.Z,{children:[(0,d.jsx)(N.YG,{type:"button",value:"neues Wort erstellen",onClick:(0,m.Z)(Z().mark((function t(){var s,n;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(""===e.state.newLemma_Lemma||e.state.newLemma_Lemma.indexOf(" ")>-1)){t.next=4;break}return t.abrupt("return",{status:!1,error:"Bitte ein g\xfcltiges Wort eintragen!"});case 4:if(""!==e.state.newLemma_LemmaDisplay){t.next=8;break}return t.abrupt("return",{status:!1,error:"Bitte tragen Sie eine g\xfcltige Wort-Anzeige ein!"});case 8:return s={lemma:e.state.newLemma_Lemma,lemma_display:e.state.newLemma_LemmaDisplay,MLW:e.state.newLemma_MLW,Fragezeichen:e.state.newLemma_LemmaFrage,Stern:e.state.newLemma_Stern},e.state.newLemma_Homonym>0&&(s.lemma_nr=e.state.newLemma_Homonym),t.next=12,S.Q.lemma.save(s);case 12:return n=t.sent,1===e.props.selection.ids.length?(e.setState({lemma_ac:e.state.newLemma_LemmaDisplay,lemma_id:n,addLemma:!1}),e.saveDetail(e.state.addLemmaNext)):(e.setState({batch_lemma_ac:e.state.newLemma_LemmaDisplay,batch_lemma_id:n,addLemma:!1}),e.saveBatch()),t.abrupt("return",{status:!0});case 15:case"end":return t.stop()}}),t)})))}),(0,d.jsx)(E.Z,{variant:"secondary",style:{marginLeft:"10px"},onClick:function(){e.setState({addLemma:!1})},children:"abbrechen"})]})})]})]});if(1===this.props.selection.ids.length){var t=[];if(this.state.ressources.length>0){var s,n=-1,r=(0,h.Z)(this.state.ressources);try{for(r.s();!(s=r.n()).done;){var a=s.value;n++;var i=a.url;null!==i&&""!==i||(i="/site/argos/".concat(a.id)),t.push((0,d.jsx)("div",{children:(0,d.jsx)("a",{href:i,target:"_blank",rel:"noreferrer",children:a.label})},n))}}catch(g){r.e(g)}finally{r.f()}}var l=null;9===this.state.date_type&&(l=[(0,d.jsx)(w.Z,{className:"mt-4 mb-2",children:(0,d.jsx)(k.Z,{children:(0,d.jsxs)("span",{className:"minorTxt",children:[(0,d.jsx)("b",{children:"Achtung:"})," Dieser Zettel ben\xf6tigt eine ",(0,d.jsx)("a",{href:"https://gitlab.lrz.de/haeberlin/dmlw/-/wikis/09-HiwiHow:-Zettel-verkn\xfcpfen#anzeigedatumsortierdatum",target:"_blank",rel:"noreferrer",children:"eigene Datierung"}),"."]})})},"1"),(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:4,children:"Sortierdatum:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("input",{style:{width:"100%"},type:"text",value:this.state.date_own?this.state.date_own:"",onChange:function(t){""===t.target.value?e.setState({date_own:null}):isNaN(t.target.value)||" "===t.target.value||e.setState({date_own:parseInt(t.target.value)})}})})]},"2"),(0,d.jsxs)(w.Z,{className:"mb-4",children:[(0,d.jsx)(k.Z,{xs:4,children:"Anzeigedatum:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("input",{style:{width:"100%"},type:"text",value:this.state.date_own_display?this.state.date_own_display:"",onChange:function(t){e.setState({date_own_display:t.target.value})}})})]},"3")]);var c=null;if(S.Q.access("comment")&&this.state.comments.length>0){var o,u=[],x=(0,h.Z)(this.state.comments);try{var p=function(){var t=o.value;u.push((0,d.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,d.jsxs)("span",{className:"minorTxt",children:[(0,d.jsx)("b",{children:t.user})," am ",t.c_date?t.c_date.substring(0,10):null,":"]}),(0,d.jsx)("br",{}),t.comment,S.Q.me.id===t.user_id||S.Q.access("comment_moderator")?(0,d.jsx)("i",{className:"minorTxt",style:{cursor:"pointer"},onClick:(0,m.Z)(Z().mark((function s(){return Z().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(!window.confirm("Soll der Kommentar wirklich gel\xf6scht werden? Dieser Schritt kann nicht r\xfcckg\xe4ngig gemacht werden.")){s.next=4;break}return s.next=3,S.Q.comment.delete(t.id);case 3:e.loadComments();case 4:case"end":return s.stop()}}),s)}))),children:" (l\xf6schen)"}):null]},t.id))};for(x.s();!(o=x.n()).done;)p()}catch(g){x.e(g)}finally{x.f()}c=(0,d.jsx)("div",{className:"commentBox",children:u})}var j=null;return S.Q.access("comment")&&(j=(0,d.jsxs)("div",{children:[(0,d.jsx)("textarea",{placeholder:"neuer Kommentar",style:{width:"100%",height:"100px"},onChange:function(t){e.setState({new_comment_txt:t.target.value})},value:this.state.new_comment_txt}),(0,d.jsx)(N.YG,{style:{fontSize:"15px",float:"right",marginRight:"60px"},value:"Kommentar erstellen",onClick:(0,m.Z)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""==e.state.new_comment_txt){t.next=8;break}return t.next=3,S.Q.comment.save({user_id:S.Q.me.id,zettel_id:e.state.id,comment:e.state.new_comment_txt});case 3:return e.setState({new_comment_txt:""}),e.loadComments(),t.abrupt("return",{status:!0});case 8:return t.abrupt("return",{status:!1,error:"Geben Sie einen Kommentar-Text ein."});case 9:case"end":return t.stop()}}),t)})))})]})),(0,d.jsxs)(y.Z,{show:!0,placement:"end",scroll:!0,backdrop:!1,onHide:this.props.onClose,children:[(0,d.jsx)(y.Z.Header,{closeButton:!0,children:(0,d.jsxs)(y.Z.Title,{children:["ID ",this.state.id]})}),(0,d.jsx)(y.Z.Body,{children:(0,d.jsxs)($.Z,{defaultActiveKey:0,children:[(0,d.jsxs)($.Z.Item,{eventKey:0,children:[(0,d.jsx)($.Z.Header,{children:"\xdcbersicht"}),(0,d.jsxs)($.Z.Body,{children:[(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:4,children:"Zetteltyp:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)(N.SA,{style:{width:"100%"},value:this.state.type?this.state.type:0,options:[[0,"..."],[1,"verzettelt"],[2,"Exzerpt"],[3,"Index"],[4,"Literatur"],[6,"Index (unkl. Werk)"],[7,"Notiz"]],onChange:function(t){e.setState({type:parseInt(t.target.value)})},classList:"zettel_type"})})]}),(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:4,children:"Wort:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)(N.Qc,{style:{width:"100%"},onChange:function(t,s){e.setState({lemma_ac:t,lemma_id:s,newLemma_Lemma:t,newLemma_LemmaDisplay:t})},value:this.state.lemma_ac?this.state.lemma_ac:"",tbl:"lemma",searchCol:"lemma",returnCol:"lemma_ac"})})]}),4!==this.state.type&&this.state.type<6&&(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:4,children:"Werk:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)(N.Qc,{style:{width:"100%"},value:this.state.ac_web?this.state.ac_web:"",tbl:"work",searchCol:"ac_web",returnCol:"ac_web",onChange:function(){var t=(0,m.Z)(Z().mark((function t(s,n){var r;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({ac_web:s,work_id:n}),t.next=3,S.Q.work.get({id:n},{select:["date_type"]});case 3:(r=t.sent).length>0&&e.setState({date_type:r[0].date_type});case 5:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()})})]}),null===this.props.item.img_path&&(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:4,children:"Text:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("textarea",{style:{width:"100%"},value:this.state.txt,onChange:function(t){e.setState({txt:t.target.value})}})})]}),4!==this.state.type&&this.state.type<6&&this.state.work_id>0&&(0,d.jsxs)(w.Z,{className:"mb-2",children:[(0,d.jsx)(k.Z,{xs:4,children:"Datierung:"}),(0,d.jsx)(k.Z,{children:(0,d.jsx)("span",{style:{width:"100%"},dangerouslySetInnerHTML:(0,N.rg)(this.state.date_display)})})]}),l,(0,d.jsx)(w.Z,{className:"mb-3 mt-4",children:(0,d.jsxs)(k.Z,{children:[(0,d.jsx)(E.Z,{style:{marginRight:"10px"},onClick:function(){e.saveDetail(!0)},children:"speichern&weiter"}),(0,d.jsx)(N.YG,{onClick:function(){return e.saveDetail()},value:"speichern"})]})}),(0,d.jsx)(w.Z,{children:(0,d.jsx)(k.Z,{children:(0,d.jsx)(B.Z,{children:(0,d.jsx)(B.Z.Check,{size:"sm",type:"switch",label:"Details ein-/ausblenden",checked:this.props.showDate,onChange:this.props.toggleShowDate})})})})]})]}),t.length>0&&(0,d.jsxs)($.Z.Item,{eventKey:1,children:[(0,d.jsx)($.Z.Header,{children:"Ressourcen"}),(0,d.jsx)($.Z.Body,{children:t})]}),(0,d.jsxs)($.Z.Item,{eventKey:2,children:[(0,d.jsx)($.Z.Header,{children:"Kommentare"}),(0,d.jsxs)($.Z.Body,{children:[c,j]})]}),S.Q.access("admin")&&(0,d.jsxs)($.Z.Item,{eventKey:3,children:[(0,d.jsx)($.Z.Header,{children:"Zettel l\xf6schen"}),(0,d.jsx)($.Z.Body,{children:(0,d.jsx)(E.Z,{variant:"danger",onClick:(0,m.Z)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Soll der Zettel wirklich gel\xf6scht werden? Dieser Schritt kann nicht mehr r\xfcckg\xe4ngig gemacht werden.")){t.next=5;break}return t.next=3,S.Q.zettel.delete(e.state.id);case 3:e.props.onClose(),e.props.onReload();case 5:case"end":return t.stop()}}),t)}))),children:"Zettel l\xf6schen"})})]})]})})]})}var f=null;switch(this.state.batchType){case 1:f=(0,d.jsx)(N.Qc,{onChange:function(t,s){e.setState({batch_lemma_ac:t,batch_lemma_id:s})},value:this.state.batch_lemma_ac,tbl:"lemma",searchCol:"lemma",returnCol:"lemma_ac"});break;case 2:f=(0,d.jsx)(N.Qc,{value:this.state.batch_ac_web,tbl:"work",searchCol:"ac_web",returnCol:"ac_web",onChange:function(t,s){e.setState({batch_ac_web:t,batch_work_id:s})}});break;case 3:f=(0,d.jsx)(N.SA,{style:{width:"86%"},options:[[0,"..."],[1,"verzettelt"],[2,"Exzerpt"],[3,"Index"],[4,"Literatur"],[6,"Index (unkl. Stelle)"],[7,"Notiz"]],onChange:function(t){e.setState({batch_type:t.target.value})}});break;default:f=(0,d.jsx)("div",{style:{color:"red"},children:"Unbekannter Stapel-Typ!"})}return(0,d.jsxs)(y.Z,{show:!0,placement:"end",scroll:!0,backdrop:!1,onHide:this.props.onClose,children:[(0,d.jsx)(y.Z.Header,{closeButton:!0,children:(0,d.jsxs)(y.Z.Title,{children:[this.props.selection.ids.length," Zettel"]})}),(0,d.jsxs)(y.Z.Body,{children:[(0,d.jsxs)(w.Z,{className:"mb-3",children:[(0,d.jsx)(k.Z,{children:(0,d.jsx)(N.SA,{style:{width:"110px"},options:[[1,"Wort"],[2,"Werk"],[3,"Zettel-Typ"]],onChange:function(t){e.setState({batchType:parseInt(t.target.value)})}})}),(0,d.jsx)(k.Z,{children:f})]}),(0,d.jsx)(w.Z,{children:(0,d.jsx)(k.Z,{children:(0,d.jsx)(N.YG,{value:"f\xfcr alle \xfcbernehmen",onClick:function(){return e.saveBatch()}})})})]})]})}},{key:"componentDidMount",value:function(){var e=this;this.state.work_id>0&&S.Q.edition.get({work_id:this.state.work_id}).then((function(t){e.setState({ressources:t})})).catch((function(e){throw e})),this.loadComments()}},{key:"componentDidUpdate",value:function(){var e=this;this.state.id!==this.props.item.id&&(this.props.item.work_id>0?S.Q.edition.get({work_id:this.props.item.work_id}).then((function(t){e.setState({addLemma:!1,id:e.props.item.id,type:e.props.item.type,date_display:e.props.item.date_display,date_type:e.props.item.date_type,lemma_id:e.props.item.lemma_id,lemma_ac:e.props.item.lemma_ac,work_id:e.props.item.work_id,ac_web:e.props.item.ac_web,date_own:e.props.item.date_own,date_own_display:e.props.item.date_own_display,ressources:t})})).catch((function(e){throw e})):this.setState({addLemma:!1,id:this.props.item.id,type:this.props.item.type,date_display:this.props.item.date_display,date_type:this.props.item.date_type,lemma_id:this.props.item.lemma_id,lemma_ac:this.props.item.lemma_ac,work_id:this.props.item.work_id,ac_web:this.props.item.ac_web,date_own:this.props.item.date_own,date_own_display:this.props.item.date_own_display,ressources:[]}),S.Q.access("comment")&&S.Q.comment.get({zettel_id:this.state.id}).then((function(t){e.setState({comments:t})})).catch((function(e){throw e})))}},{key:"loadComments",value:function(){var e=(0,m.Z)(Z().mark((function e(){var t;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S.Q.access("comment")){e.next=5;break}return e.next=3,S.Q.comment.get({zettel_id:this.state.id});case 3:t=e.sent,this.setState({comments:t});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"saveBatch",value:function(){var e=(0,m.Z)(Z().mark((function e(){var t,s,n,r,a,i,l,c,o,d;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,s="",n="",1!==this.state.batchType||null==this.state.batch_lemma_id){e.next=8;break}n="lemma_id",s=this.state.batch_lemma_id,e.next=31;break;case 8:if(1!==this.state.batchType||null!==this.state.batch_lemma_id||""==this.state.batch_lemma_ac){e.next=14;break}return t=!0,this.setState({addLemma:!0,newLemma_Lemma:this.state.batch_lemma_ac,newLemma_LemmaDisplay:this.state.batch_lemma_ac}),e.abrupt("return",{status:!0});case 14:if(2!==this.state.batchType||null==this.state.batch_work_id){e.next=19;break}n="work_id",s=this.state.batch_work_id,e.next=31;break;case 19:if(3!==this.state.batchType||null==this.state.batch_type){e.next=24;break}n="type",s=this.state.batch_type,e.next=31;break;case 24:if(4!==this.state.batchType||null==this.state.batch_project){e.next=29;break}n="project",s=this.state.batch_project,e.next=31;break;case 29:return t=!0,e.abrupt("return",{status:!1,error:"Bitte tragen Sie einen g\xfcltigen Wert ein."});case 31:if(!(!1===t&&this.state.batchType<4)){e.next=41;break}r=[],a=(0,h.Z)(this.props.selection.ids);try{for(a.s();!(i=a.n()).done;)l=i.value,(c={id:l,user_id:S.Q.me.id})[n]=s,r.push(c)}catch(u){a.e(u)}finally{a.f()}return e.next=37,S.Q.zettel.save(r);case 37:return this.props.onUpdate(this.props.selection.ids),e.abrupt("return",{status:!0});case 41:if(!1!==t||4!==this.state.batchType){e.next=53;break}return e.next=44,S.Q.article.get({project_id:this.state.batch_project,sort_nr:0,parent_id:0});case 44:if(1==(o=e.sent).length){e.next=49;break}alert("Ein Fehler ist aufgetreten: Die Zettel k\xf6nnen dem Projekt nicht zugewiesen werden!"),e.next=53;break;case 49:return d=this.props.selection.ids.map((function(e){return{zettel_id:e,article_id:o[0].id}})),e.next=52,S.Q.zettel_lnk.save(d);case 52:return e.abrupt("return",{status:!0});case 53:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"saveDetail",value:function(){var e=(0,m.Z)(Z().mark((function e(){var t,s,n=arguments;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]&&n[0],null===this.state.date_own_display||""===this.state.date_own_display||null!==this.state.date_own&&""!==this.state.date_own){e.next=5;break}return e.abrupt("return",{status:-1,error:"Sie d\xfcrfen kein Anzeigedatum setzen, ohne ein Sortierdatum anzugeben!"});case 5:if(!(this.state.work_id>0&&9===this.state.date_type)||(""==this.state.date_own||null==this.state.date_own||Number.isInteger(this.state.date_own))&&(""!==this.state.date_own&&null!==this.state.date_own||window.confirm("Achtung: Dieser Zettel ben\xf6tigt eine Datierung! Soll er trotzdem ohne Datierung gespeichert werden?"))){e.next=9;break}return e.abrupt("return",{status:0});case 9:if(9!==this.state.date_type||null===this.state.date_own||""===this.state.date_own||null!==this.state.date_own_display&&""!==this.state.date_own_display){e.next=13;break}return e.abrupt("return",{status:-1,error:"Setzen Sie ein Anzeigedatum f\xfcr den Zettel!"});case 13:return s={id:this.state.id,type:this.state.type,user_id:S.Q.me.id,txt:this.state.txt},this.state.work_id>0?s.work_id=this.state.work_id:s.work_id=null,null===this.state.lemma_id&&""!==this.state.newLemma_Lemma?this.setState({addLemma:!0,addLemmaNext:t}):this.state.lemma_id>0?s.lemma_id=this.state.lemma_id:s.lemma_id=null,9===this.state.date_type&&""!=this.state.date_own&&Number.isInteger(this.state.date_own)?(s.date_own=this.state.date_own,s.date_own_display=this.state.date_own_display):(s.date_own=null,s.date_own_display=null),e.next=19,S.Q.zettel.save(s);case 19:return t?(document.querySelector("select.zettel_type").focus(),this.props.openNextItem()):this.props.onUpdate([this.state.id]),e.abrupt("return",{status:1});case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),s}(_.Component),re=s(1398),ae=s(9140);function ie(e){var t=(0,_.useState)(""),s=(0,L.Z)(t,2),a=s[0],i=s[1],l=(0,_.useState)([]),c=(0,L.Z)(l,2),o=c[0],u=c[1];return(0,_.useEffect)((0,m.Z)(Z().mark((function t(){var s,n,r,a,i;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.z.work_id>0)){t.next=8;break}return t.next=3,S.Q.edition.get({work_id:e.z.work_id},{select:["id","label","url"]});case 3:s=t.sent,n=[],r=(0,h.Z)(s);try{for(r.s();!(a=r.n()).done;)i=a.value,n.push((0,d.jsx)(re.Z.Item,{children:(0,d.jsx)("a",{href:""===i.url?"/site/viewer/".concat(i.id):i.url,target:"_blank",children:i.label})},i.id))}catch(l){r.e(l)}finally{r.f()}u(n);case 8:case"end":return t.stop()}}),t)}))),[]),(0,d.jsxs)(ae.Z,{style:{width:"30rem"},className:"mb-3",children:[(0,d.jsx)(n.G,{style:{position:"absolute",top:"12px",right:"10px"},onClick:function(){i(""===a?"v":"")},icon:r.UO1}),(0,d.jsx)(ae.Z.Header,{style:{height:"41px"},dangerouslySetInnerHTML:(0,N.rg)(e.z.opus)}),(0,d.jsx)(ae.Z.Img,{variant:"bottom",src:"".concat(e.z.img_path).concat(a,".jpg")}),(0,d.jsx)(ae.Z.Body,{children:(0,d.jsx)(ae.Z.Text,{children:(0,d.jsx)(re.Z,{horizontal:!0,children:o})})})]})}function le(e){var t=(0,_.useState)(null),s=(0,L.Z)(t,2),n=s[0],r=s[1],a=(0,_.useState)(null),l=(0,L.Z)(a,2),c=l[0],o=l[1],u=(0,_.useState)(null),h=(0,L.Z)(u,2),x=h[0],p=h[1],j=(0,_.useState)(null),f=(0,L.Z)(j,2),g=f[0],b=f[1],y=(0,_.useState)(null),z=(0,L.Z)(y,2),C=z[0],D=z[1];return(0,_.useEffect)((0,m.Z)(Z().mark((function t(){var s;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(null),o(null),p(null),b(null),D(null),t.next=7,S.Q.lemma.get({id:e.lemma_id});case 7:return s=t.sent,r(s[0]),t.t0=o,t.next=12,S.Q.zettel.get({lemma_id:e.lemma_id,type:1},{order:["date_sort","date_type"],select:["id","opus","img_path","work_id"]});case 12:return t.t1=t.sent,(0,t.t0)(t.t1),t.t2=p,t.next=17,S.Q.zettel.get({lemma_id:e.lemma_id,type:2},{order:["date_sort","date_type"],select:["id","opus","img_path","work_id"]});case 17:return t.t3=t.sent,(0,t.t2)(t.t3),t.t4=b,t.next=22,S.Q.zettel.search([{c:"lemma_id",o:"=",v:e.lemma_id},{c:"type",o:">=",v:"3"},{c:"type",o:"<=",v:"6"},{c:"type",o:"!=",v:"4"}],{order:["date_sort","date_type"],select:["id","opus","img_path","work_id"]});case 22:return t.t5=t.sent,(0,t.t4)(t.t5),t.t6=D,t.next=27,S.Q.zettel.search([{c:"lemma_id",o:"=",v:e.lemma_id},{c:"type",o:">=",v:"4"},{c:"type",o:"!=",v:"6"}],{order:["date_sort","date_type"],select:["id","opus","img_path","work_id"]});case 27:t.t7=t.sent,(0,t.t6)(t.t7);case 29:case"end":return t.stop()}}),t)}))),[e.lemma_id]),n?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("h1",{dangerouslySetInnerHTML:(0,N.rg)(n.lemma_display)}),(0,d.jsxs)(i.Z,{children:[n.dicts&&(0,d.jsxs)(w.Z,{children:[(0,d.jsx)(k.Z,{xs:2,children:"W\xf6rterb\xfccher:"}),(0,d.jsx)(k.Z,{dangerouslySetInnerHTML:(0,N.rg)(n.dicts)})]}),n.comment&&(0,d.jsxs)(w.Z,{className:"mb-4",children:[(0,d.jsx)(k.Z,{xs:2,children:"Kommentar:"}),(0,d.jsx)(k.Z,{dangerouslySetInnerHTML:(0,N.rg)(n.comment)})]}),(0,d.jsx)(w.Z,{children:(0,d.jsx)(k.Z,{children:(0,d.jsxs)($.Z,{defaultActiveKey:"",children:[(0,d.jsxs)($.Z.Item,{eventKey:"v",children:[(0,d.jsxs)($.Z.Header,{children:["verzetteles Material\xa0",c?(0,d.jsxs)("span",{children:["(",c.length,")"]}):(0,d.jsx)(v.Z,{size:"sm",animation:"border"})]}),(0,d.jsx)($.Z.Body,{children:(0,d.jsx)(i.Z,{className:"d-flex flex-wrap justify-content-center",children:c?c.map((function(e){return(0,d.jsx)(ie,{z:e},e.id)})):null})})]}),(0,d.jsxs)($.Z.Item,{eventKey:"e",children:[(0,d.jsxs)($.Z.Header,{children:["Exzerpt-Zettel\xa0",x?(0,d.jsxs)("span",{children:["(",x.length,")"]}):(0,d.jsx)(v.Z,{size:"sm",animation:"border"})]}),(0,d.jsx)($.Z.Body,{children:(0,d.jsx)(i.Z,{className:"d-flex flex-wrap justify-content-center",children:x?x.map((function(e){return(0,d.jsx)(ie,{z:e},e.id)})):null})})]}),(0,d.jsxs)($.Z.Item,{eventKey:"i",children:[(0,d.jsxs)($.Z.Header,{children:["Index-Zettel\xa0",g?(0,d.jsxs)("span",{children:["(",g.length,")"]}):(0,d.jsx)(v.Z,{size:"sm",animation:"border"})]}),(0,d.jsx)($.Z.Body,{children:(0,d.jsx)(i.Z,{className:"d-flex flex-wrap justify-content-center",children:g?g.map((function(e){return(0,d.jsx)(ie,{z:e},e.id)})):null})})]}),(0,d.jsxs)($.Z.Item,{eventKey:"r",children:[(0,d.jsxs)($.Z.Header,{children:["restliche Zettel\xa0",C?(0,d.jsxs)("span",{children:["(",C.length,")"]}):(0,d.jsx)(v.Z,{size:"sm",animation:"border"})]}),(0,d.jsx)($.Z.Body,{children:(0,d.jsx)(i.Z,{className:"d-flex flex-wrap justify-content-center",children:C?C.map((function(e){return(0,d.jsx)(ie,{z:e},e.id)})):null})})]})]})})})]})]}):null}function ce(e){var t=(0,_.useState)((0,d.jsxs)(I.Z,{animation:"glow",children:[(0,d.jsx)(re.Z.Item,{children:(0,d.jsx)(I.Z,{sm:8})}),(0,d.jsx)(re.Z.Item,{children:(0,d.jsx)(I.Z,{sm:8})}),(0,d.jsx)(re.Z.Item,{children:(0,d.jsx)(I.Z,{sm:8})}),(0,d.jsx)(re.Z.Item,{children:(0,d.jsx)(I.Z,{sm:8})}),(0,d.jsx)(re.Z.Item,{children:(0,d.jsx)(I.Z,{sm:8})}),(0,d.jsx)(re.Z.Item,{children:(0,d.jsx)(I.Z,{sm:8})})]})),s=(0,L.Z)(t,2),n=s[0],r=s[1],a=(0,_.useState)(null),l=(0,L.Z)(a,2),c=l[0],o=l[1];return(0,_.useEffect)((0,m.Z)(Z().mark((function e(){var t,s,n,a,i;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.Q.lemma.getAll({select:["id","lemma_display"],order:["lemma"]});case 2:t=e.sent,s=[],n=(0,h.Z)(t);try{for(i=function(){var e=a.value;s.push((0,d.jsx)(re.Z.Item,{action:!0,onClick:(0,m.Z)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o(e.id);case 1:case"end":return t.stop()}}),t)}))),dangerouslySetInnerHTML:(0,N.rg)(e.lemma_display)},e.id))},n.s();!(a=n.n()).done;)i()}catch(l){n.e(l)}finally{n.f()}r(s);case 7:case"end":return e.stop()}}),e)}))),[]),(0,d.jsx)(i.Z,{className:"mainBody",children:(0,d.jsxs)(w.Z,{children:[(0,d.jsx)(k.Z,{xs:3,style:{height:"calc(100vh - 180px)",overflow:"scroll"},children:(0,d.jsx)(re.Z,{variant:"flush",children:n})}),(0,d.jsx)(k.Z,{style:{height:"calc(100vh - 180px)",overflow:"scroll"},children:c?(0,d.jsx)(le,{lemma_id:c}):null})]})})}function oe(){return["author","edition","lemma","opera_maiora","opera_minora","scan","scan_lnk","work","zettel","user","seklit","project","article","zettel_lnk","statistics","scan_paths","ocr_jobs","comment"]}function de(e){var t=null;switch(e?e.res:null){case null:t=(0,d.jsx)(u,{});break;case"ressources":t=(0,d.jsx)(P,{});break;case"seklit":t=(0,d.jsx)(T,{});break;case"stats":t=(0,d.jsx)(V,{});break;case"server":t=(0,d.jsx)(Y,{});break;case"lemma":t=(0,d.jsx)(z,{loadMain:function(t,s){e.loadMain(t,s)}});break;case"maiora":t=(0,d.jsx)(W,{listName:"opera_maiora"});break;case"minora":t=(0,d.jsx)(W,{listName:"opera_minora"});break;case"import":t=(0,d.jsx)(X,{loadMain:function(t,s){e.loadMain(t,s)}});break;case"zettel":t=(0,d.jsx)(ee,{});break;case"indexbox":t=(0,d.jsx)(ce,{});break;case"account":t=(0,d.jsx)(O.m,{});break;default:t=(0,d.jsxs)("div",{children:["Unbekannter Men\xfc-Punkt ",e.res]})}return t}function ue(e){return(0,d.jsx)(a.Z,{bg:"dark",variant:"dark",fixed:"top",children:(0,d.jsxs)(i.Z,{fluid:!0,children:[(0,d.jsx)(a.Z.Brand,{style:{cursor:"pointer"},onClick:function(t){e.loadMain(t,null)},children:"dMLW"}),(0,d.jsx)(a.Z.Toggle,{}),(0,d.jsx)(a.Z.Collapse,{className:"justify-content-end",children:(0,d.jsxs)(l.Z,{children:[(0,d.jsxs)(c.Z,{title:"Zettel- und Wortmaterial",children:[(0,d.jsx)(c.Z.Item,{onClick:function(t){e.loadMain(t,"zettel")},children:"Zettel-Datenbank"}),(0,d.jsx)(c.Z.Item,{onClick:function(t){e.loadMain(t,"lemma")},children:"Wortliste"})]}),(0,d.jsxs)(c.Z,{title:"Verzeichnisse",children:[(0,d.jsxs)(c.Z.Item,{onClick:function(t){e.loadMain(t,"maiora")},children:[(0,d.jsx)("i",{children:"opera maiora"}),"-Liste"]}),(0,d.jsxs)(c.Z.Item,{onClick:function(t){e.loadMain(t,"minora")},children:[(0,d.jsx)("i",{children:"opera minora"}),"-Liste"]}),(0,d.jsx)(c.Z.Item,{onClick:function(t){e.loadMain(t,"ressources")},children:"Ressourcen"}),(0,d.jsx)(c.Z.Item,{onClick:function(t){e.loadMain(t,"seklit")},children:"Sekund\xe4rliteratur"})]}),(0,d.jsxs)(c.Z,{title:"Einstellungen",children:[(0,d.jsx)(c.Z.Item,{onClick:function(t){e.loadMain(t,"account")},children:"Konto"}),(0,d.jsx)(c.Z.Item,{onClick:function(t){e.loadMain(t,"server")},children:"Server"}),(0,d.jsx)(c.Z.Item,{onClick:function(t){e.loadMain(t,"import")},children:"Import"}),(0,d.jsx)(c.Z.Item,{onClick:function(t){e.loadMain(t,"stats")},children:"Statistik"})]}),(0,d.jsx)(l.Z.Link,{children:(0,d.jsx)(n.G,{icon:r.jLD,onClick:function(t){e.loadMain(t,"logout")},title:"abmelden"})})]})})]})})}},8491:function(e,t,s){s.d(t,{m:function(){return p}});var n=s(5861),r=s(885),a=s(7757),i=s.n(a),l=s(9743),c=s(2677),o=s(3350),d=s(7022),u=s(2791),h=s(6407),m=s(3222),x=s(184);function p(){var e=(0,u.useState)(h.Q.me.first_name),t=(0,r.Z)(e,2),s=t[0],a=t[1],p=(0,u.useState)(h.Q.me.last_name),j=(0,r.Z)(p,2),f=j[0],g=j[1],Z=(0,u.useState)(h.Q.me.email),v=(0,r.Z)(Z,2),b=v[0],y=v[1],w=(0,u.useState)(""),k=(0,r.Z)(w,2),_=k[0],S=k[1],N=(0,u.useState)(""),z=(0,r.Z)(N,2),C=z[0],D=z[1],L=(0,u.useState)(h.Q.options.z_width),I=(0,r.Z)(L,2),B=I[0],E=I[1],Q=(0,u.useState)(h.Q.options.action_key),A=(0,r.Z)(Q,2),F=A[0],W=A[1],T=[(0,x.jsxs)(l.Z,{className:"mb-2",children:[(0,x.jsx)(c.Z,{xs:2,children:"Breite der Zettel:"}),(0,x.jsx)(c.Z,{children:(0,x.jsx)(o.Z.Range,{min:"400",max:"600",size:"sm",value:B,onChange:function(e){h.Q.setOptions("z_width",e.target.value),h.Q.setOptions("z_height",.7*parseInt(e.target.value)),E(e.target.value)}})})]},1)];return(0,x.jsxs)(d.Z,{style:{padding:"0 10% 0 10%"},children:[(0,x.jsx)(l.Z,{children:(0,x.jsx)(c.Z,{children:(0,x.jsx)("h3",{children:"Pers\xf6nliche Daten"})})}),(0,x.jsxs)(l.Z,{className:"mb-2",children:[(0,x.jsx)(c.Z,{xs:2,children:"Vorname:"}),(0,x.jsx)(c.Z,{children:(0,x.jsx)(o.Z.Control,{type:"text",size:"sm",value:s,onChange:function(e){a(e.target.value)}})})]}),(0,x.jsxs)(l.Z,{className:"mb-2",children:[(0,x.jsx)(c.Z,{xs:2,children:"Nachname:"}),(0,x.jsx)(c.Z,{children:(0,x.jsx)(o.Z.Control,{type:"text",size:"sm",value:f,onChange:function(e){g(e.target.value)}})})]}),(0,x.jsxs)(l.Z,{className:"mb-4",children:[(0,x.jsx)(c.Z,{xs:2,children:"Email-Adresse:"}),(0,x.jsx)(c.Z,{children:(0,x.jsx)(o.Z.Control,{type:"text",size:"sm",value:b,onChange:function(e){y(e.target.value)}})})]}),(0,x.jsxs)(l.Z,{className:"mb-4",children:[(0,x.jsx)(c.Z,{xs:2}),(0,x.jsx)(c.Z,{children:(0,x.jsx)(m.YG,{value:"speichern",onClick:(0,n.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.Q.user.save({id:h.Q.me.id,first_name:s,last_name:f,email:b});case 2:return e.next=4,h.Q.getUser();case 4:return t=e.sent,h.Q.me=t,e.abrupt("return",{status:1});case 7:case"end":return e.stop()}}),e)})))})})]}),(0,x.jsx)(l.Z,{children:(0,x.jsx)(c.Z,{children:(0,x.jsx)("h3",{children:"Passwort"})})}),(0,x.jsxs)(l.Z,{className:"mb-2",children:[(0,x.jsx)(c.Z,{xs:2,children:"altes Passwort:"}),(0,x.jsx)(c.Z,{children:(0,x.jsx)(o.Z.Control,{type:"password",size:"sm",value:_,onChange:function(e){S(e.target.value)}})})]}),(0,x.jsxs)(l.Z,{className:"mb-4",children:[(0,x.jsx)(c.Z,{xs:2,children:"neues Passwort:"}),(0,x.jsx)(c.Z,{children:(0,x.jsx)(o.Z.Control,{type:"password",size:"sm",value:C,onChange:function(e){D(e.target.value)}})})]}),(0,x.jsxs)(l.Z,{className:"mb-4",children:[(0,x.jsx)(c.Z,{xs:2}),(0,x.jsx)(c.Z,{children:(0,x.jsx)(m.YG,{value:"speichern",onClick:(0,n.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.Q.user.save({id:h.Q.me.id,old_password:_,new_password:C});case 2:return e.abrupt("return",{status:1});case 3:case"end":return e.stop()}}),e)})))})})]}),(0,x.jsx)(l.Z,{children:(0,x.jsx)(c.Z,{children:(0,x.jsx)("h3",{children:"Darstellung und Benutzung"})})}),(0,x.jsxs)(l.Z,{className:"mb-4",children:[(0,x.jsx)(c.Z,{xs:4,children:"Funktionstaste f\xfcr Tastenk\xfcrzel"}),(0,x.jsxs)(c.Z,{children:[(0,x.jsxs)(o.Z.Select,{size:"sm",value:F,onChange:function(e){h.Q.setOptions("action_key",e.target.value),W(e.target.value)},children:[(0,x.jsx)("option",{value:"alt",children:"Alt"}),(0,x.jsx)("option",{value:"ctrl",children:"Strg"}),(0,x.jsx)("option",{value:"cmd",children:"Befehlstaste"})]}),(0,x.jsxs)("small",{children:["Eine Liste mit Tastenk\xfcrzeln finden Sie ",(0,x.jsx)("a",{className:"text-primary",href:"https://gitlab.lrz.de/haeberlin/dmlw/-/wikis/06-Argos#tastenk\xfcrzel",target:"_blank",children:"hier"}),"."]})]})]}),T]})}}}]);
//# sourceMappingURL=828.7dc3c49c.chunk.js.map